import{d as ve,c as W,o as T,k as wt,a as x,l as an,r as O,b as fe,m as lt,n as on,p as Re,q as sn,s as ln,v as nt,e as i,u as o,N as st,w as u,i as ut,j as V,f as pe,t as D,x as he,y as gt,z as ye,A as Xe,C as jt,F as Ye,D as Ke,E as we,g as Be,B as ae,G as un,H as et,I as Ht,J as Vt,K as ct,L as cn,M as ot,O as At,P as dn,Q as rt,R as kt,S as Se,T as ze,U as Oe,V as yt,W as fn,X as Gt,Y as Xt,Z as dt,_ as ht,$ as tt,a0 as vn,a1 as pn,a2 as hn,a3 as mn,a4 as gn,a5 as Me,a6 as yn,a7 as xn,a8 as wn,a9 as kn,aa as Ft,h as bn}from"./index-CdE6PqVf.js";import{g as Sn,a as Wt,s as Ue,u as Ze,t as bt,_ as Ne,c as Et,R as xt,b as _n,L as Tt,S as Ut,d as Cn,D as $n,e as Pn}from"./i18n-BZGMgoUl.js";const An={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Dt=ve({name:"AppsOutline",render:function(c,d){return T(),W("svg",An,d[0]||(d[0]=[wt('<rect x="64" y="64" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="216" y="64" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="368" y="64" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="64" y="216" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="216" y="216" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="368" y="216" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="64" y="368" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="216" y="368" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="368" y="368" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect>',9)]))}}),Fn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Mt=ve({name:"ArrowBackOutline",render:function(c,d){return T(),W("svg",Fn,d[0]||(d[0]=[x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M244 400L100 256l144-144"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M120 256h292"},null,-1)]))}}),En={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Tn=ve({name:"ArrowDownOutline",render:function(c,d){return T(),W("svg",En,d[0]||(d[0]=[x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M112 268l144 144l144-144"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M256 392V100"},null,-1)]))}}),Un={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Yt=ve({name:"ArrowForwardOutline",render:function(c,d){return T(),W("svg",Un,d[0]||(d[0]=[x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M268 112l144 144l-144 144"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M392 256H100"},null,-1)]))}}),Dn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Mn=ve({name:"ArrowUpOutline",render:function(c,d){return T(),W("svg",Dn,d[0]||(d[0]=[x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M112 244l144-144l144 144"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M256 120v292"},null,-1)]))}}),Rn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Bn=ve({name:"CheckmarkDoneOutline",render:function(c,d){return T(),W("svg",Rn,d[0]||(d[0]=[x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M464 128L240 384l-96-96"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M144 384l-96-96"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 128L232 284"},null,-1)]))}}),In={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},On=ve({name:"CloseOutline",render:function(c,d){return T(),W("svg",In,d[0]||(d[0]=[x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 368L144 144"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 144L144 368"},null,-1)]))}}),Ln={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Rt=ve({name:"CopyOutline",render:function(c,d){return T(),W("svg",Ln,d[0]||(d[0]=[x("rect",{x:"128",y:"128",width:"336",height:"336",rx:"57",ry:"57",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("path",{d:"M383.5 128l.5-24a56.16 56.16 0 0 0-56-56H112a64.19 64.19 0 0 0-64 64v216a56.16 56.16 0 0 0 56 56h24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),zn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Jt=ve({name:"CreateOutline",render:function(c,d){return T(),W("svg",zn,d[0]||(d[0]=[x("path",{d:"M384 224v184a40 40 0 0 1-40 40H104a40 40 0 0 1-40-40V168a40 40 0 0 1 40-40h167.48",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("path",{d:"M459.94 53.25a16.06 16.06 0 0 0-23.22-.56L424.35 65a8 8 0 0 0 0 11.31l11.34 11.32a8 8 0 0 0 11.34 0l12.06-12c6.1-6.09 6.67-16.01.85-22.38z",fill:"currentColor"},null,-1),x("path",{d:"M399.34 90L218.82 270.2a9 9 0 0 0-2.31 3.93L208.16 299a3.91 3.91 0 0 0 4.86 4.86l24.85-8.35a9 9 0 0 0 3.93-2.31L422 112.66a9 9 0 0 0 0-12.66l-9.95-10a9 9 0 0 0-12.71 0z",fill:"currentColor"},null,-1)]))}}),Nn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},jn=ve({name:"DocumentOutline",render:function(c,d){return T(),W("svg",Nn,d[0]||(d[0]=[x("path",{d:"M416 221.25V416a48 48 0 0 1-48 48H144a48 48 0 0 1-48-48V96a48 48 0 0 1 48-48h98.75a32 32 0 0 1 22.62 9.37l141.26 141.26a32 32 0 0 1 9.37 22.62z",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("path",{d:"M256 56v120a32 32 0 0 0 32 32h120",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),Hn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Vn=ve({name:"DownloadOutline",render:function(c,d){return T(),W("svg",Hn,d[0]||(d[0]=[x("path",{d:"M336 176h40a40 40 0 0 1 40 40v208a40 40 0 0 1-40 40H136a40 40 0 0 1-40-40V216a40 40 0 0 1 40-40h40",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M176 272l80 80l80-80"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 48v288"},null,-1)]))}}),Gn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Xn=ve({name:"EyeOutline",render:function(c,d){return T(),W("svg",Gn,d[0]||(d[0]=[x("path",{d:"M255.66 112c-77.94 0-157.89 45.11-220.83 135.33a16 16 0 0 0-.27 17.77C82.92 340.8 161.8 400 255.66 400c92.84 0 173.34-59.38 221.79-135.25a16.14 16.14 0 0 0 0-17.47C428.89 172.28 347.8 112 255.66 112z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("circle",{cx:"256",cy:"256",r:"80",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1)]))}}),Wn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Yn=ve({name:"FingerPrintOutline",render:function(c,d){return T(),W("svg",Wn,d[0]||(d[0]=[x("path",{d:"M390.42 75.28a10.45 10.45 0 0 1-5.32-1.44C340.72 50.08 302.35 40 256.35 40c-45.77 0-89.23 11.28-128.76 33.84C122 77 115.11 74.8 111.87 69a12.4 12.4 0 0 1 4.63-16.32A281.81 281.81 0 0 1 256.35 16c49.23 0 92.23 11.28 139.39 36.48a12 12 0 0 1 4.85 16.08a11.3 11.3 0 0 1-10.17 6.72zm-330.79 126a11.73 11.73 0 0 1-6.7-2.16a12.26 12.26 0 0 1-2.78-16.8c22.89-33.6 52-60 86.69-78.48c72.58-38.84 165.51-39.12 238.32-.24c34.68 18.48 63.8 44.64 86.69 78a12.29 12.29 0 0 1-2.78 16.8a11.26 11.26 0 0 1-16.18-2.88c-20.8-30.24-47.15-54-78.36-70.56c-66.34-35.28-151.18-35.28-217.29.24c-31.44 16.8-57.79 40.8-78.59 71a10 10 0 0 1-9.02 5.08zM204.1 491a10.66 10.66 0 0 1-8.09-3.6C175.9 466.48 165 453 149.55 424c-16-29.52-24.27-65.52-24.27-104.16c0-71.28 58.71-129.36 130.84-129.36S387 248.56 387 319.84a11.56 11.56 0 1 1-23.11 0c0-58.08-48.32-105.36-107.72-105.36S148.4 261.76 148.4 319.84c0 34.56 7.39 66.48 21.49 92.4c14.8 27.6 25 39.36 42.77 58.08a12.67 12.67 0 0 1 0 17a12.44 12.44 0 0 1-8.56 3.68zm165.75-44.4c-27.51 0-51.78-7.2-71.66-21.36a129.1 129.1 0 0 1-55-105.36a11.57 11.57 0 1 1 23.12 0a104.28 104.28 0 0 0 44.84 85.44c16.41 11.52 35.6 17 58.72 17a147.41 147.41 0 0 0 24-2.4c6.24-1.2 12.25 3.12 13.4 9.84a11.92 11.92 0 0 1-9.47 13.92a152.28 152.28 0 0 1-27.95 2.88zM323.38 496a13 13 0 0 1-3-.48c-36.76-10.56-60.8-24.72-86-50.4c-32.37-33.36-50.16-77.76-50.16-125.28c0-38.88 31.9-70.56 71.19-70.56s71.2 31.68 71.2 70.56c0 25.68 21.5 46.56 48.08 46.56s48.08-20.88 48.08-46.56c0-90.48-75.13-163.92-167.59-163.92c-65.65 0-125.75 37.92-152.79 96.72c-9 19.44-13.64 42.24-13.64 67.2c0 18.72 1.61 48.24 15.48 86.64c2.32 6.24-.69 13.2-6.7 15.36a11.34 11.34 0 0 1-14.79-7a276.39 276.39 0 0 1-16.88-95c0-28.8 5.32-55 15.72-77.76c30.75-67 98.94-110.4 173.6-110.4c105.18 0 190.71 84.24 190.71 187.92c0 38.88-31.9 70.56-71.2 70.56s-71.2-31.68-71.2-70.56c.01-25.68-21.49-46.6-48.07-46.6s-48.08 20.88-48.08 46.56c0 41 15.26 79.44 43.23 108.24c22 22.56 43 35 75.59 44.4c6.24 1.68 9.71 8.4 8.09 14.64a11.39 11.39 0 0 1-10.87 9.16z",fill:"currentColor"},null,-1)]))}}),Jn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},qn=ve({name:"FolderOutline",render:function(c,d){return T(),W("svg",Jn,d[0]||(d[0]=[x("path",{d:"M440 432H72a40 40 0 0 1-40-40V120a40 40 0 0 1 40-40h75.89a40 40 0 0 1 22.19 6.72l27.84 18.56a40 40 0 0 0 22.19 6.72H440a40 40 0 0 1 40 40v240a40 40 0 0 1-40 40z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M32 192h448"},null,-1)]))}}),Kn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Zn=ve({name:"HomeOutline",render:function(c,d){return T(),W("svg",Kn,d[0]||(d[0]=[x("path",{d:"M80 212v236a16 16 0 0 0 16 16h96V328a24 24 0 0 1 24-24h80a24 24 0 0 1 24 24v136h96a16 16 0 0 0 16-16V212",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("path",{d:"M480 256L266.89 52c-5-5.28-16.69-5.34-21.78 0L32 256",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M400 179V64h-48v69"},null,-1)]))}}),Qn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},er=ve({name:"MoonOutline",render:function(c,d){return T(),W("svg",Qn,d[0]||(d[0]=[x("path",{d:"M160 136c0-30.62 4.51-61.61 16-88C99.57 81.27 48 159.32 48 248c0 119.29 96.71 216 216 216c88.68 0 166.73-51.57 200-128c-26.39 11.49-57.38 16-88 16c-119.29 0-216-96.71-216-216z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),tr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},nr=ve({name:"PauseOutline",render:function(c,d){return T(),W("svg",tr,d[0]||(d[0]=[x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M176 96h16v320h-16z"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M320 96h16v320h-16z"},null,-1)]))}}),rr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ar=ve({name:"PlayCircleOutline",render:function(c,d){return T(),W("svg",rr,d[0]||(d[0]=[x("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),x("path",{d:"M216.32 334.44l114.45-69.14a10.89 10.89 0 0 0 0-18.6l-114.45-69.14a10.78 10.78 0 0 0-16.32 9.31v138.26a10.78 10.78 0 0 0 16.32 9.31z",fill:"currentColor"},null,-1)]))}}),or={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},sr=ve({name:"PlayOutline",render:function(c,d){return T(),W("svg",or,d[0]||(d[0]=[x("path",{d:"M112 111v290c0 17.44 17 28.52 31 20.16l247.9-148.37c12.12-7.25 12.12-26.33 0-33.58L143 90.84c-14-8.36-31 2.72-31 20.16z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1)]))}}),ir={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},lr=ve({name:"PlaySkipForwardOutline",render:function(c,d){return T(),W("svg",ir,d[0]||(d[0]=[x("path",{d:"M112 111v290c0 17.44 17 28.52 31 20.16l247.9-148.37c12.12-7.25 12.12-26.33 0-33.58L143 90.84c-14-8.36-31 2.72-31 20.16z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32",d:"M400 80v352"},null,-1)]))}}),ur={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},cr=ve({name:"PowerOutline",render:function(c,d){return T(),W("svg",ur,d[0]||(d[0]=[x("path",{d:"M378 108a191.41 191.41 0 0 1 70 148c0 106-86 192-192 192S64 362 64 256a192 192 0 0 1 69-148",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 64v192"},null,-1)]))}}),dr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},St=ve({name:"RefreshOutline",render:function(c,d){return T(),W("svg",dr,d[0]||(d[0]=[x("path",{d:"M320 146s24.36-12-64-12a160 160 0 1 0 160 160",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 58l80 80l-80 80"},null,-1)]))}}),fr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},vr=ve({name:"SaveOutline",render:function(c,d){return T(),W("svg",fr,d[0]||(d[0]=[x("path",{d:"M380.93 57.37A32 32 0 0 0 358.3 48H94.22A46.21 46.21 0 0 0 48 94.22v323.56A46.21 46.21 0 0 0 94.22 464h323.56A46.36 46.36 0 0 0 464 417.78V153.7a32 32 0 0 0-9.37-22.63zM256 416a64 64 0 1 1 64-64a63.92 63.92 0 0 1-64 64zm48-224H112a16 16 0 0 1-16-16v-64a16 16 0 0 1 16-16h192a16 16 0 0 1 16 16v64a16 16 0 0 1-16 16z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),pr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},hr=ve({name:"SearchOutline",render:function(c,d){return T(),W("svg",pr,d[0]||(d[0]=[x("path",{d:"M221.09 64a157.09 157.09 0 1 0 157.09 157.09A157.1 157.1 0 0 0 221.09 64z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32",d:"M338.29 338.29L448 448"},null,-1)]))}}),mr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},gr=ve({name:"SendOutline",render:function(c,d){return T(),W("svg",mr,d[0]||(d[0]=[x("path",{d:"M470.3 271.15L43.16 447.31a7.83 7.83 0 0 1-11.16-7V327a8 8 0 0 1 6.51-7.86l247.62-47c17.36-3.29 17.36-28.15 0-31.44l-247.63-47a8 8 0 0 1-6.5-7.85V72.59c0-5.74 5.88-10.26 11.16-8L470.3 241.76a16 16 0 0 1 0 29.39z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),yr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},xr=ve({name:"SettingsOutline",render:function(c,d){return T(),W("svg",yr,d[0]||(d[0]=[x("path",{d:"M262.29 192.31a64 64 0 1 0 57.4 57.4a64.13 64.13 0 0 0-57.4-57.4zM416.39 256a154.34 154.34 0 0 1-1.53 20.79l45.21 35.46a10.81 10.81 0 0 1 2.45 13.75l-42.77 74a10.81 10.81 0 0 1-13.14 4.59l-44.9-18.08a16.11 16.11 0 0 0-15.17 1.75A164.48 164.48 0 0 1 325 400.8a15.94 15.94 0 0 0-8.82 12.14l-6.73 47.89a11.08 11.08 0 0 1-10.68 9.17h-85.54a11.11 11.11 0 0 1-10.69-8.87l-6.72-47.82a16.07 16.07 0 0 0-9-12.22a155.3 155.3 0 0 1-21.46-12.57a16 16 0 0 0-15.11-1.71l-44.89 18.07a10.81 10.81 0 0 1-13.14-4.58l-42.77-74a10.8 10.8 0 0 1 2.45-13.75l38.21-30a16.05 16.05 0 0 0 6-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 0 0-6.07-13.94l-38.19-30A10.81 10.81 0 0 1 49.48 186l42.77-74a10.81 10.81 0 0 1 13.14-4.59l44.9 18.08a16.11 16.11 0 0 0 15.17-1.75A164.48 164.48 0 0 1 187 111.2a15.94 15.94 0 0 0 8.82-12.14l6.73-47.89A11.08 11.08 0 0 1 213.23 42h85.54a11.11 11.11 0 0 1 10.69 8.87l6.72 47.82a16.07 16.07 0 0 0 9 12.22a155.3 155.3 0 0 1 21.46 12.57a16 16 0 0 0 15.11 1.71l44.89-18.07a10.81 10.81 0 0 1 13.14 4.58l42.77 74a10.8 10.8 0 0 1-2.45 13.75l-38.21 30a16.05 16.05 0 0 0-6.05 14.08c.33 4.14.55 8.3.55 12.47z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),wr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},_t=ve({name:"StopCircleOutline",render:function(c,d){return T(),W("svg",wr,d[0]||(d[0]=[x("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),x("path",{d:"M310.4 336H201.6a25.62 25.62 0 0 1-25.6-25.6V201.6a25.62 25.62 0 0 1 25.6-25.6h108.8a25.62 25.62 0 0 1 25.6 25.6v108.8a25.62 25.62 0 0 1-25.6 25.6z",fill:"currentColor"},null,-1)]))}}),kr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ct=ve({name:"TrashOutline",render:function(c,d){return T(),W("svg",kr,d[0]||(d[0]=[wt('<path d="M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M80 112h352" fill="currentColor"></path><path d="M192 112V72h0a23.93 23.93 0 0 1 24-24h80a23.93 23.93 0 0 1 24 24h0v40" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M256 176v224"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M184 176l8 224"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M328 176l-8 224"></path>',6)]))}}),br={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Sr=ve({name:"VolumeHighOutline",render:function(c,d){return T(),W("svg",br,d[0]||(d[0]=[x("path",{d:"M126 192H56a8 8 0 0 0-8 8v112a8 8 0 0 0 8 8h69.65a15.93 15.93 0 0 1 10.14 3.54l91.47 74.89A8 8 0 0 0 240 392V120a8 8 0 0 0-12.74-6.43l-91.47 74.89A15 15 0 0 1 126 192z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("path",{d:"M320 320c9.74-19.38 16-40.84 16-64c0-23.48-6-44.42-16-64",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("path",{d:"M368 368c19.48-33.92 32-64.06 32-112s-12-77.74-32-112",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("path",{d:"M416 416c30-46 48-91.43 48-160s-18-113-48-160",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),_r={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Cr=ve({name:"VolumeLowOutline",render:function(c,d){return T(),W("svg",_r,d[0]||(d[0]=[x("path",{d:"M189.65 192H120a8 8 0 0 0-8 8v112a8 8 0 0 0 8 8h69.65a16 16 0 0 1 10.14 3.63l91.47 75a8 8 0 0 0 12.74-6.46V119.83a8 8 0 0 0-12.74-6.44l-91.47 75a16 16 0 0 1-10.14 3.61z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("path",{d:"M384 320c9.74-19.41 16-40.81 16-64c0-23.51-6-44.4-16-64",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),$r={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Pr=ve({name:"VolumeMuteOutline",render:function(c,d){return T(),W("svg",$r,d[0]||(d[0]=[wt('<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M416 432L64 80"></path><path d="M224 136.92v33.8a4 4 0 0 0 1.17 2.82l24 24a4 4 0 0 0 6.83-2.82v-74.15a24.53 24.53 0 0 0-12.67-21.72a23.91 23.91 0 0 0-25.55 1.83a8.27 8.27 0 0 0-.66.51l-31.94 26.15a4 4 0 0 0-.29 5.92l17.05 17.06a4 4 0 0 0 5.37.26z" fill="currentColor"></path><path d="M224 375.08l-78.07-63.92a32 32 0 0 0-20.28-7.16H64v-96h50.72a4 4 0 0 0 2.82-6.83l-24-24a4 4 0 0 0-2.82-1.17H56a24 24 0 0 0-24 24v112a24 24 0 0 0 24 24h69.76l91.36 74.8a8.27 8.27 0 0 0 .66.51a23.93 23.93 0 0 0 25.85 1.69A24.49 24.49 0 0 0 256 391.45v-50.17a4 4 0 0 0-1.17-2.82l-24-24a4 4 0 0 0-6.83 2.82zM125.82 336z" fill="currentColor"></path><path d="M352 256c0-24.56-5.81-47.88-17.75-71.27a16 16 0 0 0-28.5 14.54C315.34 218.06 320 236.62 320 256q0 4-.31 8.13a8 8 0 0 0 2.32 6.25l19.66 19.67a4 4 0 0 0 6.75-2A146.89 146.89 0 0 0 352 256z" fill="currentColor"></path><path d="M416 256c0-51.19-13.08-83.89-34.18-120.06a16 16 0 0 0-27.64 16.12C373.07 184.44 384 211.83 384 256c0 23.83-3.29 42.88-9.37 60.65a8 8 0 0 0 1.9 8.26l16.77 16.76a4 4 0 0 0 6.52-1.27C410.09 315.88 416 289.91 416 256z" fill="currentColor"></path><path d="M480 256c0-74.26-20.19-121.11-50.51-168.61a16 16 0 1 0-27 17.22C429.82 147.38 448 189.5 448 256c0 47.45-8.9 82.12-23.59 113a4 4 0 0 0 .77 4.55L443 391.39a4 4 0 0 0 6.4-1C470.88 348.22 480 307 480 256z" fill="currentColor"></path>',6)]))}});function Ar(a,c){const d=[];let p=a;for(;p;){const g=Fr(p,c);d.unshift(g),p=qt(p,c)}return"/"+d.join("/")}function Fr(a,c){if(a.resource_id)return`*[@resource-id="${a.resource_id}"]`;if(a.text&&a.text.trim())return`*[@text="${a.text}"]`;if(a.label&&a.label.trim())return`*[@label="${a.label}"]`;const d=a.class_name||"*",p=qt(a,c);if(p){const g=p.children?.filter(h=>h.class_name===a.class_name)||[];if(g.length>1){const h=g.findIndex(A=>A.key===a.key);return`${d}[${h+1}]`}}return d}function qt(a,c){for(const d of c)if(d.children?.some(p=>p.key===a.key))return d}function Er(a){const c=[];function d(p){c.push(p),p.children?.forEach(d)}return a.forEach(d),c}const ft=an("device",()=>{const a=O("android"),c=O(""),d=O(null),p=O(null),g=O(null),h=O(!1),A=O(null),$=O(0),S=fe(()=>d.value?{width:d.value.width,height:d.value.height}:{width:0,height:0}),E=fe(()=>c.value?($.value,Sn(a.value,c.value)):"");function y(k,C){a.value=k,c.value=C,d.value=null,p.value=null,A.value=null}async function _(){if(c.value){h.value=!0,A.value=null;try{d.value=await Wt(a.value,c.value),$.value++}catch(k){A.value=k instanceof Error?k.message:String(k)}finally{h.value=!1}}}function U(k){if(k&&d.value){const C=Er(d.value.nodes);k.xpath=Ar(k,C)}p.value=k}function z(){$.value++}function M(k){g.value=k}function R(k){k.hierarchy&&(d.value=k.hierarchy),k.screenshot&&$.value++}return{platform:a,serial:c,hierarchy:d,selectedNode:p,hoveredNode:g,loading:h,error:A,screenSize:S,screenshotUrl:E,setDevice:y,refreshHierarchy:_,selectNode:U,refreshScreenshot:z,setHoveredNode:M,updateFromRemote:R}});class vt{name;style;constructor(c,d){this.name=c,this.style=d}}class Tr extends vt{x;y;width;height;constructor(c,d,p,g,h){super("rect",h),this.x=c,this.y=d,this.width=p,this.height=g}draw(c){c.beginPath(),c.rect(this.x,this.y,this.width,this.height),this.style==="select"?(c.fillStyle="rgba(255, 255, 0, 0.3)",c.strokeStyle="#FFD700",c.lineWidth=3):this.style==="hover"&&(c.fillStyle="rgba(0, 150, 255, 0.2)",c.strokeStyle="#0096FF",c.lineWidth=2),c.fill(),c.stroke()}}class Ur extends vt{x;y;canvasWidth;canvasHeight;constructor(c,d,p,g){super("crosshair","crosshair"),this.x=c,this.y=d,this.canvasWidth=p,this.canvasHeight=g}draw(c){c.beginPath(),c.strokeStyle="#FF0000",c.lineWidth=1,c.setLineDash([5,5]),c.moveTo(0,this.y),c.lineTo(this.canvasWidth,this.y),c.moveTo(this.x,0),c.lineTo(this.x,this.canvasHeight),c.stroke(),c.setLineDash([])}}class Dr extends vt{points;constructor(c){super("track","hover"),this.points=c}draw(c){if(this.points.length<2)return;c.beginPath(),c.strokeStyle="rgba(0, 150, 255, 0.8)",c.lineWidth=3,c.lineCap="round",c.lineJoin="round";const d=this.points[0];d&&c.moveTo(d.x,d.y);for(let p=1;p<this.points.length;p++){const g=this.points[p];g&&c.lineTo(g.x,g.y)}c.stroke()}}class Mr extends vt{x;y;width;height;constructor(c,d,p,g){super("crop","crop"),this.x=c,this.y=d,this.width=p,this.height=g}draw(c){c.fillStyle="rgba(0, 120, 215, 0.2)",c.fillRect(this.x,this.y,this.width,this.height),c.strokeStyle="#ffffff",c.lineWidth=2,c.setLineDash([5,5]),c.strokeRect(this.x,this.y,this.width,this.height),c.setLineDash([]),c.fillStyle="#ffffff",c.font="14px monospace",c.shadowColor="rgba(0, 0, 0, 0.8)",c.shadowBlur=4,c.fillText(`${Math.round(this.width)} Ã— ${Math.round(this.height)}`,this.x+5,this.y+20),c.shadowBlur=0}}function Rr(){const a=O(null),c=fe(()=>a.value?.getContext("2d")||null),d=O([]);function p(U){return U.every(z=>Number.isFinite(z)&&z>=0&&z<=1)}function g(){if(!c.value||!a.value)return;const U=a.value;c.value.clearRect(0,0,U.width,U.height),d.value.forEach(z=>{c.value&&z.draw(c.value)})}function h(U,z){if(!a.value)return;const[M,R,k,C]=U,F=a.value.width,L=a.value.height,G=p(U),J=G?M*F:M,ce=G?R*L:R,xe=G?k*F:k,H=G?C*L:C,I=Math.min(J,xe),X=Math.min(ce,H),j=Math.abs(xe-J),N=Math.abs(H-ce);d.value.push(new Tr(I,X,j,N,z)),g()}function A(U,z){a.value&&(d.value.push(new Ur(U,z,a.value.width,a.value.height)),g())}function $(U){d.value.push(new Dr(U)),g()}function S(){d.value=[],g()}function E(U){d.value=d.value.filter(z=>z.style!==U),g()}function y(U,z,M,R){d.value.push(new Mr(U,z,M,R)),g()}function _(U,z){a.value&&(a.value.width=U,a.value.height=z,g())}return{canvasRef:a,addRect:h,addCrosshair:A,addTrack:$,addCropRect:y,clearShapes:S,clearShapesByType:E,resizeCanvas:_,redraw:g}}function Br(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function Ir(a){if(Object.prototype.hasOwnProperty.call(a,"__esModule"))return a;var c=a.default;if(typeof c=="function"){var d=function p(){var g=!1;try{g=this instanceof p}catch{}return g?Reflect.construct(c,arguments,this.constructor):c.apply(this,arguments)};d.prototype=c.prototype}else d={};return Object.defineProperty(d,"__esModule",{value:!0}),Object.keys(a).forEach(function(p){var g=Object.getOwnPropertyDescriptor(a,p);Object.defineProperty(d,p,g.get?g:{enumerable:!0,get:function(){return a[p]}})}),d}var it={exports:{}};const Or={},Lr=Object.freeze(Object.defineProperty({__proto__:null,default:Or},Symbol.toStringTag,{value:"Module"})),zr=Ir(Lr);var Nr=it.exports,Bt;function jr(){return Bt||(Bt=1,(function(a,c){(function(d,p){a.exports=p(zr)})(Nr,(function(d){function p(n,s){(s==null||s>n.length)&&(s=n.length);for(var e=0,t=Array(s);e<s;e++)t[e]=n[e];return t}function g(n){if(Array.isArray(n))return n}function h(n){if(Array.isArray(n))return p(n)}function A(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function $(n,s){if(!(n instanceof s))throw new TypeError("Cannot call a class as a function")}function S(n,s){for(var e=0;e<s.length;e++){var t=s[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,I(t.key),t)}}function E(n,s,e){return s&&S(n.prototype,s),e&&S(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function y(n,s){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=j(n))||s){e&&(n=e);var t=0,r=function(){};return{s:r,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(b){throw b},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,f=!0,m=!1;return{s:function(){e=e.call(n)},n:function(){var b=e.next();return f=b.done,b},e:function(b){m=!0,l=b},f:function(){try{f||e.return==null||e.return()}finally{if(m)throw l}}}}function _(n){var s=R();return function(){var e,t=z(n);if(s){var r=z(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return G(this,e)}}function U(n,s,e){return(s=I(s))in n?Object.defineProperty(n,s,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[s]=e,n}function z(n){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},z(n)}function M(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(s&&s.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),s&&J(n,s)}function R(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R=function(){return!!n})()}function k(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function C(n,s){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var t,r,l,f,m=[],b=!0,P=!1;try{if(l=(e=e.call(n)).next,s!==0)for(;!(b=(t=l.call(e)).done)&&(m.push(t.value),m.length!==s);b=!0);}catch(Y){P=!0,r=Y}finally{try{if(!b&&e.return!=null&&(f=e.return(),Object(f)!==f))return}finally{if(P)throw r}}return m}}function F(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G(n,s){if(s&&(typeof s=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A(n)}function J(n,s){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},J(n,s)}function ce(n,s){return g(n)||C(n,s)||j(n,s)||F()}function xe(n){return h(n)||k(n)||j(n)||L()}function H(n,s){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var t=e.call(n,s);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function I(n){var s=H(n,"string");return typeof s=="symbol"?s:s+""}function X(n){"@babel/helpers - typeof";return X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},X(n)}function j(n,s){if(n){if(typeof n=="string")return p(n,s);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?p(n,s):void 0}}var N,q;function ie(n,s){N=n,q=s}function le(n){if(N){for(var s=arguments.length,e=new Array(s>1?s-1:0),t=1;t<s;t++)e[t-1]=arguments[t];N.apply(void 0,[n].concat(e))}}function Z(n){if(q){for(var s=arguments.length,e=new Array(s>1?s-1:0),t=1;t<s;t++)e[t-1]=arguments[t];q.apply(void 0,[n].concat(e))}}var ke=(function(){function n(s){$(this,n),this.listener={},this.type=s|""}return E(n,[{key:"on",value:function(e,t){return this.listener[e]||(this.listener[e]=[]),this.listener[e].push(t),!0}},{key:"off",value:function(e,t){if(this.listener[e]){var r=this.listener[e].indexOf(t);return r>-1&&this.listener[e].splice(r,1),!0}return!1}},{key:"offAll",value:function(){this.listener={}}},{key:"dispatch",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),l=1;l<t;l++)r[l-1]=arguments[l];return this.listener[e]?(this.listener[e].map(function(f){f.apply(null,r)}),!0):!1}}]),n})(),B=(function(){function n(){$(this,n)}return E(n,null,[{key:"init",value:function(){n.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],hev1:[],hvcC:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var e;for(e in n.types)n.types.hasOwnProperty(e)&&(n.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);n.HDLR_TYPES={video:t,audio:r};var l=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),f=new Uint8Array([0,0,0,0,0,0,0,0]);n.STTS=n.STSC=n.STCO=f,n.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),n.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),n.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),n.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var m=new Uint8Array([105,115,111,109]),b=new Uint8Array([97,118,99,49]),P=new Uint8Array([0,0,0,1]);n.FTYP=n.box(n.types.ftyp,m,P,m,b),n.DINF=n.box(n.types.dinf,n.box(n.types.dref,l))}},{key:"box",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),l=1;l<t;l++)r[l-1]=arguments[l];for(var f=8,m=r.length,b=m,P;m--;)f+=r[m].byteLength;for(P=new Uint8Array(f),P[0]=f>>24&255,P[1]=f>>16&255,P[2]=f>>8&255,P[3]=f&255,P.set(e,4),m=0,f=8;m<b;++m)P.set(r[m],f),f+=r[m].byteLength;return P}},{key:"hdlr",value:function(e){return n.box(n.types.hdlr,n.HDLR_TYPES[e])}},{key:"mdat",value:function(e){return n.box(n.types.mdat,e)}},{key:"mdhd",value:function(e,t){return n.box(n.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255,85,196,0,0]))}},{key:"mdia",value:function(e){return n.box(n.types.mdia,n.mdhd(e.timescale,e.duration),n.hdlr(e.type),n.minf(e))}},{key:"mfhd",value:function(e){return n.box(n.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}},{key:"minf",value:function(e){return e.type==="audio"?n.box(n.types.minf,n.box(n.types.smhd,n.SMHD),n.DINF,n.stbl(e)):n.box(n.types.minf,n.box(n.types.vmhd,n.VMHD),n.DINF,n.stbl(e))}},{key:"moof",value:function(e,t,r){return n.box(n.types.moof,n.mfhd(e),n.traf(r,t))}},{key:"moov",value:function(e,t,r){for(var l=e.length,f=[];l--;)f[l]=n.trak(e[l]);return n.box.apply(null,[n.types.moov,n.mvhd(r,t)].concat(f).concat(n.mvex(e)))}},{key:"mvex",value:function(e){for(var t=e.length,r=[];t--;)r[t]=n.trex(e[t]);return n.box.apply(null,[n.types.mvex].concat(r))}},{key:"mvhd",value:function(e,t){var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,e>>24&255,e>>16&255,e>>8&255,e&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return n.box(n.types.mvhd,r)}},{key:"sdtp",value:function(e){var t=e.samples||[],r=new Uint8Array(4+t.length),l,f;for(f=0;f<t.length;f++)l=t[f].flags,r[f+4]=l.dependsOn<<4|l.isDependedOn<<2|l.hasRedundancy;return n.box(n.types.sdtp,r)}},{key:"stbl",value:function(e){return n.box(n.types.stbl,n.stsd(e),n.box(n.types.stts,n.STTS),n.box(n.types.stsc,n.STSC),n.box(n.types.stsz,n.STSZ),n.box(n.types.stco,n.STCO))}},{key:"avc1",value:function(e){var t=[],r=[],l,f,m;for(l=0;l<e.sps.length;l++)f=e.sps[l],m=f.byteLength,t.push(m>>>8&255),t.push(m&255),t=t.concat(Array.prototype.slice.call(f));for(l=0;l<e.pps.length;l++)f=e.pps[l],m=f.byteLength,r.push(m>>>8&255),r.push(m&255),r=r.concat(Array.prototype.slice.call(f));var b=n.box(n.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(r))),P=e.width,Y=e.height;return n.box(n.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,P>>8&255,P&255,Y>>8&255,Y&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,98,105,110,101,108,112,114,111,46,114,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),b,n.box(n.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"hev1",value:function(e){for(var t=[],r=[],l=[],f,m,b=0;b<(((P=e.vps)===null||P===void 0?void 0:P.length)||0);b++){var P;f=e.vps[b],m=f.byteLength,t.push(m>>>8&255,m&255),t=t.concat(Array.prototype.slice.call(f))}for(var Y=0;Y<(((ne=e.sps)===null||ne===void 0?void 0:ne.length)||0);Y++){var ne;f=e.sps[Y],m=f.byteLength,r.push(m>>>8&255,m&255),r=r.concat(Array.prototype.slice.call(f))}for(var re=0;re<(((se=e.pps)===null||se===void 0?void 0:se.length)||0);re++){var se;f=e.pps[re],m=f.byteLength,l.push(m>>>8&255,m&255),l=l.concat(Array.prototype.slice.call(f))}var ge=e.hvcC,Fe=ge.profile_space,Te=ge.tier_flag,Pe=ge.profile_idc,Ae=ge.profile_compatibility_flags,be=ge.constraint_indicator_flags,Ge=ge.level_idc,v=ge.chroma_format_idc,w=n.box(n.types.hvcC,new Uint8Array([1,Fe<<6|Te<<5|Pe,Ae>>24&255,Ae>>16&255,Ae>>8&255,Ae&255].concat(xe(be),[Ge,240,0,252,252|v,248,248,0,0,3,3,32,0,1],xe(t),[33,0,1],xe(r),[34,0,1],xe(l)))),Q=e.width,ee=e.height;return n.box(n.types.hev1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,Q>>8&255,Q&255,ee>>8&255,ee&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,98,105,110,101,108,112,114,111,46,114,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),w,n.box(n.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"esds",value:function(e){var t=e.config.byteLength,r=new Uint8Array(26+t+3);return r.set([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5,t]),r.set(e.config,26),r.set([6,1,2],26+t),r}},{key:"mp4a",value:function(e){var t=e.audiosamplerate;return n.box(n.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,t&255,0,0]),n.box(n.types.esds,n.esds(e)))}},{key:"stsd",value:function(e){return e.type==="audio"?n.box(n.types.stsd,n.STSD,n.mp4a(e)):e.codec.startsWith("hvc1")?n.box(n.types.stsd,n.STSD,n.hev1(e)):n.box(n.types.stsd,n.STSD,n.avc1(e))}},{key:"tkhd",value:function(e){var t=e.id,r=e.duration,l=e.width,f=e.height,m=e.volume;return n.box(n.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,r&255,0,0,0,0,0,0,0,0,0,0,0,0,m>>0&255,m%1*10>>0&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,l>>8&255,l&255,0,0,f>>8&255,f&255,0,0]))}},{key:"traf",value:function(e,t){var r=n.sdtp(e),l=e.id;return n.box(n.types.traf,n.box(n.types.tfhd,new Uint8Array([0,0,0,0,l>>24,l>>16&255,l>>8&255,l&255])),n.box(n.types.tfdt,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255])),n.trun(e,r.length+16+16+8+16+8+8),r)}},{key:"trak",value:function(e){return e.duration=e.duration||4294967295,n.box(n.types.trak,n.tkhd(e),n.mdia(e))}},{key:"trex",value:function(e){var t=e.id;return n.box(n.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(e,t){var r=e.samples||[],l=r.length,f=12+16*l,m=new Uint8Array(f),b,P,Y,ne,re,se;for(t+=8+f,m.set([0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,l&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),b=0;b<l;b++)P=r[b],Y=P.duration,ne=P.size,re=P.flags,se=P.cts,m.set([Y>>>24&255,Y>>>16&255,Y>>>8&255,Y&255,ne>>>24&255,ne>>>16&255,ne>>>8&255,ne&255,re.isLeading<<2|re.dependsOn,re.isDependedOn<<6|re.hasRedundancy<<4|re.paddingValue<<1|re.isNonSync,re.degradPrio&61440,re.degradPrio&15,se>>>24&255,se>>>16&255,se>>>8&255,se&255],12+16*b);return n.box(n.types.trun,m)}},{key:"initSegment",value:function(e,t,r){n.types||n.init();var l=n.moov(e,t,r),f;return f=new Uint8Array(n.FTYP.byteLength+l.byteLength),f.set(n.FTYP),f.set(l,n.FTYP.byteLength),f}}]),n})(),de=(function(){function n(){$(this,n)}return E(n,null,[{key:"samplingRateMap",get:function(){return[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]}},{key:"getHeaderLength",value:function(e){return e[1]&1?7:9}},{key:"getFrameLength",value:function(e){return(e[3]&3)<<11|e[4]<<3|(e[5]&224)>>>5}},{key:"isAACPattern",value:function(e){return e[0]===255&&(e[1]&240)===240&&(e[1]&6)===0}},{key:"extractAAC",value:function(e){var t=0,r=e.byteLength,l=[],f,m;if(!n.isAACPattern(e))return Z("Invalid ADTS audio format"),{valid:!1};f=n.getHeaderLength(e);for(var b=e.subarray(0,f);t<r;)m=n.getFrameLength(e),l.push(e.subarray(f,m)),e=e.slice(m),t+=m;return{valid:!0,header:b,slices:l}}}]),n})(),ue=1,me=(function(n){M(e,n);var s=_(e);function e(){return $(this,e),s.apply(this,arguments)}return E(e,[{key:"flush",value:function(){this.mp4track.len=0,this.mp4track.samples=[]}},{key:"isReady",value:function(){return!this.readyToDecode||!this.samples.length?null:!0}}],[{key:"getTrackID",value:function(){return ue++}}]),e})(ke),Ce=(function(n){M(e,n);var s=_(e);function e(t,r,l){var f;return $(this,e),f=s.call(this,"AACRemuxer"),f.frameDuration=l,f.readyToDecode=!1,f.header=null,f.nextDts=0,f.dts=0,f.mp4track={id:me.getTrackID(),type:"audio",channelCount:0,len:0,fragmented:!0,timescale:t,duration:r,samples:[],config:"",codec:""},f.samples=[],f}return E(e,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.header=null,this.mp4track.codec="",this.mp4track.channelCount="",this.mp4track.config="",this.mp4track.timescale=this.timescale,this.nextDts=0,this.dts=0}},{key:"feed",value:function(r,l){var f=de.extractAAC(r),m=f.valid,b=f.header,P=f.slices;return this.header||(this.header=b),m&&P.length>0?(this.remux(this.getAudioFrames(P,l)),!0):(Z("Failed to extract audio data from:",r),this.dispatch("outOfData"),!1)}},{key:"getAudioFrames",value:function(r,l){var f=[],m=0,b=0,P=y(r),Y;try{for(P.s();!(Y=P.n()).done;){var ne=Y.value;f.push({units:ne})}}catch(re){P.e(re)}finally{P.f()}return m=l?l/f.length|0:this.frameDuration,b=l?l-m*f.length:0,f.map(function(re){re.duration=m,b>0&&(re.duration++,b--)}),f}},{key:"remux",value:function(r){if(r.length>0)for(var l=0;l<r.length;l++){var f=r[l],m=f.units,b=m.byteLength;this.samples.push({units:m,size:b,duration:f.duration}),this.mp4track.len+=b,this.readyToDecode||this.setAACConfig()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var r=new Uint8Array(this.mp4track.len),l=0,f=this.mp4track.samples,m,b;for(this.dts=this.nextDts;this.samples.length;){var P=this.samples.shift();if(P.units,b=P.duration,b<=0){le("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(b)),this.mp4track.len-=P.size;continue}this.nextDts+=b,m={size:P.size,duration:b,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},r.set(P.units,l),l+=P.size,f.push(m)}return f.length?new Uint8Array(r.buffer,0,this.mp4track.len):null}},{key:"setAACConfig",value:function(){var r,l,f,m=new Uint8Array(2);this.header&&(r=((this.header[2]&192)>>>6)+1,l=(this.header[2]&60)>>>2,f=(this.header[2]&1)<<2,f|=(this.header[3]&192)>>>6,m[0]=r<<3,m[0]|=(l&14)>>1,m[1]|=(l&1)<<7,m[1]|=f<<3,this.mp4track.codec="mp4a.40."+r,this.mp4track.channelCount=f,this.mp4track.config=m,this.readyToDecode=!0)}}]),e})(me),K=(function(){function n(s){$(this,n),this.data=s,this.index=0,this.bitLength=s.byteLength*8}return E(n,[{key:"setData",value:function(e){this.data=e,this.index=0,this.bitLength=e.byteLength*8}},{key:"bitsAvailable",get:function(){return this.bitLength-this.index}},{key:"skipBits",value:function(e){if(this.bitsAvailable<e)return!1;this.index+=e}},{key:"readBits",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this.getBits(e,this.index,t);return r}},{key:"getBits",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(this.bitsAvailable<e)return 0;var l=t%8,f=this.data[t/8|0]&255>>>l,m=8-l;if(m>=e)return r&&(this.index+=e),f>>m-e;r&&(this.index+=m);var b=e-m;return f<<b|this.getBits(b,t+m,r)}},{key:"skipLZ",value:function(){var e;for(e=0;e<this.bitLength-this.index;++e)if(this.getBits(1,this.index+e,!1)!==0)return this.index+=e,e;return e}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:"readEG",value:function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}},{key:"readBoolean",value:function(){return this.readBits(1)===1}},{key:"readUByte",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.readBits(e*8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}}]),n})(),te=(function(){function n(){$(this,n)}return E(n,null,[{key:"extractNALu",value:function(e){for(var t=0,r=e.byteLength,l=[],f=0,m=0;t<r;){var b=e[t++];if(b===0)m++;else if(b===1&&m>=2){var P=m+1;f!==t-P&&l.push(e.subarray(f,t-P)),f=t,m=0}else m=0}var Y=null;return f<r&&(Y=e.subarray(f,r)),[l,Y]}},{key:"skipScalingList",value:function(e,t){for(var r=8,l=8,f,m=0;m<t;m++)l!==0&&(f=e.readEG(),l=(r+f+256)%256),r=l===0?r:l}},{key:"readSPS",value:function(e){var t=new K(e),r=0,l=0,f=0,m=0,b=1,P,Y,ne,re,se,ge,Fe=0;t.readUByte();for(var Te=[],Pe=1,Ae=e.byteLength,be=Pe;be<Ae;be++)be+2<Ae&&t.readBits(24,!1)===3?(Te.push(t.readBits(8)),Te.push(t.readBits(8)),be+=2,t.readBits(8)):Te.push(t.readBits(8));if(t.setData(new Uint8Array(Te)),P=t.readUByte(),t.readBits(5),t.skipBits(3),t.readUByte(),t.skipUEG(),P===100||P===110||P===122||P===244||P===44||P===83||P===86||P===118||P===128){var Ge=t.readUEG();if(Ge===3&&t.skipBits(1),t.skipUEG(),t.skipUEG(),t.skipBits(1),t.readBoolean()){ge=Ge!==3?8:12;for(var v=0;v<ge;++v)t.readBoolean()&&(v<6?n.skipScalingList(t,16):n.skipScalingList(t,64))}}t.skipUEG();var w=t.readUEG();if(w===0)t.readUEG();else if(w===1){t.skipBits(1),t.skipEG(),t.skipEG(),Y=t.readUEG();for(var Q=0;Q<Y;++Q)t.skipEG()}if(t.skipUEG(),t.skipBits(1),ne=t.readUEG(),re=t.readUEG(),se=t.readBits(1),se===0&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(r=t.readUEG(),l=t.readUEG(),f=t.readUEG(),m=t.readUEG()),t.readBoolean()){if(t.readBoolean()){var ee,_e=t.readUByte();switch(_e){case 1:ee=[1,1];break;case 2:ee=[12,11];break;case 3:ee=[10,11];break;case 4:ee=[16,11];break;case 5:ee=[40,33];break;case 6:ee=[24,11];break;case 7:ee=[20,11];break;case 8:ee=[32,11];break;case 9:ee=[80,33];break;case 10:ee=[18,11];break;case 11:ee=[15,11];break;case 12:ee=[64,33];break;case 13:ee=[160,99];break;case 14:ee=[4,3];break;case 15:ee=[3,2];break;case 16:ee=[2,1];break;case 255:{ee=[t.readUByte()<<8|t.readUByte(),t.readUByte()<<8|t.readUByte()];break}}ee&&ee[0]>0&&ee[1]>0&&(b=ee[0]/ee[1])}if(t.readBoolean()&&t.skipBits(1),t.readBoolean()&&(t.skipBits(4),t.readBoolean()&&t.skipBits(24)),t.readBoolean()&&(t.skipUEG(),t.skipUEG()),t.readBoolean()){var $e=t.readUInt(),Ee=t.readUInt(),Le=t.readBoolean(),qe=Ee/(2*$e);Le&&(Fe=qe)}}return{fps:Fe>0?Fe:void 0,width:Math.ceil(((ne+1)*16-r*2-l*2)*b),height:(2-se)*(re+1)*16-(se?2:4)*(f+m)}}}]),n})(),oe=(function(){function n(s){$(this,n),this.payload=s,this.nri=(this.payload[0]&96)>>5,this.nalUnitType=this.payload[0]&31,this._sliceType=null,this._isFirstSlice=!1}return E(n,[{key:"toString",value:function(){return"".concat(n.TYPES[this.type()]||"UNKNOWN",": NRI: ").concat(this.getNri())}},{key:"getNri",value:function(){return this.nri}},{key:"type",value:function(){return this.nalUnitType}},{key:"isKeyframe",get:function(){return this.nalUnitType===n.IDR}},{key:"isVCL",get:function(){return this.nalUnitType==n.IDR||this.nalUnitType==n.NDR}},{key:"parseHeader",value:function(){var e=new K(this.getPayload());e.readUByte(),this._isFirstSlice=e.readUEG()===0,this._sliceType=e.readUEG()}},{key:"isFirstSlice",get:function(){return this._isFirstSlice||this.parseHeader(),this._isFirstSlice}},{key:"sliceType",get:function(){return this._sliceType||this.parseHeader(),this._sliceType}},{key:"getPayload",value:function(){return this.payload}},{key:"getPayloadSize",value:function(){return this.payload.byteLength}},{key:"getSize",value:function(){return 4+this.getPayloadSize()}},{key:"getData",value:function(){var e=new Uint8Array(this.getSize()),t=new DataView(e.buffer);return t.setUint32(0,this.getSize()-4),e.set(this.getPayload(),4),e}}],[{key:"NDR",get:function(){return 1}},{key:"IDR",get:function(){return 5}},{key:"SEI",get:function(){return 6}},{key:"SPS",get:function(){return 7}},{key:"PPS",get:function(){return 8}},{key:"AUD",get:function(){return 9}},{key:"TYPES",get:function(){var e;return e={},U(e,n.IDR,"IDR"),U(e,n.SEI,"SEI"),U(e,n.SPS,"SPS"),U(e,n.PPS,"PPS"),U(e,n.NDR,"NDR"),U(e,n.AUD,"AUD"),e}}]),n})();function Ie(n,s){var e=new Uint8Array((n.byteLength|0)+(s.byteLength|0));return e.set(n,0),e.set(s,n.byteLength|0),e}function je(n){var s,e,t,r="";return s=Math.floor(n),e=parseInt(s/3600,10)%24,t=parseInt(s/60,10)%60,s=s<0?0:s%60,e>0&&(r+=(e<10?"0"+e:e)+":"),r+=(t<10?"0"+t:t)+":"+(s<10?"0"+s:s),r}var He=(function(n){M(e,n);var s=_(e);function e(t,r,l){var f;return $(this,e),f=s.call(this,"H264Remuxer"),f.frameDuration=l,f.readyToDecode=!1,f.nextDts=0,f.dts=0,f.mp4track={id:me.getTrackID(),type:"video",len:0,fragmented:!0,sps:"",pps:"",fps:30,width:0,height:0,timescale:t,duration:r,samples:[]},f.samples=[],f.remainingData=new Uint8Array,f.kfCounter=0,f.pendingUnits={},f}return E(e,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.mp4track.sps="",this.mp4track.pps="",this.nextDts=0,this.dts=0,this.remainingData=new Uint8Array,this.kfCounter=0,this.pendingUnits={}}},{key:"feed",value:function(r,l,f){var m=[],b;r=Ie(this.remainingData,r);var P=te.extractNALu(r),Y=ce(P,2);return m=Y[0],b=Y[1],this.remainingData=b||new Uint8Array,m.length>0?(this.remux(this.getVideoFrames(m,l,f)),!0):(Z("Failed to extract any NAL units from video data:",b),this.dispatch("outOfData"),!1)}},{key:"getVideoFrames",value:function(r,l,f){var m=this,b=[],P=[],Y=0,ne=0,re=!1,se=!1;this.pendingUnits.units&&(b=this.pendingUnits.units,se=this.pendingUnits.vcl,re=this.pendingUnits.keyFrame,this.pendingUnits={});var ge=y(r),Fe;try{for(ge.s();!(Fe=ge.n()).done;){var Te=Fe.value,Pe=new oe(Te);b.length&&se&&(Pe.isFirstSlice||!Pe.isVCL)&&(P.push({units:b,keyFrame:re}),b=[],re=!1,se=!1),b.push(Pe),re=re||Pe.isKeyframe,se=se||Pe.isVCL}}catch(be){ge.e(be)}finally{ge.f()}if(b.length)if(!l)this.pendingUnits={units:b,keyFrame:re,vcl:se};else if(se)P.push({units:b,keyFrame:re});else{var Ae=P.length-1;Ae>=0&&(P[Ae].units=P[Ae].units.concat(b))}return Y=l?l/P.length|0:this.frameDuration,ne=l?l-Y*P.length:0,P.map(function(be){be.duration=Y,be.compositionTimeOffset=f,ne>0&&(be.duration++,ne--),m.kfCounter++,be.keyFrame&&m.dispatch("keyframePosition",m.kfCounter*Y/1e3)}),le("jmuxer: No. of H264 frames of the last chunk: ".concat(P.length)),P}},{key:"remux",value:function(r){var l=y(r),f;try{for(l.s();!(f=l.n()).done;){var m=f.value,b=[],P=0,Y=y(m.units),ne;try{for(Y.s();!(ne=Y.n()).done;){var re=ne.value;this.parseNAL(re)&&(b.push(re),P+=re.getSize())}}catch(se){Y.e(se)}finally{Y.f()}b.length>0&&this.readyToDecode&&(this.mp4track.len+=P,this.samples.push({units:b,size:P,keyFrame:m.keyFrame,duration:m.duration,compositionTimeOffset:m.compositionTimeOffset}))}}catch(se){l.e(se)}finally{l.f()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var r=new Uint8Array(this.mp4track.len),l=0,f=this.mp4track.samples,m,b;for(this.dts=this.nextDts;this.samples.length;){var P=this.samples.shift(),Y=P.units;if(b=P.duration,b<=0){le("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(b)),this.mp4track.len-=P.size;continue}this.nextDts+=b,m={size:P.size,duration:b,cts:P.compositionTimeOffset||0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:P.keyFrame?0:1,dependsOn:P.keyFrame?2:1}};var ne=y(Y),re;try{for(ne.s();!(re=ne.n()).done;){var se=re.value;r.set(se.getData(),l),l+=se.getSize()}}catch(ge){ne.e(ge)}finally{ne.f()}f.push(m)}return f.length?new Uint8Array(r.buffer,0,this.mp4track.len):null}},{key:"parseSPS",value:function(r){var l=te.readSPS(new Uint8Array(r));this.mp4track.fps=l.fps||this.mp4track.fps,this.mp4track.width=l.width,this.mp4track.height=l.height,this.mp4track.sps=[new Uint8Array(r)],this.mp4track.codec="avc1.";for(var f=new DataView(r.buffer,r.byteOffset+1,4),m=0;m<3;++m){var b=f.getUint8(m).toString(16);b.length<2&&(b="0"+b),this.mp4track.codec+=b}}},{key:"parsePPS",value:function(r){this.mp4track.pps=[new Uint8Array(r)]}},{key:"parseNAL",value:function(r){if(!r)return!1;if(r.isVCL)return!0;var l=!1;switch(r.type()){case oe.PPS:this.mp4track.pps||this.parsePPS(r.getPayload()),l=!0;break;case oe.SPS:this.mp4track.sps||this.parseSPS(r.getPayload()),l=!0;break;case oe.AUD:le("AUD - ignoing");break;case oe.SEI:le("SEI - ignoing");break}return!this.readyToDecode&&this.mp4track.pps&&this.mp4track.sps&&(this.readyToDecode=!0),l}}]),e})(me),We=(function(){function n(){$(this,n)}return E(n,null,[{key:"extractNALu",value:function(e){for(var t=0,r=e.byteLength,l=[],f=0,m=0;t<r;){var b=e[t++];if(b===0)m++;else if(b===1&&m>=2){var P=m+1;f!==t-P&&l.push(e.subarray(f,t-P)),f=t,m=0}else m=0}var Y=null;return f<r&&(Y=e.subarray(f,r)),[l,Y]}},{key:"removeEmulationPreventionBytes",value:function(e){for(var t=[],r=0,l=0;l<e.length;l++){var f=e[l];if(r===2&&f===3){r=0;continue}t.push(f),f===0?r++:r=0}return new Uint8Array(t)}},{key:"readSPS",value:function(e){var t=new K(e);t.readUByte(),t.readUByte(),t.readBits(4),t.readBits(3),t.readBits(1);for(var r=t.readBits(2),l=t.readBits(1),f=t.readBits(5),m=t.readUInt(),b=new Uint8Array(6),P=0;P<6;P++)b[P]=t.readUByte();var Y=t.readUByte();t.readUEG();var ne=t.readUEG();ne===3&&t.readBits(1);var re=t.readUEG(),se=t.readUEG(),ge=t.readBoolean(),Fe=0,Te=0,Pe=0,Ae=0;ge&&(Fe=t.readUEG(),Te=t.readUEG(),Pe=t.readUEG(),Ae=t.readUEG());var be=null,Ge=t.readBoolean();if(Ge){var v=t.readBoolean();if(v){var w=t.readUByte();w===255&&(t.readUShort(),t.readUShort())}var Q=t.readBoolean();Q&&t.readBoolean();var ee=t.readBoolean();if(ee){t.readBits(3),t.readBoolean();var _e=t.readBoolean();_e&&(t.readUByte(),t.readUByte(),t.readUByte())}var $e=t.readBoolean();$e&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean();var Ee=t.readBoolean();if(Ee){var Le=t.readUInt(),qe=t.readUInt();t.readBoolean(),Le&&(be=qe/(2*Le))}}var Pt=ne===1||ne===2?2:1,tn=ne===1?2:1,nn=re-Pt*(Te+Fe),rn=se-tn*(Pe+Ae);return{width:nn,height:rn,profile_space:r,tier_flag:l,profile_idc:f,profile_compatibility_flags:m,constraint_indicator_flags:b,level_idc:Y,chroma_format_idc:ne,fps:be}}}]),n})(),Ve=(function(){function n(s){$(this,n),this.payload=s,this.nalUnitType=(s[0]&126)>>1,this.nuhLayerId=(s[0]&1)<<5|(s[1]&248)>>3,this.nuhTemporalIdPlus1=s[1]&7,this._isFirstSlice=null,this._sliceType=null}return E(n,[{key:"toString",value:function(){return"".concat(n.TYPES[this.type()]||"UNKNOWN ("+this.type()+")",": Layer: ").concat(this.nuhLayerId,", Temporal Id: ").concat(this.nuhTemporalIdPlus1)}},{key:"type",value:function(){return this.nalUnitType}},{key:"isKeyframe",get:function(){return[n.IDR_W_RADL,n.IDR_N_LP,n.CRA].includes(this.nalUnitType)}},{key:"isVCL",get:function(){return this.nalUnitType<=31}},{key:"parseHeader",value:function(){var e=new K(this.getPayload());e.readUByte(),e.readUByte(),this._isFirstSlice=e.readBoolean(),this.isKeyframe&&e.readBits(1),e.readUEG(),this._sliceType=e.readUEG()}},{key:"isFirstSlice",get:function(){return this._isFirstSlice||this.parseHeader(),this._isFirstSlice}},{key:"sliceType",get:function(){return this._sliceType||this.parseHeader(),this._sliceType}},{key:"getPayload",value:function(){return this.payload}},{key:"getPayloadSize",value:function(){return this.payload.byteLength}},{key:"getSize",value:function(){return 4+this.getPayloadSize()}},{key:"getData",value:function(){var e=new Uint8Array(this.getSize()),t=new DataView(e.buffer);return t.setUint32(0,this.getSize()-4),e.set(this.getPayload(),4),e}}],[{key:"TRAIL_N",get:function(){return 0}},{key:"TRAIL_R",get:function(){return 1}},{key:"IDR_W_RADL",get:function(){return 19}},{key:"IDR_N_LP",get:function(){return 20}},{key:"CRA",get:function(){return 21}},{key:"VPS",get:function(){return 32}},{key:"SPS",get:function(){return 33}},{key:"PPS",get:function(){return 34}},{key:"AUD",get:function(){return 35}},{key:"SEI",get:function(){return 39}},{key:"SEI2",get:function(){return 40}},{key:"TYPES",get:function(){var e;return e={},U(e,n.TRAIL_N,"TRAIL_N"),U(e,n.TRAIL_R,"TRAIL_R"),U(e,n.IDR_W_RADL,"IDR"),U(e,n.IDR_N_LP,"IDR2"),U(e,n.CRA,"CRA"),U(e,n.VPS,"VPS"),U(e,n.SPS,"SPS"),U(e,n.PPS,"PPS"),U(e,n.AUD,"AUD"),U(e,n.SEI,"SEI"),U(e,n.SEI2,"SEI2"),e}}]),n})(),Je=(function(n){M(e,n);var s=_(e);function e(t,r,l){var f;return $(this,e),f=s.call(this,"H264Remuxer"),f.frameDuration=l,f.readyToDecode=!1,f.nextDts=0,f.dts=0,f.mp4track={id:me.getTrackID(),type:"video",len:0,fragmented:!0,vps:"",sps:"",pps:"",hvcC:{},fps:30,width:0,height:0,timescale:t,duration:r,samples:[]},f.samples=[],f.remainingData=new Uint8Array,f.kfCounter=0,f.pendingUnits={},f}return E(e,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.mp4track.vps="",this.mp4track.sps="",this.mp4track.pps="",this.mp4track.hvcC={},this.nextDts=0,this.dts=0,this.remainingData=new Uint8Array,this.kfCounter=0,this.pendingUnits={}}},{key:"feed",value:function(r,l,f){var m=[],b;r=Ie(this.remainingData,r);var P=We.extractNALu(r),Y=ce(P,2);return m=Y[0],b=Y[1],this.remainingData=b||new Uint8Array,m.length>0?(this.remux(this.getVideoFrames(m,l,f)),!0):(Z("Failed to extract any NAL units from video data:",b),this.dispatch("outOfData"),!1)}},{key:"getVideoFrames",value:function(r,l,f){var m=this,b=[],P=[],Y=0,ne=0,re=!1,se=!1;this.pendingUnits.units&&(b=this.pendingUnits.units,se=this.pendingUnits.vcl,re=this.pendingUnits.keyFrame,this.pendingUnits={});var ge=y(r),Fe;try{for(ge.s();!(Fe=ge.n()).done;){var Te=Fe.value,Pe=new Ve(Te);b.length&&se&&(Pe.isFirstSlice||!Pe.isVCL)&&(P.push({units:b,keyFrame:re}),b=[],re=!1,se=!1),b.push(Pe),re=re||Pe.isKeyframe,se=se||Pe.isVCL}}catch(be){ge.e(be)}finally{ge.f()}if(b.length)if(!l)this.pendingUnits={units:b,keyFrame:re,vcl:se};else if(se)P.push({units:b,keyFrame:re});else{var Ae=P.length-1;Ae>=0&&(P[Ae].units=P[Ae].units.concat(b))}return Y=l?l/P.length|0:this.frameDuration,ne=l?l-Y*P.length:0,P.map(function(be){be.duration=Y,be.compositionTimeOffset=f,ne>0&&(be.duration++,ne--),m.kfCounter++,be.keyFrame&&m.dispatch("keyframePosition",m.kfCounter*Y/1e3)}),le("jmuxer: No. of H265 frames of the last chunk: ".concat(P.length)),P}},{key:"remux",value:function(r){var l=y(r),f;try{for(l.s();!(f=l.n()).done;){var m=f.value,b=[],P=0,Y=y(m.units),ne;try{for(Y.s();!(ne=Y.n()).done;){var re=ne.value;this.parseNAL(re)&&(b.push(re),P+=re.getSize())}}catch(se){Y.e(se)}finally{Y.f()}b.length>0&&this.readyToDecode&&(this.mp4track.len+=P,this.samples.push({units:b,size:P,keyFrame:m.keyFrame,duration:m.duration,compositionTimeOffset:m.compositionTimeOffset}))}}catch(se){l.e(se)}finally{l.f()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var r=new Uint8Array(this.mp4track.len),l=0,f=this.mp4track.samples,m,b;for(this.dts=this.nextDts;this.samples.length;){var P=this.samples.shift(),Y=P.units;if(b=P.duration,b<=0){le("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(b)),this.mp4track.len-=P.size;continue}this.nextDts+=b,m={size:P.size,duration:b,cts:P.compositionTimeOffset||0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:P.keyFrame?0:1,dependsOn:P.keyFrame?2:1}};var ne=y(Y),re;try{for(ne.s();!(re=ne.n()).done;){var se=re.value;r.set(se.getData(),l),l+=se.getSize()}}catch(ge){ne.e(ge)}finally{ne.f()}f.push(m)}return f.length?new Uint8Array(r.buffer,0,this.mp4track.len):null}},{key:"parseSPS",value:function(r){this.mp4track.sps=[new Uint8Array(r)],r=We.removeEmulationPreventionBytes(r);var l=We.readSPS(new Uint8Array(r));this.mp4track.fps=l.fps||this.mp4track.fps,this.mp4track.width=l.width,this.mp4track.height=l.height,this.mp4track.codec="hvc1.".concat(l.profile_idc,".").concat(l.profile_compatibility_flags.toString(16))+".L".concat(l.level_idc).concat(l.tier_flag?"H":"L")+".".concat(l.constraint_indicator_flags.map(function(f){return f.toString(16)}).join(".").toUpperCase()),this.mp4track.hvcC={profile_space:l.profile_space,tier_flag:l.tier_flag,profile_idc:l.profile_idc,profile_compatibility_flags:l.profile_compatibility_flags,constraint_indicator_flags:l.constraint_indicator_flags,level_idc:l.level_idc,chroma_format_idc:l.chroma_format_idc}}},{key:"parsePPS",value:function(r){this.mp4track.pps=[r]}},{key:"parseVPS",value:function(r){this.mp4track.vps=[r]}},{key:"parseNAL",value:function(r){if(!r)return!1;if(r.isVCL)return!0;var l=!1;switch(r.type()){case Ve.VPS:this.mp4track.vps||this.parseVPS(r.getPayload()),l=!0;break;case Ve.SPS:this.mp4track.sps||this.parseSPS(r.getPayload()),l=!0;break;case Ve.PPS:this.mp4track.pps||this.parsePPS(r.getPayload()),l=!0;break;case Ve.AUD:le("AUD - ignoing");break;case Ve.SEI:case Ve.SEI2:le("SEI - ignoing");break}return!this.readyToDecode&&this.mp4track.vps&&this.mp4track.sps&&this.mp4track.pps&&(this.readyToDecode=!0),l}}]),e})(me),De=(function(n){M(e,n);var s=_(e);function e(t,r,l,f){var m;return $(this,e),m=s.call(this,"remuxer"),m.videoCodec=l,m.frameDuration=f,m.initialized=!1,m.tracks={},m.seq=1,m.env=t,m.timescale=1e3,m.mediaDuration=r?4294967295:0,m}return E(e,[{key:"addTrack",value:function(r){var l=this;if((r==="video"||r==="both")&&(this.videoCodec=="H265"?this.tracks.video=new Je(this.timescale,this.mediaDuration,this.frameDuration):this.tracks.video=new He(this.timescale,this.mediaDuration,this.frameDuration),this.tracks.video.on("outOfData",function(){l.dispatch("missingVideoFrames")}),this.tracks.video.on("keyframePosition",function(m){l.dispatch("keyframePosition",m)})),r==="audio"||r==="both"){var f=new Ce(this.timescale,this.mediaDuration,this.frameDuration);this.tracks.audio=f,this.tracks.video.on("outOfData",function(){l.dispatch("missingAudioFrames")})}}},{key:"reset",value:function(){for(var r in this.tracks)this.tracks[r].resetTrack();this.initialized=!1}},{key:"destroy",value:function(){this.tracks={},this.offAll()}},{key:"flush",value:function(){if(!this.initialized){if(!this.isReady())return;this.dispatch("ready"),this.initSegment(),this.initialized=!0}for(var r in this.tracks){var l=this.tracks[r],f=l.getPayload();if(f&&f.byteLength){var m=B.moof(this.seq,l.dts,l.mp4track),b=B.mdat(f),P=Ie(m,b),Y={type:r,payload:P,dts:l.dts};r==="video"&&(Y.fps=l.mp4track.fps),this.dispatch("buffer",Y);var ne=je(l.dts/this.timescale);le("put segment (".concat(r,"): dts: ").concat(l.dts," frames: ").concat(l.mp4track.samples.length," second: ").concat(ne)),l.flush(),this.seq++}}}},{key:"initSegment",value:function(){var r=[];for(var l in this.tracks){var f=this.tracks[l];if(this.env=="browser"){var m={type:l,payload:B.initSegment([f.mp4track],this.mediaDuration,this.timescale)};this.dispatch("buffer",m)}else r.push(f.mp4track)}if(this.env=="node"){var b={type:"all",payload:B.initSegment(r,this.mediaDuration,this.timescale)};this.dispatch("buffer",b)}le("Initial segment generated.")}},{key:"isReady",value:function(){for(var r in this.tracks)if(!this.tracks[r].readyToDecode||!this.tracks[r].samples.length)return!1;return!0}},{key:"feed",value:function(r){var l=!1;if(r.video&&this.tracks.video&&(l|=this.tracks.video.feed(r.video,r.duration,r.compositionTimeOffset)),r.audio&&this.tracks.audio&&(l|=this.tracks.audio.feed(r.audio,r.duration)),!l){Z("Input object must have video and/or audio property. Make sure it is a valid typed array");return}this.flush()}}]),e})(ke),at=(function(n){M(e,n);var s=_(e);function e(t,r){var l;return $(this,e),l=s.call(this,"buffer"),l.type=r,l.queue=new Uint8Array,l.cleaning=!1,l.pendingCleaning=0,l.cleanOffset=30,l.cleanRanges=[],l.sourceBuffer=t,l.sourceBuffer.addEventListener("updateend",function(){if(l.pendingCleaning>0&&(l.initCleanup(l.pendingCleaning),l.pendingCleaning=0),l.cleaning=!1,l.cleanRanges.length){l.doCleanup();return}}),l.sourceBuffer.addEventListener("error",function(){l.dispatch("error",{type:l.type,name:"buffer",error:"buffer error"})}),l}return E(e,[{key:"destroy",value:function(){this.queue=null,this.sourceBuffer=null,this.offAll()}},{key:"doCleanup",value:function(){if(!this.cleanRanges.length){this.cleaning=!1;return}var r=this.cleanRanges.shift();le("".concat(this.type," remove range [").concat(r[0]," - ").concat(r[1],")")),this.cleaning=!0,this.sourceBuffer.remove(r[0],r[1])}},{key:"initCleanup",value:function(r){try{if(this.sourceBuffer.updating){this.pendingCleaning=r;return}if(this.sourceBuffer.buffered&&this.sourceBuffer.buffered.length&&!this.cleaning){for(var l=0;l<this.sourceBuffer.buffered.length;++l){var f=this.sourceBuffer.buffered.start(l),m=this.sourceBuffer.buffered.end(l);r-f>this.cleanOffset&&(m=r-this.cleanOffset,f<m&&this.cleanRanges.push([f,m]))}this.doCleanup()}}catch(b){Z("Error occured while cleaning ".concat(this.type," buffer - ").concat(b.name,": ").concat(b.message))}}},{key:"doAppend",value:function(){if(this.queue.length&&!(!this.sourceBuffer||this.sourceBuffer.updating))try{this.sourceBuffer.appendBuffer(this.queue),this.queue=new Uint8Array}catch(l){var r="unexpectedError";l.name==="QuotaExceededError"?(le("".concat(this.type," buffer quota full")),r="QuotaExceeded"):(Z("Error occured while appending ".concat(this.type," buffer - ").concat(l.name,": ").concat(l.message)),r="InvalidStateError"),this.dispatch("error",{type:this.type,name:r,error:"buffer error"})}}},{key:"feed",value:function(r){this.queue=Ie(this.queue,r)}}]),e})(ke),Qe=(function(n){M(e,n);var s=_(e);function e(t){var r;$(this,e),r=s.call(this,"jmuxer"),r.isReset=!1;var l={node:"",mode:"both",videoCodec:"H264",flushingTime:500,maxDelay:500,clearBuffer:!0,fps:30,readFpsFromTrack:!1,debug:!1,onReady:function(){},onData:function(){},onError:function(){},onUnsupportedCodec:function(){},onMissingVideoFrames:function(){},onMissingAudioFrames:function(){},onKeyframePosition:function(){},onLoggerLog:console.log,onLoggerErr:console.error};return r.options=Object.assign({},l,t),r.env=(typeof process>"u"?"undefined":X(process))==="object"&&typeof window>"u"?"node":"browser",r.options.debug&&ie(r.options.onLoggerLog,r.options.onLoggerErr),r.options.fps||(r.options.fps=30),r.frameDuration=1e3/r.options.fps|0,r.remuxController=new De(r.env,t.live,r.options.videoCodec,r.frameDuration),r.remuxController.addTrack(r.options.mode),r.initData(),r.remuxController.on("buffer",r.onBuffer.bind(A(r))),r.env=="browser"&&(r.remuxController.on("ready",r.createBuffer.bind(A(r))),r.initBrowser()),r.remuxController.on("missingVideoFrames",function(){typeof r.options.onMissingVideoFrames=="function"&&r.options.onMissingVideoFrames.call(null)}),r.remuxController.on("missingAudioFrames",function(){typeof r.options.onMissingAudioFrames=="function"&&r.options.onMissingAudioFrames.call(null)}),r.clearBuffer&&r.remuxController.on("keyframePosition",function(f){r.kfPosition.push(f)}),typeof r.options.onKeyframePosition=="function"&&r.remuxController.on("keyframePosition",function(f){r.options.onKeyframePosition.call(null,f)}),r}return E(e,[{key:"initData",value:function(){this.lastCleaningTime=Date.now(),this.kfPosition=[],this.pendingUnits={},this.remainingData=new Uint8Array,this.startInterval()}},{key:"initBrowser",value:function(){typeof this.options.node=="string"&&this.options.node==""&&Z("no video element were found to render, provide a valid video element"),this.node=typeof this.options.node=="string"?document.getElementById(this.options.node):this.options.node,this.mseReady=!1,this.setupMSE()}},{key:"createStream",value:function(){var r=this.feed.bind(this),l=this.destroy.bind(this);return this.stream=new d.Duplex({writableObjectMode:!0,read:function(m){},write:function(m,b,P){r(m),P()},final:function(m){l(),m()}}),this.stream}},{key:"setupMSE",value:function(){if(window.MediaSource=window.MediaSource||window.WebKitMediaSource||window.ManagedMediaSource,!window.MediaSource)throw"Oops! Browser does not support Media Source Extension or Managed Media Source (IOS 17+).";if(this.isMSESupported=!!window.MediaSource,this.mediaSource=new window.MediaSource,this.url=URL.createObjectURL(this.mediaSource),window.MediaSource===window.ManagedMediaSource)try{this.node.removeAttribute("src"),this.node.disableRemotePlayback=!0;var r=document.createElement("source");r.type="video/mp4",r.src=this.url,this.node.appendChild(r),this.node.load()}catch{this.node.src=this.url}else this.node.src=this.url;this.mseEnded=!1,this.mediaSource.addEventListener("sourceopen",this.onMSEOpen.bind(this)),this.mediaSource.addEventListener("sourceclose",this.onMSEClose.bind(this)),this.mediaSource.addEventListener("webkitsourceopen",this.onMSEOpen.bind(this)),this.mediaSource.addEventListener("webkitsourceclose",this.onMSEClose.bind(this))}},{key:"endMSE",value:function(){if(!this.mseEnded)try{this.mseEnded=!0,this.mediaSource.endOfStream()}catch{Z("mediasource is not available to end")}}},{key:"feed",value:function(r){!r||!this.remuxController||(r.duration=r.duration?parseInt(r.duration):0,this.remuxController.feed(r))}},{key:"destroy",value:function(){if(this.stopInterval(),this.stream&&(this.remuxController.flush(),this.stream.push(null),this.stream=null),this.remuxController&&(this.remuxController.destroy(),this.remuxController=null),this.bufferControllers){for(var r in this.bufferControllers)this.bufferControllers[r].destroy();this.bufferControllers=null,this.endMSE()}this.node=!1,this.mseReady=!1,this.videoStarted=!1,this.mediaSource=null}},{key:"reset",value:function(){if(this.stopInterval(),this.isReset=!0,this.node.pause(),this.remuxController&&this.remuxController.reset(),this.bufferControllers){for(var r in this.bufferControllers)this.bufferControllers[r].destroy();this.bufferControllers=null,this.endMSE()}this.initData(),this.env=="browser"&&this.initBrowser(),le("JMuxer was reset")}},{key:"createBuffer",value:function(){if(!(!this.mseReady||!this.remuxController||!this.remuxController.isReady()||this.bufferControllers)){this.bufferControllers={};for(var r in this.remuxController.tracks){var l=this.remuxController.tracks[r];if(!e.isSupported("".concat(r,'/mp4; codecs="').concat(l.mp4track.codec,'"')))return Z("Browser does not support codec: ".concat(r,'/mp4; codecs="').concat(l.mp4track.codec,'"')),typeof this.options.onUnsupportedCodec=="function"&&this.options.onUnsupportedCodec.call(null,l.mp4track.codec),!1;var f=this.mediaSource.addSourceBuffer("".concat(r,'/mp4; codecs="').concat(l.mp4track.codec,'"'));this.bufferControllers[r]=new at(f,r),this.bufferControllers[r].on("error",this.onBufferError.bind(this))}}}},{key:"startInterval",value:function(){var r=this;this.interval=setInterval(function(){r.options.flushingTime?r.applyAndClearBuffer():r.bufferControllers&&r.cancelDelay()},this.options.flushingTime||1e3)}},{key:"stopInterval",value:function(){this.interval&&clearInterval(this.interval)}},{key:"cancelDelay",value:function(){if(this.node.buffered&&this.node.buffered.length>0&&!this.node.seeking){var r=this.node.buffered.end(0);r-this.node.currentTime>this.options.maxDelay/1e3&&(le("delay"),this.node.paused&&this.node.play().catch(Z),this.node.currentTime=r-.001)}}},{key:"releaseBuffer",value:function(){for(var r in this.bufferControllers)this.bufferControllers[r].doAppend()}},{key:"applyAndClearBuffer",value:function(){this.bufferControllers&&(this.releaseBuffer(),this.clearBuffer())}},{key:"getSafeClearOffsetOfBuffer",value:function(r){for(var l=this.options.mode==="audio"&&r||0,f,m=0;m<this.kfPosition.length&&!(this.kfPosition[m]>=r);m++)f=this.kfPosition[m];return f&&(this.kfPosition=this.kfPosition.filter(function(b){return b<f&&(l=b),b>=f})),l}},{key:"clearBuffer",value:function(){if(this.options.clearBuffer&&Date.now()-this.lastCleaningTime>1e4){for(var r in this.bufferControllers){var l=this.getSafeClearOffsetOfBuffer(this.node.currentTime);this.bufferControllers[r].initCleanup(l)}this.lastCleaningTime=Date.now()}}},{key:"onBuffer",value:function(r){this.options.readFpsFromTrack&&typeof r.fps<"u"&&this.options.fps!=r.fps&&(this.options.fps=r.fps,this.frameDuration=Math.ceil(1e3/r.fps),le("JMuxer changed FPS to ".concat(r.fps," from track data"))),this.env=="browser"?this.bufferControllers&&this.bufferControllers[r.type]&&this.bufferControllers[r.type].feed(r.payload):this.stream&&this.stream.push(r.payload),this.options.onData&&this.options.onData(r.payload),this.options.flushingTime===0&&this.applyAndClearBuffer()}},{key:"onMSEOpen",value:function(){this.mseReady=!0,URL.revokeObjectURL(this.url),typeof this.options.onReady=="function"&&this.options.onReady.call(null,this.isReset)}},{key:"onMSEClose",value:function(){this.mseReady=!1,this.videoStarted=!1}},{key:"onBufferError",value:function(r){if(r.name=="QuotaExceeded"){le("JMuxer cleaning ".concat(r.type," buffer due to QuotaExceeded error")),this.bufferControllers[r.type].initCleanup(this.node.currentTime);return}else r.name=="InvalidStateError"?(le("JMuxer is reseting due to InvalidStateError"),this.reset()):this.endMSE();typeof this.options.onError=="function"&&this.options.onError.call(null,r)}}],[{key:"isSupported",value:function(r){return window.MediaSource&&window.MediaSource.isTypeSupported(r)}}]),e})(ke);return Qe}))})(it)),it.exports}var Hr=jr();const Vr=Br(Hr);function Gr(a){const{platform:c,serial:d,videoRef:p}=a,g=O(!1),h=O(!1),A=O(null);let $=null,S=null,E=null;const y=3e3;function _(){if(!p.value){const R="Video element not ready";return A.value=R,console.error("[Scrcpy]",R),!1}try{return console.log("[Scrcpy] Initializing JMuxer for video element:",p.value),S=new Vr({node:p.value,mode:"video",flushingTime:0,fps:30,debug:!1}),console.log("[Scrcpy] JMuxer initialized successfully"),!0}catch(R){const k=`JMuxer init failed: ${R instanceof Error?R.message:String(R)}`;return A.value=k,console.error("[Scrcpy]",k,R),!1}}function U(){if($&&$.readyState===WebSocket.OPEN){console.warn("[Scrcpy] WebSocket already connected");return}if(!p.value){console.warn("[Scrcpy] Video element not available, cannot connect");return}if(!(!S&&!_()))try{const k=`${location.protocol==="https:"?"wss:":"ws:"}//${location.host}/ws/${c.value}/scrcpy/${d.value}`;console.log(`[Scrcpy] Connecting to ${k}`),$=new WebSocket(k),$.binaryType="arraybuffer",$.onopen=()=>{g.value=!0,h.value=!1,A.value=null,console.log("[Scrcpy] Connected"),E&&(clearTimeout(E),E=null)},$.onmessage=C=>{if(C.data instanceof ArrayBuffer){if(S&&C.data.byteLength>0)try{S.feed({video:new Uint8Array(C.data)})}catch(F){console.error("[Scrcpy] JMuxer feed error:",F)}}else try{const F=JSON.parse(C.data);console.log("[Scrcpy] Control message:",F)}catch{console.warn("[Scrcpy] Invalid message:",C.data)}},$.onerror=C=>{const F="WebSocket connection error";console.error("[Scrcpy]",F,C),console.error("[Scrcpy] WebSocket URL was:",k),console.error("[Scrcpy] WebSocket readyState:",$?.readyState),A.value=F},$.onclose=()=>{g.value=!1,console.log("[Scrcpy] Disconnected"),!h.value&&p.value&&(h.value=!0,console.log(`[Scrcpy] Reconnecting in ${y}ms...`),E=setTimeout(()=>{U()},y))}}catch(R){A.value=`WebSocket init failed: ${R instanceof Error?R.message:String(R)}`,console.error("[Scrcpy] Connection error:",R)}}function z(){if(h.value=!1,E&&(clearTimeout(E),E=null),$&&($.close(),$=null),S){try{S.destroy()}catch(R){console.warn("[Scrcpy] JMuxer destroy error:",R)}S=null}g.value=!1,A.value=null,console.log("[Scrcpy] Disconnected and cleaned up")}function M(R,k,C,F,L){if(!$||$.readyState!==WebSocket.OPEN){console.warn("[Scrcpy] WebSocket not connected");return}const G=k/F,J=C/L,xe=JSON.stringify({type:R==="down"?"touchDown":R==="move"?"touchMove":"touchUp",xP:G,yP:J});$.send(xe)}return lt(()=>{z()}),{connected:g,reconnecting:h,error:A,connect:U,disconnect:z,sendTouch:M}}const It=new TextEncoder;function Kt(a){return a.replace(/^--/,"").trim()}function mt(a,c,d=0){if(!c.length)return-1;for(let p=d;p<=a.length-c.length;p++){let g=!0;for(let h=0;h<c.length;h++)if(a[p+h]!==c[h]){g=!1;break}if(g)return p}return-1}function Xr(a,c){if(!a.length)return new Uint8Array(c);if(!c.length)return new Uint8Array(a);const d=new Uint8Array(a.length+c.length);return d.set(a,0),d.set(c,a.length),d}function Wr(a){if(!a)return null;const c=/boundary="?([^\";]+)"?/i.exec(a);return c?Kt(c[1]):null}function Yr(a,c){const d=Kt(c),p=It.encode(`--${d}`),g=It.encode(`\r
\r
`),h=a.getReader();return(async function*(){let A=new Uint8Array(0),$=!1;try{for(;;){const{value:S,done:E}=await h.read();$=!!E,S&&(A=Xr(A,S));let y=!0;for(;y;){y=!1;const _=mt(A,p);if(_===-1)break;_>0&&(A=A.slice(_));const U=p.length,z=mt(A,g,U);if(z===-1)break;const M=z+g.length,R=mt(A,p,M);if(R===-1)break;let k=R;k>=2&&A[k-2]===13&&A[k-1]===10&&(k-=2);const C=A.slice(M,k);C.length&&(yield new Blob([C],{type:"image/jpeg"})),A=A.slice(R),y=!0}if(E)break}}finally{$||await h.cancel().catch(()=>{}),h.releaseLock()}})()}const Zt=!1,Jr=30,Ot=1e3/Jr;function qr(a){const{platform:c,serial:d,enabled:p}=a,g=a.canvasRef??O(null),h=fe(()=>on(a.preferCanvas)?a.preferCanvas.value:typeof a.preferCanvas=="boolean"?a.preferCanvas:Zt),A=fe(()=>typeof ReadableStream<"u"&&typeof createImageBitmap<"u"),$=O(!1),S=fe(()=>h.value&&A.value&&!!g.value&&!$.value),E=O(!1),y=O(null),_=O(0),U=[],z=O(null);let M=null,R=0,k=null,C=null;const F=fe(()=>E.value?`/api/${c.value}/${d.value}/mjpeg?t=${Date.now()}`:null);function L(){_.value=0,U.length=0}function G(N=performance.now()){U.push(N);const q=N-1e3;for(;U.length&&U[0]<q;)U.shift();if(U.length>=2){const ie=U[U.length-1]-U[0];ie>0&&(_.value=Math.round((U.length-1)/(ie/1e3)))}else _.value=0}function J(){z.value&&(z.value.close(),z.value=null)}function ce(){M!==null&&(cancelAnimationFrame(M),M=null),J()}function xe(N){if(M!==null)return;R=-Ot;const q=ie=>{if(!S.value){M=null;return}if(ie-R>=Ot){const le=z.value,Z=g.value;le&&Z&&((Z.width===0||Z.height===0)&&(Z.width=le.width,Z.height=le.height),N.drawImage(le,0,0,Z.width,Z.height),le.close(),z.value=null,G(ie)),R=ie}M=requestAnimationFrame(q)};M=requestAnimationFrame(q)}async function H(){if(!S.value||C||!F.value)return;const N=g.value,q=N?.getContext("2d");if(!N||!q){$.value=!0,console.info("[iOS MJPEG] Canvas ä¸å¯ç”¨ï¼Œé™çº§ä¸º <img> æ¸²æŸ“");return}k=new AbortController;const{signal:ie}=k;xe(q),C=(async()=>{try{const le=await fetch(F.value,{signal:ie});if(!le.ok)throw new Error(`MJPEG è¯·æ±‚å¤±è´¥: ${le.status} ${le.statusText}`);const Z=Wr(le.headers.get("content-type"));if(!le.body||!Z)throw new Error("MJPEG boundary ç¼ºå¤±ï¼Œæ— æ³•è§£æžæµ");for await(const ke of Yr(le.body,Z)){if(!S.value||ie.aborted)break;J();const B=await createImageBitmap(ke);z.value=B}}catch(le){if(!ie.aborted){const Z=`MJPEG Canvas æ¸²æŸ“å¤±è´¥: ${le instanceof Error?le.message:String(le)}`;y.value=Z,console.error("[iOS MJPEG]",Z),$.value=!0}}finally{ce(),J(),C=null,k=null}})()}function I(){k&&k.abort(),ce()}async function X(){if(E.value){console.log("[iOS MJPEG] Stream already started");return}try{console.log("[iOS MJPEG] Starting WDA MJPEG stream..."),await Ue(c.value,d.value,"start_mjpeg_stream",{}),E.value=!0,y.value=null,L(),$.value=!1,console.log("[iOS MJPEG] Stream started:",F.value),S.value&&H()}catch(N){const q=`Failed to start iOS MJPEG stream: ${N instanceof Error?N.message:String(N)}`;y.value=q,console.error("[iOS MJPEG]",q,N)}}async function j(){if(E.value)try{console.log("[iOS MJPEG] Stopping MJPEG stream..."),I(),await Ue(c.value,d.value,"stop_mjpeg_stream",{}),E.value=!1,L(),console.log("[iOS MJPEG] Stream stopped")}catch(N){const q=`Failed to stop iOS MJPEG stream: ${N instanceof Error?N.message:String(N)}`;y.value=q,console.error("[iOS MJPEG]",q,N)}}return Re(p,async N=>{N?await X():await j()},{immediate:!0}),Re(()=>S.value&&E.value,N=>{N?H():I()}),sn(()=>{I(),E.value&&j().catch(N=>{console.warn("[iOS MJPEG] Cleanup error:",N)})}),{streamUrl:F,isStreaming:E,error:y,fps:_,updateFps:G,useCanvasRenderer:S,canvasRef:g,startStream:X,stopStream:j}}const Kr={class:"screen-panel",ref:"containerRef"},Zr={class:"mode-selector"},Qr={class:"info-display"},ea={key:0,class:"fps-badge"},ta={class:"canvas-container"},na={class:"canvas-wrapper"},ra=["src"],aa=ve({__name:"ScreenPanel",props:{platform:{},serial:{},screenSize:{},screenMode:{}},emits:["tap","recordTap","recordSwipe","element-selected","screenshot-cropped"],setup(a,{expose:c,emit:d}){const p=a,{platform:g,serial:h}=ln(p),A=d,$=nt(),S=ft(),E=Ze(),y=fe(()=>E.t.screen),_=O("default"),U=O({x:0,y:0}),z=O(!1),M=O([]),R=O(null),k=O(null);Re(()=>p.screenMode,n=>{n&&(_.value=n)},{immediate:!0});const C=fe(()=>g.value==="android"&&_.value==="pointer"),F=fe(()=>g.value==="ios"&&_.value==="pointer"),L=O(null),G=O(null),J=O(null),{canvasRef:ce,addRect:xe,addTrack:H,addCropRect:I,clearShapes:X,clearShapesByType:j,resizeCanvas:N}=Rr(),q=Gr({platform:g,serial:h,videoRef:J}),ie=qr({platform:g,serial:h,enabled:F,canvasRef:G,preferCanvas:Zt}),le=fe(()=>ie.useCanvasRenderer.value);Re(()=>ie.error.value,(n,s)=>{n&&n!==s&&$.error(n)});const Z=fe(()=>F.value&&ie.fps.value>0),ke=fe(()=>F.value&&ie.streamUrl.value?ie.streamUrl.value:S.screenshotUrl),B=fe(()=>({width:p.screenSize?.width||S.screenSize?.width||0,height:p.screenSize?.height||S.screenSize?.height||0})),de=fe(()=>{const n=B.value.width,s=B.value.height;return!n||!s?{x:0,y:0}:{x:Math.round(U.value.x/n*100),y:Math.round(U.value.y/s*100)}});function ue(){if(!L.value)return;const n=L.value.naturalWidth,s=L.value.naturalHeight;N(n,s),F.value&&ie.updateFps()}function me(){$.error("æˆªå›¾åŠ è½½å¤±è´¥")}function Ce(){if(!J.value)return;const n=J.value.videoWidth||B.value.width,s=J.value.videoHeight||B.value.height;N(n,s),q&&!q.connected.value&&q.connect()}Re(()=>_.value,n=>{n==="pointer"&&(S.selectNode(null),j("select"),j("hover"))}),Re(()=>C.value,async(n,s)=>{if(s===void 0&&!n){console.log("[ScreenPanel] Initial state: Screenshot mode");return}n?(console.log("[ScreenPanel] Switching to Scrcpy mode, waiting for video element..."),await gt(),console.log("[ScreenPanel] Video element ready, connecting..."),q.connect()):(console.log("[ScreenPanel] Switching to Screenshot mode, disconnecting..."),q.disconnect())}),Re(J,n=>{n&&C.value&&n.addEventListener("loadedmetadata",Ce)},{immediate:!0}),lt(()=>{q.disconnect()});let K=null;Re(G,(n,s)=>{K&&s&&K.unobserve(s),n&&(K||(K=new ResizeObserver(e=>{for(const t of e){const r=t.target;r.width&&r.height&&N(r.width,r.height)}})),K.observe(n))},{immediate:!0}),lt(()=>{K&&(K.disconnect(),K=null)});function te(n){const s=oe();if(!s)return null;const e=s.getBoundingClientRect(),{width:t,height:r}=B.value;if(!t||!r)return null;const l=t/e.width,f=r/e.height,m=Math.round((n.clientX-e.left)*l),b=Math.round((n.clientY-e.top)*f);return{x:m,y:b}}function oe(){return C.value?J.value:le.value?G.value:L.value}function Ie(n){if(!ce.value)return null;const s=ce.value.getBoundingClientRect(),e=ce.value.width/s.width,t=ce.value.height/s.height,r=(n.clientX-s.left)*e,l=(n.clientY-s.top)*t;return{x:r,y:l}}function je(n){if(!ce.value)return null;const{width:s,height:e}=B.value;if(!s||!e)return null;const t=s/ce.value.width,r=e/ce.value.height,l=Math.round(n.x*t),f=Math.round(n.y*r);return{x:l,y:f}}function He(n,s){if(!S.hierarchy?.nodes)return null;const{width:e,height:t}=B.value;if(!e||!t)return null;const r=n/e,l=s/t,f=[];function m(Y){Y.forEach(ne=>{ne.children&&m(ne.children),f.push(ne)})}m(S.hierarchy.nodes);let b=null,P=1/0;for(const Y of f){if(!Y.bounds)continue;const[ne,re,se,ge]=Y.bounds,Fe=se<=1&&ge<=1,Te=Fe?ne:ne/e,Pe=Fe?re:re/t,Ae=Fe?se:se/e,be=Fe?ge:ge/t;if(r>=Te&&r<=Ae&&l>=Pe&&l<=be){const Ge=(Ae-Te)*(be-Pe);Ge<P&&(P=Ge,b=Y)}}return b}function We(n){const s=te(n),e=Ie(n);if(!(!s||!e)){if(U.value=s,j("hover"),_.value==="default"||_.value==="assert-element"){const t=He(s.x,s.y);t&&t.bounds&&xe(t.bounds,"hover")}else if(_.value==="assert-screenshot"&&z.value){k.value=e,j("crop");const t=Math.min(R.value.x,k.value.x),r=Math.min(R.value.y,k.value.y),l=Math.abs(k.value.x-R.value.x),f=Math.abs(k.value.y-R.value.y);I(t,r,l,f)}else if(_.value==="pointer"&&z.value&&(M.value.push(e),j("hover"),H(M.value),C.value)){const{width:t,height:r}=B.value;t&&r&&q.sendTouch("move",s.x,s.y,t,r)}}}function Ve(n){const s=te(n),e=Ie(n);if(!(!s||!e)){if(z.value=!0,M.value=[],_.value==="assert-screenshot")R.value=e,k.value=e;else if(_.value==="pointer"&&(M.value.push(e),C.value)){const{width:t,height:r}=B.value;t&&r&&q.sendTouch("down",s.x,s.y,t,r)}}}function Je(){if(M.value.length<2)return null;const n=M.value[0],s=M.value[M.value.length-1],e=je(n),t=je(s);if(!e||!t)return null;const r=Math.max(.2,Math.min(1,M.value.length/60));return{startX:e.x,startY:e.y,endX:t.x,endY:t.y,duration:r}}async function De(n,s){const e=Math.min(n.x,s.x),t=Math.min(n.y,s.y),r=Math.abs(s.x-n.x),l=Math.abs(s.y-n.y),f=oe();if(!f)throw new Error("æ— æ³•èŽ·å–å±å¹•æˆªå›¾æº");const m=document.createElement("canvas");m.width=r,m.height=l;const b=m.getContext("2d");if(!b)throw new Error("æ— æ³•åˆ›å»º Canvas ä¸Šä¸‹æ–‡");if(f instanceof HTMLImageElement){const P=f.naturalWidth/ce.value.width,Y=f.naturalHeight/ce.value.height;b.drawImage(f,e*P,t*Y,r*P,l*Y,0,0,r,l)}else f instanceof HTMLCanvasElement&&b.drawImage(f,e,t,r,l,0,0,r,l);return m.toDataURL("image/png")}async function at(n){const s=te(n);if(s){if(z.value=!1,_.value==="default"){const e=He(s.x,s.y);e&&(S.selectNode(e),j("select"),e.bounds&&xe(e.bounds,"select"))}else if(_.value==="assert-element"){const e=He(s.x,s.y);e&&(A("element-selected",e),j("hover"))}else if(_.value==="assert-screenshot"){if(R.value&&k.value){try{const e=await De(R.value,k.value);A("screenshot-cropped",e)}catch(e){$.error(`æˆªå›¾è£å‰ªå¤±è´¥: ${e instanceof Error?e.message:String(e)}`)}j("crop"),R.value=null,k.value=null}}else if(_.value==="pointer")try{A("tap",s.x,s.y);const e=null,t=M.value.length>5;if(C.value){const{width:r,height:l}=B.value;r&&l&&q.sendTouch("up",s.x,s.y,r,l);const f=t?Je():null;f?A("recordSwipe",f.startX,f.startY,f.endX,f.endY,f.duration,e):A("recordTap",s.x,s.y,e)}else{const r=t?Je():null;r?(await Ue(p.platform,p.serial,"swipe",{startX:r.startX,startY:r.startY,endX:r.endX,endY:r.endY,duration:r.duration}),A("recordSwipe",r.startX,r.startY,r.endX,r.endY,r.duration,e),$.success(`æ»‘åŠ¨: (${r.startX}, ${r.startY}) â†’ (${r.endX}, ${r.endY})`)):(await bt(p.platform,p.serial,s.x,s.y),A("recordTap",s.x,s.y,e),$.success(`ç‚¹å‡»: (${s.x}, ${s.y})`))}}catch(e){$.error(`æ“ä½œå¤±è´¥: ${e instanceof Error?e.message:String(e)}`)}M.value=[],j("hover")}}function Qe(){if(z.value&&_.value==="pointer"&&C.value){const n=M.value[M.value.length-1];if(n){const s=je(n),{width:e,height:t}=B.value;s&&e&&t&&q.sendTouch("up",s.x,s.y,e,t)}}z.value=!1,M.value=[],j("hover")}return Re(()=>S.selectedNode,n=>{j("select"),n&&n.bounds&&xe(n.bounds,"select")}),c({clearShapes:X,resizeCanvas:N}),(n,s)=>(T(),W("div",Kr,[x("div",Zr,[i(o(st),{value:_.value,"onUpdate:value":s[0]||(s[0]=e=>_.value=e),size:"small"},{default:u(()=>[i(o(ut),{value:"default"},{default:u(()=>[i(o(pe),null,{default:u(()=>[i(o(Xn))]),_:1}),V(" "+D(y.value.viewMode),1)]),_:1}),i(o(ut),{value:"pointer"},{default:u(()=>[i(o(pe),null,{default:u(()=>[i(o(Yn))]),_:1}),V(" "+D(y.value.pointerMode),1)]),_:1})]),_:1},8,["value"]),x("div",Qr,[Z.value?(T(),W("span",ea,D(o(ie).fps.value)+" FPS",1)):he("",!0),x("span",null,D(B.value.width)+"x"+D(B.value.height),1),x("span",null,D(U.value.x)+", "+D(U.value.y),1),x("span",null,D(de.value.x)+"%, "+D(de.value.y)+"%",1)])]),x("div",ta,[x("div",na,[!C.value&&le.value?(T(),W("canvas",{key:0,ref_key:"mjpegCanvasRef",ref:G,class:"screen-image"},null,512)):C.value?(T(),W("video",{key:2,ref_key:"videoRef",ref:J,class:"screen-video",autoplay:"",muted:""},null,512)):(T(),W("img",{key:1,ref_key:"imageRef",ref:L,src:ke.value,class:"screen-image",onLoad:ue,onError:me},null,40,ra)),x("canvas",{ref_key:"drawingCanvas",ref:ce,class:"drawing-canvas",onMousemove:We,onMousedown:Ve,onMouseup:at,onMouseleave:Qe},null,544)])])],512))}}),oa=Ne(aa,[["__scopeId","data-v-70dcf9b7"]]),sa={class:"hierarchy-panel"},ia={class:"hierarchy-search-bar"},la={key:0,class:"search-results-info"},ua={key:1,class:"search-results-list"},ca=["onClick"],da={class:"result-index"},fa={class:"result-content"},va={class:"result-primary"},pa={class:"result-secondary"},ha={key:0,class:"result-tag"},ma={key:1,class:"result-tag"},ga={key:2,class:"result-tag"},ya=ve({__name:"HierarchyPanel",props:{platform:{},serial:{}},setup(a){const c=a,d=nt(),p=ft(),g=Ze(),h=fe(()=>g.t.hierarchy),A=O(""),$=O([]),S=O(!1),E=O(c.platform==="ios"?"label":"text"),y=fe(()=>c.platform==="ios"?[{label:h.value.searchType.label,value:"label"},{label:h.value.searchType.xpath,value:"xpath"},{label:h.value.searchType.className,value:"className"}]:[{label:h.value.searchType.text,value:"text"},{label:h.value.searchType.xpath,value:"xpath"},{label:h.value.searchType.id,value:"id"},{label:h.value.searchType.className,value:"className"}]);Re(()=>c.platform,I=>{if(I==="ios"){E.value!=="label"&&E.value!=="xpath"&&E.value!=="className"&&(E.value="label");return}E.value==="label"&&(E.value="text")},{immediate:!0});const _=O(new Map),U=O([]),z=O([]);function M(I,X=""){return I.map((j,N)=>{const q=X?`${X}-${N}`:`${N}`;_.value.set(q,j);const ie=j.children&&j.children.length>0;return{key:q,label:`${N} ${j.class_name||"Node"}`,prefix:()=>we(pe,null,{default:()=>we(ie?qn:jn)}),children:ie?M(j.children,q):void 0,isLeaf:!ie,raw:j}})}function R({option:I}){const X=I.raw,j=(I.label||"").split(" ")[0],N=X.class_name||"Node",q=[we("span",{class:"tree-node-index"},`${j} `),we("span",{class:"tree-node-class"},N)];if(X.resource_id){const ie=X.resource_id.split("/").pop()||X.resource_id;q.push(we("span",{class:"tree-node-highlight"},` id=${ie}`))}return X.text&&q.push(we("span",{class:"tree-node-highlight"},` text=${X.text}`)),X.label&&q.push(we("span",{class:"tree-node-highlight"},` label=${X.label}`)),we("span",{},q)}const k=fe(()=>p.hierarchy?.nodes?(_.value.clear(),M(p.hierarchy.nodes)):[]);async function C(){if(!A.value.trim()){d.warning(h.value.searchPlaceholder);return}S.value=!0;try{await p.refreshHierarchy();const I=A.value.trim(),X=p.hierarchy?{width:p.hierarchy.width,height:p.hierarchy.height}:void 0,j=await Ue(c.platform,c.serial,"findElements",{by:E.value,value:I});if(j&&typeof j=="object"&&"value"in j){const N=j;$.value=N.value.map(q=>Et(q,X)),N.count===0?d.warning(h.value.noResults):N.count===1?G($.value[0]):d.success(g.format(h.value.foundResults,{count:N.count}))}else Array.isArray(j)?($.value=j.map(N=>Et(N,X)),j.length===1?G($.value[0]):d.success(g.format(h.value.foundResults,{count:j.length}))):($.value=[],d.warning(h.value.noResults))}catch(I){d.error(`${h.value.searchPlaceholder}: ${I instanceof Error?I.message:String(I)}`),$.value=[]}finally{S.value=!1}}function F(I,X,j=""){if(!I||I.length!==4)return null;for(let N=0;N<X.length;N++){const q=X[N],ie=j?`${j}-${N}`:`${N}`,le=q?.raw;if(le?.bounds){const Z=le.bounds;if(Z[0]===I[0]&&Z[1]===I[1]&&Z[2]===I[2]&&Z[3]===I[3])return ie}if(q&&q.children){const Z=F(I,q.children,ie);if(Z)return Z}}return null}function L(I){const X=I.split("-"),j=[];for(let N=1;N<X.length;N++)j.push(X.slice(0,N).join("-"));return j}async function G(I){await gt();const X=F(I.bounds,k.value);if(X){const j=L(X),N=new Set([...z.value,...j]);z.value=Array.from(N),U.value=[X];const q=_.value.get(X);q&&p.selectNode(q),d.success("å·²é€‰ä¸­å¹¶å®šä½åˆ°å…ƒç´ ")}else p.selectNode(I),d.warning("å·²é€‰ä¸­å…ƒç´ ï¼Œä½†æ— æ³•åœ¨æ ‘ä¸­å®šä½ï¼ˆå¯èƒ½éœ€è¦åˆ·æ–°ï¼‰")}function J(){A.value="",$.value=[]}function ce(I,X){const j=X[0];if(j&&j.raw){const N=j.raw;p.selectNode(N)}}function xe(I){z.value=I}const H=({option:I})=>({onDblclick(){if(!I.isLeaf){const X=I.key;z.value.includes(X)?z.value=z.value.filter(j=>j!==X):z.value=[...z.value,X]}}});return Re(()=>p.selectedNode,async I=>{if(!I){U.value=[];return}await gt();const X=F(I.bounds,k.value);if(X){const j=L(X),N=new Set([...z.value,...j]);z.value=Array.from(N),U.value=[X]}},{deep:!0}),(I,X)=>{const j=Xe("n-select"),N=Xe("n-button"),q=Xe("n-input"),ie=Xe("n-tree"),le=Xe("n-empty");return T(),W("div",sa,[x("div",ia,[i(j,{value:E.value,"onUpdate:value":X[0]||(X[0]=Z=>E.value=Z),options:y.value,size:"small",style:{width:"160px","flex-shrink":"0"}},null,8,["value","options"]),i(q,{value:A.value,"onUpdate:value":X[1]||(X[1]=Z=>A.value=Z),placeholder:h.value.searchPlaceholder,clearable:"",onKeydown:jt(C,["enter"]),style:{flex:"1"}},{suffix:u(()=>[i(N,{text:"",onClick:C,loading:S.value,disabled:!A.value.trim()},{icon:u(()=>[i(o(pe),null,{default:u(()=>[i(o(hr))]),_:1})]),_:1},8,["loading","disabled"])]),_:1},8,["value","placeholder"])]),$.value.length>0?(T(),W("div",la,[x("span",null,D(o(g).format(h.value.foundResults,{count:$.value.length})),1),i(N,{text:"",size:"small",onClick:J},{icon:u(()=>[i(o(pe),null,{default:u(()=>[i(o(On))]),_:1})]),default:u(()=>[V(" "+D(o(g).t.common.clear),1)]),_:1})])):he("",!0),$.value.length>0?(T(),W("div",ua,[(T(!0),W(Ye,null,Ke($.value,(Z,ke)=>(T(),W("div",{key:ke,class:"search-result-item",onClick:B=>G(Z)},[x("div",da,D(ke+1),1),x("div",fa,[x("div",va,D(Z.text||Z.label||Z.resource_id||Z.class_name||`${h.value.noElement} ${ke+1}`),1),x("div",pa,[Z.resource_id?(T(),W("span",ha,D(Z.resource_id),1)):he("",!0),Z.label?(T(),W("span",ma,D(Z.label),1)):he("",!0),Z.class_name?(T(),W("span",ga,D(Z.class_name),1)):he("",!0)])]),i(o(pe),{size:"16",color:"var(--md-primary)"},{default:u(()=>[i(o(Yt))]),_:1})],8,ca))),128))])):he("",!0),k.value.length>0?(T(),ye(ie,{key:2,data:k.value,"selected-keys":U.value,"expanded-keys":z.value,"node-props":H,"render-label":R,selectable:"","block-line":"","onUpdate:selectedKeys":ce,"onUpdate:expandedKeys":xe},null,8,["data","selected-keys","expanded-keys"])):(T(),ye(le,{key:3,description:h.value.noElement},null,8,["description"]))])}}}),xa=Ne(ya,[["__scopeId","data-v-14702f1c"]]);function wa(a){const c=Math.floor(a/1e3),d=Math.floor(c/60),p=c%60;return`${d.toString().padStart(2,"0")}:${p.toString().padStart(2,"0")}`}function Qt(a){return a<1e3?`${a}ms`:`${(a/1e3).toFixed(1)}s`}function ka(a){return a<1024?`${a}B`:a<1024*1024?`${(a/1024).toFixed(1)}KB`:`${(a/(1024*1024)).toFixed(1)}MB`}function ba(a){const c=new Date(a*1e3),p=new Date().getTime()-c.getTime(),g=Math.floor(p/(1e3*60*60*24));return g===0?c.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):g===1?"æ˜¨å¤© "+c.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):g<7?`${g}å¤©å‰`:c.toLocaleDateString("zh-CN",{month:"short",day:"numeric"})}function Lt(a){return a?a.text?`æ–‡æœ¬: "${a.text}"`:a.label?`label: "${a.label}"`:a.content_desc?`æè¿°: "${a.content_desc}"`:a.resource_id?`ID: ${a.resource_id.split("/").pop()}`:a.class_name?`ç±»: ${a.class_name.split(".").pop()}`:null:null}function en(a){switch(a.type){case"tap":{const c=Lt(a.element);return c||(a.xpath?`XPathå…ƒç´  (${Math.round(a.coords.x)}, ${Math.round(a.coords.y)})`:`åæ ‡ (${Math.round(a.coords.x)}, ${Math.round(a.coords.y)})`)}case"swipe":{const c=Lt(a.element);return c?`${c} â†’ (${Math.round(a.endCoords.x)}, ${Math.round(a.endCoords.y)})`:`(${Math.round(a.coords.x)}, ${Math.round(a.coords.y)}) â†’ (${Math.round(a.endCoords.x)}, ${Math.round(a.endCoords.y)})`}case"input":return`"${a.params.text}"`;case"sleep":return`${a.params.duration}ms`;case"command":return a.params.command;case"assert":{const c=a.params,d=c.conditions.length,p=c.operator.toUpperCase();return`${d}ä¸ªæ¡ä»¶ (${p})`}default:return JSON.stringify(a.params)}}function $t(a){switch(a){case"tap":return"primary";case"swipe":return"success";case"input":return"warning";case"sleep":return"default";case"command":case"back":case"home":return"error";case"assert":return"info";default:return"default"}}function Sa(a){switch(a){case"idle":return"default";case"playing":return"success";case"paused":return"warning";case"completed":return"primary";case"error":return"error";default:return"default"}}function _a(a){switch(a){case"idle":return"å¾…æ’­æ”¾";case"playing":return"æ’­æ”¾ä¸­";case"paused":return"å·²æš‚åœ";case"completed":return"å·²å®Œæˆ";case"error":return"é”™è¯¯";default:return a}}const Ca={class:"tab-content"},$a={class:"control-bar"},Pa={key:0,class:"recording-indicator"},Aa={class:"duration"},Fa={class:"steps-section"},Ea={key:0,class:"steps-list"},Ta={class:"step-index"},Ua={class:"step-details"},Da={class:"step-time"},Ma=ve({__name:"RecordTab",props:{recorder:{},currentPlaybackIndex:{},isPlaybackActive:{type:Boolean},t:{}},emits:["toggle-recording","toggle-pause","clear-recording","save-recording","edit-action","delete-action","assert-menu-select"],setup(a,{emit:c}){const d=a,p=c,g=fe(()=>[{label:d.t.elementAssertion,key:"element"},{label:d.t.screenshotAssertion,key:"screenshot"},{label:d.t.combinedAssertion,key:"combined"}]);function h(A){p("assert-menu-select",A)}return(A,$)=>(T(),W("div",Ca,[x("div",$a,[i(o(Be),{size:8},{default:u(()=>[i(o(ae),{type:a.recorder.isRecording.value?"error":"primary",disabled:a.isPlaybackActive,onClick:$[0]||($[0]=S=>A.$emit("toggle-recording"))},{icon:u(()=>[i(o(pe),null,{default:u(()=>[a.recorder.isRecording.value?(T(),ye(o(_t),{key:1})):(T(),ye(o(xt),{key:0}))]),_:1})]),default:u(()=>[V(" "+D(a.recorder.isRecording.value?a.t.stopRecording:a.t.startRecording),1)]),_:1},8,["type","disabled"]),a.recorder.isRecording.value?(T(),ye(o(ae),{key:0,type:a.recorder.isPaused.value?"default":"warning",onClick:$[1]||($[1]=S=>A.$emit("toggle-pause"))},{default:u(()=>[V(D(a.recorder.isPaused.value?a.t.continueRecording:a.t.pauseRecording),1)]),_:1},8,["type"])):he("",!0),a.recorder.isRecording.value||a.recorder.actionCount.value>0?(T(),ye(o(un),{key:1,trigger:"click",options:g.value,onSelect:h,disabled:a.recorder.isPaused.value},{default:u(()=>[i(o(ae),{disabled:a.recorder.isPaused.value},{icon:u(()=>[i(o(pe),null,{default:u(()=>[i(o(Bn))]),_:1})]),default:u(()=>[V(" "+D(a.t.assert),1)]),_:1},8,["disabled"])]),_:1},8,["options","disabled"])):he("",!0),i(o(ae),{disabled:a.recorder.actionCount.value===0,onClick:$[2]||($[2]=S=>A.$emit("clear-recording"))},{default:u(()=>[V(D(a.t.clearRecording)+" ("+D(a.recorder.actionCount.value)+") ",1)]),_:1},8,["disabled"])]),_:1}),i(o(Be),{size:8},{default:u(()=>[i(o(ae),{disabled:a.recorder.actionCount.value===0,onClick:$[3]||($[3]=S=>A.$emit("save-recording"))},{icon:u(()=>[i(o(pe),null,{default:u(()=>[i(o(vr))]),_:1})]),default:u(()=>[V(" "+D(a.t.saveRecording),1)]),_:1},8,["disabled"])]),_:1})]),a.recorder.isRecording.value?(T(),W("div",Pa,[i(o(et),{type:a.recorder.isPaused.value?"warning":"error",round:""},{icon:u(()=>[i(o(pe),null,{default:u(()=>[i(o(xt))]),_:1})]),default:u(()=>[V(" "+D(a.recorder.isPaused.value?a.t.recordingPaused:a.t.recording),1)]),_:1},8,["type"]),x("span",Aa,D(o(wa)(a.recorder.duration.value)),1)])):he("",!0),x("div",Fa,[x("h3",null,D(a.t.operationSteps)+" ("+D(a.recorder.actionCount.value)+")",1),a.recorder.actionCount.value>0?(T(),W("div",Ea,[(T(!0),W(Ye,null,Ke(a.recorder.actions.value,(S,E)=>(T(),W("div",{key:S.id,class:Ht(["step-item",{active:a.currentPlaybackIndex===E}])},[x("span",Ta,D(Number(E)+1),1),i(o(et),{type:o($t)(S.type),size:"small"},{default:u(()=>[V(D(S.type),1)]),_:2},1032,["type"]),x("span",Ua,D(o(en)(S)),1),x("span",Da,D(o(Qt)(S.relativeTime)),1),i(o(Vt),{size:"tiny"},{default:u(()=>[i(o(ae),{onClick:y=>A.$emit("edit-action",S)},{default:u(()=>[i(o(pe),null,{default:u(()=>[i(o(Jt))]),_:1})]),_:1},8,["onClick"]),i(o(ae),{onClick:y=>A.$emit("delete-action",S.id)},{default:u(()=>[i(o(pe),null,{default:u(()=>[i(o(Ct))]),_:1})]),_:1},8,["onClick"])]),_:2},1024)],2))),128))])):(T(),ye(o(ct),{key:1,description:a.t.noOperations},null,8,["description"]))])]))}}),Ra=Ne(Ma,[["__scopeId","data-v-67dedb12"]]),Ba={class:"playback-tab-layout"},Ia={class:"recordings-section"},Oa={class:"section-header"},La={class:"playback-controls-divider"},za={class:"control-bar"},Na={class:"progress-text"},ja={key:0,class:"error-message-compact"},Ha={class:"playback-steps-section"},Va={key:0,class:"steps-list"},Ga={class:"step-index"},Xa={class:"step-details"},Wa={class:"step-time"},Ya=ve({__name:"PlaybackTab",props:{player:{},recordings:{},loading:{type:Boolean},isRecordingActive:{type:Boolean},t:{},commonT:{}},emits:["refresh-recordings","start-playback","load-recording","edit-recording","delete-recording"],setup(a,{emit:c}){const d=a,p=c,g=fe(()=>{if(d.recordings.length===0)return[];const E=new Map;d.recordings.forEach(_=>{const U=_.group||"default",z=E.get(U);z?z.push(_):E.set(U,[_])});const y=[];return E.forEach((_,U)=>{const z={key:`group-${U}`,label:U,isGroup:!0,children:_.map(M=>({key:`${M.group}/${M.name}`,label:M.name,recording:M}))};y.push(z)}),y}),h=fe(()=>g.value.map(E=>E.key));function A({option:E}){const y=E;if(y.isGroup){const _=y.children?.length||0;return we("span",{class:"tree-group-label"},[we("span",{class:"group-name"},y.label),we("span",{class:"group-count"},`(${_})`)])}else{const _=y.recording;return we("div",{class:"tree-recording-label"},[we("div",{class:"recording-name"},_.name),we("div",{class:"recording-meta"},[we("span",{class:"meta-item"},ka(_.size)),we("span",{class:"meta-item"},ba(_.modified_at))])])}}function $({option:E}){const y=E;if(y.isGroup||!y.recording)return null;const _=y.recording;return we("div",{class:"tree-node-actions",onClick:U=>U.stopPropagation()},[we(ae,{size:"tiny",quaternary:!0,onClick:()=>p("load-recording",_.group,_.name)},{icon:()=>we(pe,null,{default:()=>we(ar)})}),we(ae,{size:"tiny",quaternary:!0,onClick:()=>p("edit-recording",_.group,_.name)},{icon:()=>we(pe,null,{default:()=>we(Jt)})}),we(ae,{size:"tiny",quaternary:!0,onClick:()=>p("delete-recording",_.group,_.name)},{icon:()=>we(pe,null,{default:()=>we(Ct)})})])}function S({option:E}){const y=E;return y.isGroup?{}:{onClick:()=>{y.recording&&p("load-recording",y.recording.group,y.recording.name)}}}return(E,y)=>(T(),W("div",Ba,[x("div",Ia,[x("div",Oa,[x("h3",null,D(a.t.recordingList)+" ("+D(g.value.length>0?g.value.reduce((_,U)=>_+(U.children?.length||0),0):0)+")",1),i(o(ae),{size:"small",onClick:y[0]||(y[0]=_=>E.$emit("refresh-recordings")),loading:a.loading},{icon:u(()=>[i(o(pe),null,{default:u(()=>[i(o(St))]),_:1})]),default:u(()=>[V(" "+D(a.commonT.refresh),1)]),_:1},8,["loading"])]),g.value.length>0?(T(),ye(o(cn),{key:0,data:g.value,"render-label":A,"render-suffix":$,"node-props":S,"block-line":"","expand-on-click":"","default-expanded-keys":h.value},null,8,["data","default-expanded-keys"])):(T(),ye(o(ct),{key:1,description:a.t.noRecordings},null,8,["description"]))]),x("div",La,[x("div",za,[i(o(Be),{size:8},{default:u(()=>[i(o(ae),{type:"success",disabled:!a.player.canPlay.value||a.isRecordingActive,loading:a.player.isPlaying.value,onClick:y[1]||(y[1]=_=>E.$emit("start-playback"))},{icon:u(()=>[i(o(pe),null,{default:u(()=>[i(o(sr))]),_:1})]),default:u(()=>[V(" "+D(a.t.play),1)]),_:1},8,["disabled","loading"]),a.player.isPlaying.value?(T(),ye(o(ae),{key:0,onClick:y[2]||(y[2]=_=>a.player.pause())},{icon:u(()=>[i(o(pe),null,{default:u(()=>[i(o(nr))]),_:1})]),default:u(()=>[V(" "+D(a.t.pause),1)]),_:1})):he("",!0),i(o(ae),{disabled:!a.player.isPlaying.value&&!a.player.isPaused.value,onClick:y[3]||(y[3]=_=>a.player.stop())},{icon:u(()=>[i(o(pe),null,{default:u(()=>[i(o(_t))]),_:1})]),default:u(()=>[V(" "+D(a.t.stop),1)]),_:1},8,["disabled"]),i(o(ae),{disabled:!a.player.isPaused.value,onClick:y[4]||(y[4]=_=>a.player.stepNext())},{icon:u(()=>[i(o(pe),null,{default:u(()=>[i(o(lr))]),_:1})]),default:u(()=>[V(" "+D(a.t.step),1)]),_:1},8,["disabled"])]),_:1}),a.player.recording.value?(T(),ye(o(Be),{key:0,size:8,align:"center"},{default:u(()=>[x("span",Na,D(a.t.progress)+": "+D(a.player.progress.value.currentIndex+1)+" / "+D(a.player.progress.value.totalSteps),1),i(o(et),{type:o(Sa)(a.player.state.value),size:"small"},{default:u(()=>[V(D(o(_a)(a.player.state.value)),1)]),_:1},8,["type"])]),_:1})):he("",!0)]),a.player.error.value?(T(),W("div",ja,[i(o(ot),{type:"error",title:a.player.error.value,closable:""},null,8,["title"])])):he("",!0)]),x("div",Ha,[a.player.recording.value?(T(),W("div",Va,[(T(!0),W(Ye,null,Ke(a.player.recording.value.actions,(_,U)=>(T(),W("div",{key:_.id,class:Ht(["step-item",{active:a.player.currentIndex.value===U,completed:a.player.currentIndex.value>U,pending:a.player.currentIndex.value<U}])},[x("span",Ga,D(Number(U)+1),1),i(o(et),{type:o($t)(_.type),size:"small"},{default:u(()=>[V(D(_.type),1)]),_:2},1032,["type"]),x("span",Xa,D(o(en)(_)),1),x("span",Wa,D(o(Qt)(_.relativeTime)),1)],2))),128))])):(T(),ye(o(ct),{key:1,description:a.t.selectRecording},null,8,["description"]))])]))}}),Ja=Ne(Ya,[["__scopeId","data-v-87bae0b8"]]);function qa(a){return JSON.parse(JSON.stringify(a))}const Ka=ve({__name:"ActionEditDialog",props:At({action:{},screenSize:{}},{show:{type:Boolean,required:!0},showModifiers:{}}),emits:At(["save","cancel"],["update:show"]),setup(a,{emit:c}){const d=a,p=c,g=Ze(),h=fe(()=>({common:g.t.common,actions:g.t.actions})),A=dn(a,"show"),$=O(null),S=fe(()=>d.action),E=fe(()=>{if(!S.value)return h.value.actions.editAction;const M=h.value.actions.actionTypes[S.value.type]||S.value.type;return`${h.value.actions.editAction} - ${M}`}),y=O({relativeTime:0,coords:{x:0,y:0,scaleX:0,scaleY:0},endCoords:{x:0,y:0,scaleX:0,scaleY:0},xpath:{selector:"",fallbackCoords:{x:0,y:0}},params:{}});Re(()=>d.action,M=>{M&&(y.value=qa(M),y.value.coords||(y.value.coords={x:0,y:0,scaleX:0,scaleY:0}),y.value.endCoords||(y.value.endCoords={x:0,y:0,scaleX:0,scaleY:0}),y.value.xpath||(y.value.xpath={selector:"",fallbackCoords:{x:0,y:0}}),y.value.params||(y.value.params={}))},{immediate:!0});const _=fe(()=>({relativeTime:[{required:!0,type:"number",message:`${h.value.actions.relativeTime}ä¸èƒ½ä¸ºç©º`,trigger:"blur"},{type:"number",min:0,message:"ä¸èƒ½ä¸ºè´Ÿæ•°",trigger:"blur"}],"coords.x":[{required:!0,type:"number",message:`${h.value.actions.coordinateX}ä¸èƒ½ä¸ºç©º`,trigger:"blur"},{type:"number",min:0,message:"ä¸èƒ½ä¸ºè´Ÿæ•°",trigger:"blur"}],"coords.y":[{required:!0,type:"number",message:`${h.value.actions.coordinateY}ä¸èƒ½ä¸ºç©º`,trigger:"blur"},{type:"number",min:0,message:"ä¸èƒ½ä¸ºè´Ÿæ•°",trigger:"blur"}],"endCoords.x":[{required:!0,type:"number",message:`${h.value.actions.coordinateX}ä¸èƒ½ä¸ºç©º`,trigger:"blur"},{type:"number",min:0,message:"ä¸èƒ½ä¸ºè´Ÿæ•°",trigger:"blur"}],"endCoords.y":[{required:!0,type:"number",message:`${h.value.actions.coordinateY}ä¸èƒ½ä¸ºç©º`,trigger:"blur"},{type:"number",min:0,message:"ä¸èƒ½ä¸ºè´Ÿæ•°",trigger:"blur"}],"params.text":[{required:!0,message:`${h.value.actions.inputText}ä¸èƒ½ä¸ºç©º`,trigger:"blur"}],"params.duration":[{required:!0,type:"number",message:"æ—¶é•¿ä¸èƒ½ä¸ºç©º",trigger:"blur"}],"params.command":[{required:!0,message:"å‘½ä»¤ä¸èƒ½ä¸ºç©º",trigger:"blur"}]}));async function U(){if(!(!$.value||!S.value))try{await $.value.validate();const M={};if(y.value.relativeTime!==S.value.relativeTime&&(M.relativeTime=y.value.relativeTime),S.value.type==="tap"){if(y.value.coords.x!==S.value.coords.x||y.value.coords.y!==S.value.coords.y){const{width:C,height:F}=d.screenSize;if(!C||!F||C<=0||F<=0){console.error(`Invalid screen size: ${C}x${F}. Cannot update coordinates.`);return}M.coords={x:y.value.coords.x,y:y.value.coords.y,scaleX:y.value.coords.x/C,scaleY:y.value.coords.y/F},M.params={x:y.value.coords.x,y:y.value.coords.y}}const R=S.value.xpath?.selector||"",k=y.value.xpath?.selector||"";R!==k&&(k?M.xpath={selector:k,fallbackCoords:{x:y.value.coords.x,y:y.value.coords.y}}:M.xpath=void 0)}else if(S.value.type==="swipe")if(y.value.coords.x!==S.value.coords.x||y.value.coords.y!==S.value.coords.y||y.value.endCoords.x!==S.value.endCoords.x||y.value.endCoords.y!==S.value.endCoords.y){const{width:k,height:C}=d.screenSize;if(!k||!C||k<=0||C<=0){console.error(`Invalid screen size: ${k}x${C}. Cannot update coordinates.`);return}M.coords={x:y.value.coords.x,y:y.value.coords.y,scaleX:y.value.coords.x/k,scaleY:y.value.coords.y/C},M.endCoords={x:y.value.endCoords.x,y:y.value.endCoords.y,scaleX:y.value.endCoords.x/k,scaleY:y.value.endCoords.y/C},M.params={startX:y.value.coords.x,startY:y.value.coords.y,endX:y.value.endCoords.x,endY:y.value.endCoords.y,duration:y.value.params.duration||.5}}else y.value.params.duration!==S.value.params.duration&&(M.params={...S.value.params,duration:y.value.params.duration});else S.value.type==="input"?y.value.params.text!==S.value.params.text&&(M.params={text:y.value.params.text}):S.value.type==="sleep"&&y.value.params.duration!==S.value.params.duration&&(M.params={duration:y.value.params.duration});p("save",S.value.id,M),A.value=!1}catch(M){console.warn("è¡¨å•éªŒè¯å¤±è´¥:",M)}}function z(){A.value=!1,p("cancel")}return(M,R)=>(T(),ye(o(rt),{show:A.value,"onUpdate:show":R[12]||(R[12]=k=>A.value=k),preset:"dialog",title:E.value,"positive-text":h.value.common.save,"negative-text":h.value.common.cancel,onPositiveClick:U,onNegativeClick:z},{default:u(()=>[S.value?(T(),ye(o(kt),{key:0,ref_key:"formRef",ref:$,model:y.value,rules:_.value,"label-placement":"left","label-width":"120","require-mark-placement":"left"},{default:u(()=>[i(o(Se),{label:h.value.actions.actionType},{default:u(()=>[i(o(et),{type:o($t)(S.value.type)},{default:u(()=>[V(D(h.value.actions.actionTypes[S.value.type]||S.value.type),1)]),_:1},8,["type"])]),_:1},8,["label"]),S.value.type==="tap"?(T(),W(Ye,{key:0},[i(o(Se),{label:h.value.actions.coordinateX,path:"coords.x"},{default:u(()=>[i(o(ze),{value:y.value.coords.x,"onUpdate:value":R[0]||(R[0]=k=>y.value.coords.x=k),min:0,precision:0,style:{width:"100%"}},null,8,["value"])]),_:1},8,["label"]),i(o(Se),{label:h.value.actions.coordinateY,path:"coords.y"},{default:u(()=>[i(o(ze),{value:y.value.coords.y,"onUpdate:value":R[1]||(R[1]=k=>y.value.coords.y=k),min:0,precision:0,style:{width:"100%"}},null,8,["value"])]),_:1},8,["label"]),i(o(Se),{label:h.value.actions.xpathSelector,path:"xpath.selector"},{default:u(()=>[i(o(Oe),{value:y.value.xpath.selector,"onUpdate:value":R[2]||(R[2]=k=>y.value.xpath.selector=k),type:"textarea",placeholder:h.value.actions.xpathPlaceholder,autosize:{minRows:2,maxRows:4}},null,8,["value","placeholder"])]),_:1},8,["label"])],64)):he("",!0),S.value.type==="swipe"?(T(),W(Ye,{key:1},[i(o(yt),{"title-placement":"left"},{default:u(()=>[V(D(h.value.actions.startPosition),1)]),_:1}),i(o(Se),{label:h.value.actions.coordinateX,path:"coords.x"},{default:u(()=>[i(o(ze),{value:y.value.coords.x,"onUpdate:value":R[3]||(R[3]=k=>y.value.coords.x=k),min:0,precision:0,style:{width:"100%"}},null,8,["value"])]),_:1},8,["label"]),i(o(Se),{label:h.value.actions.coordinateY,path:"coords.y"},{default:u(()=>[i(o(ze),{value:y.value.coords.y,"onUpdate:value":R[4]||(R[4]=k=>y.value.coords.y=k),min:0,precision:0,style:{width:"100%"}},null,8,["value"])]),_:1},8,["label"]),i(o(yt),{"title-placement":"left"},{default:u(()=>[V(D(h.value.actions.endPosition),1)]),_:1}),i(o(Se),{label:h.value.actions.coordinateX,path:"endCoords.x"},{default:u(()=>[i(o(ze),{value:y.value.endCoords.x,"onUpdate:value":R[5]||(R[5]=k=>y.value.endCoords.x=k),min:0,precision:0,style:{width:"100%"}},null,8,["value"])]),_:1},8,["label"]),i(o(Se),{label:h.value.actions.coordinateY,path:"endCoords.y"},{default:u(()=>[i(o(ze),{value:y.value.endCoords.y,"onUpdate:value":R[6]||(R[6]=k=>y.value.endCoords.y=k),min:0,precision:0,style:{width:"100%"}},null,8,["value"])]),_:1},8,["label"]),i(o(Se),{label:h.value.actions.swipeDuration,path:"params.duration"},{default:u(()=>[i(o(ze),{value:y.value.params.duration,"onUpdate:value":R[7]||(R[7]=k=>y.value.params.duration=k),min:.1,max:10,step:.1,precision:1,style:{width:"100%"}},{suffix:u(()=>[V(D(h.value.actions.seconds),1)]),_:1},8,["value"])]),_:1},8,["label"])],64)):he("",!0),S.value.type==="input"?(T(),ye(o(Se),{key:2,label:h.value.actions.inputText,path:"params.text"},{default:u(()=>[i(o(Oe),{value:y.value.params.text,"onUpdate:value":R[8]||(R[8]=k=>y.value.params.text=k),type:"textarea",placeholder:h.value.actions.inputText,autosize:{minRows:2,maxRows:6}},null,8,["value","placeholder"])]),_:1},8,["label"])):he("",!0),S.value.type==="sleep"?(T(),ye(o(Se),{key:3,label:h.value.actions.sleepDuration,path:"params.duration"},{default:u(()=>[i(o(ze),{value:y.value.params.duration,"onUpdate:value":R[9]||(R[9]=k=>y.value.params.duration=k),min:0,step:100,precision:0,style:{width:"100%"}},{suffix:u(()=>[V(D(h.value.actions.milliseconds),1)]),_:1},8,["value"])]),_:1},8,["label"])):he("",!0),S.value.type==="command"||S.value.type==="back"||S.value.type==="home"?(T(),ye(o(Se),{key:4,label:h.value.actions.command,path:"params.command"},{default:u(()=>[i(o(Oe),{value:y.value.params.command,"onUpdate:value":R[10]||(R[10]=k=>y.value.params.command=k),disabled:S.value.type==="back"||S.value.type==="home",placeholder:S.value.type==="back"?"back":S.value.type==="home"?"home":""},null,8,["value","disabled","placeholder"])]),_:1},8,["label"])):he("",!0),i(o(Se),{label:h.value.actions.relativeTime,path:"relativeTime"},{default:u(()=>[i(o(ze),{value:y.value.relativeTime,"onUpdate:value":R[11]||(R[11]=k=>y.value.relativeTime=k),min:0,step:100,precision:0,style:{width:"100%"}},{suffix:u(()=>[V(D(h.value.actions.milliseconds),1)]),_:1},8,["value"])]),_:1},8,["label"])]),_:1},8,["model","rules"])):he("",!0)]),_:1},8,["show","title","positive-text","negative-text"]))}}),Za=Ne(Ka,[["__scopeId","data-v-519ab678"]]);function Qa(a,c,d=!0){const p=d?JSON.stringify(a,null,2):JSON.stringify(a),g=new Blob([p],{type:"application/json"});eo(g,`${c}.json`)}function eo(a,c){const d=URL.createObjectURL(a),p=document.createElement("a");p.href=d,p.download=c,p.click(),setTimeout(()=>{URL.revokeObjectURL(d)},100)}function to(a,c,d){const p=O(!1),g=O(!1),h=O([]),A=O(0),$=O(`Recording_${Date.now()}`),S=O({captureScreenshots:!1,screenshotQuality:.6,recordElementDetails:!0}),E=fe(()=>h.value.length===0?0:h.value[h.value.length-1]?.relativeTime||0),y=fe(()=>h.value.length);function _(B){p.value=!0,g.value=!1,h.value=[],A.value=Date.now(),B&&($.value=B)}function U(){p.value=!1,g.value=!1}function z(){p.value&&(g.value=!0)}function M(){p.value&&(g.value=!1)}function R(){h.value=[],A.value=0}function k(B,de){const{width:ue,height:me}=d.value;if(!ue||!me||ue<=0||me<=0)throw new Error(`Invalid screen size: ${ue}x${me}. Recording requires valid screen dimensions.`);return{x:B,y:de,scaleX:B/ue,scaleY:de/me}}function C(B,de,ue){if(!(!B||!B.xpath))return{selector:B.xpath,fallbackCoords:{x:de,y:ue}}}function F(B){if(!(!B||!S.value.recordElementDetails))return{text:B.text,label:B.label,resource_id:B.resource_id,class_name:B.class_name,content_desc:B.content_desc,bounds:B.bounds||[0,0,0,0],key:B.key}}async function L(){S.value.captureScreenshots}async function G(B,de,ue,me,Ce){if(!p.value||g.value)return;const K=Date.now(),te={id:crypto.randomUUID(),timestamp:K,relativeTime:K-A.value,screenshot:await L()};let oe;switch(B){case"tap":oe={...te,type:"tap",coords:ue,xpath:ue?C(Ce||null,ue.x,ue.y):void 0,element:F(Ce||null),params:de};break;case"swipe":oe={...te,type:"swipe",coords:ue,endCoords:me,element:F(Ce||null),params:de};break;case"input":oe={...te,type:"input",element:F(Ce||null),params:de};break;case"sleep":oe={...te,type:"sleep",params:de};break;case"command":case"back":case"home":oe={...te,type:B,params:de};break;case"assert":oe={...te,type:"assert",params:de};break;default:console.warn("æœªçŸ¥æ“ä½œç±»åž‹ï¼Œè·³è¿‡å½•åˆ¶");return}h.value.push(oe)}async function J(B,de,ue){const me=k(B,de);await G("tap",{x:B,y:de},me,void 0,ue)}async function ce(B,de,ue,me,Ce,K){const te=k(B,de),oe=k(ue,me);await G("swipe",{startX:B,startY:de,endX:ue,endY:me,duration:Ce},te,oe,K)}async function xe(B,de){await G("input",{text:B},void 0,void 0,de)}async function H(B){await G("sleep",{duration:B})}async function I(B,de){await G("command",{command:B,args:de})}async function X(B){if(p.value&&!g.value){await G("assert",B);return}const de=Date.now(),ue={id:crypto.randomUUID(),type:"assert",timestamp:de,relativeTime:h.value.length>0?(h.value[h.value.length-1]?.relativeTime||0)+1e3:0,params:B};h.value.push(ue)}function j(B){const de=h.value.findIndex(ue=>ue.id===B);de!==-1&&h.value.splice(de,1)}function N(B,de){const ue=h.value.findIndex(K=>K.id===B);if(ue===-1)return console.warn(`Action with id ${B} not found`),!1;const me=h.value[ue],Ce={...me,...de};if(Ce.type!==me.type)throw new Error("Cannot change action type");if(Ce.id!==me.id)throw new Error("Cannot change action id");if(Ce.timestamp!==me.timestamp)throw new Error("Cannot change action timestamp");return h.value[ue]=Ce,!0}function q(B){return{version:"1.0",name:B||$.value,description:void 0,platform:a,deviceInfo:{serial:c,screenWidth:d.value.width,screenHeight:d.value.height},createdAt:A.value,updatedAt:Date.now(),duration:E.value,config:S.value,actions:h.value}}function ie(B){$.value=B.name,h.value=B.actions,A.value=B.createdAt,S.value=B.config}function le(){const B=q();Qa(B,`${B.name}.byteautoui`)}function Z(B){if(!B||typeof B!="object")return!1;if(B.version!=="1.0")return console.error("ä¸æ”¯æŒçš„æ–‡ä»¶ç‰ˆæœ¬:",B.version),!1;if(typeof B.name!="string")return console.error("ç¼ºå°‘å½•åˆ¶åç§°"),!1;if(!B.platform||!["android","ios","harmony"].includes(B.platform))return console.error("æ— æ•ˆçš„å¹³å°:",B.platform),!1;if(!B.deviceInfo||typeof B.deviceInfo.screenWidth!="number"||typeof B.deviceInfo.screenHeight!="number")return console.error("ç¼ºå°‘è®¾å¤‡ä¿¡æ¯"),!1;if(!Array.isArray(B.actions))return console.error("ç¼ºå°‘æ“ä½œåˆ—è¡¨"),!1;for(let de=0;de<B.actions.length;de++){const ue=B.actions[de];if(!ue||typeof ue!="object")return console.error(`æ“ä½œ ${de} æ ¼å¼é”™è¯¯`),!1;if(!ue.type||typeof ue.timestamp!="number"||typeof ue.relativeTime!="number")return console.error(`æ“ä½œ ${de} ç¼ºå°‘å¿…éœ€å­—æ®µ`),!1;if((ue.type==="tap"||ue.type==="swipe")&&!ue.coords)return console.error(`æ“ä½œ ${de} (${ue.type}) ç¼ºå°‘åæ ‡ä¿¡æ¯`),!1;if(ue.type==="swipe"&&!ue.endCoords)return console.error(`æ“ä½œ ${de} (swipe) ç¼ºå°‘ç»“æŸåæ ‡`),!1}return!0}async function ke(){return new Promise((B,de)=>{const ue=document.createElement("input");ue.type="file",ue.accept=".byteautoui.json,.json",ue.onchange=async()=>{const me=ue.files?.[0];if(!me){de(new Error("æœªé€‰æ‹©æ–‡ä»¶"));return}try{const Ce=await me.text(),K=JSON.parse(Ce);if(!Z(K)){de(new Error("æ–‡ä»¶æ ¼å¼éªŒè¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ˜¯å¦ä¸ºæœ‰æ•ˆçš„å½•åˆ¶æ–‡ä»¶"));return}ie(K),B(K)}catch(Ce){Ce instanceof SyntaxError?de(new Error("æ–‡ä»¶æ ¼å¼é”™è¯¯ï¼šæ— æ•ˆçš„JSON")):de(Ce)}},ue.click()})}return{isRecording:p,isPaused:g,actions:h,recordingName:$,config:S,duration:E,actionCount:y,start:_,stop:U,pause:z,resume:M,clear:R,recordTap:J,recordSwipe:ce,recordInput:xe,recordSleep:H,recordCommand:I,recordAssert:X,deleteAction:j,updateAction:N,exportRecording:q,importRecording:ie,saveToFile:le,loadFromFile:ke}}function no(a,c,d){const p=O("idle"),g=O(-1),h=O(null),A=O(null),$=O(1),S=fe(()=>({currentIndex:g.value,totalSteps:h.value?.actions.length||0,elapsedTime:0,state:p.value,error:A.value||void 0})),E=fe(()=>p.value==="playing"),y=fe(()=>p.value==="paused"),_=fe(()=>h.value!==null&&h.value.actions.length>0);function U(H){h.value=H,g.value=-1,p.value="idle",A.value=null}function z(){h.value=null,g.value=-1,p.value="idle",A.value=null}function M(H){return new Promise(I=>setTimeout(I,H/$.value))}function R(H){const{width:I,height:X}=d.value;if(!I||!X||I<=0||X<=0)throw new Error(`æ— æ³•å›žæ”¾:å±å¹•å°ºå¯¸æ— æ•ˆ(${I}x${X}),è¯·ç¡®ä¿è®¾å¤‡å·²è¿žæŽ¥å¹¶åŠ è½½äº†å±å¹•ä¿¡æ¯`);return{x:Math.round(H.scaleX*I),y:Math.round(H.scaleY*X)}}async function k(H){try{let I=function(Z){for(const ke of Z){if(ke.xpath===H)return ke;if(ke.children){const B=I(ke.children);if(B)return B}}return null};const X=await Wt(a,c),j=I(X.nodes);if(!j||!j.bounds)return null;const[N,q,ie,le]=j.bounds;return{x:Math.round((N+ie)/2),y:Math.round((q+le)/2)}}catch(I){return console.error("XPathæŸ¥æ‰¾å¤±è´¥:",I),null}}async function C(H){switch(H.type){case"tap":{let I,X;if(H.xpath){const j=await k(H.xpath.selector);if(j)I=j.x,X=j.y;else{if(console.warn("XPathæŸ¥æ‰¾å¤±è´¥ï¼Œé™çº§ä½¿ç”¨æ¯”ä¾‹ç¼©æ”¾åæ ‡:",H.xpath.selector),!H.coords)throw new Error("Tapæ“ä½œç¼ºå°‘åæ ‡ä¿¡æ¯");const N=R(H.coords);I=N.x,X=N.y}}else{if(!H.coords)throw new Error("Tapæ“ä½œç¼ºå°‘åæ ‡ä¿¡æ¯");const j=R(H.coords);I=j.x,X=j.y}await bt(a,c,I,X);break}case"swipe":{if(!H.coords||!H.endCoords)throw new Error("Swipeæ“ä½œç¼ºå°‘åæ ‡ä¿¡æ¯");const I=R(H.coords),X=R(H.endCoords),j=H.params;await Ue(a,c,"swipe",{startX:I.x,startY:I.y,endX:X.x,endY:X.y,duration:j.duration||.5});break}case"input":{const I=H.params;await Ue(a,c,"sendKeys",{text:I.text});break}case"sleep":{const I=H.params;await M(I.duration);break}case"back":{await Ue(a,c,"back",{});break}case"home":{await Ue(a,c,"home",{});break}case"command":{const I=H.params;await Ue(a,c,I.command,I.args||{});break}case"assert":{const I=H.params,X={operator:I.operator,conditions:I.conditions.map(N=>N.type==="element"?{type:"element",selector:N.selector,expect:N.expect}:{type:"image",template:N.template,expect:N.expect}),wait:I.wait,platform:a},j=await _n(a,c,X);if(!j.success){const N=`æ–­è¨€å¤±è´¥: ${j.message}`;throw console.error(N,j.details),j.screenshot&&console.log("å¤±è´¥æˆªå›¾:",`data:image/jpeg;base64,${j.screenshot}`),new Error(N)}break}default:console.warn("æœªçŸ¥æ“ä½œç±»åž‹")}}async function F(){if(!h.value||h.value.actions.length===0){A.value="æ²¡æœ‰å¯å›žæ”¾çš„å½•åˆ¶";return}for(p.value==="paused"?p.value="playing":(g.value=0,p.value="playing",A.value=null);g.value<h.value.actions.length&&p.value==="playing";){const H=h.value.actions[g.value];try{if(await C(H),p.value!=="playing")break;if(g.value<h.value.actions.length-1){const X=h.value.actions[g.value+1].relativeTime-H.relativeTime;if(await M(X),p.value!=="playing")break}g.value++}catch(I){A.value=I instanceof Error?I.message:String(I),p.value="error",console.error(`å›žæ”¾å¤±è´¥åœ¨æ­¥éª¤ ${g.value}:`,I);break}}p.value==="playing"&&(p.value="idle",g.value=-1)}function L(){p.value==="playing"&&(p.value="paused")}function G(){p.value="stopped",g.value=-1,A.value=null}async function J(){if(!h.value||g.value>=h.value.actions.length-1)return;p.value="paused",g.value++;const H=h.value.actions[g.value];try{await C(H)}catch(I){A.value=I instanceof Error?I.message:String(I),p.value="error",console.error(`å•æ­¥æ‰§è¡Œå¤±è´¥åœ¨æ­¥éª¤ ${g.value}:`,I)}}function ce(H){h.value&&H>=0&&H<h.value.actions.length&&(g.value=H,p.value="paused")}function xe(H){$.value=Math.max(.1,Math.min(5,H))}return{state:p,currentIndex:g,recording:h,error:A,speed:$,progress:S,isPlaying:E,isPaused:y,canPlay:_,load:U,unload:z,play:F,pause:L,stop:G,stepNext:J,seekTo:ce,setSpeed:xe}}const pt="";async function ro(a){const c=await fetch(`${pt}/api/recordings/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!c.ok){const d=await c.text(),p=`ä¿å­˜å½•åˆ¶"${a.name}"å¤±è´¥ (åˆ†ç»„:${a.group}, HTTP ${c.status}): ${d}`;throw console.error(p,{request:a,status:c.status}),new Error(p)}}async function ao(){const a=await fetch(`${pt}/api/recordings/list`);if(!a.ok){const d=await a.text(),p=`èŽ·å–å½•åˆ¶åˆ—è¡¨å¤±è´¥ (HTTP ${a.status}): ${d}`;throw console.error(p,{status:a.status}),new Error(p)}return(await a.json()).recordings}async function zt(a,c){const d=await fetch(`${pt}/api/recordings/load?group=${encodeURIComponent(a)}&name=${encodeURIComponent(c)}`);if(!d.ok){const g=await d.text(),h=`åŠ è½½å½•åˆ¶"${c}"å¤±è´¥ (åˆ†ç»„:${a}, HTTP ${d.status}): ${g}`;throw console.error(h,{group:a,name:c,status:d.status}),new Error(h)}return(await d.json()).data}async function oo(a,c){const d=await fetch(`${pt}/api/recordings/delete?group=${encodeURIComponent(a)}&name=${encodeURIComponent(c)}`,{method:"DELETE"});if(!d.ok){const p=await d.text(),g=`åˆ é™¤å½•åˆ¶"${c}"å¤±è´¥ (åˆ†ç»„:${a}, HTTP ${d.status}): ${p}`;throw console.error(g,{group:a,name:c,status:d.status}),new Error(g)}}const so={class:"actions-panel"},io=ve({__name:"ActionsPanel",props:{platform:{},serial:{}},emits:["assert-menu-select"],setup(a,{expose:c,emit:d}){const p=a,g=nt(),h=fn(),A=ft(),$=Ze(),S=fe(()=>$.t.actions);function E(K,te){g.error(`${K}: ${te instanceof Error?te.message:String(te)}`)}const y=O("record"),_=O([]),U=O(!1),z=O(!1),M=O({group:"default",name:""}),R=O(!1),k=O(null),C=fe(()=>A.screenSize),F=to(p.platform,p.serial,C),L=no(p.platform,p.serial,C);function G(){F.isRecording.value?F.stop():F.start()}function J(){F.isPaused.value?F.resume():F.pause()}function ce(){h.warning({title:"ç¡®è®¤æ¸…ç©º",content:"ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å½•åˆ¶æ­¥éª¤å—ï¼Ÿ",positiveText:"ç¡®å®š",negativeText:"å–æ¶ˆ",onPositiveClick:()=>{F.clear(),g.success("å·²æ¸…ç©ºå½•åˆ¶")}})}function xe(){const K=new Date,te=K.getFullYear(),oe=String(K.getMonth()+1).padStart(2,"0"),Ie=String(K.getDate()).padStart(2,"0"),je=String(K.getHours()).padStart(2,"0"),He=String(K.getMinutes()).padStart(2,"0"),We=String(K.getSeconds()).padStart(2,"0");return`Recording_${te}${oe}${Ie}_${je}${He}${We}`}function H(){M.value.name=xe(),M.value.group="default",z.value=!0}async function I(){if(!M.value.name){g.warning("è¯·è¾“å…¥å½•åˆ¶åç§°");return}if(F.actionCount.value===0){g.warning("æ²¡æœ‰å¯ä¿å­˜çš„å½•åˆ¶");return}try{const K=F.exportRecording(M.value.name);await ro({group:M.value.group||"default",name:M.value.name,data:K}),g.success("å½•åˆ¶å·²ä¿å­˜"),z.value=!1,M.value={group:"default",name:""},await q()}catch(K){E("ä¿å­˜å¤±è´¥",K)}}function X(K){F.deleteAction(K)}function j(K){k.value=K,R.value=!0}function N(K,te){try{F.updateAction(K,te)?g.success("æ“ä½œå·²æ›´æ–°"):g.error("æ›´æ–°å¤±è´¥ï¼šæ“ä½œä¸å­˜åœ¨")}catch(oe){E("æ›´æ–°å¤±è´¥",oe)}}async function q(){U.value=!0;try{_.value=await ao()}catch(K){E("èŽ·å–å½•åˆ¶åˆ—è¡¨å¤±è´¥",K)}finally{U.value=!1}}async function ie(K,te){try{const oe=await zt(K,te);L.load(oe),g.success(`å·²åŠ è½½å½•åˆ¶: ${te}`)}catch(oe){E("åŠ è½½å½•åˆ¶å¤±è´¥",oe)}}async function le(K,te){if(F.actionCount.value>0){h.warning({title:"ç¡®è®¤è¦†ç›–",content:"å½“å‰æœ‰æœªä¿å­˜çš„å½•åˆ¶æ“ä½œï¼ŒåŠ è½½æ–°å½•åˆ¶å°†ä¼šè¦†ç›–è¿™äº›æ“ä½œã€‚æ˜¯å¦ç»§ç»­ï¼Ÿ",positiveText:"ç»§ç»­åŠ è½½",negativeText:"å–æ¶ˆ",onPositiveClick:async()=>{await Z(K,te)}});return}await Z(K,te)}async function Z(K,te){try{const oe=await zt(K,te);F.importRecording(oe),y.value="record",g.success(`å·²åŠ è½½ "${te}" åˆ°å½•åˆ¶å™¨ï¼Œå¯ä»¥ç¼–è¾‘äº†`)}catch(oe){E("åŠ è½½å½•åˆ¶å¤±è´¥",oe)}}async function ke(K,te){h.warning({title:"ç¡®è®¤åˆ é™¤",content:`ç¡®å®šè¦åˆ é™¤å½•åˆ¶ "${te}" å—ï¼Ÿ`,positiveText:"åˆ é™¤",negativeText:"å–æ¶ˆ",onPositiveClick:async()=>{try{await oo(K,te),g.success("å·²åˆ é™¤"),await q()}catch(oe){E("åˆ é™¤å¤±è´¥",oe)}}})}async function B(){try{await L.play()}catch(K){E("å›žæ”¾å¤±è´¥",K)}}async function de(K,te,oe){await F.recordTap(K,te,oe)}async function ue(K,te,oe,Ie,je,He){await F.recordSwipe(K,te,oe,Ie,je,He)}function me(){return F.isRecording.value}async function Ce(K){await F.recordAssert(K)}return Gt(()=>{q()}),c({recordTap:de,recordSwipe:ue,recordAssert:Ce,getIsRecording:me}),(K,te)=>(T(),W("div",so,[i(o(Xt),{value:y.value,"onUpdate:value":te[1]||(te[1]=oe=>y.value=oe),type:"segment"},{default:u(()=>[i(o(dt),{name:"record",tab:S.value.recordTab},{default:u(()=>[i(Ra,{recorder:o(F),"current-playback-index":o(L).currentIndex.value,"is-playback-active":o(L).isPlaying.value,t:S.value,onToggleRecording:G,onTogglePause:J,onClearRecording:ce,onSaveRecording:H,onEditAction:j,onDeleteAction:X,onAssertMenuSelect:te[0]||(te[0]=oe=>K.$emit("assert-menu-select",oe))},null,8,["recorder","current-playback-index","is-playback-active","t"])]),_:1},8,["tab"]),i(o(dt),{name:"playback",tab:S.value.playbackTab},{default:u(()=>[i(Ja,{player:o(L),recordings:_.value,loading:U.value,"is-recording-active":o(F).isRecording.value,t:S.value,"common-t":o($).t.common,onRefreshRecordings:q,onStartPlayback:B,onLoadRecording:ie,onEditRecording:le,onDeleteRecording:ke},null,8,["player","recordings","loading","is-recording-active","t","common-t"])]),_:1},8,["tab"])]),_:1},8,["value"]),i(o(rt),{show:z.value,"onUpdate:show":te[5]||(te[5]=oe=>z.value=oe),preset:"dialog",title:"ä¿å­˜å½•åˆ¶"},{action:u(()=>[i(o(Be),{justify:"end"},{default:u(()=>[i(o(ae),{onClick:te[4]||(te[4]=oe=>z.value=!1)},{default:u(()=>[...te[7]||(te[7]=[V("å–æ¶ˆ",-1)])]),_:1}),i(o(ae),{type:"primary",onClick:I},{default:u(()=>[...te[8]||(te[8]=[V("ä¿å­˜",-1)])]),_:1})]),_:1})]),default:u(()=>[i(o(kt),{model:M.value},{default:u(()=>[i(o(Se),{label:"åˆ†ç»„"},{default:u(()=>[i(o(Oe),{value:M.value.group,"onUpdate:value":te[2]||(te[2]=oe=>M.value.group=oe),placeholder:"default"},null,8,["value"])]),_:1}),i(o(Se),{label:"åç§°"},{default:u(()=>[i(o(Oe),{value:M.value.name,"onUpdate:value":te[3]||(te[3]=oe=>M.value.name=oe),placeholder:"my-recording"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show"]),i(Za,{show:R.value,"onUpdate:show":te[6]||(te[6]=oe=>R.value=oe),action:k.value,"screen-size":C.value,onSave:N},null,8,["show","action","screen-size"])]))}}),lo=Ne(io,[["__scopeId","data-v-76be78b9"]]),uo={class:"package-panel"},co={class:"package-content"},fo={class:"install-section"},vo={class:"package-list-section"},po={key:0,class:"loading-state"},ho={class:"loading-text"},mo={key:1,class:"empty-state"},go={class:"empty-hint"},yo={key:2,class:"package-list"},xo={class:"package-info"},wo={class:"package-name"},ko={class:"package-id"},bo={key:0,class:"package-version"},So=ve({__name:"PackagePanel",props:{platform:{},serial:{}},setup(a){const c=a,d=nt(),p=Ze(),g=fe(()=>p.t.package),h=O([]),A=O(!1),$=O(""),S=O(""),E=fe(()=>{if(!$.value)return h.value;const k=$.value.toLowerCase();return h.value.filter(C=>C.name.toLowerCase().includes(k)||C.package.toLowerCase().includes(k))});async function y(){A.value=!0;try{const k=await Ue(c.platform,c.serial,"appList",{});Array.isArray(k)?(h.value=k.map(C=>{const F=C.package||C.packageName||C.pkg||"";return{name:C.name||C.label||C.appName||F,package:F,version:C.version||C.versionName||C.ver||""}}).filter(C=>C.package),d.success(`å·²åŠ è½½ ${h.value.length} ä¸ªåº”ç”¨`)):d.error("åº”ç”¨åˆ—è¡¨æ ¼å¼é”™è¯¯")}catch(k){d.error(`åŠ è½½åº”ç”¨åˆ—è¡¨å¤±è´¥: ${k instanceof Error?k.message:String(k)}`)}finally{A.value=!1}}async function _(k){try{await Ue(c.platform,c.serial,"appLaunch",{package:k}),d.success(g.value.appLaunched)}catch(C){d.error(`${g.value.launch} failed: ${C instanceof Error?C.message:String(C)}`)}}async function U(k){try{await Ue(c.platform,c.serial,"uninstallApp",{package:k}),d.success(g.value.appUninstalled),await y()}catch(C){d.error(`${g.value.uninstall} failed: ${C instanceof Error?C.message:String(C)}`)}}async function z(k){try{await Ue(c.platform,c.serial,"clearApp",{package:k}),d.success(g.value.dataCleared)}catch(C){d.error(`${g.value.clear} failed: ${C instanceof Error?C.message:String(C)}`)}}async function M(k){try{const F=`${window.location.origin}/api/${c.platform}/${c.serial}/backupApp?package=${encodeURIComponent(k)}`,L=document.createElement("a");L.href=F,L.download=`${k}.apk`,L.click(),d.success(`Downloading: ${k}.apk`)}catch(C){d.error(`Backup failed: ${C instanceof Error?C.message:String(C)}`)}}async function R(){if(S.value.trim())try{await Ue(c.platform,c.serial,"installApp",{path:S.value}),d.success(`Installed: ${S.value}`),S.value="",await y()}catch(k){d.error(`Install failed: ${k instanceof Error?k.message:String(k)}`)}}return(k,C)=>{const F=Xe("n-input"),L=Xe("n-button"),G=Xe("n-space"),J=Xe("n-icon"),ce=Xe("n-spin"),xe=Xe("n-empty");return T(),W("div",uo,[x("div",co,[i(G,{vertical:"",size:16},{default:u(()=>[x("div",fo,[x("h4",null,D(g.value.currentApp),1),i(G,{size:8},{default:u(()=>[i(F,{value:S.value,"onUpdate:value":C[0]||(C[0]=H=>S.value=H),placeholder:"APK file path",style:{flex:"1"}},null,8,["value"]),i(L,{type:"primary",onClick:R,disabled:!S.value.trim()},{default:u(()=>[...C[2]||(C[2]=[V(" Install ",-1)])]),_:1},8,["disabled"])]),_:1})]),x("div",vo,[i(G,{justify:"space-between",align:"center",style:{"margin-bottom":"12px"}},{default:u(()=>[x("h4",null,D(g.value.installedApps)+" ("+D(E.value.length)+")",1),i(G,{size:8},{default:u(()=>[i(F,{value:$.value,"onUpdate:value":C[1]||(C[1]=H=>$.value=H),placeholder:o(p).t.common.search+"...",clearable:"",style:{width:"200px"}},null,8,["value","placeholder"]),i(L,{onClick:y,loading:A.value},{icon:u(()=>[i(J,null,{default:u(()=>[i(o(St))]),_:1})]),default:u(()=>[V(" "+D(o(p).t.common.refresh),1)]),_:1},8,["loading"])]),_:1})]),_:1}),A.value?(T(),W("div",po,[i(ce,{size:"large"}),x("div",ho,D(o(p).t.common.loading),1)])):E.value.length===0?(T(),W("div",mo,[i(xe,{description:g.value.noApps},null,8,["description"]),x("div",go,[x("p",null,'ç‚¹å‡»"'+D(o(p).t.common.refresh)+'"æŒ‰é’®åŠ è½½å·²å®‰è£…çš„åº”ç”¨åˆ—è¡¨',1),C[3]||(C[3]=x("p",{class:"empty-hint-small"},"å¦‚æžœä¸€ç›´æ— æ³•åŠ è½½ï¼Œè¯·æ£€æŸ¥è®¾å¤‡è¿žæŽ¥çŠ¶æ€",-1))])])):(T(),W("div",yo,[(T(!0),W(Ye,null,Ke(E.value,H=>(T(),W("div",{key:H.package,class:"package-item"},[x("div",xo,[x("div",wo,D(H.name||"æœªçŸ¥åº”ç”¨"),1),x("div",ko,D(H.package||"æ— åŒ…å"),1),H.version?(T(),W("div",bo,"v"+D(H.version),1)):he("",!0)]),i(G,{size:8},{default:u(()=>[i(L,{size:"small",onClick:I=>_(H.package)},{default:u(()=>[V(D(g.value.launch),1)]),_:1},8,["onClick"]),i(L,{size:"small",onClick:I=>M(H.package)},{icon:u(()=>[i(J,null,{default:u(()=>[i(o(Vn))]),_:1})]),default:u(()=>[C[4]||(C[4]=V(" Backup ",-1))]),_:1},8,["onClick"]),i(L,{size:"small",onClick:I=>z(H.package)},{default:u(()=>[V(D(g.value.clear),1)]),_:1},8,["onClick"]),i(L,{size:"small",type:"error",onClick:I=>U(H.package)},{default:u(()=>[V(D(g.value.uninstall),1)]),_:1},8,["onClick"])]),_:2},1024)]))),128))]))])]),_:1})])])}}}),_o=Ne(So,[["__scopeId","data-v-fff7dce7"]]),Co={class:"modal-title"},$o={class:"config-content"},Po={style:{"font-weight":"600"}},Ao={style:{"font-size":"13px","line-height":"1.6"}},Fo={style:{margin:"0 0 8px 0"}},Eo={style:{margin:"0"}},To={class:"bundle-hints"},Uo={class:"hints-title"},Do={class:"hint-label"},Mo={class:"hint-label"},Ro={class:"help-section"},Bo={class:"help-title"},Io={class:"help-list"},Oo={class:"help-note"},Lo=ve({__name:"IOSConfigDialog",props:{show:{type:Boolean},serial:{},errorMessage:{}},emits:["update:show","confirm"],setup(a,{emit:c}){const d=c,p=nt(),g=Ze(),h=fe(()=>g.t.iosConfig),A=O({bundleId:"com.facebook.WebDriverAgentRunner.xctrunner",port:8100}),$=O(!1);function S(){d("update:show",!1)}async function E(){if(!A.value.bundleId.trim()){p.warning("Please enter WDA Bundle ID");return}if(!Number.isFinite(A.value.port)||A.value.port<=0){p.warning("Please enter WDA Port");return}$.value=!0;try{d("confirm",A.value.bundleId,A.value.port),p.success("Configuration saved"),d("update:show",!1)}finally{$.value=!1}}return(y,_)=>(T(),ye(o(rt),{show:a.show,"onUpdate:show":_[4]||(_[4]=U=>d("update:show",U)),preset:"card",size:"medium",bordered:!1,segmented:{content:!0},style:{"max-width":"600px"},closable:!1},{header:u(()=>[i(o(Be),{align:"center",size:12},{default:u(()=>[i(o(pe),{size:"24",color:"var(--md-primary)"},{default:u(()=>[i(o(xr))]),_:1}),x("span",Co,D(h.value.title),1)]),_:1})]),footer:u(()=>[i(o(Be),{justify:"end"},{default:u(()=>[i(o(ae),{onClick:S,disabled:$.value},{default:u(()=>[V(D(h.value.cancel),1)]),_:1},8,["disabled"]),i(o(ae),{type:"primary",onClick:E,loading:$.value},{default:u(()=>[V(D(h.value.saveConfiguration),1)]),_:1},8,["loading"])]),_:1})]),default:u(()=>[x("div",$o,[a.errorMessage?(T(),ye(o(ot),{key:0,title:h.value.wdaStartFailed,type:"error",bordered:!1,style:{"margin-bottom":"20px"}},{default:u(()=>[V(D(a.errorMessage),1)]),_:1},8,["title"])):he("",!0),i(o(ot),{type:"info",bordered:!1,style:{"margin-bottom":"24px"}},{header:u(()=>[x("span",Po,D(h.value.firstTimeSetup),1)]),default:u(()=>[x("div",Ao,[x("p",Fo,D(h.value.setupDescription),1),x("p",Eo,[x("strong",null,D(h.value.setupGuide),1),_[5]||(_[5]=V()),_[6]||(_[6]=x("a",{href:"https://github.com/appium/WebDriverAgent#getting-started",target:"_blank"},"appium/WebDriverAgent",-1))])])]),_:1}),i(o(kt),{"label-placement":"left","label-width":"120",model:A.value},{default:u(()=>[i(o(Se),{label:h.value.deviceUDID,path:"serial"},{default:u(()=>[i(o(Oe),{value:a.serial,readonly:"",disabled:""},null,8,["value"])]),_:1},8,["label"]),i(o(Se),{label:h.value.wdaBundleId,path:"bundleId",required:""},{default:u(()=>[i(o(Oe),{value:A.value.bundleId,"onUpdate:value":_[0]||(_[0]=U=>A.value.bundleId=U),placeholder:"com.facebook.WebDriverAgentRunner.xctrunner",style:{fontFamily:"var(--md-font-family-mono)",fontSize:"13px"}},null,8,["value"])]),_:1},8,["label"]),i(o(Se),{label:h.value.wdaPort,path:"port"},{default:u(()=>[i(o(ze),{value:A.value.port,"onUpdate:value":_[1]||(_[1]=U=>A.value.port=U),min:1,max:65535,placeholder:"8100"},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"]),x("div",To,[x("div",Uo,D(h.value.commonBundleIds),1),x("div",{class:"hint-item",onClick:_[2]||(_[2]=U=>A.value.bundleId="com.facebook.WebDriverAgentRunner.xctrunner")},[_[7]||(_[7]=x("code",null,"com.facebook.WebDriverAgentRunner.xctrunner",-1)),x("span",Do,D(h.value.defaultBundleId),1)]),x("div",{class:"hint-item",onClick:_[3]||(_[3]=U=>A.value.bundleId="com.appium.WebDriverAgentRunner.xctrunner")},[_[8]||(_[8]=x("code",null,"com.appium.WebDriverAgentRunner.xctrunner",-1)),x("span",Mo,D(h.value.appiumBundleId),1)])]),x("div",Ro,[x("p",Bo,D(h.value.helpTitle),1),x("ol",Io,[x("li",null,D(h.value.helpSteps.step1),1),x("li",null,D(h.value.helpSteps.step2),1),x("li",null,D(h.value.helpSteps.step3),1)]),x("p",Oo,[x("strong",null,D(h.value.helpNote),1)])])])]),_:1},8,["show"]))}}),zo=Ne(Lo,[["__scopeId","data-v-27c06d6d"]]),No={class:"element-selector"},jo=ve({__name:"ElementSelectorDialog",emits:["confirm"],setup(a,{expose:c,emit:d}){const p=O(!1),g=O(""),h=O("exists"),A=O(!1),$=O(""),S=O(!1),E=O(""),y=O(!1),_=O(""),U=d;function z(){p.value=!0}function M(){p.value=!1,g.value="",h.value="exists",A.value=!1,$.value="",S.value=!1,E.value="",y.value=!1,_.value=""}function R(){M()}function k(){const F={};A.value&&$.value&&(F.text=$.value),S.value&&E.value&&(F.resourceId=E.value),y.value&&_.value&&(F.className=_.value);const L={type:"element",selector:{xpath:g.value,attributes:Object.keys(F).length>0?F:void 0},expect:h.value};U("confirm",L),M()}function C(F){g.value=F.xpath,F.attributes&&(F.attributes.text&&(A.value=!0,$.value=F.attributes.text),F.attributes.resourceId&&(S.value=!0,E.value=F.attributes.resourceId),F.attributes.className&&(y.value=!0,_.value=F.attributes.className))}return c({show:z,hide:M,prefill:C}),(F,L)=>(T(),ye(o(rt),{show:p.value,"onUpdate:show":L[8]||(L[8]=G=>p.value=G),preset:"dialog",title:"é€‰æ‹©å…ƒç´ "},{action:u(()=>[i(o(Be),null,{default:u(()=>[i(o(ae),{onClick:R},{default:u(()=>[...L[15]||(L[15]=[V("å–æ¶ˆ",-1)])]),_:1}),i(o(ae),{type:"primary",disabled:!g.value,onClick:k},{default:u(()=>[...L[16]||(L[16]=[V("ç¡®è®¤",-1)])]),_:1},8,["disabled"])]),_:1})]),default:u(()=>[x("div",No,[i(o(ot),{type:"info",title:"æç¤º"},{default:u(()=>[...L[9]||(L[9]=[V(" ç‚¹å‡»å±å¹•ä¸Šçš„å…ƒç´ ï¼Œæˆ–åœ¨ä¸‹æ–¹è¾“å…¥ XPath ",-1)])]),_:1}),i(o(Se),{label:"XPath"},{default:u(()=>[i(o(Oe),{value:g.value,"onUpdate:value":L[0]||(L[0]=G=>g.value=G),placeholder:"//*[@resource-id='com.example:id/button']"},null,8,["value"])]),_:1}),i(o(Se),{label:"å±žæ€§éªŒè¯ (å¯é€‰)"},{default:u(()=>[i(o(Be),{vertical:""},{default:u(()=>[i(o(ht),{checked:A.value,"onUpdate:checked":L[1]||(L[1]=G=>A.value=G)},{default:u(()=>[...L[10]||(L[10]=[V("æ–‡æœ¬",-1)])]),_:1},8,["checked"]),A.value?(T(),ye(o(Oe),{key:0,value:$.value,"onUpdate:value":L[2]||(L[2]=G=>$.value=G),placeholder:"æŒ‰é’®æ–‡æœ¬"},null,8,["value"])):he("",!0),i(o(ht),{checked:S.value,"onUpdate:checked":L[3]||(L[3]=G=>S.value=G)},{default:u(()=>[...L[11]||(L[11]=[V("Resource ID",-1)])]),_:1},8,["checked"]),S.value?(T(),ye(o(Oe),{key:1,value:E.value,"onUpdate:value":L[4]||(L[4]=G=>E.value=G),placeholder:"com.example:id/button"},null,8,["value"])):he("",!0),i(o(ht),{checked:y.value,"onUpdate:checked":L[5]||(L[5]=G=>y.value=G)},{default:u(()=>[...L[12]||(L[12]=[V("Class Name",-1)])]),_:1},8,["checked"]),y.value?(T(),ye(o(Oe),{key:2,value:_.value,"onUpdate:value":L[6]||(L[6]=G=>_.value=G),placeholder:"android.widget.Button"},null,8,["value"])):he("",!0)]),_:1})]),_:1}),i(o(Se),{label:"æœŸæœ›ç»“æžœ"},{default:u(()=>[i(o(st),{value:h.value,"onUpdate:value":L[7]||(L[7]=G=>h.value=G)},{default:u(()=>[i(o(tt),{value:"exists"},{default:u(()=>[...L[13]||(L[13]=[V("å…ƒç´ å­˜åœ¨",-1)])]),_:1}),i(o(tt),{value:"not_exists"},{default:u(()=>[...L[14]||(L[14]=[V("å…ƒç´ ä¸å­˜åœ¨",-1)])]),_:1})]),_:1},8,["value"])]),_:1})])]),_:1},8,["show"]))}}),Ho=Ne(jo,[["__scopeId","data-v-c07affd2"]]),Vo=3e3,Go=300,Xo=1024*1024,Nt=.9,Wo={class:"image-selector"},Yo={key:0,class:"preview-section"},Jo=["src"],qo={style:{"margin-left":"12px"}},Ko=ve({__name:"ImageSelectorDialog",emits:["confirm","start-crop"],setup(a,{expose:c,emit:d}){const p=O(!1),g=O("crop"),h=O(""),A=O(""),$=O(Nt),S=O("exists"),E=d;function y(){p.value=!0}function _(){p.value=!1,h.value="",A.value="",$.value=Nt,S.value="exists"}function U(){E("start-crop"),_()}function z(C){return new Promise((F,L)=>{const G=C.file.file;if(!G){L(new Error("No file"));return}const J=new FileReader;J.onload=ce=>{h.value=ce.target?.result,F()},J.onerror=L,J.readAsDataURL(G)})}function M(){_()}function R(){const C={type:"image",template:{data:h.value,threshold:$.value,name:A.value||void 0},expect:S.value};E("confirm",C),_()}function k(C){h.value=C}return c({show:y,hide:_,setTemplateData:k}),(C,F)=>(T(),ye(o(rt),{show:p.value,"onUpdate:show":F[4]||(F[4]=L=>p.value=L),preset:"dialog",title:"é€‰æ‹©å›¾ç‰‡æ¨¡æ¿",style:{width:"600px"}},{action:u(()=>[i(o(Be),null,{default:u(()=>[i(o(ae),{onClick:M},{default:u(()=>[...F[11]||(F[11]=[V("å–æ¶ˆ",-1)])]),_:1}),i(o(ae),{type:"primary",disabled:!h.value,onClick:R},{default:u(()=>[...F[12]||(F[12]=[V("ç¡®è®¤",-1)])]),_:1},8,["disabled"])]),_:1})]),default:u(()=>[x("div",Wo,[i(o(Xt),{value:g.value,"onUpdate:value":F[0]||(F[0]=L=>g.value=L),type:"line"},{default:u(()=>[i(o(dt),{name:"crop",tab:"æ¡†é€‰å±å¹•åŒºåŸŸ"},{default:u(()=>[i(o(ot),{type:"info",title:"æç¤º",style:{"margin-bottom":"12px"}},{default:u(()=>[...F[5]||(F[5]=[V(" åœ¨å±å¹•ä¸Šæ‹–æ‹½æ¡†é€‰ç›®æ ‡åŒºåŸŸ ",-1)])]),_:1}),i(o(ae),{onClick:U},{default:u(()=>[...F[6]||(F[6]=[V("å¼€å§‹æ¡†é€‰",-1)])]),_:1})]),_:1}),i(o(dt),{name:"upload",tab:"ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶"},{default:u(()=>[i(o(vn),{max:1,accept:"image/png,image/jpeg","show-file-list":!1,onBeforeUpload:z},{default:u(()=>[i(o(ae),null,{default:u(()=>[...F[7]||(F[7]=[V("é€‰æ‹©å›¾ç‰‡æ–‡ä»¶",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["value"]),h.value?(T(),W("div",Yo,[i(o(yt)),F[8]||(F[8]=x("h4",null,"æ¨¡æ¿é¢„è§ˆ",-1)),x("img",{src:h.value,alt:"æ¨¡æ¿å›¾ç‰‡",class:"preview-image"},null,8,Jo)])):he("",!0),i(o(Se),{label:"ç›¸ä¼¼åº¦é˜ˆå€¼"},{default:u(()=>[i(o(pn),{value:$.value,"onUpdate:value":F[1]||(F[1]=L=>$.value=L),min:.5,max:1,step:.05},null,8,["value"]),x("span",qo,D($.value),1)]),_:1}),i(o(Se),{label:"æ¨¡æ¿åç§° (å¯é€‰)"},{default:u(()=>[i(o(Oe),{value:A.value,"onUpdate:value":F[2]||(F[2]=L=>A.value=L),placeholder:"ç™»å½•æŒ‰é’®"},null,8,["value"])]),_:1}),i(o(Se),{label:"æœŸæœ›ç»“æžœ"},{default:u(()=>[i(o(st),{value:S.value,"onUpdate:value":F[3]||(F[3]=L=>S.value=L)},{default:u(()=>[i(o(tt),{value:"exists"},{default:u(()=>[...F[9]||(F[9]=[V("å›¾ç‰‡å­˜åœ¨",-1)])]),_:1}),i(o(tt),{value:"not_exists"},{default:u(()=>[...F[10]||(F[10]=[V("å›¾ç‰‡ä¸å­˜åœ¨",-1)])]),_:1})]),_:1},8,["value"])]),_:1})])]),_:1},8,["show"]))}}),Zo=Ne(Ko,[["__scopeId","data-v-8ae4c500"]]),Qo={class:"assert-config"},es={class:"conditions-list"},ts={class:"condition-summary"},ns={class:"wait-config-section"},rs={class:"wait-toggle-row"},as={key:0,class:"wait-params"},os=ve({__name:"AssertConfigDialog",emits:["confirm","add-element","add-image"],setup(a,{expose:c,emit:d}){const p=O(!1),g=O("and"),h=O([]),A=O(!1),$=O(Vo),S=O(Go),E=d;function y(){p.value=!0}function _(){p.value=!1}function U(){E("add-element")}function z(){E("add-image")}function M(G){h.value.push(G)}function R(G){h.value.splice(G,1)}function k(G){if(G.type==="element"){const J=G.expect==="exists"?"å­˜åœ¨":"ä¸å­˜åœ¨";return`${G.selector.xpath} ${J}`}else{const J=G.expect==="exists"?"å­˜åœ¨":"ä¸å­˜åœ¨";return`${G.template.name||"æ¨¡æ¿å›¾ç‰‡"} ${J}`}}function C(G){return G==="element"?"success":"info"}function F(){_()}function L(){const G={operator:g.value,conditions:h.value,wait:A.value?{enabled:!0,timeout:$.value,interval:S.value}:void 0};E("confirm",G),_()}return c({show:y,hide:_,addCondition:M}),(G,J)=>(T(),ye(o(rt),{show:p.value,"onUpdate:show":J[4]||(J[4]=ce=>p.value=ce),preset:"dialog",title:"é…ç½®æ–­è¨€"},{action:u(()=>[i(o(Be),null,{default:u(()=>[i(o(ae),{onClick:F},{default:u(()=>[...J[11]||(J[11]=[V("å–æ¶ˆ",-1)])]),_:1}),i(o(ae),{type:"primary",disabled:h.value.length===0,onClick:L},{default:u(()=>[...J[12]||(J[12]=[V(" ç¡®è®¤ ",-1)])]),_:1},8,["disabled"])]),_:1})]),default:u(()=>[x("div",Qo,[i(o(Se),{label:"é€»è¾‘è¿ç®—"},{default:u(()=>[i(o(st),{value:g.value,"onUpdate:value":J[0]||(J[0]=ce=>g.value=ce)},{default:u(()=>[i(o(tt),{value:"and"},{default:u(()=>[...J[5]||(J[5]=[V("AND (æ‰€æœ‰æ¡ä»¶æ»¡è¶³)",-1)])]),_:1}),i(o(tt),{value:"or"},{default:u(()=>[...J[6]||(J[6]=[V("OR (ä»»ä¸€æ¡ä»¶æ»¡è¶³)",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),i(o(Se),{label:"æ–­è¨€æ¡ä»¶"},{default:u(()=>[x("div",es,[(T(!0),W(Ye,null,Ke(h.value,(ce,xe)=>(T(),W("div",{key:xe,class:"condition-item"},[i(o(et),{type:C(ce.type)},{default:u(()=>[V(D(ce.type==="element"?"å…ƒç´ ":"å›¾ç‰‡"),1)]),_:2},1032,["type"]),x("span",ts,D(k(ce)),1),i(o(ae),{size:"small",onClick:H=>R(xe)},{default:u(()=>[...J[7]||(J[7]=[V("åˆ é™¤",-1)])]),_:1},8,["onClick"])]))),128))])]),_:1}),i(o(Be),null,{default:u(()=>[i(o(ae),{onClick:U},{default:u(()=>[...J[8]||(J[8]=[V("æ·»åŠ å…ƒç´ æ–­è¨€",-1)])]),_:1}),i(o(ae),{onClick:z},{default:u(()=>[...J[9]||(J[9]=[V("æ·»åŠ å›¾ç‰‡æ–­è¨€",-1)])]),_:1})]),_:1}),x("div",ns,[x("div",rs,[J[10]||(J[10]=x("span",{class:"wait-label"},"ç­‰å¾…é‡è¯•",-1)),i(o(hn),{value:A.value,"onUpdate:value":J[1]||(J[1]=ce=>A.value=ce)},null,8,["value"])]),A.value?(T(),W("div",as,[i(o(Se),{label:"è¶…æ—¶æ—¶é—´ (æ¯«ç§’)","label-placement":"left"},{default:u(()=>[i(o(ze),{value:$.value,"onUpdate:value":J[2]||(J[2]=ce=>$.value=ce),min:100,max:3e4,step:100},null,8,["value"])]),_:1}),i(o(Se),{label:"é‡è¯•é—´éš” (æ¯«ç§’)","label-placement":"left"},{default:u(()=>[i(o(ze),{value:S.value,"onUpdate:value":J[3]||(J[3]=ce=>S.value=ce),min:100,max:5e3,step:100},null,8,["value"])]),_:1})])):he("",!0)])])]),_:1},8,["show"]))}}),ss=Ne(os,[["__scopeId","data-v-ab159842"]]),is={class:"device-page"},ls={class:"page-header"},us={class:"serial"},cs={class:"main-area"},ds={class:"control-sidebar"},fs={class:"control-group"},vs={class:"control-group"},ps={class:"control-group"},hs={key:0,class:"control-group"},ms={class:"vertical-text"},gs={class:"screen-content"},ys={class:"text-input-bar"},xs={class:"screenshot-area"},ws={key:0,class:"property-details-panel"},ks={class:"xpath-selector-bar"},bs={class:"xpath-select-wrapper"},Ss={key:0,class:"xpath-display-bar"},_s={class:"xpath-text"},Cs={key:0,class:"siblings-nav"},$s={class:"property-details-table"},Ps={class:"property-cell label-cell"},As={class:"property-cell value-cell"},Fs={class:"right-panel"},Es=ve({__name:"Device",props:{platform:{},serial:{}},setup(a){const c=a,d=bn(),p=nt(),g=ft(),h=mn(),A=Ze(),$=O(null),S=O(null),E=O(null),y=O(null),_=O(null),U=fe(()=>{if(_.value==="element")return"assert-element";if(_.value==="screenshot")return"assert-screenshot"}),z=O("hierarchy"),M=O(!1),R=O(!1),k=O(void 0),C=fe(()=>A.t.device),F=O(""),L=O(450),G=O(!1);function J(v){G.value=!0,v.preventDefault()}function ce(v){if(!G.value)return;const w=v.clientX;w>=300&&w<=800&&(L.value=w,localStorage.setItem("screenPanelWidth",w.toString()))}function xe(){G.value=!1}async function H(v,w={},Q,ee){try{await Ue(c.platform,c.serial,v,w),p.success(Q)}catch(_e){p.error(`${ee}: ${_e instanceof Error?_e.message:String(_e)}`)}}const I=()=>H("volumeUp",{},"Volume up","Volume control failed"),X=()=>H("volumeDown",{},"Volume down","Volume control failed"),j=()=>H("volumeMute",{},"Volume muted","Volume control failed"),N=O(""),q=O(c.platform==="ios"?"class_and_label":"id");Re(()=>c.platform,v=>{(v==="ios"?new Set(["label","class","class_and_label"]):new Set(["id","text","class","class_and_text"])).has(q.value)||(q.value=v==="ios"?"class_and_label":"id")},{immediate:!0});const ie=(v,w)=>{if(!w)return"";switch(v){case"id":return w.resource_id?`//*[@resource-id="${w.resource_id}"]`:"";case"content-desc":return w.content_desc?`//*[@content-desc="${w.content_desc}"]`:"";case"text":return w.text?`//*[@text="${w.text}"]`:"";case"label":return w.label?`//*[@label="${w.label}"]`:"";case"class_and_text":return w.class_name&&w.text?`//${w.class_name}[@text="${w.text}"]`:"";case"class_and_label":return w.class_name&&w.label?`//${w.class_name}[@label="${w.label}"]`:"";case"class":return w.class_name?`//${w.class_name}`:"";default:return w.xpath||""}},le=fe(()=>{const v=De.value;if(!v)return[];const w=(ee,_e)=>{if(!_e||!g.hierarchy?.nodes)return 0;let $e=0;function Ee(Le){Le.forEach(qe=>{ie(ee,qe)===_e&&$e++,qe.children&&Ee(qe.children)})}return Ee(g.hierarchy.nodes),$e};return(c.platform==="ios"?[{label:"class_and_label",value:"class_and_label",xpath:ie("class_and_label",v)},{label:"label",value:"label",xpath:ie("label",v)},{label:"class",value:"class",xpath:ie("class",v)}]:[{label:"id",value:"id",xpath:ie("id",v)},{label:"class_and_text",value:"class_and_text",xpath:ie("class_and_text",v)},{label:"class",value:"class",xpath:ie("class",v)},{label:"text",value:"text",xpath:ie("text",v)}]).map(ee=>({...ee,count:ee.xpath?w(ee.value,ee.xpath):0}))}),Z=fe(()=>ie(q.value,De.value)),ke=O([]),B=O(-1);function de(v){if(ke.value=[],B.value=-1,!v||!g.hierarchy?.nodes)return;const w=ie(q.value,v);if(!w)return;const Q=[];function ee(_e){_e.forEach($e=>{ie(q.value,$e)===w&&Q.push($e),$e.children&&ee($e.children)})}ee(g.hierarchy.nodes),Q.length>1&&(ke.value=Q,B.value=Q.findIndex(_e=>_e.key===v.key))}function ue(v){v>=0&&v<ke.value.length&&g.selectNode(ke.value[v])}function me({option:v}){return v.label}function Ce(v){return we("div",{class:"xpath-option"},[we("span",{class:"xpath-option-label"},v.label),we("div",{class:"xpath-option-right"},[v.xpath?we("span",{class:"xpath-option-preview"},v.xpath):null,v.count>0?we("span",{class:"xpath-option-count"},v.count.toString()):null].filter(Boolean))])}async function K(){if(!N.value.trim()){p.warning("Please enter text");return}try{await Ue(c.platform,c.serial,"sendKeys",{text:N.value}),p.success(`Sent: ${N.value}`),N.value=""}catch(v){p.error(`Send text failed: ${v instanceof Error?v.message:String(v)}`)}}async function te(){try{await Ue(c.platform,c.serial,"clearText",{}),p.success("Text cleared")}catch(v){p.error(`Clear text failed: ${v instanceof Error?v.message:String(v)}`)}}const oe=()=>H("home",{},"Home","Home failed"),Ie=()=>H("back",{},"Back","Back failed"),je=()=>H("appSwitch",{},"App Switch","App Switch failed"),He=()=>H("wakeUp",{},"Wake Up","Wake Up failed"),We=()=>H("terminate",{},"Terminated current app","Terminate failed"),Ve=fe(()=>{switch(c.platform){case"android":return Tt;case"ios":return Cn;case"harmony":return Ut;default:return Tt}}),Je=fe(()=>{const v=g.screenSize;return{width:v?.width||0,height:v?.height||0}}),De=fe(()=>g.selectedNode);Re(()=>[De.value,q.value],([v])=>{de(v)},{immediate:!0});function at(v){const w={};if(v.index!==void 0&&(w.index=String(v.index)),v.text&&(w.text=v.text),v.label&&(w.label=v.label),v.resource_id&&(w["resource-id"]=v.resource_id),v.class_name&&(w.class=v.class_name),v.package&&(w.package=v.package),v.content_desc&&(w["content-desc"]=v.content_desc),v.checkable!==void 0&&(w.checkable=String(v.checkable)),v.checked!==void 0&&(w.checked=String(v.checked)),v.clickable!==void 0&&(w.clickable=String(v.clickable)),v.enabled!==void 0&&(w.enabled=String(v.enabled)),v.focusable!==void 0&&(w.focusable=String(v.focusable)),v.focused!==void 0&&(w.focused=String(v.focused)),v.scrollable!==void 0&&(w.scrollable=String(v.scrollable)),v.long_clickable!==void 0&&(w["long-clickable"]=String(v.long_clickable)),v.password!==void 0&&(w.password=String(v.password)),v.selected!==void 0&&(w.selected=String(v.selected)),v.visible_to_user!==void 0&&(w["visible-to-user"]=String(v.visible_to_user)),v.bounds){const[Q,ee,_e,$e]=v.bounds;w.bounds=`[${Q},${ee}][${_e},${$e}]`}return w}const Qe=fe(()=>{if(!De.value)return[];const v=De.value,w=[];if(v.index!==void 0&&w.push({label:"index",value:v.index}),v.text&&w.push({label:"text",value:v.text}),v.label&&w.push({label:"label",value:v.label}),v.resource_id&&w.push({label:"resource-id",value:v.resource_id}),v.class_name&&w.push({label:"class",value:v.class_name}),v.package&&w.push({label:"package",value:v.package}),v.content_desc&&w.push({label:"content-desc",value:v.content_desc}),v.checkable!==void 0&&w.push({label:"checkable",value:v.checkable}),v.checked!==void 0&&w.push({label:"checked",value:v.checked}),v.clickable!==void 0&&w.push({label:"clickable",value:v.clickable}),v.enabled!==void 0&&w.push({label:"enabled",value:v.enabled}),v.focusable!==void 0&&w.push({label:"focusable",value:v.focusable}),v.focused!==void 0&&w.push({label:"focused",value:v.focused}),v.scrollable!==void 0&&w.push({label:"scrollable",value:v.scrollable}),v.long_clickable!==void 0&&w.push({label:"long-clickable",value:v.long_clickable}),v.password!==void 0&&w.push({label:"password",value:v.password}),v.selected!==void 0&&w.push({label:"selected",value:v.selected}),v.visible_to_user!==void 0&&w.push({label:"visible-to-user",value:v.visible_to_user}),v.bounds){const[Q,ee,_e,$e]=v.bounds;w.push({label:"bounds",value:`[${Q},${ee}][${_e},${$e}]`})}return v.rect&&(w.push({label:"rect.x",value:v.rect.x}),w.push({label:"rect.y",value:v.rect.y}),w.push({label:"rect.width",value:v.rect.width}),w.push({label:"rect.height",value:v.rect.height})),v.xpath&&w.push({label:"xpath",value:v.xpath}),w.push({label:"raw",value:JSON.stringify(at(v),null,2)}),w});function n(v){const{width:w,height:Q}=Je.value,[ee,_e,$e,Ee]=v;if($e<=1&&Ee<=1){if(!w||!Q)throw new Error("æ— æ³•è®¡ç®—å…ƒç´ åæ ‡ï¼šå±å¹•å°ºå¯¸æœªçŸ¥");return[Math.round(ee*w),Math.round(_e*Q),Math.round($e*w),Math.round(Ee*Q)]}return v}function s(v,w){}async function e(v,w,Q){if($.value)try{await $.value.recordTap(v,w,Q)}catch(ee){p.error(`å½•åˆ¶ç‚¹å‡»å¤±è´¥: ${ee instanceof Error?ee.message:String(ee)}`),console.error("Failed to record tap:",ee)}}async function t(v,w,Q,ee,_e,$e){if($.value)try{await $.value.recordSwipe(v,w,Q,ee,_e,$e)}catch(Ee){p.error(`å½•åˆ¶æ»‘åŠ¨å¤±è´¥: ${Ee instanceof Error?Ee.message:String(Ee)}`),console.error("Failed to record swipe:",Ee)}}function r(v){v==="element"?(_.value="element",p.info("è¯·ç‚¹å‡»å±å¹•ä¸Šçš„å…ƒç´ ")):v==="screenshot"?(_.value="screenshot",p.info("è¯·åœ¨å±å¹•ä¸Šæ‹–æ‹½æ¡†é€‰åŒºåŸŸ")):v==="combined"&&y.value?.show()}function l(v){const w=v.xpath||ie("id",v)||`//*[@class="${v.class_name}"]`,Q={};v.text&&(Q.text=v.text),v.resource_id&&(Q.resourceId=v.resource_id),v.class_name&&(Q.className=v.class_name),S.value?.show(),S.value?.prefill({xpath:w,attributes:Q}),_.value=null}function f(v){const w=v.includes(",")?v.split(",")[1]:v,Q=Math.ceil(w.length*3/4);if(Q>Xo){p.error(`è£å‰ªåŒºåŸŸè¿‡å¤§ (${(Q/1024).toFixed(1)}KB)ï¼Œè¯·é€‰æ‹©æ›´å°çš„åŒºåŸŸ`);return}E.value?.show(),E.value?.setTemplateData(v),_.value=null}function m(v){y.value?.addCondition(v),y.value?.show()}function b(v){y.value?.addCondition(v),y.value?.show()}function P(v){$.value?.recordAssert(v),p.success("æ–­è¨€å·²æ·»åŠ ")}async function Y(){if(!De.value||!De.value.bounds){p.warning("è¯·å…ˆé€‰æ‹©ä¸€ä¸ªå…ƒç´ ");return}try{const v=Z.value||De.value.xpath;if(v)await Ue(c.platform,c.serial,"clickElement",{by:"xpath",value:v}),p.success("å·²é€šè¿‡ XPath ç‚¹å‡»å…ƒç´ ");else{const w=n(De.value.bounds),[Q,ee,_e,$e]=w,Ee=Math.round((Q+_e)/2),Le=Math.round((ee+$e)/2);await bt(c.platform,c.serial,Ee,Le),p.success(`ç‚¹å‡»å…ƒç´ : (${Ee}, ${Le})`)}if($.value?.getIsRecording?.()){const w=n(De.value.bounds),[Q,ee,_e,$e]=w,Ee=Math.round((Q+_e)/2),Le=Math.round((ee+$e)/2);await $.value.recordTap(Ee,Le,De.value),p.info("å·²å½•åˆ¶ç‚¹å‡»æ“ä½œï¼ˆå« XPathï¼‰")}}catch(v){p.error(`ç‚¹å‡»å¤±è´¥: ${v instanceof Error?v.message:String(v)}`)}}async function ne(){if(await g.refreshHierarchy(),g.error&&c.platform==="ios"){const v=g.error;if(v.includes("InvalidService")||v.includes("WDA")||v.includes("WebDriverAgent")){k.value=v,R.value=!0;return}}try{const v=await Ue(c.platform,c.serial,"currentApp",{});v&&typeof v=="object"&&"package"in v&&(F.value=v.package||"")}catch{}}async function re(v,w){try{await Pn(c.serial,{wda_bundle_id:v,wda_port:w}),p.success("é…ç½®å·²ä¿å­˜"),R.value=!1,k.value=void 0,await ne()}catch(Q){p.error(`ä¿å­˜é…ç½®å¤±è´¥: ${Q instanceof Error?Q.message:String(Q)}`)}}function se(){navigator.clipboard.writeText(c.serial),p.success("Copied")}function ge(v,w){d.push(`/${v}/${w}`)}function Fe(){const v=Z.value;if(!v){p.warning("No XPath available");return}navigator.clipboard.writeText(v),p.success("XPath copied")}function Te(v){(v.key==="r"||v.key==="R")&&!v.ctrlKey&&!v.metaKey&&(v.preventDefault(),ne())}Gt(()=>{const v=localStorage.getItem("screenPanelWidth");v&&(L.value=parseInt(v,10)),document.addEventListener("mousemove",ce),document.addEventListener("mouseup",xe),g.setDevice(c.platform,c.serial),ne(),document.addEventListener("keydown",Te)}),lt(()=>{document.removeEventListener("mousemove",ce),document.removeEventListener("mouseup",xe),document.removeEventListener("keydown",Te)}),Re(()=>[c.platform,c.serial],()=>{g.setDevice(c.platform,c.serial),ne()});const Pe=()=>H("swipeUp",{},"Swiped up","Swipe failed"),Ae=()=>H("swipeDown",{},"Swiped down","Swipe failed"),be=()=>H("swipeLeft",{},"Swiped left","Swipe failed"),Ge=()=>H("swipeRight",{},"Swiped right","Swipe failed");return(v,w)=>(T(),W("div",is,[x("header",ls,[i(o(Be),{align:"center",size:12},{default:u(()=>[i(o(ae),{secondary:"",size:"small",onClick:w[0]||(w[0]=Q=>M.value=!0)},{icon:u(()=>[i(o(pe),null,{default:u(()=>[i(o(Dt))]),_:1})]),default:u(()=>[V(" "+D(C.value.selectDevice),1)]),_:1}),i(o(pe),{size:"20",color:"#18a058"},{default:u(()=>[(T(),ye(Ft(Ve.value)))]),_:1}),x("span",us,D(a.serial),1),i(o(ae),{text:"",size:"small",onClick:se},{icon:u(()=>[i(o(pe),{size:"14"},{default:u(()=>[i(o(Rt))]),_:1})]),_:1}),i(o(Vt),{size:"small"},{default:u(()=>[i(o(ae),{type:z.value==="hierarchy"?"primary":"default",secondary:z.value!=="hierarchy",onClick:w[1]||(w[1]=Q=>z.value="hierarchy")},{default:u(()=>[V(D(C.value.hierarchy),1)]),_:1},8,["type","secondary"]),i(o(ae),{type:z.value==="actions"?"primary":"default",secondary:z.value!=="actions",onClick:w[2]||(w[2]=Q=>z.value="actions")},{default:u(()=>[V(D(C.value.actions),1)]),_:1},8,["type","secondary"]),i(o(ae),{type:z.value==="package"?"primary":"default",secondary:z.value!=="package",onClick:w[3]||(w[3]=Q=>z.value="package")},{default:u(()=>[V(D(C.value.package),1)]),_:1},8,["type","secondary"])]),_:1})]),_:1}),i(o(Be),{align:"center",size:16},{default:u(()=>[i(o(Me),{placement:"bottom"},{trigger:u(()=>[i(o(ae),{quaternary:"",circle:"",onClick:ne,loading:o(g).loading},{icon:u(()=>[i(o(pe),{size:"20"},{default:u(()=>[i(o(St))]),_:1})]),_:1},8,["loading"])]),default:u(()=>[V(" "+D(C.value.refresh),1)]),_:1}),i(o(ae),{quaternary:"",circle:"",onClick:o(h).toggleTheme},{icon:u(()=>[i(o(pe),{size:"20"},{default:u(()=>[(T(),ye(Ft(o(h).isDark?o(Ut):o(er))))]),_:1})]),_:1},8,["onClick"]),i(o(st),{value:o(A).locale,"onUpdate:value":w[4]||(w[4]=Q=>o(A).locale=Q),size:"small"},{default:u(()=>[i(o(ut),{value:"zh"},{default:u(()=>[...w[11]||(w[11]=[V("ä¸­æ–‡",-1)])]),_:1}),i(o(ut),{value:"en"},{default:u(()=>[...w[12]||(w[12]=[V("English",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),x("div",cs,[x("div",{class:"screen-panel",style:gn({width:L.value+"px"})},[x("div",ds,[x("div",fs,[i(o(Me),{placement:"right"},{trigger:u(()=>[i(o(ae),{quaternary:"",circle:"",size:"small",onClick:oe},{icon:u(()=>[i(o(pe),{size:"18"},{default:u(()=>[i(o(Zn))]),_:1})]),_:1})]),default:u(()=>[V(" "+D(C.value.home),1)]),_:1}),i(o(Me),{placement:"right"},{trigger:u(()=>[i(o(ae),{quaternary:"",circle:"",size:"small",onClick:Ie},{icon:u(()=>[i(o(pe),{size:"18"},{default:u(()=>[i(o(Mt))]),_:1})]),_:1})]),default:u(()=>[V(" "+D(C.value.back),1)]),_:1}),i(o(Me),{placement:"right"},{trigger:u(()=>[i(o(ae),{quaternary:"",circle:"",size:"small",onClick:je},{icon:u(()=>[i(o(pe),{size:"18"},{default:u(()=>[i(o(Dt))]),_:1})]),_:1})]),default:u(()=>[V(" "+D(C.value.apps),1)]),_:1}),i(o(Me),{placement:"right"},{trigger:u(()=>[i(o(ae),{quaternary:"",circle:"",size:"small",onClick:He},{icon:u(()=>[i(o(pe),{size:"18"},{default:u(()=>[i(o(cr))]),_:1})]),_:1})]),default:u(()=>[V(" "+D(C.value.wake),1)]),_:1}),i(o(Me),{placement:"right"},{trigger:u(()=>[i(o(ae),{quaternary:"",circle:"",size:"small",onClick:We},{icon:u(()=>[i(o(pe),{size:"18"},{default:u(()=>[i(o(_t))]),_:1})]),_:1})]),default:u(()=>[V(" "+D(C.value.stop),1)]),_:1})]),x("div",vs,[i(o(Me),{placement:"right"},{trigger:u(()=>[i(o(ae),{quaternary:"",circle:"",size:"small",onClick:X},{icon:u(()=>[i(o(pe),{size:"18"},{default:u(()=>[i(o(Cr))]),_:1})]),_:1})]),default:u(()=>[V(" "+D(C.value.volumeDown),1)]),_:1}),i(o(Me),{placement:"right"},{trigger:u(()=>[i(o(ae),{quaternary:"",circle:"",size:"small",onClick:j},{icon:u(()=>[i(o(pe),{size:"18"},{default:u(()=>[i(o(Pr))]),_:1})]),_:1})]),default:u(()=>[V(" "+D(C.value.volumeMute),1)]),_:1}),i(o(Me),{placement:"right"},{trigger:u(()=>[i(o(ae),{quaternary:"",circle:"",size:"small",onClick:I},{icon:u(()=>[i(o(pe),{size:"18"},{default:u(()=>[i(o(Sr))]),_:1})]),_:1})]),default:u(()=>[V(" "+D(C.value.volumeUp),1)]),_:1})]),x("div",ps,[i(o(Me),{placement:"right"},{trigger:u(()=>[i(o(ae),{circle:"",size:"small",onClick:Pe},{icon:u(()=>[i(o(pe),{size:"18"},{default:u(()=>[i(o(Mn))]),_:1})]),_:1})]),default:u(()=>[V(" "+D(C.value.swipeUp),1)]),_:1}),i(o(Me),{placement:"right"},{trigger:u(()=>[i(o(ae),{circle:"",size:"small",onClick:Ae},{icon:u(()=>[i(o(pe),{size:"18"},{default:u(()=>[i(o(Tn))]),_:1})]),_:1})]),default:u(()=>[V(" "+D(C.value.swipeDown),1)]),_:1}),i(o(Me),{placement:"right"},{trigger:u(()=>[i(o(ae),{circle:"",size:"small",onClick:be},{icon:u(()=>[i(o(pe),{size:"18"},{default:u(()=>[i(o(Mt))]),_:1})]),_:1})]),default:u(()=>[V(" "+D(C.value.swipeLeft),1)]),_:1}),i(o(Me),{placement:"right"},{trigger:u(()=>[i(o(ae),{circle:"",size:"small",onClick:Ge},{icon:u(()=>[i(o(pe),{size:"18"},{default:u(()=>[i(o(Yt))]),_:1})]),_:1})]),default:u(()=>[V(" "+D(C.value.swipeRight),1)]),_:1})]),De.value?(T(),W("div",hs,[i(o(ae),{type:"primary",size:"small",onClick:Y,class:"vertical-text-btn"},{default:u(()=>[x("span",ms,D(C.value.tapElement),1)]),_:1})])):he("",!0)]),x("div",gs,[x("div",ys,[i(o(Oe),{value:N.value,"onUpdate:value":w[5]||(w[5]=Q=>N.value=Q),size:"small",placeholder:"Enter text to send...",onKeydown:jt(K,["enter"]),style:{flex:"1"}},null,8,["value"]),i(o(Me),null,{trigger:u(()=>[i(o(ae),{type:"primary",size:"small",onClick:K,disabled:!N.value.trim()},{icon:u(()=>[i(o(pe),null,{default:u(()=>[i(o(gr))]),_:1})]),_:1},8,["disabled"])]),default:u(()=>[w[13]||(w[13]=V(" Send ",-1))]),_:1}),i(o(Me),null,{trigger:u(()=>[i(o(ae),{quaternary:"",size:"small",onClick:te},{icon:u(()=>[i(o(pe),null,{default:u(()=>[i(o(Ct))]),_:1})]),_:1})]),default:u(()=>[w[14]||(w[14]=V(" Clear ",-1))]),_:1})]),x("div",xs,[i(o(yn),{show:o(g).loading,style:{width:"100%",height:"100%"}},{default:u(()=>[o(g).screenshotUrl?(T(),ye(oa,{key:0,platform:a.platform,serial:a.serial,"screen-size":Je.value,"screen-mode":U.value,onTap:s,onRecordTap:e,onRecordSwipe:t,onElementSelected:l,onScreenshotCropped:f},null,8,["platform","serial","screen-size","screen-mode"])):he("",!0)]),_:1},8,["show"])])])],4),x("div",{class:"resize-handle",onMousedown:J},null,32),z.value==="hierarchy"?(T(),W("div",ws,[x("div",ks,[w[15]||(w[15]=x("span",{class:"xpath-label"},"XPath by",-1)),x("div",bs,[i(o(xn),{value:q.value,"onUpdate:value":w[6]||(w[6]=Q=>q.value=Q),options:le.value,"render-label":Ce,"render-tag":me,"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),i(o(ae),{size:"small",quaternary:"",circle:"",onClick:Fe,disabled:!Z.value},{icon:u(()=>[i(o(pe),null,{default:u(()=>[i(o(Rt))]),_:1})]),_:1},8,["disabled"])]),Z.value?(T(),W("div",Ss,[x("div",_s,D(Z.value),1),ke.value.length>1?(T(),W("div",Cs,[(T(!0),W(Ye,null,Ke(ke.value,(Q,ee)=>(T(),ye(o(ae),{key:ee,size:"small",type:ee===B.value?"info":"default",secondary:ee!==B.value,circle:"",onClick:_e=>ue(ee),class:"sibling-btn"},{default:u(()=>[V(D(ee+1),1)]),_:2},1032,["type","secondary","onClick"]))),128))])):he("",!0)])):he("",!0),x("div",$s,[(T(!0),W(Ye,null,Ke(Qe.value,Q=>(T(),W("div",{key:Q.label,class:"property-row"},[x("div",Ps,D(Q.label),1),x("div",As,[i(o(pe),{class:"circle-icon"},{default:u(()=>[i(o(xt))]),_:1}),x("span",null,D(Q.value),1)])]))),128)),Qe.value.length===0?(T(),ye(o(ct),{key:0,description:"No element selected"})):he("",!0)])])):he("",!0),x("div",Fs,[z.value==="hierarchy"?(T(),ye(xa,{key:0,platform:a.platform,serial:a.serial},null,8,["platform","serial"])):he("",!0),wn(i(lo,{ref_key:"actionsPanelRef",ref:$,platform:a.platform,serial:a.serial,onAssertMenuSelect:r},null,8,["platform","serial"]),[[kn,z.value==="actions"]]),z.value==="package"?(T(),ye(_o,{key:1,platform:a.platform,serial:a.serial},null,8,["platform","serial"])):he("",!0)])]),i($n,{show:M.value,"onUpdate:show":w[7]||(w[7]=Q=>M.value=Q),onSelect:ge},null,8,["show"]),i(zo,{show:R.value,"onUpdate:show":w[8]||(w[8]=Q=>R.value=Q),serial:a.serial,"error-message":k.value,onConfirm:re},null,8,["show","serial","error-message"]),i(Ho,{ref_key:"elementSelectorDialogRef",ref:S,onConfirm:m},null,512),i(Zo,{ref_key:"imageSelectorDialogRef",ref:E,onConfirm:b},null,512),i(ss,{ref_key:"assertConfigDialogRef",ref:y,onConfirm:P,onAddElement:w[9]||(w[9]=Q=>_.value="element"),onAddImage:w[10]||(w[10]=Q=>_.value="screenshot")},null,512)]))}}),Ds=Ne(Es,[["__scopeId","data-v-26719c59"]]);export{Ds as default};
