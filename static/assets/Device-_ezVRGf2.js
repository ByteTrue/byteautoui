import{d as te,c as P,o as g,a as Ze,b as x,e as Qt,r as z,f as me,g as bt,u as Qe,w as Oe,h as u,i as o,N as Ot,j as h,k as st,l as G,m as K,t as O,n as xt,p as ge,q as pe,s as Te,v as Lt,F as Me,x as Re,y as ye,z as en,A as zt,B as Rt,C as It,D as at,E as ze,G as J,H as Ge,I as nt,J as mt,K as Je,L as tn,M as nn,O as vt,P as Pt,Q as De,R as Le,S as Ye,T as rt,U as Nt,V as qe,W as rn,X as an,Y as Pe,Z as sn,_ as on,$ as ln,a0 as cn}from"./index-CaCwsOm3.js";const un={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ft=te({name:"AppsOutline",render:function(d,c){return g(),P("svg",un,c[0]||(c[0]=[Ze('<rect x="64" y="64" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="216" y="64" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="368" y="64" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="64" y="216" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="216" y="216" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="368" y="216" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="64" y="368" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="216" y="368" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="368" y="368" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect>',9)]))}}),dn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},At=te({name:"ArrowBackOutline",render:function(d,c){return g(),P("svg",dn,c[0]||(c[0]=[x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M244 400L100 256l144-144"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M120 256h292"},null,-1)]))}}),fn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},jt=te({name:"ArrowDownOutline",render:function(d,c){return g(),P("svg",fn,c[0]||(c[0]=[x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M112 268l144 144l144-144"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M256 392V100"},null,-1)]))}}),hn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ht=te({name:"ArrowForwardOutline",render:function(d,c){return g(),P("svg",hn,c[0]||(c[0]=[x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M268 112l144 144l-144 144"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M392 256H100"},null,-1)]))}}),pn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Vt=te({name:"ArrowUpOutline",render:function(d,c){return g(),P("svg",pn,c[0]||(c[0]=[x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M112 244l144-144l144 144"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M256 120v292"},null,-1)]))}}),vn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},xn=te({name:"ChevronDownOutline",render:function(d,c){return g(),P("svg",vn,c[0]||(c[0]=[x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M112 184l144 144l144-144"},null,-1)]))}}),mn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},yn=te({name:"CloseOutline",render:function(d,c){return g(),P("svg",mn,c[0]||(c[0]=[x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 368L144 144"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 144L144 368"},null,-1)]))}}),gn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ut=te({name:"CopyOutline",render:function(d,c){return g(),P("svg",gn,c[0]||(c[0]=[x("rect",{x:"128",y:"128",width:"336",height:"336",rx:"57",ry:"57",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("path",{d:"M383.5 128l.5-24a56.16 56.16 0 0 0-56-56H112a64.19 64.19 0 0 0-64 64v216a56.16 56.16 0 0 0 56 56h24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),kn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},wn=te({name:"CreateOutline",render:function(d,c){return g(),P("svg",kn,c[0]||(c[0]=[x("path",{d:"M384 224v184a40 40 0 0 1-40 40H104a40 40 0 0 1-40-40V168a40 40 0 0 1 40-40h167.48",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("path",{d:"M459.94 53.25a16.06 16.06 0 0 0-23.22-.56L424.35 65a8 8 0 0 0 0 11.31l11.34 11.32a8 8 0 0 0 11.34 0l12.06-12c6.1-6.09 6.67-16.01.85-22.38z",fill:"currentColor"},null,-1),x("path",{d:"M399.34 90L218.82 270.2a9 9 0 0 0-2.31 3.93L208.16 299a3.91 3.91 0 0 0 4.86 4.86l24.85-8.35a9 9 0 0 0 3.93-2.31L422 112.66a9 9 0 0 0 0-12.66l-9.95-10a9 9 0 0 0-12.71 0z",fill:"currentColor"},null,-1)]))}}),_n={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},bn=te({name:"DocumentOutline",render:function(d,c){return g(),P("svg",_n,c[0]||(c[0]=[x("path",{d:"M416 221.25V416a48 48 0 0 1-48 48H144a48 48 0 0 1-48-48V96a48 48 0 0 1 48-48h98.75a32 32 0 0 1 22.62 9.37l141.26 141.26a32 32 0 0 1 9.37 22.62z",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("path",{d:"M256 56v120a32 32 0 0 0 32 32h120",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),Sn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Cn=te({name:"DownloadOutline",render:function(d,c){return g(),P("svg",Sn,c[0]||(c[0]=[x("path",{d:"M336 176h40a40 40 0 0 1 40 40v208a40 40 0 0 1-40 40H136a40 40 0 0 1-40-40V216a40 40 0 0 1 40-40h40",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M176 272l80 80l80-80"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 48v288"},null,-1)]))}}),$n={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Pn=te({name:"EyeOutline",render:function(d,c){return g(),P("svg",$n,c[0]||(c[0]=[x("path",{d:"M255.66 112c-77.94 0-157.89 45.11-220.83 135.33a16 16 0 0 0-.27 17.77C82.92 340.8 161.8 400 255.66 400c92.84 0 173.34-59.38 221.79-135.25a16.14 16.14 0 0 0 0-17.47C428.89 172.28 347.8 112 255.66 112z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("circle",{cx:"256",cy:"256",r:"80",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1)]))}}),Fn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Gt=te({name:"FingerPrintOutline",render:function(d,c){return g(),P("svg",Fn,c[0]||(c[0]=[x("path",{d:"M390.42 75.28a10.45 10.45 0 0 1-5.32-1.44C340.72 50.08 302.35 40 256.35 40c-45.77 0-89.23 11.28-128.76 33.84C122 77 115.11 74.8 111.87 69a12.4 12.4 0 0 1 4.63-16.32A281.81 281.81 0 0 1 256.35 16c49.23 0 92.23 11.28 139.39 36.48a12 12 0 0 1 4.85 16.08a11.3 11.3 0 0 1-10.17 6.72zm-330.79 126a11.73 11.73 0 0 1-6.7-2.16a12.26 12.26 0 0 1-2.78-16.8c22.89-33.6 52-60 86.69-78.48c72.58-38.84 165.51-39.12 238.32-.24c34.68 18.48 63.8 44.64 86.69 78a12.29 12.29 0 0 1-2.78 16.8a11.26 11.26 0 0 1-16.18-2.88c-20.8-30.24-47.15-54-78.36-70.56c-66.34-35.28-151.18-35.28-217.29.24c-31.44 16.8-57.79 40.8-78.59 71a10 10 0 0 1-9.02 5.08zM204.1 491a10.66 10.66 0 0 1-8.09-3.6C175.9 466.48 165 453 149.55 424c-16-29.52-24.27-65.52-24.27-104.16c0-71.28 58.71-129.36 130.84-129.36S387 248.56 387 319.84a11.56 11.56 0 1 1-23.11 0c0-58.08-48.32-105.36-107.72-105.36S148.4 261.76 148.4 319.84c0 34.56 7.39 66.48 21.49 92.4c14.8 27.6 25 39.36 42.77 58.08a12.67 12.67 0 0 1 0 17a12.44 12.44 0 0 1-8.56 3.68zm165.75-44.4c-27.51 0-51.78-7.2-71.66-21.36a129.1 129.1 0 0 1-55-105.36a11.57 11.57 0 1 1 23.12 0a104.28 104.28 0 0 0 44.84 85.44c16.41 11.52 35.6 17 58.72 17a147.41 147.41 0 0 0 24-2.4c6.24-1.2 12.25 3.12 13.4 9.84a11.92 11.92 0 0 1-9.47 13.92a152.28 152.28 0 0 1-27.95 2.88zM323.38 496a13 13 0 0 1-3-.48c-36.76-10.56-60.8-24.72-86-50.4c-32.37-33.36-50.16-77.76-50.16-125.28c0-38.88 31.9-70.56 71.19-70.56s71.2 31.68 71.2 70.56c0 25.68 21.5 46.56 48.08 46.56s48.08-20.88 48.08-46.56c0-90.48-75.13-163.92-167.59-163.92c-65.65 0-125.75 37.92-152.79 96.72c-9 19.44-13.64 42.24-13.64 67.2c0 18.72 1.61 48.24 15.48 86.64c2.32 6.24-.69 13.2-6.7 15.36a11.34 11.34 0 0 1-14.79-7a276.39 276.39 0 0 1-16.88-95c0-28.8 5.32-55 15.72-77.76c30.75-67 98.94-110.4 173.6-110.4c105.18 0 190.71 84.24 190.71 187.92c0 38.88-31.9 70.56-71.2 70.56s-71.2-31.68-71.2-70.56c.01-25.68-21.49-46.6-48.07-46.6s-48.08 20.88-48.08 46.56c0 41 15.26 79.44 43.23 108.24c22 22.56 43 35 75.59 44.4c6.24 1.68 9.71 8.4 8.09 14.64a11.39 11.39 0 0 1-10.87 9.16z",fill:"currentColor"},null,-1)]))}}),An={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Un=te({name:"FolderOutline",render:function(d,c){return g(),P("svg",An,c[0]||(c[0]=[x("path",{d:"M440 432H72a40 40 0 0 1-40-40V120a40 40 0 0 1 40-40h75.89a40 40 0 0 1 22.19 6.72l27.84 18.56a40 40 0 0 0 22.19 6.72H440a40 40 0 0 1 40 40v240a40 40 0 0 1-40 40z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M32 192h448"},null,-1)]))}}),Dn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Dt=te({name:"GameControllerOutline",render:function(d,c){return g(),P("svg",Dn,c[0]||(c[0]=[Ze('<path d="M467.51 248.83c-18.4-83.18-45.69-136.24-89.43-149.17A91.5 91.5 0 0 0 352 96c-26.89 0-48.11 16-96 16s-69.15-16-96-16a99.09 99.09 0 0 0-27.2 3.66C89 112.59 61.94 165.7 43.33 248.83c-19 84.91-15.56 152 21.58 164.88c26 9 49.25-9.61 71.27-37c25-31.2 55.79-40.8 119.82-40.8s93.62 9.6 118.66 40.8c22 27.41 46.11 45.79 71.42 37.16c41.02-14.01 40.44-79.13 21.43-165.04z" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></path><circle cx="292" cy="224" r="20" fill="currentColor"></circle><path d="M336 288a20 20 0 1 1 20-19.95A20 20 0 0 1 336 288z" fill="currentColor"></path><circle cx="336" cy="180" r="20" fill="currentColor"></circle><circle cx="380" cy="224" r="20" fill="currentColor"></circle><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M160 176v96"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M208 224h-96"></path>',7)]))}}),En={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Tn=te({name:"HomeOutline",render:function(d,c){return g(),P("svg",En,c[0]||(c[0]=[x("path",{d:"M80 212v236a16 16 0 0 0 16 16h96V328a24 24 0 0 1 24-24h80a24 24 0 0 1 24 24v136h96a16 16 0 0 0 16-16V212",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("path",{d:"M480 256L266.89 52c-5-5.28-16.69-5.34-21.78 0L32 256",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M400 179V64h-48v69"},null,-1)]))}}),Mn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},yt=te({name:"LogoAndroid",render:function(d,c){return g(),P("svg",Mn,c[0]||(c[0]=[x("path",{d:"M380.91 199l42.47-73.57a8.63 8.63 0 0 0-3.12-11.76a8.52 8.52 0 0 0-11.71 3.12l-43 74.52c-32.83-15-69.78-23.35-109.52-23.35s-76.69 8.36-109.52 23.35l-43-74.52a8.6 8.6 0 1 0-14.88 8.64L131 199C57.8 238.64 8.19 312.77 0 399.55h512c-8.19-86.78-57.8-160.91-131.09-200.55zM138.45 327.65a21.46 21.46 0 1 1 21.46-21.46a21.47 21.47 0 0 1-21.46 21.46zm235 0A21.46 21.46 0 1 1 395 306.19a21.47 21.47 0 0 1-21.51 21.46z",fill:"currentColor"},null,-1)]))}}),Bn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Xt=te({name:"LogoApple",render:function(d,c){return g(),P("svg",Bn,c[0]||(c[0]=[x("path",{d:"M349.13 136.86c-40.32 0-57.36 19.24-85.44 19.24c-28.79 0-50.75-19.1-85.69-19.1c-34.2 0-70.67 20.88-93.83 56.45c-32.52 50.16-27 144.63 25.67 225.11c18.84 28.81 44 61.12 77 61.47h.6c28.68 0 37.2-18.78 76.67-19h.6c38.88 0 46.68 18.89 75.24 18.89h.6c33-.35 59.51-36.15 78.35-64.85c13.56-20.64 18.6-31 29-54.35c-76.19-28.92-88.43-136.93-13.08-178.34c-23-28.8-55.32-45.48-85.79-45.48z",fill:"currentColor"},null,-1),x("path",{d:"M340.25 32c-24 1.63-52 16.91-68.4 36.86c-14.88 18.08-27.12 44.9-22.32 70.91h1.92c25.56 0 51.72-15.39 67-35.11c14.72-18.77 25.88-45.37 21.8-72.66z",fill:"currentColor"},null,-1)]))}}),On={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ln=te({name:"MoonOutline",render:function(d,c){return g(),P("svg",On,c[0]||(c[0]=[x("path",{d:"M160 136c0-30.62 4.51-61.61 16-88C99.57 81.27 48 159.32 48 248c0 119.29 96.71 216 216 216c88.68 0 166.73-51.57 200-128c-26.39 11.49-57.38 16-88 16c-119.29 0-216-96.71-216-216z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),zn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Rn=te({name:"PauseOutline",render:function(d,c){return g(),P("svg",zn,c[0]||(c[0]=[x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M176 96h16v320h-16z"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M320 96h16v320h-16z"},null,-1)]))}}),In={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Nn=te({name:"PlayOutline",render:function(d,c){return g(),P("svg",In,c[0]||(c[0]=[x("path",{d:"M112 111v290c0 17.44 17 28.52 31 20.16l247.9-148.37c12.12-7.25 12.12-26.33 0-33.58L143 90.84c-14-8.36-31 2.72-31 20.16z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1)]))}}),jn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Hn=te({name:"PlaySkipForwardOutline",render:function(d,c){return g(),P("svg",jn,c[0]||(c[0]=[x("path",{d:"M112 111v290c0 17.44 17 28.52 31 20.16l247.9-148.37c12.12-7.25 12.12-26.33 0-33.58L143 90.84c-14-8.36-31 2.72-31 20.16z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32",d:"M400 80v352"},null,-1)]))}}),Vn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Gn=te({name:"PowerOutline",render:function(d,c){return g(),P("svg",Vn,c[0]||(c[0]=[x("path",{d:"M378 108a191.41 191.41 0 0 1 70 148c0 106-86 192-192 192S64 362 64 256a192 192 0 0 1 69-148",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 64v192"},null,-1)]))}}),Xn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},gt=te({name:"RadioButtonOnOutline",render:function(d,c){return g(),P("svg",Xn,c[0]||(c[0]=[x("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),x("circle",{cx:"256",cy:"256",r:"144",fill:"currentColor"},null,-1)]))}}),Wn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},St=te({name:"RefreshOutline",render:function(d,c){return g(),P("svg",Wn,c[0]||(c[0]=[x("path",{d:"M320 146s24.36-12-64-12a160 160 0 1 0 160 160",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 58l80 80l-80 80"},null,-1)]))}}),Kn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Et=te({name:"SaveOutline",render:function(d,c){return g(),P("svg",Kn,c[0]||(c[0]=[x("path",{d:"M380.93 57.37A32 32 0 0 0 358.3 48H94.22A46.21 46.21 0 0 0 48 94.22v323.56A46.21 46.21 0 0 0 94.22 464h323.56A46.36 46.36 0 0 0 464 417.78V153.7a32 32 0 0 0-9.37-22.63zM256 416a64 64 0 1 1 64-64a63.92 63.92 0 0 1-64 64zm48-224H112a16 16 0 0 1-16-16v-64a16 16 0 0 1 16-16h192a16 16 0 0 1 16 16v64a16 16 0 0 1-16 16z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),Jn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Yn=te({name:"SearchOutline",render:function(d,c){return g(),P("svg",Jn,c[0]||(c[0]=[x("path",{d:"M221.09 64a157.09 157.09 0 1 0 157.09 157.09A157.1 157.1 0 0 0 221.09 64z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32",d:"M338.29 338.29L448 448"},null,-1)]))}}),qn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Zn=te({name:"SendOutline",render:function(d,c){return g(),P("svg",qn,c[0]||(c[0]=[x("path",{d:"M470.3 271.15L43.16 447.31a7.83 7.83 0 0 1-11.16-7V327a8 8 0 0 1 6.51-7.86l247.62-47c17.36-3.29 17.36-28.15 0-31.44l-247.63-47a8 8 0 0 1-6.5-7.85V72.59c0-5.74 5.88-10.26 11.16-8L470.3 241.76a16 16 0 0 1 0 29.39z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),Qn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},kt=te({name:"StopCircleOutline",render:function(d,c){return g(),P("svg",Qn,c[0]||(c[0]=[x("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),x("path",{d:"M310.4 336H201.6a25.62 25.62 0 0 1-25.6-25.6V201.6a25.62 25.62 0 0 1 25.6-25.6h108.8a25.62 25.62 0 0 1 25.6 25.6v108.8a25.62 25.62 0 0 1-25.6 25.6z",fill:"currentColor"},null,-1)]))}}),er={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},wt=te({name:"SunnyOutline",render:function(d,c){return g(),P("svg",er,c[0]||(c[0]=[Ze('<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M256 48v48"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M256 416v48"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M403.08 108.92l-33.94 33.94"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M142.86 369.14l-33.94 33.94"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M464 256h-48"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M96 256H48"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M403.08 403.08l-33.94-33.94"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M142.86 142.86l-33.94-33.94"></path><circle cx="256" cy="256" r="80" fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32"></circle>',9)]))}}),tr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},_t=te({name:"TrashOutline",render:function(d,c){return g(),P("svg",tr,c[0]||(c[0]=[Ze('<path d="M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M80 112h352" fill="currentColor"></path><path d="M192 112V72h0a23.93 23.93 0 0 1 24-24h80a23.93 23.93 0 0 1 24 24h0v40" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M256 176v224"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M184 176l8 224"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M328 176l-8 224"></path>',6)]))}}),nr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},rr=te({name:"VolumeHighOutline",render:function(d,c){return g(),P("svg",nr,c[0]||(c[0]=[x("path",{d:"M126 192H56a8 8 0 0 0-8 8v112a8 8 0 0 0 8 8h69.65a15.93 15.93 0 0 1 10.14 3.54l91.47 74.89A8 8 0 0 0 240 392V120a8 8 0 0 0-12.74-6.43l-91.47 74.89A15 15 0 0 1 126 192z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("path",{d:"M320 320c9.74-19.38 16-40.84 16-64c0-23.48-6-44.42-16-64",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("path",{d:"M368 368c19.48-33.92 32-64.06 32-112s-12-77.74-32-112",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("path",{d:"M416 416c30-46 48-91.43 48-160s-18-113-48-160",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),ar={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ir=te({name:"VolumeLowOutline",render:function(d,c){return g(),P("svg",ar,c[0]||(c[0]=[x("path",{d:"M189.65 192H120a8 8 0 0 0-8 8v112a8 8 0 0 0 8 8h69.65a16 16 0 0 1 10.14 3.63l91.47 75a8 8 0 0 0 12.74-6.46V119.83a8 8 0 0 0-12.74-6.44l-91.47 75a16 16 0 0 1-10.14 3.61z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),x("path",{d:"M384 320c9.74-19.41 16-40.81 16-64c0-23.51-6-44.4-16-64",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),sr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},or=te({name:"VolumeMuteOutline",render:function(d,c){return g(),P("svg",sr,c[0]||(c[0]=[Ze('<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M416 432L64 80"></path><path d="M224 136.92v33.8a4 4 0 0 0 1.17 2.82l24 24a4 4 0 0 0 6.83-2.82v-74.15a24.53 24.53 0 0 0-12.67-21.72a23.91 23.91 0 0 0-25.55 1.83a8.27 8.27 0 0 0-.66.51l-31.94 26.15a4 4 0 0 0-.29 5.92l17.05 17.06a4 4 0 0 0 5.37.26z" fill="currentColor"></path><path d="M224 375.08l-78.07-63.92a32 32 0 0 0-20.28-7.16H64v-96h50.72a4 4 0 0 0 2.82-6.83l-24-24a4 4 0 0 0-2.82-1.17H56a24 24 0 0 0-24 24v112a24 24 0 0 0 24 24h69.76l91.36 74.8a8.27 8.27 0 0 0 .66.51a23.93 23.93 0 0 0 25.85 1.69A24.49 24.49 0 0 0 256 391.45v-50.17a4 4 0 0 0-1.17-2.82l-24-24a4 4 0 0 0-6.83 2.82zM125.82 336z" fill="currentColor"></path><path d="M352 256c0-24.56-5.81-47.88-17.75-71.27a16 16 0 0 0-28.5 14.54C315.34 218.06 320 236.62 320 256q0 4-.31 8.13a8 8 0 0 0 2.32 6.25l19.66 19.67a4 4 0 0 0 6.75-2A146.89 146.89 0 0 0 352 256z" fill="currentColor"></path><path d="M416 256c0-51.19-13.08-83.89-34.18-120.06a16 16 0 0 0-27.64 16.12C373.07 184.44 384 211.83 384 256c0 23.83-3.29 42.88-9.37 60.65a8 8 0 0 0 1.9 8.26l16.77 16.76a4 4 0 0 0 6.52-1.27C410.09 315.88 416 289.91 416 256z" fill="currentColor"></path><path d="M480 256c0-74.26-20.19-121.11-50.51-168.61a16 16 0 1 0-27 17.22C429.82 147.38 448 189.5 448 256c0 47.45-8.9 82.12-23.59 113a4 4 0 0 0 .77 4.55L443 391.39a4 4 0 0 0 6.4-1C470.88 348.22 480 307 480 256z" fill="currentColor"></path>',6)]))}});function ot(p){const d=p.properties||{};let c;if(p.rect)c=[p.rect.x,p.rect.y,p.rect.x+p.rect.width,p.rect.y+p.rect.height];else if(d.bounds){const f=d.bounds.match(/\[(\d+),(\d+)\]\[(\d+),(\d+)\]/);f&&f[1]&&f[2]&&f[3]&&f[4]&&(c=[parseInt(f[1],10),parseInt(f[2],10),parseInt(f[3],10),parseInt(f[4],10)])}return{key:p.key,index:d.index?parseInt(d.index):void 0,text:d.text||void 0,resource_id:d["resource-id"]||void 0,class_name:d.class||p.name||void 0,package:d.package||void 0,content_desc:d["content-desc"]||void 0,checkable:d.checkable==="true",checked:d.checked==="true",clickable:d.clickable==="true",enabled:d.enabled==="true",focusable:d.focusable==="true",focused:d.focused==="true",scrollable:d.scrollable==="true",long_clickable:d["long-clickable"]==="true",password:d.password==="true",selected:d.selected==="true",visible_to_user:d["visible-to-user"]==="true",bounds:c,rect:p.rect||void 0,children:p.children?.map(ot)}}function lr(p){let d=0,c=0;function f(b){if(b.rect){const D=b.rect.x+b.rect.width,S=b.rect.y+b.rect.height;D>d&&(d=D),S>c&&(c=S)}b.children?.forEach(f)}f(p);const k=p.properties?.rotation?parseInt(p.properties.rotation):0;return{width:d,height:c,rotation:k,nodes:p.children?.map(ot)||[]}}const et="/api";async function lt(p,d){const c=await fetch(p,{...d,headers:{"Content-Type":"application/json",...d?.headers}});if(!c.ok){const f=await c.text();throw new Error(`${c.status}: ${f}`)}return c.json()}async function cr(p){return lt(`${et}/${p}/list`)}function ur(p,d){return`${et}/${p}/${d}/screenshot/0?t=${Date.now()}`}async function Wt(p,d){const c=await lt(`${et}/${p}/${d}/hierarchy`);return lr(c)}async function Ct(p,d,c,f){const k={x:c,y:f};await lt(`${et}/${p}/${d}/command/tap`,{method:"POST",body:JSON.stringify(k)})}async function fe(p,d,c,f){return lt(`${et}/${p}/${d}/command/${c}`,{method:"POST",body:JSON.stringify(f||{})})}function dr(p,d){const c=[];let f=p;for(;f;){const k=fr(f,d);c.unshift(k),f=Kt(f,d)}return"/"+c.join("/")}function fr(p,d){if(p.resource_id)return`*[@resource-id="${p.resource_id}"]`;if(p.text&&p.text.trim())return`*[@text="${p.text}"]`;const c=p.class_name||"*",f=Kt(p,d);if(f){const k=f.children?.filter(b=>b.class_name===p.class_name)||[];if(k.length>1){const b=k.findIndex(D=>D.key===p.key);return`${c}[${b+1}]`}}return c}function Kt(p,d){for(const c of d)if(c.children?.some(f=>f.key===p.key))return c}function hr(p){const d=[];function c(f){d.push(f),f.children?.forEach(c)}return p.forEach(c),d}const ct=Qt("device",()=>{const p=z("android"),d=z(""),c=z(null),f=z(null),k=z(null),b=z(!1),D=z(null),S=z(0),Y=me(()=>c.value?{width:c.value.width,height:c.value.height}:{width:0,height:0}),j=me(()=>d.value?(S.value,ur(p.value,d.value)):"");function F(U,q){p.value=U,d.value=q,c.value=null,f.value=null,D.value=null}async function _(){if(d.value){b.value=!0,D.value=null;try{c.value=await Wt(p.value,d.value),S.value++}catch(U){D.value=U instanceof Error?U.message:String(U)}finally{b.value=!1}}}function M(U){if(U&&c.value){const q=hr(c.value.nodes);U.xpath=dr(U,q)}f.value=U}function H(){S.value++}function B(U){k.value=U}function y(U){U.hierarchy&&(c.value=U.hierarchy),U.screenshot&&S.value++}return{platform:p,serial:d,hierarchy:c,selectedNode:f,hoveredNode:k,loading:b,error:D,screenSize:Y,screenshotUrl:j,setDevice:F,refreshHierarchy:_,selectNode:M,refreshScreenshot:H,setHoveredNode:B,updateFromRemote:y}});class $t{name;style;constructor(d,c){this.name=d,this.style=c}}class pr extends $t{x;y;width;height;constructor(d,c,f,k,b){super("rect",b),this.x=d,this.y=c,this.width=f,this.height=k}draw(d){d.beginPath(),d.rect(this.x,this.y,this.width,this.height),this.style==="select"?(d.fillStyle="rgba(255, 255, 0, 0.3)",d.strokeStyle="#FFD700",d.lineWidth=3):this.style==="hover"&&(d.fillStyle="rgba(0, 150, 255, 0.2)",d.strokeStyle="#0096FF",d.lineWidth=2),d.fill(),d.stroke()}}class vr extends $t{x;y;canvasWidth;canvasHeight;constructor(d,c,f,k){super("crosshair","crosshair"),this.x=d,this.y=c,this.canvasWidth=f,this.canvasHeight=k}draw(d){d.beginPath(),d.strokeStyle="#FF0000",d.lineWidth=1,d.setLineDash([5,5]),d.moveTo(0,this.y),d.lineTo(this.canvasWidth,this.y),d.moveTo(this.x,0),d.lineTo(this.x,this.canvasHeight),d.stroke(),d.setLineDash([])}}class xr extends $t{points;constructor(d){super("track","hover"),this.points=d}draw(d){if(this.points.length<2)return;d.beginPath(),d.strokeStyle="rgba(0, 150, 255, 0.8)",d.lineWidth=3,d.lineCap="round",d.lineJoin="round";const c=this.points[0];c&&d.moveTo(c.x,c.y);for(let f=1;f<this.points.length;f++){const k=this.points[f];k&&d.lineTo(k.x,k.y)}d.stroke()}}function mr(){const p=z(null),d=me(()=>p.value?.getContext("2d")||null),c=z([]);function f(){if(!d.value||!p.value)return;const F=p.value;d.value.clearRect(0,0,F.width,F.height),c.value.forEach(_=>{d.value&&_.draw(d.value)})}function k(F,_){const[M,H,B,y]=F,U=B-M,q=y-H;c.value.push(new pr(M,H,U,q,_)),f()}function b(F,_){p.value&&(c.value.push(new vr(F,_,p.value.width,p.value.height)),f())}function D(F){c.value.push(new xr(F)),f()}function S(){c.value=[],f()}function Y(F){c.value=c.value.filter(_=>_.style!==F),f()}function j(F,_){p.value&&(p.value.width=F,p.value.height=_,f())}return{canvasRef:p,addRect:k,addCrosshair:b,addTrack:D,clearShapes:S,clearShapesByType:Y,resizeCanvas:j,redraw:f}}function yr(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}function gr(p){if(Object.prototype.hasOwnProperty.call(p,"__esModule"))return p;var d=p.default;if(typeof d=="function"){var c=function f(){var k=!1;try{k=this instanceof f}catch{}return k?Reflect.construct(d,arguments,this.constructor):d.apply(this,arguments)};c.prototype=d.prototype}else c={};return Object.defineProperty(c,"__esModule",{value:!0}),Object.keys(p).forEach(function(f){var k=Object.getOwnPropertyDescriptor(p,f);Object.defineProperty(c,f,k.get?k:{enumerable:!0,get:function(){return p[f]}})}),c}var it={exports:{}};const kr={},wr=Object.freeze(Object.defineProperty({__proto__:null,default:kr},Symbol.toStringTag,{value:"Module"})),_r=gr(wr);var br=it.exports,Tt;function Sr(){return Tt||(Tt=1,(function(p,d){(function(c,f){p.exports=f(_r)})(br,(function(c){function f(t,i){(i==null||i>t.length)&&(i=t.length);for(var e=0,r=Array(i);e<i;e++)r[e]=t[e];return r}function k(t){if(Array.isArray(t))return t}function b(t){if(Array.isArray(t))return f(t)}function D(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function Y(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I(r.key),r)}}function j(t,i,e){return i&&Y(t.prototype,i),e&&Y(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function F(t,i){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=W(t))||i){e&&(t=e);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(v){throw v},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,n=!0,s=!1;return{s:function(){e=e.call(t)},n:function(){var v=e.next();return n=v.done,v},e:function(v){s=!0,l=v},f:function(){try{n||e.return==null||e.return()}finally{if(s)throw l}}}}function _(t){var i=y();return function(){var e,r=H(t);if(i){var a=H(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return le(this,e)}}function M(t,i,e){return(i=I(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function H(t){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},H(t)}function B(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&ve(t,i)}function y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y=function(){return!!t})()}function U(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function q(t,i){var e=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(e!=null){var r,a,l,n,s=[],v=!0,m=!1;try{if(l=(e=e.call(t)).next,i!==0)for(;!(v=(r=l.call(e)).done)&&(s.push(r.value),s.length!==i);v=!0);}catch(E){m=!0,a=E}finally{try{if(!v&&e.return!=null&&(n=e.return(),Object(n)!==n))return}finally{if(m)throw a}}return s}}function ne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function we(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function le(t,i){if(i&&(typeof i=="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D(t)}function ve(t,i){return ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},ve(t,i)}function Z(t,i){return k(t)||q(t,i)||W(t,i)||ne()}function w(t){return b(t)||U(t)||W(t)||we()}function C(t,i){if(typeof t!="object"||!t)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var r=e.call(t,i);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function I(t){var i=C(t,"string");return typeof i=="symbol"?i:i+""}function V(t){"@babel/helpers - typeof";return V=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},V(t)}function W(t,i){if(t){if(typeof t=="string")return f(t,i);var e={}.toString.call(t).slice(8,-1);return e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set"?Array.from(t):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?f(t,i):void 0}}var oe,xe;function ae(t,i){oe=t,xe=i}function se(t){if(oe){for(var i=arguments.length,e=new Array(i>1?i-1:0),r=1;r<i;r++)e[r-1]=arguments[r];oe.apply(void 0,[t].concat(e))}}function he(t){if(xe){for(var i=arguments.length,e=new Array(i>1?i-1:0),r=1;r<i;r++)e[r-1]=arguments[r];xe.apply(void 0,[t].concat(e))}}var T=(function(){function t(i){S(this,t),this.listener={},this.type=i|""}return j(t,[{key:"on",value:function(e,r){return this.listener[e]||(this.listener[e]=[]),this.listener[e].push(r),!0}},{key:"off",value:function(e,r){if(this.listener[e]){var a=this.listener[e].indexOf(r);return a>-1&&this.listener[e].splice(a,1),!0}return!1}},{key:"offAll",value:function(){this.listener={}}},{key:"dispatch",value:function(e){for(var r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];return this.listener[e]?(this.listener[e].map(function(n){n.apply(null,a)}),!0):!1}}]),t})(),Q=(function(){function t(){S(this,t)}return j(t,null,[{key:"init",value:function(){t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],hev1:[],hvcC:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var e;for(e in t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),a=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:r,audio:a};var l=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=n,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),v=new Uint8Array([97,118,99,49]),m=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,s,m,s,v),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,l))}},{key:"box",value:function(e){for(var r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];for(var n=8,s=a.length,v=s,m;s--;)n+=a[s].byteLength;for(m=new Uint8Array(n),m[0]=n>>24&255,m[1]=n>>16&255,m[2]=n>>8&255,m[3]=n&255,m.set(e,4),s=0,n=8;s<v;++s)m.set(a[s],n),n+=a[s].byteLength;return m}},{key:"hdlr",value:function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])}},{key:"mdat",value:function(e){return t.box(t.types.mdat,e)}},{key:"mdhd",value:function(e,r){return t.box(t.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255,85,196,0,0]))}},{key:"mdia",value:function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))}},{key:"mfhd",value:function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}},{key:"minf",value:function(e){return e.type==="audio"?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))}},{key:"moof",value:function(e,r,a){return t.box(t.types.moof,t.mfhd(e),t.traf(a,r))}},{key:"moov",value:function(e,r,a){for(var l=e.length,n=[];l--;)n[l]=t.trak(e[l]);return t.box.apply(null,[t.types.moov,t.mvhd(a,r)].concat(n).concat(t.mvex(e)))}},{key:"mvex",value:function(e){for(var r=e.length,a=[];r--;)a[r]=t.trex(e[r]);return t.box.apply(null,[t.types.mvex].concat(a))}},{key:"mvhd",value:function(e,r){var a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,e>>24&255,e>>16&255,e>>8&255,e&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,a)}},{key:"sdtp",value:function(e){var r=e.samples||[],a=new Uint8Array(4+r.length),l,n;for(n=0;n<r.length;n++)l=r[n].flags,a[n+4]=l.dependsOn<<4|l.isDependedOn<<2|l.hasRedundancy;return t.box(t.types.sdtp,a)}},{key:"stbl",value:function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))}},{key:"avc1",value:function(e){var r=[],a=[],l,n,s;for(l=0;l<e.sps.length;l++)n=e.sps[l],s=n.byteLength,r.push(s>>>8&255),r.push(s&255),r=r.concat(Array.prototype.slice.call(n));for(l=0;l<e.pps.length;l++)n=e.pps[l],s=n.byteLength,a.push(s>>>8&255),a.push(s&255),a=a.concat(Array.prototype.slice.call(n));var v=t.box(t.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|e.sps.length].concat(r).concat([e.pps.length]).concat(a))),m=e.width,E=e.height;return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,m>>8&255,m&255,E>>8&255,E&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,98,105,110,101,108,112,114,111,46,114,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),v,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"hev1",value:function(e){for(var r=[],a=[],l=[],n,s,v=0;v<(((m=e.vps)===null||m===void 0?void 0:m.length)||0);v++){var m;n=e.vps[v],s=n.byteLength,r.push(s>>>8&255,s&255),r=r.concat(Array.prototype.slice.call(n))}for(var E=0;E<(((L=e.sps)===null||L===void 0?void 0:L.length)||0);E++){var L;n=e.sps[E],s=n.byteLength,a.push(s>>>8&255,s&255),a=a.concat(Array.prototype.slice.call(n))}for(var N=0;N<(((X=e.pps)===null||X===void 0?void 0:X.length)||0);N++){var X;n=e.pps[N],s=n.byteLength,l.push(s>>>8&255,s&255),l=l.concat(Array.prototype.slice.call(n))}var ce=e.hvcC,$e=ce.profile_space,Ue=ce.tier_flag,Se=ce.profile_idc,Ce=ce.profile_compatibility_flags,ke=ce.constraint_indicator_flags,He=ce.level_idc,Ne=ce.chroma_format_idc,Ve=t.box(t.types.hvcC,new Uint8Array([1,$e<<6|Ue<<5|Se,Ce>>24&255,Ce>>16&255,Ce>>8&255,Ce&255].concat(w(ke),[He,240,0,252,252|Ne,248,248,0,0,3,3,32,0,1],w(r),[33,0,1],w(a),[34,0,1],w(l)))),je=e.width,de=e.height;return t.box(t.types.hev1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,je>>8&255,je&255,de>>8&255,de&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,98,105,110,101,108,112,114,111,46,114,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),Ve,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"esds",value:function(e){var r=e.config.byteLength,a=new Uint8Array(26+r+3);return a.set([0,0,0,0,3,23+r,0,1,0,4,15+r,64,21,0,0,0,0,0,0,0,0,0,0,0,5,r]),a.set(e.config,26),a.set([6,1,2],26+r),a}},{key:"mp4a",value:function(e){var r=e.audiosamplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,r&255,0,0]),t.box(t.types.esds,t.esds(e)))}},{key:"stsd",value:function(e){return e.type==="audio"?t.box(t.types.stsd,t.STSD,t.mp4a(e)):e.codec.startsWith("hvc1")?t.box(t.types.stsd,t.STSD,t.hev1(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))}},{key:"tkhd",value:function(e){var r=e.id,a=e.duration,l=e.width,n=e.height,s=e.volume;return t.box(t.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,r>>24&255,r>>16&255,r>>8&255,r&255,0,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,a&255,0,0,0,0,0,0,0,0,0,0,0,0,s>>0&255,s%1*10>>0&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,l>>8&255,l&255,0,0,n>>8&255,n&255,0,0]))}},{key:"traf",value:function(e,r){var a=t.sdtp(e),l=e.id;return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,l>>24,l>>16&255,l>>8&255,l&255])),t.box(t.types.tfdt,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255])),t.trun(e,a.length+16+16+8+16+8+8),a)}},{key:"trak",value:function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))}},{key:"trex",value:function(e){var r=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(e,r){var a=e.samples||[],l=a.length,n=12+16*l,s=new Uint8Array(n),v,m,E,L,N,X;for(r+=8+n,s.set([0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,l&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255],0),v=0;v<l;v++)m=a[v],E=m.duration,L=m.size,N=m.flags,X=m.cts,s.set([E>>>24&255,E>>>16&255,E>>>8&255,E&255,L>>>24&255,L>>>16&255,L>>>8&255,L&255,N.isLeading<<2|N.dependsOn,N.isDependedOn<<6|N.hasRedundancy<<4|N.paddingValue<<1|N.isNonSync,N.degradPrio&61440,N.degradPrio&15,X>>>24&255,X>>>16&255,X>>>8&255,X&255],12+16*v);return t.box(t.types.trun,s)}},{key:"initSegment",value:function(e,r,a){t.types||t.init();var l=t.moov(e,r,a),n;return n=new Uint8Array(t.FTYP.byteLength+l.byteLength),n.set(t.FTYP),n.set(l,t.FTYP.byteLength),n}}]),t})(),$=(function(){function t(){S(this,t)}return j(t,null,[{key:"samplingRateMap",get:function(){return[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]}},{key:"getHeaderLength",value:function(e){return e[1]&1?7:9}},{key:"getFrameLength",value:function(e){return(e[3]&3)<<11|e[4]<<3|(e[5]&224)>>>5}},{key:"isAACPattern",value:function(e){return e[0]===255&&(e[1]&240)===240&&(e[1]&6)===0}},{key:"extractAAC",value:function(e){var r=0,a=e.byteLength,l=[],n,s;if(!t.isAACPattern(e))return he("Invalid ADTS audio format"),{valid:!1};n=t.getHeaderLength(e);for(var v=e.subarray(0,n);r<a;)s=t.getFrameLength(e),l.push(e.subarray(n,s)),e=e.slice(s),r+=s;return{valid:!0,header:v,slices:l}}}]),t})(),A=1,R=(function(t){B(e,t);var i=_(e);function e(){return S(this,e),i.apply(this,arguments)}return j(e,[{key:"flush",value:function(){this.mp4track.len=0,this.mp4track.samples=[]}},{key:"isReady",value:function(){return!this.readyToDecode||!this.samples.length?null:!0}}],[{key:"getTrackID",value:function(){return A++}}]),e})(T),ee=(function(t){B(e,t);var i=_(e);function e(r,a,l){var n;return S(this,e),n=i.call(this,"AACRemuxer"),n.frameDuration=l,n.readyToDecode=!1,n.header=null,n.nextDts=0,n.dts=0,n.mp4track={id:R.getTrackID(),type:"audio",channelCount:0,len:0,fragmented:!0,timescale:r,duration:a,samples:[],config:"",codec:""},n.samples=[],n}return j(e,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.header=null,this.mp4track.codec="",this.mp4track.channelCount="",this.mp4track.config="",this.mp4track.timescale=this.timescale,this.nextDts=0,this.dts=0}},{key:"feed",value:function(a,l){var n=$.extractAAC(a),s=n.valid,v=n.header,m=n.slices;return this.header||(this.header=v),s&&m.length>0?(this.remux(this.getAudioFrames(m,l)),!0):(he("Failed to extract audio data from:",a),this.dispatch("outOfData"),!1)}},{key:"getAudioFrames",value:function(a,l){var n=[],s=0,v=0,m=F(a),E;try{for(m.s();!(E=m.n()).done;){var L=E.value;n.push({units:L})}}catch(N){m.e(N)}finally{m.f()}return s=l?l/n.length|0:this.frameDuration,v=l?l-s*n.length:0,n.map(function(N){N.duration=s,v>0&&(N.duration++,v--)}),n}},{key:"remux",value:function(a){if(a.length>0)for(var l=0;l<a.length;l++){var n=a[l],s=n.units,v=s.byteLength;this.samples.push({units:s,size:v,duration:n.duration}),this.mp4track.len+=v,this.readyToDecode||this.setAACConfig()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var a=new Uint8Array(this.mp4track.len),l=0,n=this.mp4track.samples,s,v;for(this.dts=this.nextDts;this.samples.length;){var m=this.samples.shift();if(m.units,v=m.duration,v<=0){se("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(v)),this.mp4track.len-=m.size;continue}this.nextDts+=v,s={size:m.size,duration:v,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},a.set(m.units,l),l+=m.size,n.push(s)}return n.length?new Uint8Array(a.buffer,0,this.mp4track.len):null}},{key:"setAACConfig",value:function(){var a,l,n,s=new Uint8Array(2);this.header&&(a=((this.header[2]&192)>>>6)+1,l=(this.header[2]&60)>>>2,n=(this.header[2]&1)<<2,n|=(this.header[3]&192)>>>6,s[0]=a<<3,s[0]|=(l&14)>>1,s[1]|=(l&1)<<7,s[1]|=n<<3,this.mp4track.codec="mp4a.40."+a,this.mp4track.channelCount=n,this.mp4track.config=s,this.readyToDecode=!0)}}]),e})(R),ie=(function(){function t(i){S(this,t),this.data=i,this.index=0,this.bitLength=i.byteLength*8}return j(t,[{key:"setData",value:function(e){this.data=e,this.index=0,this.bitLength=e.byteLength*8}},{key:"bitsAvailable",get:function(){return this.bitLength-this.index}},{key:"skipBits",value:function(e){if(this.bitsAvailable<e)return!1;this.index+=e}},{key:"readBits",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=this.getBits(e,this.index,r);return a}},{key:"getBits",value:function(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(this.bitsAvailable<e)return 0;var l=r%8,n=this.data[r/8|0]&255>>>l,s=8-l;if(s>=e)return a&&(this.index+=e),n>>s-e;a&&(this.index+=s);var v=e-s;return n<<v|this.getBits(v,r+s,a)}},{key:"skipLZ",value:function(){var e;for(e=0;e<this.bitLength-this.index;++e)if(this.getBits(1,this.index+e,!1)!==0)return this.index+=e,e;return e}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:"readEG",value:function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}},{key:"readBoolean",value:function(){return this.readBits(1)===1}},{key:"readUByte",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.readBits(e*8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}}]),t})(),_e=(function(){function t(){S(this,t)}return j(t,null,[{key:"extractNALu",value:function(e){for(var r=0,a=e.byteLength,l=[],n=0,s=0;r<a;){var v=e[r++];if(v===0)s++;else if(v===1&&s>=2){var m=s+1;n!==r-m&&l.push(e.subarray(n,r-m)),n=r,s=0}else s=0}var E=null;return n<a&&(E=e.subarray(n,a)),[l,E]}},{key:"skipScalingList",value:function(e,r){for(var a=8,l=8,n,s=0;s<r;s++)l!==0&&(n=e.readEG(),l=(a+n+256)%256),a=l===0?a:l}},{key:"readSPS",value:function(e){var r=new ie(e),a=0,l=0,n=0,s=0,v=1,m,E,L,N,X,ce,$e=0;r.readUByte();for(var Ue=[],Se=1,Ce=e.byteLength,ke=Se;ke<Ce;ke++)ke+2<Ce&&r.readBits(24,!1)===3?(Ue.push(r.readBits(8)),Ue.push(r.readBits(8)),ke+=2,r.readBits(8)):Ue.push(r.readBits(8));if(r.setData(new Uint8Array(Ue)),m=r.readUByte(),r.readBits(5),r.skipBits(3),r.readUByte(),r.skipUEG(),m===100||m===110||m===122||m===244||m===44||m===83||m===86||m===118||m===128){var He=r.readUEG();if(He===3&&r.skipBits(1),r.skipUEG(),r.skipUEG(),r.skipBits(1),r.readBoolean()){ce=He!==3?8:12;for(var Ne=0;Ne<ce;++Ne)r.readBoolean()&&(Ne<6?t.skipScalingList(r,16):t.skipScalingList(r,64))}}r.skipUEG();var Ve=r.readUEG();if(Ve===0)r.readUEG();else if(Ve===1){r.skipBits(1),r.skipEG(),r.skipEG(),E=r.readUEG();for(var je=0;je<E;++je)r.skipEG()}if(r.skipUEG(),r.skipBits(1),L=r.readUEG(),N=r.readUEG(),X=r.readBits(1),X===0&&r.skipBits(1),r.skipBits(1),r.readBoolean()&&(a=r.readUEG(),l=r.readUEG(),n=r.readUEG(),s=r.readUEG()),r.readBoolean()){if(r.readBoolean()){var de,dt=r.readUByte();switch(dt){case 1:de=[1,1];break;case 2:de=[12,11];break;case 3:de=[10,11];break;case 4:de=[16,11];break;case 5:de=[40,33];break;case 6:de=[24,11];break;case 7:de=[20,11];break;case 8:de=[32,11];break;case 9:de=[80,33];break;case 10:de=[18,11];break;case 11:de=[15,11];break;case 12:de=[64,33];break;case 13:de=[160,99];break;case 14:de=[4,3];break;case 15:de=[3,2];break;case 16:de=[2,1];break;case 255:{de=[r.readUByte()<<8|r.readUByte(),r.readUByte()<<8|r.readUByte()];break}}de&&de[0]>0&&de[1]>0&&(v=de[0]/de[1])}if(r.readBoolean()&&r.skipBits(1),r.readBoolean()&&(r.skipBits(4),r.readBoolean()&&r.skipBits(24)),r.readBoolean()&&(r.skipUEG(),r.skipUEG()),r.readBoolean()){var ft=r.readUInt(),ht=r.readUInt(),tt=r.readBoolean(),pt=ht/(2*ft);tt&&($e=pt)}}return{fps:$e>0?$e:void 0,width:Math.ceil(((L+1)*16-a*2-l*2)*v),height:(2-X)*(N+1)*16-(X?2:4)*(n+s)}}}]),t})(),re=(function(){function t(i){S(this,t),this.payload=i,this.nri=(this.payload[0]&96)>>5,this.nalUnitType=this.payload[0]&31,this._sliceType=null,this._isFirstSlice=!1}return j(t,[{key:"toString",value:function(){return"".concat(t.TYPES[this.type()]||"UNKNOWN",": NRI: ").concat(this.getNri())}},{key:"getNri",value:function(){return this.nri}},{key:"type",value:function(){return this.nalUnitType}},{key:"isKeyframe",get:function(){return this.nalUnitType===t.IDR}},{key:"isVCL",get:function(){return this.nalUnitType==t.IDR||this.nalUnitType==t.NDR}},{key:"parseHeader",value:function(){var e=new ie(this.getPayload());e.readUByte(),this._isFirstSlice=e.readUEG()===0,this._sliceType=e.readUEG()}},{key:"isFirstSlice",get:function(){return this._isFirstSlice||this.parseHeader(),this._isFirstSlice}},{key:"sliceType",get:function(){return this._sliceType||this.parseHeader(),this._sliceType}},{key:"getPayload",value:function(){return this.payload}},{key:"getPayloadSize",value:function(){return this.payload.byteLength}},{key:"getSize",value:function(){return 4+this.getPayloadSize()}},{key:"getData",value:function(){var e=new Uint8Array(this.getSize()),r=new DataView(e.buffer);return r.setUint32(0,this.getSize()-4),e.set(this.getPayload(),4),e}}],[{key:"NDR",get:function(){return 1}},{key:"IDR",get:function(){return 5}},{key:"SEI",get:function(){return 6}},{key:"SPS",get:function(){return 7}},{key:"PPS",get:function(){return 8}},{key:"AUD",get:function(){return 9}},{key:"TYPES",get:function(){var e;return e={},M(e,t.IDR,"IDR"),M(e,t.SEI,"SEI"),M(e,t.SPS,"SPS"),M(e,t.PPS,"PPS"),M(e,t.NDR,"NDR"),M(e,t.AUD,"AUD"),e}}]),t})();function ue(t,i){var e=new Uint8Array((t.byteLength|0)+(i.byteLength|0));return e.set(t,0),e.set(i,t.byteLength|0),e}function be(t){var i,e,r,a="";return i=Math.floor(t),e=parseInt(i/3600,10)%24,r=parseInt(i/60,10)%60,i=i<0?0:i%60,e>0&&(a+=(e<10?"0"+e:e)+":"),a+=(r<10?"0"+r:r)+":"+(i<10?"0"+i:i),a}var Ae=(function(t){B(e,t);var i=_(e);function e(r,a,l){var n;return S(this,e),n=i.call(this,"H264Remuxer"),n.frameDuration=l,n.readyToDecode=!1,n.nextDts=0,n.dts=0,n.mp4track={id:R.getTrackID(),type:"video",len:0,fragmented:!0,sps:"",pps:"",fps:30,width:0,height:0,timescale:r,duration:a,samples:[]},n.samples=[],n.remainingData=new Uint8Array,n.kfCounter=0,n.pendingUnits={},n}return j(e,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.mp4track.sps="",this.mp4track.pps="",this.nextDts=0,this.dts=0,this.remainingData=new Uint8Array,this.kfCounter=0,this.pendingUnits={}}},{key:"feed",value:function(a,l,n){var s=[],v;a=ue(this.remainingData,a);var m=_e.extractNALu(a),E=Z(m,2);return s=E[0],v=E[1],this.remainingData=v||new Uint8Array,s.length>0?(this.remux(this.getVideoFrames(s,l,n)),!0):(he("Failed to extract any NAL units from video data:",v),this.dispatch("outOfData"),!1)}},{key:"getVideoFrames",value:function(a,l,n){var s=this,v=[],m=[],E=0,L=0,N=!1,X=!1;this.pendingUnits.units&&(v=this.pendingUnits.units,X=this.pendingUnits.vcl,N=this.pendingUnits.keyFrame,this.pendingUnits={});var ce=F(a),$e;try{for(ce.s();!($e=ce.n()).done;){var Ue=$e.value,Se=new re(Ue);v.length&&X&&(Se.isFirstSlice||!Se.isVCL)&&(m.push({units:v,keyFrame:N}),v=[],N=!1,X=!1),v.push(Se),N=N||Se.isKeyframe,X=X||Se.isVCL}}catch(ke){ce.e(ke)}finally{ce.f()}if(v.length)if(!l)this.pendingUnits={units:v,keyFrame:N,vcl:X};else if(X)m.push({units:v,keyFrame:N});else{var Ce=m.length-1;Ce>=0&&(m[Ce].units=m[Ce].units.concat(v))}return E=l?l/m.length|0:this.frameDuration,L=l?l-E*m.length:0,m.map(function(ke){ke.duration=E,ke.compositionTimeOffset=n,L>0&&(ke.duration++,L--),s.kfCounter++,ke.keyFrame&&s.dispatch("keyframePosition",s.kfCounter*E/1e3)}),se("jmuxer: No. of H264 frames of the last chunk: ".concat(m.length)),m}},{key:"remux",value:function(a){var l=F(a),n;try{for(l.s();!(n=l.n()).done;){var s=n.value,v=[],m=0,E=F(s.units),L;try{for(E.s();!(L=E.n()).done;){var N=L.value;this.parseNAL(N)&&(v.push(N),m+=N.getSize())}}catch(X){E.e(X)}finally{E.f()}v.length>0&&this.readyToDecode&&(this.mp4track.len+=m,this.samples.push({units:v,size:m,keyFrame:s.keyFrame,duration:s.duration,compositionTimeOffset:s.compositionTimeOffset}))}}catch(X){l.e(X)}finally{l.f()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var a=new Uint8Array(this.mp4track.len),l=0,n=this.mp4track.samples,s,v;for(this.dts=this.nextDts;this.samples.length;){var m=this.samples.shift(),E=m.units;if(v=m.duration,v<=0){se("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(v)),this.mp4track.len-=m.size;continue}this.nextDts+=v,s={size:m.size,duration:v,cts:m.compositionTimeOffset||0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:m.keyFrame?0:1,dependsOn:m.keyFrame?2:1}};var L=F(E),N;try{for(L.s();!(N=L.n()).done;){var X=N.value;a.set(X.getData(),l),l+=X.getSize()}}catch(ce){L.e(ce)}finally{L.f()}n.push(s)}return n.length?new Uint8Array(a.buffer,0,this.mp4track.len):null}},{key:"parseSPS",value:function(a){var l=_e.readSPS(new Uint8Array(a));this.mp4track.fps=l.fps||this.mp4track.fps,this.mp4track.width=l.width,this.mp4track.height=l.height,this.mp4track.sps=[new Uint8Array(a)],this.mp4track.codec="avc1.";for(var n=new DataView(a.buffer,a.byteOffset+1,4),s=0;s<3;++s){var v=n.getUint8(s).toString(16);v.length<2&&(v="0"+v),this.mp4track.codec+=v}}},{key:"parsePPS",value:function(a){this.mp4track.pps=[new Uint8Array(a)]}},{key:"parseNAL",value:function(a){if(!a)return!1;if(a.isVCL)return!0;var l=!1;switch(a.type()){case re.PPS:this.mp4track.pps||this.parsePPS(a.getPayload()),l=!0;break;case re.SPS:this.mp4track.sps||this.parseSPS(a.getPayload()),l=!0;break;case re.AUD:se("AUD - ignoing");break;case re.SEI:se("SEI - ignoing");break}return!this.readyToDecode&&this.mp4track.pps&&this.mp4track.sps&&(this.readyToDecode=!0),l}}]),e})(R),Ee=(function(){function t(){S(this,t)}return j(t,null,[{key:"extractNALu",value:function(e){for(var r=0,a=e.byteLength,l=[],n=0,s=0;r<a;){var v=e[r++];if(v===0)s++;else if(v===1&&s>=2){var m=s+1;n!==r-m&&l.push(e.subarray(n,r-m)),n=r,s=0}else s=0}var E=null;return n<a&&(E=e.subarray(n,a)),[l,E]}},{key:"removeEmulationPreventionBytes",value:function(e){for(var r=[],a=0,l=0;l<e.length;l++){var n=e[l];if(a===2&&n===3){a=0;continue}r.push(n),n===0?a++:a=0}return new Uint8Array(r)}},{key:"readSPS",value:function(e){var r=new ie(e);r.readUByte(),r.readUByte(),r.readBits(4),r.readBits(3),r.readBits(1);for(var a=r.readBits(2),l=r.readBits(1),n=r.readBits(5),s=r.readUInt(),v=new Uint8Array(6),m=0;m<6;m++)v[m]=r.readUByte();var E=r.readUByte();r.readUEG();var L=r.readUEG();L===3&&r.readBits(1);var N=r.readUEG(),X=r.readUEG(),ce=r.readBoolean(),$e=0,Ue=0,Se=0,Ce=0;ce&&($e=r.readUEG(),Ue=r.readUEG(),Se=r.readUEG(),Ce=r.readUEG());var ke=null,He=r.readBoolean();if(He){var Ne=r.readBoolean();if(Ne){var Ve=r.readUByte();Ve===255&&(r.readUShort(),r.readUShort())}var je=r.readBoolean();je&&r.readBoolean();var de=r.readBoolean();if(de){r.readBits(3),r.readBoolean();var dt=r.readBoolean();dt&&(r.readUByte(),r.readUByte(),r.readUByte())}var ft=r.readBoolean();ft&&(r.readUEG(),r.readUEG()),r.readBoolean(),r.readBoolean(),r.readBoolean();var ht=r.readBoolean();if(ht){var tt=r.readUInt(),pt=r.readUInt();r.readBoolean(),tt&&(ke=pt/(2*tt))}}var Jt=L===1||L===2?2:1,Yt=L===1?2:1,qt=N-Jt*(Ue+$e),Zt=X-Yt*(Se+Ce);return{width:qt,height:Zt,profile_space:a,tier_flag:l,profile_idc:n,profile_compatibility_flags:s,constraint_indicator_flags:v,level_idc:E,chroma_format_idc:L,fps:ke}}}]),t})(),Fe=(function(){function t(i){S(this,t),this.payload=i,this.nalUnitType=(i[0]&126)>>1,this.nuhLayerId=(i[0]&1)<<5|(i[1]&248)>>3,this.nuhTemporalIdPlus1=i[1]&7,this._isFirstSlice=null,this._sliceType=null}return j(t,[{key:"toString",value:function(){return"".concat(t.TYPES[this.type()]||"UNKNOWN ("+this.type()+")",": Layer: ").concat(this.nuhLayerId,", Temporal Id: ").concat(this.nuhTemporalIdPlus1)}},{key:"type",value:function(){return this.nalUnitType}},{key:"isKeyframe",get:function(){return[t.IDR_W_RADL,t.IDR_N_LP,t.CRA].includes(this.nalUnitType)}},{key:"isVCL",get:function(){return this.nalUnitType<=31}},{key:"parseHeader",value:function(){var e=new ie(this.getPayload());e.readUByte(),e.readUByte(),this._isFirstSlice=e.readBoolean(),this.isKeyframe&&e.readBits(1),e.readUEG(),this._sliceType=e.readUEG()}},{key:"isFirstSlice",get:function(){return this._isFirstSlice||this.parseHeader(),this._isFirstSlice}},{key:"sliceType",get:function(){return this._sliceType||this.parseHeader(),this._sliceType}},{key:"getPayload",value:function(){return this.payload}},{key:"getPayloadSize",value:function(){return this.payload.byteLength}},{key:"getSize",value:function(){return 4+this.getPayloadSize()}},{key:"getData",value:function(){var e=new Uint8Array(this.getSize()),r=new DataView(e.buffer);return r.setUint32(0,this.getSize()-4),e.set(this.getPayload(),4),e}}],[{key:"TRAIL_N",get:function(){return 0}},{key:"TRAIL_R",get:function(){return 1}},{key:"IDR_W_RADL",get:function(){return 19}},{key:"IDR_N_LP",get:function(){return 20}},{key:"CRA",get:function(){return 21}},{key:"VPS",get:function(){return 32}},{key:"SPS",get:function(){return 33}},{key:"PPS",get:function(){return 34}},{key:"AUD",get:function(){return 35}},{key:"SEI",get:function(){return 39}},{key:"SEI2",get:function(){return 40}},{key:"TYPES",get:function(){var e;return e={},M(e,t.TRAIL_N,"TRAIL_N"),M(e,t.TRAIL_R,"TRAIL_R"),M(e,t.IDR_W_RADL,"IDR"),M(e,t.IDR_N_LP,"IDR2"),M(e,t.CRA,"CRA"),M(e,t.VPS,"VPS"),M(e,t.SPS,"SPS"),M(e,t.PPS,"PPS"),M(e,t.AUD,"AUD"),M(e,t.SEI,"SEI"),M(e,t.SEI2,"SEI2"),e}}]),t})(),Ie=(function(t){B(e,t);var i=_(e);function e(r,a,l){var n;return S(this,e),n=i.call(this,"H264Remuxer"),n.frameDuration=l,n.readyToDecode=!1,n.nextDts=0,n.dts=0,n.mp4track={id:R.getTrackID(),type:"video",len:0,fragmented:!0,vps:"",sps:"",pps:"",hvcC:{},fps:30,width:0,height:0,timescale:r,duration:a,samples:[]},n.samples=[],n.remainingData=new Uint8Array,n.kfCounter=0,n.pendingUnits={},n}return j(e,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.mp4track.vps="",this.mp4track.sps="",this.mp4track.pps="",this.mp4track.hvcC={},this.nextDts=0,this.dts=0,this.remainingData=new Uint8Array,this.kfCounter=0,this.pendingUnits={}}},{key:"feed",value:function(a,l,n){var s=[],v;a=ue(this.remainingData,a);var m=Ee.extractNALu(a),E=Z(m,2);return s=E[0],v=E[1],this.remainingData=v||new Uint8Array,s.length>0?(this.remux(this.getVideoFrames(s,l,n)),!0):(he("Failed to extract any NAL units from video data:",v),this.dispatch("outOfData"),!1)}},{key:"getVideoFrames",value:function(a,l,n){var s=this,v=[],m=[],E=0,L=0,N=!1,X=!1;this.pendingUnits.units&&(v=this.pendingUnits.units,X=this.pendingUnits.vcl,N=this.pendingUnits.keyFrame,this.pendingUnits={});var ce=F(a),$e;try{for(ce.s();!($e=ce.n()).done;){var Ue=$e.value,Se=new Fe(Ue);v.length&&X&&(Se.isFirstSlice||!Se.isVCL)&&(m.push({units:v,keyFrame:N}),v=[],N=!1,X=!1),v.push(Se),N=N||Se.isKeyframe,X=X||Se.isVCL}}catch(ke){ce.e(ke)}finally{ce.f()}if(v.length)if(!l)this.pendingUnits={units:v,keyFrame:N,vcl:X};else if(X)m.push({units:v,keyFrame:N});else{var Ce=m.length-1;Ce>=0&&(m[Ce].units=m[Ce].units.concat(v))}return E=l?l/m.length|0:this.frameDuration,L=l?l-E*m.length:0,m.map(function(ke){ke.duration=E,ke.compositionTimeOffset=n,L>0&&(ke.duration++,L--),s.kfCounter++,ke.keyFrame&&s.dispatch("keyframePosition",s.kfCounter*E/1e3)}),se("jmuxer: No. of H265 frames of the last chunk: ".concat(m.length)),m}},{key:"remux",value:function(a){var l=F(a),n;try{for(l.s();!(n=l.n()).done;){var s=n.value,v=[],m=0,E=F(s.units),L;try{for(E.s();!(L=E.n()).done;){var N=L.value;this.parseNAL(N)&&(v.push(N),m+=N.getSize())}}catch(X){E.e(X)}finally{E.f()}v.length>0&&this.readyToDecode&&(this.mp4track.len+=m,this.samples.push({units:v,size:m,keyFrame:s.keyFrame,duration:s.duration,compositionTimeOffset:s.compositionTimeOffset}))}}catch(X){l.e(X)}finally{l.f()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var a=new Uint8Array(this.mp4track.len),l=0,n=this.mp4track.samples,s,v;for(this.dts=this.nextDts;this.samples.length;){var m=this.samples.shift(),E=m.units;if(v=m.duration,v<=0){se("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(v)),this.mp4track.len-=m.size;continue}this.nextDts+=v,s={size:m.size,duration:v,cts:m.compositionTimeOffset||0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:m.keyFrame?0:1,dependsOn:m.keyFrame?2:1}};var L=F(E),N;try{for(L.s();!(N=L.n()).done;){var X=N.value;a.set(X.getData(),l),l+=X.getSize()}}catch(ce){L.e(ce)}finally{L.f()}n.push(s)}return n.length?new Uint8Array(a.buffer,0,this.mp4track.len):null}},{key:"parseSPS",value:function(a){this.mp4track.sps=[new Uint8Array(a)],a=Ee.removeEmulationPreventionBytes(a);var l=Ee.readSPS(new Uint8Array(a));this.mp4track.fps=l.fps||this.mp4track.fps,this.mp4track.width=l.width,this.mp4track.height=l.height,this.mp4track.codec="hvc1.".concat(l.profile_idc,".").concat(l.profile_compatibility_flags.toString(16))+".L".concat(l.level_idc).concat(l.tier_flag?"H":"L")+".".concat(l.constraint_indicator_flags.map(function(n){return n.toString(16)}).join(".").toUpperCase()),this.mp4track.hvcC={profile_space:l.profile_space,tier_flag:l.tier_flag,profile_idc:l.profile_idc,profile_compatibility_flags:l.profile_compatibility_flags,constraint_indicator_flags:l.constraint_indicator_flags,level_idc:l.level_idc,chroma_format_idc:l.chroma_format_idc}}},{key:"parsePPS",value:function(a){this.mp4track.pps=[a]}},{key:"parseVPS",value:function(a){this.mp4track.vps=[a]}},{key:"parseNAL",value:function(a){if(!a)return!1;if(a.isVCL)return!0;var l=!1;switch(a.type()){case Fe.VPS:this.mp4track.vps||this.parseVPS(a.getPayload()),l=!0;break;case Fe.SPS:this.mp4track.sps||this.parseSPS(a.getPayload()),l=!0;break;case Fe.PPS:this.mp4track.pps||this.parsePPS(a.getPayload()),l=!0;break;case Fe.AUD:se("AUD - ignoing");break;case Fe.SEI:case Fe.SEI2:se("SEI - ignoing");break}return!this.readyToDecode&&this.mp4track.vps&&this.mp4track.sps&&this.mp4track.pps&&(this.readyToDecode=!0),l}}]),e})(R),Be=(function(t){B(e,t);var i=_(e);function e(r,a,l,n){var s;return S(this,e),s=i.call(this,"remuxer"),s.videoCodec=l,s.frameDuration=n,s.initialized=!1,s.tracks={},s.seq=1,s.env=r,s.timescale=1e3,s.mediaDuration=a?4294967295:0,s}return j(e,[{key:"addTrack",value:function(a){var l=this;if((a==="video"||a==="both")&&(this.videoCodec=="H265"?this.tracks.video=new Ie(this.timescale,this.mediaDuration,this.frameDuration):this.tracks.video=new Ae(this.timescale,this.mediaDuration,this.frameDuration),this.tracks.video.on("outOfData",function(){l.dispatch("missingVideoFrames")}),this.tracks.video.on("keyframePosition",function(s){l.dispatch("keyframePosition",s)})),a==="audio"||a==="both"){var n=new ee(this.timescale,this.mediaDuration,this.frameDuration);this.tracks.audio=n,this.tracks.video.on("outOfData",function(){l.dispatch("missingAudioFrames")})}}},{key:"reset",value:function(){for(var a in this.tracks)this.tracks[a].resetTrack();this.initialized=!1}},{key:"destroy",value:function(){this.tracks={},this.offAll()}},{key:"flush",value:function(){if(!this.initialized){if(!this.isReady())return;this.dispatch("ready"),this.initSegment(),this.initialized=!0}for(var a in this.tracks){var l=this.tracks[a],n=l.getPayload();if(n&&n.byteLength){var s=Q.moof(this.seq,l.dts,l.mp4track),v=Q.mdat(n),m=ue(s,v),E={type:a,payload:m,dts:l.dts};a==="video"&&(E.fps=l.mp4track.fps),this.dispatch("buffer",E);var L=be(l.dts/this.timescale);se("put segment (".concat(a,"): dts: ").concat(l.dts," frames: ").concat(l.mp4track.samples.length," second: ").concat(L)),l.flush(),this.seq++}}}},{key:"initSegment",value:function(){var a=[];for(var l in this.tracks){var n=this.tracks[l];if(this.env=="browser"){var s={type:l,payload:Q.initSegment([n.mp4track],this.mediaDuration,this.timescale)};this.dispatch("buffer",s)}else a.push(n.mp4track)}if(this.env=="node"){var v={type:"all",payload:Q.initSegment(a,this.mediaDuration,this.timescale)};this.dispatch("buffer",v)}se("Initial segment generated.")}},{key:"isReady",value:function(){for(var a in this.tracks)if(!this.tracks[a].readyToDecode||!this.tracks[a].samples.length)return!1;return!0}},{key:"feed",value:function(a){var l=!1;if(a.video&&this.tracks.video&&(l|=this.tracks.video.feed(a.video,a.duration,a.compositionTimeOffset)),a.audio&&this.tracks.audio&&(l|=this.tracks.audio.feed(a.audio,a.duration)),!l){he("Input object must have video and/or audio property. Make sure it is a valid typed array");return}this.flush()}}]),e})(T),We=(function(t){B(e,t);var i=_(e);function e(r,a){var l;return S(this,e),l=i.call(this,"buffer"),l.type=a,l.queue=new Uint8Array,l.cleaning=!1,l.pendingCleaning=0,l.cleanOffset=30,l.cleanRanges=[],l.sourceBuffer=r,l.sourceBuffer.addEventListener("updateend",function(){if(l.pendingCleaning>0&&(l.initCleanup(l.pendingCleaning),l.pendingCleaning=0),l.cleaning=!1,l.cleanRanges.length){l.doCleanup();return}}),l.sourceBuffer.addEventListener("error",function(){l.dispatch("error",{type:l.type,name:"buffer",error:"buffer error"})}),l}return j(e,[{key:"destroy",value:function(){this.queue=null,this.sourceBuffer=null,this.offAll()}},{key:"doCleanup",value:function(){if(!this.cleanRanges.length){this.cleaning=!1;return}var a=this.cleanRanges.shift();se("".concat(this.type," remove range [").concat(a[0]," - ").concat(a[1],")")),this.cleaning=!0,this.sourceBuffer.remove(a[0],a[1])}},{key:"initCleanup",value:function(a){try{if(this.sourceBuffer.updating){this.pendingCleaning=a;return}if(this.sourceBuffer.buffered&&this.sourceBuffer.buffered.length&&!this.cleaning){for(var l=0;l<this.sourceBuffer.buffered.length;++l){var n=this.sourceBuffer.buffered.start(l),s=this.sourceBuffer.buffered.end(l);a-n>this.cleanOffset&&(s=a-this.cleanOffset,n<s&&this.cleanRanges.push([n,s]))}this.doCleanup()}}catch(v){he("Error occured while cleaning ".concat(this.type," buffer - ").concat(v.name,": ").concat(v.message))}}},{key:"doAppend",value:function(){if(this.queue.length&&!(!this.sourceBuffer||this.sourceBuffer.updating))try{this.sourceBuffer.appendBuffer(this.queue),this.queue=new Uint8Array}catch(l){var a="unexpectedError";l.name==="QuotaExceededError"?(se("".concat(this.type," buffer quota full")),a="QuotaExceeded"):(he("Error occured while appending ".concat(this.type," buffer - ").concat(l.name,": ").concat(l.message)),a="InvalidStateError"),this.dispatch("error",{type:this.type,name:a,error:"buffer error"})}}},{key:"feed",value:function(a){this.queue=ue(this.queue,a)}}]),e})(T),Ke=(function(t){B(e,t);var i=_(e);function e(r){var a;S(this,e),a=i.call(this,"jmuxer"),a.isReset=!1;var l={node:"",mode:"both",videoCodec:"H264",flushingTime:500,maxDelay:500,clearBuffer:!0,fps:30,readFpsFromTrack:!1,debug:!1,onReady:function(){},onData:function(){},onError:function(){},onUnsupportedCodec:function(){},onMissingVideoFrames:function(){},onMissingAudioFrames:function(){},onKeyframePosition:function(){},onLoggerLog:console.log,onLoggerErr:console.error};return a.options=Object.assign({},l,r),a.env=(typeof process>"u"?"undefined":V(process))==="object"&&typeof window>"u"?"node":"browser",a.options.debug&&ae(a.options.onLoggerLog,a.options.onLoggerErr),a.options.fps||(a.options.fps=30),a.frameDuration=1e3/a.options.fps|0,a.remuxController=new Be(a.env,r.live,a.options.videoCodec,a.frameDuration),a.remuxController.addTrack(a.options.mode),a.initData(),a.remuxController.on("buffer",a.onBuffer.bind(D(a))),a.env=="browser"&&(a.remuxController.on("ready",a.createBuffer.bind(D(a))),a.initBrowser()),a.remuxController.on("missingVideoFrames",function(){typeof a.options.onMissingVideoFrames=="function"&&a.options.onMissingVideoFrames.call(null)}),a.remuxController.on("missingAudioFrames",function(){typeof a.options.onMissingAudioFrames=="function"&&a.options.onMissingAudioFrames.call(null)}),a.clearBuffer&&a.remuxController.on("keyframePosition",function(n){a.kfPosition.push(n)}),typeof a.options.onKeyframePosition=="function"&&a.remuxController.on("keyframePosition",function(n){a.options.onKeyframePosition.call(null,n)}),a}return j(e,[{key:"initData",value:function(){this.lastCleaningTime=Date.now(),this.kfPosition=[],this.pendingUnits={},this.remainingData=new Uint8Array,this.startInterval()}},{key:"initBrowser",value:function(){typeof this.options.node=="string"&&this.options.node==""&&he("no video element were found to render, provide a valid video element"),this.node=typeof this.options.node=="string"?document.getElementById(this.options.node):this.options.node,this.mseReady=!1,this.setupMSE()}},{key:"createStream",value:function(){var a=this.feed.bind(this),l=this.destroy.bind(this);return this.stream=new c.Duplex({writableObjectMode:!0,read:function(s){},write:function(s,v,m){a(s),m()},final:function(s){l(),s()}}),this.stream}},{key:"setupMSE",value:function(){if(window.MediaSource=window.MediaSource||window.WebKitMediaSource||window.ManagedMediaSource,!window.MediaSource)throw"Oops! Browser does not support Media Source Extension or Managed Media Source (IOS 17+).";if(this.isMSESupported=!!window.MediaSource,this.mediaSource=new window.MediaSource,this.url=URL.createObjectURL(this.mediaSource),window.MediaSource===window.ManagedMediaSource)try{this.node.removeAttribute("src"),this.node.disableRemotePlayback=!0;var a=document.createElement("source");a.type="video/mp4",a.src=this.url,this.node.appendChild(a),this.node.load()}catch{this.node.src=this.url}else this.node.src=this.url;this.mseEnded=!1,this.mediaSource.addEventListener("sourceopen",this.onMSEOpen.bind(this)),this.mediaSource.addEventListener("sourceclose",this.onMSEClose.bind(this)),this.mediaSource.addEventListener("webkitsourceopen",this.onMSEOpen.bind(this)),this.mediaSource.addEventListener("webkitsourceclose",this.onMSEClose.bind(this))}},{key:"endMSE",value:function(){if(!this.mseEnded)try{this.mseEnded=!0,this.mediaSource.endOfStream()}catch{he("mediasource is not available to end")}}},{key:"feed",value:function(a){!a||!this.remuxController||(a.duration=a.duration?parseInt(a.duration):0,this.remuxController.feed(a))}},{key:"destroy",value:function(){if(this.stopInterval(),this.stream&&(this.remuxController.flush(),this.stream.push(null),this.stream=null),this.remuxController&&(this.remuxController.destroy(),this.remuxController=null),this.bufferControllers){for(var a in this.bufferControllers)this.bufferControllers[a].destroy();this.bufferControllers=null,this.endMSE()}this.node=!1,this.mseReady=!1,this.videoStarted=!1,this.mediaSource=null}},{key:"reset",value:function(){if(this.stopInterval(),this.isReset=!0,this.node.pause(),this.remuxController&&this.remuxController.reset(),this.bufferControllers){for(var a in this.bufferControllers)this.bufferControllers[a].destroy();this.bufferControllers=null,this.endMSE()}this.initData(),this.env=="browser"&&this.initBrowser(),se("JMuxer was reset")}},{key:"createBuffer",value:function(){if(!(!this.mseReady||!this.remuxController||!this.remuxController.isReady()||this.bufferControllers)){this.bufferControllers={};for(var a in this.remuxController.tracks){var l=this.remuxController.tracks[a];if(!e.isSupported("".concat(a,'/mp4; codecs="').concat(l.mp4track.codec,'"')))return he("Browser does not support codec: ".concat(a,'/mp4; codecs="').concat(l.mp4track.codec,'"')),typeof this.options.onUnsupportedCodec=="function"&&this.options.onUnsupportedCodec.call(null,l.mp4track.codec),!1;var n=this.mediaSource.addSourceBuffer("".concat(a,'/mp4; codecs="').concat(l.mp4track.codec,'"'));this.bufferControllers[a]=new We(n,a),this.bufferControllers[a].on("error",this.onBufferError.bind(this))}}}},{key:"startInterval",value:function(){var a=this;this.interval=setInterval(function(){a.options.flushingTime?a.applyAndClearBuffer():a.bufferControllers&&a.cancelDelay()},this.options.flushingTime||1e3)}},{key:"stopInterval",value:function(){this.interval&&clearInterval(this.interval)}},{key:"cancelDelay",value:function(){if(this.node.buffered&&this.node.buffered.length>0&&!this.node.seeking){var a=this.node.buffered.end(0);a-this.node.currentTime>this.options.maxDelay/1e3&&(se("delay"),this.node.paused&&this.node.play().catch(he),this.node.currentTime=a-.001)}}},{key:"releaseBuffer",value:function(){for(var a in this.bufferControllers)this.bufferControllers[a].doAppend()}},{key:"applyAndClearBuffer",value:function(){this.bufferControllers&&(this.releaseBuffer(),this.clearBuffer())}},{key:"getSafeClearOffsetOfBuffer",value:function(a){for(var l=this.options.mode==="audio"&&a||0,n,s=0;s<this.kfPosition.length&&!(this.kfPosition[s]>=a);s++)n=this.kfPosition[s];return n&&(this.kfPosition=this.kfPosition.filter(function(v){return v<n&&(l=v),v>=n})),l}},{key:"clearBuffer",value:function(){if(this.options.clearBuffer&&Date.now()-this.lastCleaningTime>1e4){for(var a in this.bufferControllers){var l=this.getSafeClearOffsetOfBuffer(this.node.currentTime);this.bufferControllers[a].initCleanup(l)}this.lastCleaningTime=Date.now()}}},{key:"onBuffer",value:function(a){this.options.readFpsFromTrack&&typeof a.fps<"u"&&this.options.fps!=a.fps&&(this.options.fps=a.fps,this.frameDuration=Math.ceil(1e3/a.fps),se("JMuxer changed FPS to ".concat(a.fps," from track data"))),this.env=="browser"?this.bufferControllers&&this.bufferControllers[a.type]&&this.bufferControllers[a.type].feed(a.payload):this.stream&&this.stream.push(a.payload),this.options.onData&&this.options.onData(a.payload),this.options.flushingTime===0&&this.applyAndClearBuffer()}},{key:"onMSEOpen",value:function(){this.mseReady=!0,URL.revokeObjectURL(this.url),typeof this.options.onReady=="function"&&this.options.onReady.call(null,this.isReset)}},{key:"onMSEClose",value:function(){this.mseReady=!1,this.videoStarted=!1}},{key:"onBufferError",value:function(a){if(a.name=="QuotaExceeded"){se("JMuxer cleaning ".concat(a.type," buffer due to QuotaExceeded error")),this.bufferControllers[a.type].initCleanup(this.node.currentTime);return}else a.name=="InvalidStateError"?(se("JMuxer is reseting due to InvalidStateError"),this.reset()):this.endMSE();typeof this.options.onError=="function"&&this.options.onError.call(null,a)}}],[{key:"isSupported",value:function(a){return window.MediaSource&&window.MediaSource.isTypeSupported(a)}}]),e})(T);return Ke}))})(it)),it.exports}var Cr=Sr();const $r=yr(Cr);function Pr(p){const{platform:d,serial:c,videoRef:f}=p,k=z(!1),b=z(!1),D=z(null);let S=null,Y=null,j=null;const F=3e3;function _(){if(!f.value){const y="Video element not ready";return D.value=y,console.error("[Scrcpy]",y),!1}try{return console.log("[Scrcpy] Initializing JMuxer for video element:",f.value),Y=new $r({node:f.value,mode:"video",flushingTime:0,fps:30,debug:!1}),console.log("[Scrcpy] JMuxer initialized successfully"),!0}catch(y){const U=`JMuxer init failed: ${y instanceof Error?y.message:String(y)}`;return D.value=U,console.error("[Scrcpy]",U,y),!1}}function M(){if(S&&S.readyState===WebSocket.OPEN){console.warn("[Scrcpy] WebSocket already connected");return}if(!f.value){console.warn("[Scrcpy] Video element not available, cannot connect");return}if(!(!Y&&!_()))try{const U=`${location.protocol==="https:"?"wss:":"ws:"}//${location.host}/ws/${d}/scrcpy/${c}`;console.log(`[Scrcpy] Connecting to ${U}`),S=new WebSocket(U),S.binaryType="arraybuffer",S.onopen=()=>{k.value=!0,b.value=!1,D.value=null,console.log("[Scrcpy] Connected"),j&&(clearTimeout(j),j=null)},S.onmessage=q=>{if(q.data instanceof ArrayBuffer){if(Y&&q.data.byteLength>0)try{Y.feed({video:new Uint8Array(q.data)})}catch(ne){console.error("[Scrcpy] JMuxer feed error:",ne)}}else try{const ne=JSON.parse(q.data);console.log("[Scrcpy] Control message:",ne)}catch{console.warn("[Scrcpy] Invalid message:",q.data)}},S.onerror=q=>{const ne="WebSocket connection error";console.error("[Scrcpy]",ne,q),console.error("[Scrcpy] WebSocket URL was:",U),console.error("[Scrcpy] WebSocket readyState:",S?.readyState),D.value=ne},S.onclose=()=>{k.value=!1,console.log("[Scrcpy] Disconnected"),!b.value&&f.value&&(b.value=!0,console.log(`[Scrcpy] Reconnecting in ${F}ms...`),j=setTimeout(()=>{M()},F))}}catch(y){D.value=`WebSocket init failed: ${y instanceof Error?y.message:String(y)}`,console.error("[Scrcpy] Connection error:",y)}}function H(){if(b.value=!1,j&&(clearTimeout(j),j=null),S&&(S.close(),S=null),Y){try{Y.destroy()}catch(y){console.warn("[Scrcpy] JMuxer destroy error:",y)}Y=null}k.value=!1,D.value=null,console.log("[Scrcpy] Disconnected and cleaned up")}function B(y,U,q,ne,we){if(!S||S.readyState!==WebSocket.OPEN){console.warn("[Scrcpy] WebSocket not connected");return}const le=U/ne,ve=q/we,w=JSON.stringify({type:y==="down"?"touchDown":y==="move"?"touchMove":"touchUp",xP:le,yP:ve});S.send(w)}return bt(()=>{H()}),{connected:k,reconnecting:b,error:D,connect:M,disconnect:H,sendTouch:B}}const Fr={class:"screen-panel",ref:"containerRef"},Ar={class:"mode-selector"},Ur={class:"info-display"},Dr={class:"canvas-container"},Er={class:"canvas-wrapper"},Tr=["src"],Mr=te({__name:"ScreenPanel",props:{platform:{},serial:{},screenSize:{}},emits:["tap","recordTap","recordSwipe"],setup(p,{expose:d,emit:c}){const f=p,k=c,b=Qe(),D=ct(),S=z("default"),Y=z({x:0,y:0}),j=z(!1),F=z([]),_=me(()=>S.value==="pointer"),M=z(null),H=z(null),{canvasRef:B,addRect:y,addTrack:U,clearShapes:q,clearShapesByType:ne,resizeCanvas:we}=mr(),le=Pr({platform:f.platform,serial:f.serial,videoRef:H}),ve=me(()=>D.screenshotUrl),Z=me(()=>({width:f.screenSize?.width||D.screenSize?.width||0,height:f.screenSize?.height||D.screenSize?.height||0})),w=me(()=>{const $=Z.value.width,A=Z.value.height;return!$||!A?{x:0,y:0}:{x:Math.round(Y.value.x/$*100),y:Math.round(Y.value.y/A*100)}});function C(){if(!M.value)return;const $=M.value.naturalWidth,A=M.value.naturalHeight;we($,A)}function I(){b.error("")}function V(){if(!H.value)return;const $=H.value.videoWidth||Z.value.width,A=H.value.videoHeight||Z.value.height;we($,A),le&&!le.connected.value&&le.connect()}Oe(()=>S.value,$=>{$==="pointer"&&(D.selectNode(null),ne("select"),ne("hover"))}),Oe(()=>_.value,async($,A)=>{if(A===void 0&&!$){console.log("[ScreenPanel] Initial state: Screenshot mode");return}$?(console.log("[ScreenPanel] Switching to Scrcpy mode, waiting for video element..."),await xt(),console.log("[ScreenPanel] Video element ready, connecting..."),le.connect()):(console.log("[ScreenPanel] Switching to Screenshot mode, disconnecting..."),le.disconnect())}),Oe(H,$=>{$&&_.value&&$.addEventListener("loadedmetadata",V)},{immediate:!0}),bt(()=>{le.disconnect()});function W($){const A=M.value||H.value;if(!A)return null;const R=A.getBoundingClientRect(),{width:ee,height:ie}=Z.value;if(!ee||!ie)return null;const _e=ee/R.width,re=ie/R.height,ue=Math.round(($.clientX-R.left)*_e),be=Math.round(($.clientY-R.top)*re);return{x:ue,y:be}}function oe($){if(!B.value)return null;const A=B.value.getBoundingClientRect(),R=B.value.width/A.width,ee=B.value.height/A.height,ie=($.clientX-A.left)*R,_e=($.clientY-A.top)*ee;return{x:ie,y:_e}}function xe($){if(!B.value)return null;const{width:A,height:R}=Z.value;if(!A||!R)return null;const ee=A/B.value.width,ie=R/B.value.height,_e=Math.round($.x*ee),re=Math.round($.y*ie);return{x:_e,y:re}}function ae($,A){if(!D.hierarchy?.nodes)return null;const R=[];function ee(re){re.forEach(ue=>{R.push(ue),ue.children&&ee(ue.children)})}ee(D.hierarchy.nodes);let ie=null,_e=1/0;for(const re of R){if(!re.bounds)continue;const[ue,be,Ae,Ee]=re.bounds;if($>=ue&&$<=Ae&&A>=be&&A<=Ee){const Fe=(Ae-ue)*(Ee-be);Fe<_e&&(_e=Fe,ie=re)}}return ie}function se($){const A=W($),R=oe($);if(!(!A||!R)){if(Y.value=A,ne("hover"),S.value==="default"){const ee=ae(A.x,A.y);ee&&ee.bounds&&y(ee.bounds,"hover")}else if(S.value==="pointer"&&j.value&&(F.value.push(R),ne("hover"),U(F.value),_.value)){const{width:ee,height:ie}=Z.value;ee&&ie&&le.sendTouch("move",A.x,A.y,ee,ie)}}}function he($){const A=W($);if(A&&(j.value=!0,F.value=[],S.value==="pointer")){const R=oe($);if(R&&F.value.push(R),_.value){const{width:ee,height:ie}=Z.value;ee&&ie&&le.sendTouch("down",A.x,A.y,ee,ie)}}}async function T($){const A=W($);if(A){if(j.value=!1,S.value==="default"){const R=ae(A.x,A.y);R&&(D.selectNode(R),ne("select"),R.bounds&&y(R.bounds,"select"))}else if(S.value==="pointer")try{k("tap",A.x,A.y);const R=null;if(_.value){const{width:ee,height:ie}=Z.value;if(ee&&ie&&le.sendTouch("up",A.x,A.y,ee,ie),F.value.length>5&&F.value.length>=2){const re=F.value[0],ue=F.value[F.value.length-1],be=xe(re),Ae=xe(ue);if(be&&Ae){const Ee=Math.max(.2,Math.min(1,F.value.length/60));k("recordSwipe",be.x,be.y,Ae.x,Ae.y,Ee,R)}}else k("recordTap",A.x,A.y,R)}else if(F.value.length>5&&F.value.length>=2){const ie=F.value[0],_e=F.value[F.value.length-1],re=xe(ie),ue=xe(_e);if(re&&ue){const be=Math.max(.2,Math.min(1,F.value.length/60));await fe(f.platform,f.serial,"swipe",{startX:re.x,startY:re.y,endX:ue.x,endY:ue.y,duration:be}),k("recordSwipe",re.x,re.y,ue.x,ue.y,be,R),b.success(`: (${re.x}, ${re.y})  (${ue.x}, ${ue.y})`)}}else await Ct(f.platform,f.serial,A.x,A.y),k("recordTap",A.x,A.y,R),b.success(`: (${A.x}, ${A.y})`)}catch(R){b.error(`: ${R instanceof Error?R.message:String(R)}`)}F.value=[],ne("hover")}}function Q(){if(j.value&&S.value==="pointer"&&_.value){const $=F.value[F.value.length-1];if($){const A=xe($),{width:R,height:ee}=Z.value;A&&R&&ee&&le.sendTouch("up",A.x,A.y,R,ee)}}j.value=!1,F.value=[],ne("hover")}return Oe(()=>D.selectedNode,$=>{ne("select"),$&&$.bounds&&y($.bounds,"select")}),d({clearShapes:q,resizeCanvas:we}),($,A)=>(g(),P("div",Fr,[x("div",Ar,[u(o(Ot),{value:S.value,"onUpdate:value":A[0]||(A[0]=R=>S.value=R),size:"small"},{default:h(()=>[u(o(st),{value:"default"},{default:h(()=>[u(o(K),null,{default:h(()=>[u(o(Pn))]),_:1}),A[1]||(A[1]=G("  ",-1))]),_:1}),u(o(st),{value:"pointer"},{default:h(()=>[u(o(K),null,{default:h(()=>[u(o(Gt))]),_:1}),A[2]||(A[2]=G("  ",-1))]),_:1})]),_:1},8,["value"]),x("div",Ur,[x("span",null,O(Z.value.width)+"x"+O(Z.value.height),1),x("span",null,O(Y.value.x)+", "+O(Y.value.y),1),x("span",null,O(w.value.x)+"%, "+O(w.value.y)+"%",1)])]),x("div",Dr,[x("div",Er,[_.value?(g(),P("video",{key:1,ref_key:"videoRef",ref:H,class:"screen-video",autoplay:"",muted:""},null,512)):(g(),P("img",{key:0,ref_key:"imageRef",ref:M,src:ve.value,class:"screen-image",onLoad:C,onError:I},null,40,Tr)),x("canvas",{ref_key:"drawingCanvas",ref:B,class:"drawing-canvas",onMousemove:se,onMousedown:he,onMouseup:T,onMouseleave:Q},null,544)])])],512))}}),Xe=(p,d)=>{const c=p.__vccOpts||p;for(const[f,k]of d)c[f]=k;return c},Br=Xe(Mr,[["__scopeId","data-v-18a35720"]]),Or={class:"hierarchy-panel"},Lr={class:"hierarchy-search-bar"},zr={key:0,class:"search-results-info"},Rr={key:1,class:"search-results-list"},Ir=["onClick"],Nr={class:"result-index"},jr={class:"result-content"},Hr={class:"result-primary"},Vr={class:"result-secondary"},Gr={key:0,class:"result-tag"},Xr={key:1,class:"result-tag"},Wr=te({__name:"HierarchyPanel",props:{platform:{},serial:{}},setup(p){const d=p,c=Qe(),f=ct(),k=z(""),b=z([]),D=z(!1),S=z("text"),Y=[{label:" (text)",value:"text"},{label:"XPath",value:"xpath"},{label:"Resource ID",value:"id"},{label:"Class Name",value:"className"}],j=z(new Map),F=z([]),_=z([]);function M(w,C=""){return w.map((I,V)=>{const W=C?`${C}-${V}`:`${V}`;j.value.set(W,I);const oe=I.children&&I.children.length>0;return{key:W,label:`${V} ${I.class_name||"Node"}`,prefix:()=>ye(K,null,{default:()=>ye(oe?Un:bn)}),children:oe?M(I.children,W):void 0,isLeaf:!oe,raw:I}})}function H({option:w}){const C=w.raw,I=(w.label||"").split(" ")[0],V=C.class_name||"Node",W=[ye("span",{class:"tree-node-index"},`${I} `),ye("span",{class:"tree-node-class"},V)];if(C.resource_id){const oe=C.resource_id.split("/").pop()||C.resource_id;W.push(ye("span",{class:"tree-node-highlight"},` id=${oe}`))}return C.text&&W.push(ye("span",{class:"tree-node-highlight"},` text=${C.text}`)),ye("span",{},W)}const B=me(()=>f.hierarchy?.nodes?(j.value.clear(),M(f.hierarchy.nodes)):[]);async function y(){if(!k.value.trim()){c.warning("");return}D.value=!0;try{await f.refreshHierarchy();const w=k.value.trim(),C=await fe(d.platform,d.serial,"findElements",{by:S.value,value:w});if(C&&typeof C=="object"&&"value"in C){const I=C;b.value=I.value.map(ot),I.count===0?c.warning(""):I.count===1?ne(b.value[0]):c.success(` ${I.count} `)}else Array.isArray(C)?(b.value=C.map(ot),C.length===1?ne(b.value[0]):c.success(` ${C.length} `)):(b.value=[],c.warning(""))}catch(w){c.error(`: ${w instanceof Error?w.message:String(w)}`),b.value=[]}finally{D.value=!1}}function U(w,C,I=""){if(!w||w.length!==4)return null;for(let V=0;V<C.length;V++){const W=C[V],oe=I?`${I}-${V}`:`${V}`,xe=W?.raw;if(xe?.bounds){const ae=xe.bounds;if(ae[0]===w[0]&&ae[1]===w[1]&&ae[2]===w[2]&&ae[3]===w[3])return oe}if(W&&W.children){const ae=U(w,W.children,oe);if(ae)return ae}}return null}function q(w){const C=w.split("-"),I=[];for(let V=1;V<C.length;V++)I.push(C.slice(0,V).join("-"));return I}async function ne(w){await xt();const C=U(w.bounds,B.value);if(C){const I=q(C),V=new Set([..._.value,...I]);_.value=Array.from(V),F.value=[C];const W=j.value.get(C);W&&f.selectNode(W),c.success("")}else f.selectNode(w),c.warning("")}function we(){k.value="",b.value=[]}function le(w,C){const I=C[0];if(I&&I.raw){const V=I.raw;f.selectNode(V)}}function ve(w){_.value=w}const Z=({option:w})=>({onDblclick(){if(!w.isLeaf){const C=w.key;_.value.includes(C)?_.value=_.value.filter(I=>I!==C):_.value=[..._.value,C]}}});return Oe(()=>f.selectedNode,async w=>{if(!w){F.value=[];return}await xt();const C=U(w.bounds,B.value);if(C){const I=q(C),V=new Set([..._.value,...I]);_.value=Array.from(V),F.value=[C]}},{deep:!0}),(w,C)=>{const I=Te("n-select"),V=Te("n-button"),W=Te("n-input"),oe=Te("n-tree"),xe=Te("n-empty");return g(),P("div",Or,[x("div",Lr,[u(I,{value:S.value,"onUpdate:value":C[0]||(C[0]=ae=>S.value=ae),options:Y,size:"small",style:{width:"160px","flex-shrink":"0"}},null,8,["value"]),u(W,{value:k.value,"onUpdate:value":C[1]||(C[1]=ae=>k.value=ae),placeholder:"...",clearable:"",onKeydown:Lt(y,["enter"]),style:{flex:"1"}},{suffix:h(()=>[u(V,{text:"",onClick:y,loading:D.value,disabled:!k.value.trim()},{icon:h(()=>[u(o(K),null,{default:h(()=>[u(o(Yn))]),_:1})]),_:1},8,["loading","disabled"])]),_:1},8,["value"])]),b.value.length>0?(g(),P("div",zr,[x("span",null," "+O(b.value.length)+" ",1),u(V,{text:"",size:"small",onClick:we},{icon:h(()=>[u(o(K),null,{default:h(()=>[u(o(yn))]),_:1})]),default:h(()=>[C[2]||(C[2]=G("  ",-1))]),_:1})])):ge("",!0),b.value.length>0?(g(),P("div",Rr,[(g(!0),P(Me,null,Re(b.value,(ae,se)=>(g(),P("div",{key:se,class:"search-result-item",onClick:he=>ne(ae)},[x("div",Nr,O(se+1),1),x("div",jr,[x("div",Hr,O(ae.text||ae.resource_id||ae.class_name||` ${se+1}`),1),x("div",Vr,[ae.resource_id?(g(),P("span",Gr,O(ae.resource_id),1)):ge("",!0),ae.class_name?(g(),P("span",Xr,O(ae.class_name),1)):ge("",!0)])]),u(o(K),{size:"16",color:"var(--md-primary)"},{default:h(()=>[u(o(Ht))]),_:1})],8,Ir))),128))])):ge("",!0),B.value.length>0?(g(),pe(oe,{key:2,data:B.value,"selected-keys":F.value,"expanded-keys":_.value,"node-props":Z,"render-label":H,selectable:"","block-line":"","onUpdate:selectedKeys":le,"onUpdate:expandedKeys":ve},null,8,["data","selected-keys","expanded-keys"])):(g(),pe(xe,{key:3,description:"No hierarchy data"}))])}}}),Kr=Xe(Wr,[["__scopeId","data-v-98aa70b5"]]);function Jr(p,d,c=!0){const f=c?JSON.stringify(p,null,2):JSON.stringify(p),k=new Blob([f],{type:"application/json"});Yr(k,`${d}.json`)}function Yr(p,d){const c=URL.createObjectURL(p),f=document.createElement("a");f.href=c,f.download=d,f.click(),setTimeout(()=>{URL.revokeObjectURL(c)},100)}function qr(p,d,c){const f=z(!1),k=z(!1),b=z([]),D=z(0),S=z(`Recording_${Date.now()}`),Y=z({captureScreenshots:!1,screenshotQuality:.6,recordElementDetails:!0}),j=me(()=>b.value.length===0?0:b.value[b.value.length-1]?.relativeTime||0),F=me(()=>b.value.length);function _(T){f.value=!0,k.value=!1,b.value=[],D.value=Date.now(),T&&(S.value=T)}function M(){f.value=!1,k.value=!1}function H(){f.value&&(k.value=!0)}function B(){f.value&&(k.value=!1)}function y(){b.value=[],D.value=0}function U(T,Q){const $=c.value.width||1,A=c.value.height||1;return{x:T,y:Q,scaleX:T/$,scaleY:Q/A}}function q(T,Q,$){if(!(!T||!T.xpath))return{selector:T.xpath,fallbackCoords:{x:Q,y:$}}}function ne(T){if(!(!T||!Y.value.recordElementDetails))return{text:T.text,resource_id:T.resource_id,class_name:T.class_name,content_desc:T.content_desc,bounds:T.bounds||[0,0,0,0],key:T.key}}async function we(){Y.value.captureScreenshots}async function le(T,Q,$,A,R){if(!f.value||k.value)return;const ee=Date.now(),ie={id:crypto.randomUUID(),timestamp:ee,relativeTime:ee-D.value,type:T,coords:$,endCoords:A,xpath:$?q(R||null,$.x,$.y):void 0,element:ne(R||null),screenshot:await we(),params:Q};b.value.push(ie)}async function ve(T,Q,$){const A=U(T,Q);await le("tap",{x:T,y:Q},A,void 0,$)}async function Z(T,Q,$,A,R,ee){const ie=U(T,Q),_e=U($,A);await le("swipe",{startX:T,startY:Q,endX:$,endY:A,duration:R},ie,_e,ee)}async function w(T,Q){await le("input",{text:T},void 0,void 0,Q)}async function C(T){await le("sleep",{duration:T})}async function I(T,Q){await le("command",{command:T,args:Q})}function V(T){const Q=b.value.findIndex($=>$.id===T);Q!==-1&&b.value.splice(Q,1)}function W(T,Q){const $=b.value.findIndex(A=>A.id===T);$!==-1&&(b.value[$]={...b.value[$],...Q})}function oe(){return{version:"1.0",name:S.value,description:void 0,platform:p,deviceInfo:{serial:d,screenWidth:c.value.width,screenHeight:c.value.height},createdAt:D.value,updatedAt:Date.now(),duration:j.value,config:Y.value,actions:b.value}}function xe(T){S.value=T.name,b.value=T.actions,D.value=T.createdAt,Y.value=T.config}function ae(){const T=oe();Jr(T,`${T.name}.buiauto`)}function se(T){if(!T||typeof T!="object")return!1;if(T.version!=="1.0")return console.error(":",T.version),!1;if(typeof T.name!="string")return console.error(""),!1;if(!T.platform||!["android","ios","harmony"].includes(T.platform))return console.error(":",T.platform),!1;if(!T.deviceInfo||typeof T.deviceInfo.screenWidth!="number"||typeof T.deviceInfo.screenHeight!="number")return console.error(""),!1;if(!Array.isArray(T.actions))return console.error(""),!1;for(let Q=0;Q<T.actions.length;Q++){const $=T.actions[Q];if(!$||typeof $!="object")return console.error(` ${Q} `),!1;if(!$.type||typeof $.timestamp!="number"||typeof $.relativeTime!="number")return console.error(` ${Q} `),!1;if(($.type==="tap"||$.type==="swipe")&&!$.coords)return console.error(` ${Q} (${$.type}) `),!1;if($.type==="swipe"&&!$.endCoords)return console.error(` ${Q} (swipe) `),!1}return!0}async function he(){return new Promise((T,Q)=>{const $=document.createElement("input");$.type="file",$.accept=".buiauto.json,.json",$.onchange=async()=>{const A=$.files?.[0];if(!A){Q(new Error(""));return}try{const R=await A.text(),ee=JSON.parse(R);if(!se(ee)){Q(new Error(""));return}xe(ee),T(ee)}catch(R){R instanceof SyntaxError?Q(new Error("JSON")):Q(R)}},$.click()})}return{isRecording:f,isPaused:k,actions:b,recordingName:S,config:Y,duration:j,actionCount:F,start:_,stop:M,pause:H,resume:B,clear:y,recordTap:ve,recordSwipe:Z,recordInput:w,recordSleep:C,recordCommand:I,deleteAction:V,updateAction:W,exportRecording:oe,importRecording:xe,saveToFile:ae,loadFromFile:he}}function Zr(p,d,c){const f=z("idle"),k=z(-1),b=z(null),D=z(null),S=z(1),Y=me(()=>({currentIndex:k.value,totalSteps:b.value?.actions.length||0,elapsedTime:0,state:f.value,error:D.value||void 0})),j=me(()=>f.value==="playing"),F=me(()=>f.value==="paused"),_=me(()=>b.value!==null&&b.value.actions.length>0);function M(w){b.value=w,k.value=-1,f.value="idle",D.value=null}function H(){b.value=null,k.value=-1,f.value="idle",D.value=null}function B(w){return new Promise(C=>setTimeout(C,w/S.value))}async function y(w){try{let C=function(se){for(const he of se){if(he.xpath===w)return he;if(he.children){const T=C(he.children);if(T)return T}}return null};const I=await Wt(p,d),V=C(I.nodes);if(!V||!V.bounds)return null;const[W,oe,xe,ae]=V.bounds;return{x:Math.round((W+xe)/2),y:Math.round((oe+ae)/2)}}catch(C){return console.error("XPath:",C),null}}async function U(w){switch(w.type){case"tap":{let C,I;if(w.xpath){const V=await y(w.xpath.selector);if(V)C=V.x,I=V.y;else{if(console.warn("XPath:",w.xpath.selector),!w.coords)throw new Error("Tap");const W=c.value.width||1,oe=c.value.height||1;C=Math.round(w.coords.scaleX*W),I=Math.round(w.coords.scaleY*oe)}}else{if(!w.coords)throw new Error("Tap");const V=c.value.width||1,W=c.value.height||1;C=Math.round(w.coords.scaleX*V),I=Math.round(w.coords.scaleY*W)}await Ct(p,d,C,I);break}case"swipe":{if(!w.coords||!w.endCoords)throw new Error("Swipe");const C=c.value.width||1,I=c.value.height||1,V=Math.round(w.coords.scaleX*C),W=Math.round(w.coords.scaleY*I),oe=Math.round(w.endCoords.scaleX*C),xe=Math.round(w.endCoords.scaleY*I),ae=w.params;await fe(p,d,"swipe",{startX:V,startY:W,endX:oe,endY:xe,duration:ae.duration||.5});break}case"input":{const C=w.params;await fe(p,d,"sendKeys",{text:C.text});break}case"sleep":{const C=w.params;await B(C.duration);break}case"back":{await fe(p,d,"back",{});break}case"home":{await fe(p,d,"home",{});break}case"command":{const C=w.params;await fe(p,d,C.command,C.args||{});break}default:console.warn(":",w.type)}}async function q(){if(!b.value||b.value.actions.length===0){D.value="";return}for(f.value==="paused"?f.value="playing":(k.value=0,f.value="playing",D.value=null);k.value<b.value.actions.length&&f.value==="playing";){const w=b.value.actions[k.value];try{if(await U(w),f.value!=="playing")break;if(k.value<b.value.actions.length-1){const I=b.value.actions[k.value+1].relativeTime-w.relativeTime;if(await B(I),f.value!=="playing")break}k.value++}catch(C){D.value=C instanceof Error?C.message:String(C),f.value="error",console.error(` ${k.value}:`,C);break}}f.value==="playing"&&(f.value="idle",k.value=-1)}function ne(){f.value==="playing"&&(f.value="paused")}function we(){f.value="stopped",k.value=-1,D.value=null}async function le(){if(!b.value||k.value>=b.value.actions.length-1)return;f.value="paused",k.value++;const w=b.value.actions[k.value];try{await U(w)}catch(C){D.value=C instanceof Error?C.message:String(C),f.value="error",console.error(` ${k.value}:`,C)}}function ve(w){b.value&&w>=0&&w<b.value.actions.length&&(k.value=w,f.value="paused")}function Z(w){S.value=Math.max(.1,Math.min(5,w))}return{state:f,currentIndex:k,recording:b,error:D,speed:S,progress:Y,isPlaying:j,isPaused:F,canPlay:_,load:M,unload:H,play:q,pause:ne,stop:we,stepNext:le,seekTo:ve,setSpeed:Z}}const ut="";async function Mt(p){const d=await fetch(`${ut}/api/recordings/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(!d.ok){const c=await d.text();throw new Error(`Failed to save recording: ${c}`)}}async function Qr(){const p=await fetch(`${ut}/api/recordings/list`);if(!p.ok){const c=await p.text();throw new Error(`Failed to list recordings: ${c}`)}return(await p.json()).recordings}async function Bt(p,d){const c=await fetch(`${ut}/api/recordings/load?group=${encodeURIComponent(p)}&name=${encodeURIComponent(d)}`);if(!c.ok){const k=await c.text();throw new Error(`Failed to load recording: ${k}`)}return(await c.json()).data}async function ea(p,d){const c=await fetch(`${ut}/api/recordings/delete?group=${encodeURIComponent(p)}&name=${encodeURIComponent(d)}`,{method:"DELETE"});if(!c.ok){const f=await c.text();throw new Error(`Failed to delete recording: ${f}`)}}const ta={class:"actions-panel"},na={class:"tab-content"},ra={class:"control-bar"},aa={key:0,class:"recording-indicator"},ia={class:"duration"},sa={class:"steps-section"},oa={key:0,class:"steps-list"},la={class:"step-index"},ca={class:"step-details"},ua={class:"step-time"},da={class:"playback-tab-layout"},fa={class:"recordings-section"},ha={class:"section-header"},pa={class:"playback-controls-divider"},va={class:"control-bar"},xa={class:"progress-text"},ma={key:0,class:"error-message-compact"},ya={class:"playback-steps-section"},ga={key:0,class:"steps-list"},ka={class:"step-index"},wa={class:"step-details"},_a={class:"step-time"},ba={key:0,class:"edit-layout"},Sa={class:"edit-header"},Ca={class:"edit-info"},$a={class:"edit-group"},Pa={class:"edit-count"},Fa={class:"edit-actions-list"},Aa=["onClick"],Ua={class:"action-header-left"},Da={class:"action-index"},Ea={class:"action-summary"},Ta={class:"action-header-right"},Ma={key:0,class:"action-details"},Ba={key:1,class:"edit-empty"},Oa=te({__name:"ActionsPanel",props:{platform:{},serial:{}},setup(p,{expose:d}){const c=p,f=Qe(),k=en(),b=ct(),D=z("record"),S=z([]),Y=z(!1),j=z(!1),F=z({group:"default",name:""}),_=z(null),M=z(null),H=z(null),B=me(()=>b.screenSize),y=qr(c.platform,c.serial,B),U=Zr(c.platform,c.serial,B),q=me(()=>{if(S.value.length===0)return[];const t=new Map;S.value.forEach(e=>{const r=e.group||"default";t.has(r)||t.set(r,[]),t.get(r).push(e)});const i=[];return t.forEach((e,r)=>{const a={key:`group-${r}`,label:r,isGroup:!0,children:e.map(l=>({key:`${l.group}/${l.name}`,label:l.name,recording:l}))};i.push(a)}),i}),ne=me(()=>q.value.map(t=>t.key));function we({option:t}){const i=t;if(i.isGroup){const e=i.children?.length||0;return ye("span",{class:"tree-group-label"},[ye("span",{class:"group-name"},i.label),ye("span",{class:"group-count"},`(${e})`)])}else{const e=i.recording;return ye("div",{class:"tree-recording-label"},[ye("div",{class:"recording-name"},e.name),ye("div",{class:"recording-meta"},[ye("span",{class:"meta-item"},Ee(e.size)),ye("span",{class:"meta-item"},Fe(e.modified_at))])])}}function le({option:t}){const i=t;if(i.isGroup||!i.recording)return null;const e=i.recording;return ye("div",{class:"tree-actions",onClick:r=>r.stopPropagation()},[ye(J,{type:"success",size:"tiny",onClick:()=>oe(e)},{default:()=>""}),ye(J,{type:"primary",size:"tiny",onClick:()=>xe(e)},{default:()=>""}),ye(J,{size:"tiny",onClick:()=>ae(e)},{default:()=>""})])}const ve=({option:t})=>{const i=t;return{onClick(){i.isGroup||i.recording&&oe(i.recording)}}};function Z(){y.isRecording.value?(y.stop(),f.success(`, ${y.actionCount.value} `)):(y.start(),f.success(""))}function w(){y.isPaused.value?(y.resume(),f.info("")):(y.pause(),f.info(""))}function C(){k.warning({title:"",content:"?",positiveText:"",negativeText:"",onPositiveClick:()=>{y.clear(),f.success("")}})}function I(){if(y.actionCount.value===0){f.warning("");return}F.value.name=y.recordingName.value||`Recording_${Date.now()}`,j.value=!0}async function V(){const{group:t,name:i}=F.value;if(!i.trim()){f.warning("");return}try{const e=y.exportRecording();await Mt({group:t.trim()||"default",name:i.trim(),data:e}),f.success(`: ${t}/${i}`),j.value=!1,await W(),D.value="playback"}catch(e){f.error(`: ${e instanceof Error?e.message:String(e)}`)}}async function W(){Y.value=!0;try{S.value=await Qr()}catch(t){f.error(`: ${t instanceof Error?t.message:String(t)}`)}finally{Y.value=!1}}async function oe(t){try{const i=await Bt(t.group,t.name);U.load(i),f.success(`: ${t.name}`)}catch(i){f.error(`: ${i instanceof Error?i.message:String(i)}`)}}async function xe(t){try{const i=await Bt(t.group,t.name);_.value=JSON.parse(JSON.stringify(i)),M.value=t,H.value=null,D.value="edit",f.success(`: ${t.name}`)}catch(i){f.error(`: ${i instanceof Error?i.message:String(i)}`)}}async function ae(t){k.warning({title:"",content:` "${t.group}/${t.name}" ?`,positiveText:"",negativeText:"",onPositiveClick:async()=>{try{await ea(t.group,t.name),f.success(""),await W()}catch(i){f.error(`: ${i instanceof Error?i.message:String(i)}`)}}})}async function se(){try{await U.play(),U.state.value!=="error"&&f.success("")}catch(t){f.error(`: ${t instanceof Error?t.message:String(t)}`)}}function he(t){y.deleteAction(t),f.success("")}function T(t){f.info("...")}function Q(t){H.value=H.value===t?null:t}function $(t){_.value&&(_.value.actions.splice(t,1),H.value===t&&(H.value=null),f.success(""))}function A(t,i){if(!_.value)return;const e=_.value.actions,r=i==="up"?t-1:t+1;if(r<0||r>=e.length)return;const a=e[t];e[t]=e[r],e[r]=a,H.value===t?H.value=r:H.value===r&&(H.value=t)}async function R(){if(!_.value||!M.value){f.warning("");return}try{await Mt({group:M.value.group,name:M.value.name,data:_.value}),f.success(""),await W()}catch(t){f.error(`: ${t instanceof Error?t.message:String(t)}`)}}function ee(){_.value=null,M.value=null,H.value=null,f.info("")}async function ie(t,i,e){await y.recordTap(t,i,e)}async function _e(t,i,e,r,a,l){await y.recordSwipe(t,i,e,r,a,l)}async function re(t,i){await y.recordInput(t,i)}async function ue(t,i){await y.recordCommand(t,i)}d({getIsRecording:()=>y.isRecording.value,recordTap:ie,recordSwipe:_e,recordInput:re,recordCommand:ue}),zt(()=>{W()}),Oe(D,t=>{t==="playback"&&W()});function be(t){const i=Math.floor(t/1e3),e=Math.floor(i/60),r=i%60;return`${e.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}function Ae(t){return t<1e3?`${t}ms`:`${(t/1e3).toFixed(1)}s`}function Ee(t){return t<1024?`${t}B`:t<1024*1024?`${(t/1024).toFixed(1)}KB`:`${(t/(1024*1024)).toFixed(1)}MB`}function Fe(t){const i=new Date(t*1e3),r=new Date().getTime()-i.getTime(),a=Math.floor(r/(1e3*60*60*24));return a===0?i.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):a===1?" "+i.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):a<7?`${a}`:i.toLocaleDateString("zh-CN",{month:"short",day:"numeric"})}function Ie(t){switch(t.type){case"tap":{if(t.element){const i=t.element;if(i.text)return`: "${i.text}"`;if(i.content_desc)return`: "${i.content_desc}"`;if(i.resource_id)return`ID: ${i.resource_id.split("/").pop()}`;if(i.class_name)return`: ${i.class_name.split(".").pop()}`}return t.xpath?`XPath (${Math.round(t.coords.x)}, ${Math.round(t.coords.y)})`:` (${Math.round(t.coords.x)}, ${Math.round(t.coords.y)})`}case"swipe":{if(t.element){const i=t.element;let e="";if(i.text?e=`: "${i.text}"`:i.content_desc?e=`: "${i.content_desc}"`:i.resource_id?e=`ID: ${i.resource_id.split("/").pop()}`:i.class_name&&(e=`: ${i.class_name.split(".").pop()}`),e)return`${e}  (${Math.round(t.endCoords.x)}, ${Math.round(t.endCoords.y)})`}return`(${Math.round(t.coords.x)}, ${Math.round(t.coords.y)})  (${Math.round(t.endCoords.x)}, ${Math.round(t.endCoords.y)})`}case"input":return`"${t.params.text}"`;case"sleep":return`${t.params.duration}ms`;case"command":return t.params.command;default:return JSON.stringify(t.params)}}function Be(t){switch(t){case"tap":return"primary";case"swipe":return"success";case"input":return"warning";case"sleep":return"default";case"command":case"back":case"home":return"error";default:return"default"}}function We(t){switch(t){case"playing":return"success";case"paused":return"warning";case"error":return"error";default:return"default"}}function Ke(t){switch(t){case"idle":return"";case"playing":return"";case"paused":return"";case"stopped":return"";case"error":return"";default:return t}}return(t,i)=>(g(),P("div",ta,[u(o(Rt),{value:D.value,"onUpdate:value":i[3]||(i[3]=e=>D.value=e),type:"segment"},{default:h(()=>[u(o(at),{name:"record",tab:""},{default:h(()=>[x("div",na,[x("div",ra,[u(o(ze),{size:8},{default:h(()=>[u(o(J),{type:o(y).isRecording.value?"error":"primary",disabled:o(U).isPlaying.value,onClick:Z},{icon:h(()=>[u(o(K),null,{default:h(()=>[o(y).isRecording.value?(g(),pe(o(kt),{key:1})):(g(),pe(o(gt),{key:0}))]),_:1})]),default:h(()=>[G(" "+O(o(y).isRecording.value?"":""),1)]),_:1},8,["type","disabled"]),o(y).isRecording.value?(g(),pe(o(J),{key:0,type:o(y).isPaused.value?"default":"warning",onClick:w},{default:h(()=>[G(O(o(y).isPaused.value?"":""),1)]),_:1},8,["type"])):ge("",!0),u(o(J),{disabled:o(y).actionCount.value===0,onClick:C},{default:h(()=>[G("  ("+O(o(y).actionCount.value)+") ",1)]),_:1},8,["disabled"])]),_:1}),u(o(ze),{size:8},{default:h(()=>[u(o(J),{disabled:o(y).actionCount.value===0,onClick:I},{icon:h(()=>[u(o(K),null,{default:h(()=>[u(o(Et))]),_:1})]),default:h(()=>[i[8]||(i[8]=G("  ",-1))]),_:1},8,["disabled"])]),_:1})]),o(y).isRecording.value?(g(),P("div",aa,[u(o(Ge),{type:o(y).isPaused.value?"warning":"error",round:""},{icon:h(()=>[u(o(K),null,{default:h(()=>[u(o(gt))]),_:1})]),default:h(()=>[G(" "+O(o(y).isPaused.value?"":"..."),1)]),_:1},8,["type"]),x("span",ia,O(be(o(y).duration.value)),1)])):ge("",!0),x("div",sa,[x("h3",null," ("+O(o(y).actionCount.value)+")",1),o(y).actionCount.value>0?(g(),P("div",oa,[(g(!0),P(Me,null,Re(o(y).actions.value,(e,r)=>(g(),P("div",{key:e.id,class:nt(["step-item",{active:o(U).currentIndex.value===r}])},[x("span",la,O(r+1),1),u(o(Ge),{type:Be(e.type),size:"small"},{default:h(()=>[G(O(e.type),1)]),_:2},1032,["type"]),x("span",ca,O(Ie(e)),1),x("span",ua,O(Ae(e.relativeTime)),1),u(o(mt),{size:"tiny"},{default:h(()=>[u(o(J),{onClick:a=>T(e)},{default:h(()=>[u(o(K),null,{default:h(()=>[u(o(wn))]),_:1})]),_:1},8,["onClick"]),u(o(J),{onClick:a=>he(e.id)},{default:h(()=>[u(o(K),null,{default:h(()=>[u(o(_t))]),_:1})]),_:1},8,["onClick"])]),_:2},1024)],2))),128))])):(g(),pe(o(Je),{key:1,description:""}))])])]),_:1}),u(o(at),{name:"playback",tab:""},{default:h(()=>[x("div",da,[x("div",fa,[x("div",ha,[x("h3",null," ("+O(S.value.length)+")",1),u(o(J),{size:"small",onClick:W,loading:Y.value},{icon:h(()=>[u(o(K),null,{default:h(()=>[u(o(St))]),_:1})]),default:h(()=>[i[9]||(i[9]=G("  ",-1))]),_:1},8,["loading"])]),q.value.length>0?(g(),pe(o(tn),{key:0,data:q.value,"render-label":we,"render-suffix":le,"node-props":ve,"block-line":"","expand-on-click":"","default-expanded-keys":ne.value},null,8,["data","default-expanded-keys"])):(g(),pe(o(Je),{key:1,description:""}))]),x("div",pa,[x("div",va,[u(o(ze),{size:8},{default:h(()=>[u(o(J),{type:"success",disabled:!o(U).canPlay.value||o(y).isRecording.value,loading:o(U).isPlaying.value,onClick:se},{icon:h(()=>[u(o(K),null,{default:h(()=>[u(o(Nn))]),_:1})]),default:h(()=>[i[10]||(i[10]=G("  ",-1))]),_:1},8,["disabled","loading"]),o(U).isPlaying.value?(g(),pe(o(J),{key:0,onClick:i[0]||(i[0]=e=>o(U).pause())},{icon:h(()=>[u(o(K),null,{default:h(()=>[u(o(Rn))]),_:1})]),default:h(()=>[i[11]||(i[11]=G("  ",-1))]),_:1})):ge("",!0),u(o(J),{disabled:!o(U).isPlaying.value&&!o(U).isPaused.value,onClick:i[1]||(i[1]=e=>o(U).stop())},{icon:h(()=>[u(o(K),null,{default:h(()=>[u(o(kt))]),_:1})]),default:h(()=>[i[12]||(i[12]=G("  ",-1))]),_:1},8,["disabled"]),u(o(J),{disabled:!o(U).isPaused.value,onClick:i[2]||(i[2]=e=>o(U).stepNext())},{icon:h(()=>[u(o(K),null,{default:h(()=>[u(o(Hn))]),_:1})]),default:h(()=>[i[13]||(i[13]=G("  ",-1))]),_:1},8,["disabled"])]),_:1}),o(U).recording.value?(g(),pe(o(ze),{key:0,size:8,align:"center"},{default:h(()=>[x("span",xa,": "+O(o(U).progress.value.currentIndex+1)+" / "+O(o(U).progress.value.totalSteps),1),u(o(Ge),{type:We(o(U).state.value),size:"small"},{default:h(()=>[G(O(Ke(o(U).state.value)),1)]),_:1},8,["type"])]),_:1})):ge("",!0)]),o(U).error.value?(g(),P("div",ma,[u(o(nn),{type:"error",title:o(U).error.value,closable:""},null,8,["title"])])):ge("",!0)]),x("div",ya,[o(U).recording.value?(g(),P("div",ga,[(g(!0),P(Me,null,Re(o(U).recording.value.actions,(e,r)=>(g(),P("div",{key:e.id,class:nt(["step-item",{active:o(U).currentIndex.value===r,completed:o(U).currentIndex.value>r,pending:o(U).currentIndex.value<r}])},[x("span",ka,O(r+1),1),u(o(Ge),{type:Be(e.type),size:"small"},{default:h(()=>[G(O(e.type),1)]),_:2},1032,["type"]),x("span",wa,O(Ie(e)),1),x("span",_a,O(Ae(e.relativeTime)),1)],2))),128))])):(g(),pe(o(Je),{key:1,description:""}))])])]),_:1}),u(o(at),{name:"edit",tab:""},{default:h(()=>[_.value?(g(),P("div",ba,[x("div",Sa,[x("div",Ca,[x("h3",null,O(M.value?.name),1),x("span",$a,": "+O(M.value?.group),1),x("span",Pa,": "+O(_.value.actions.length),1)]),u(o(ze),{size:8},{default:h(()=>[u(o(J),{type:"primary",onClick:R},{icon:h(()=>[u(o(K),null,{default:h(()=>[u(o(Et))]),_:1})]),default:h(()=>[i[14]||(i[14]=G("  ",-1))]),_:1}),u(o(J),{onClick:ee},{default:h(()=>[...i[15]||(i[15]=[G("",-1)])]),_:1})]),_:1})]),x("div",Fa,[(g(!0),P(Me,null,Re(_.value.actions,(e,r)=>(g(),P("div",{key:e.id,class:nt(["edit-action-item",{expanded:H.value===r}])},[x("div",{class:"action-header",onClick:a=>Q(r)},[x("div",Ua,[x("span",Da,O(r+1),1),u(o(Ge),{type:Be(e.type),size:"small"},{default:h(()=>[G(O(e.type),1)]),_:2},1032,["type"]),x("span",Ea,O(Ie(e)),1)]),x("div",Ta,[u(o(mt),{size:"tiny"},{default:h(()=>[u(o(J),{disabled:r===0,onClick:vt(a=>A(r,"up"),["stop"])},{default:h(()=>[u(o(K),null,{default:h(()=>[u(o(Vt))]),_:1})]),_:1},8,["disabled","onClick"]),u(o(J),{disabled:r===_.value.actions.length-1,onClick:vt(a=>A(r,"down"),["stop"])},{default:h(()=>[u(o(K),null,{default:h(()=>[u(o(jt))]),_:1})]),_:1},8,["disabled","onClick"]),u(o(J),{onClick:vt(a=>$(r),["stop"])},{default:h(()=>[u(o(K),null,{default:h(()=>[u(o(_t))]),_:1})]),_:1},8,["onClick"])]),_:2},1024),u(o(K),{class:nt(["expand-icon",{expanded:H.value===r}])},{default:h(()=>[u(o(xn))]),_:1},8,["class"])])],8,Aa),H.value===r?(g(),P("div",Ma,[u(o(Pt),{"label-placement":"left","label-width":"100px",size:"small"},{default:h(()=>[e.type==="tap"?(g(),P(Me,{key:0},[u(o(De),{label:" X"},{default:h(()=>[u(o(Le),{value:e.coords.x,"onUpdate:value":a=>e.coords.x=a,min:0,step:1},null,8,["value","onUpdate:value"])]),_:2},1024),u(o(De),{label:" Y"},{default:h(()=>[u(o(Le),{value:e.coords.y,"onUpdate:value":a=>e.coords.y=a,min:0,step:1},null,8,["value","onUpdate:value"])]),_:2},1024),e.xpath?(g(),pe(o(De),{key:0,label:"XPath"},{default:h(()=>[u(o(Ye),{value:e.xpath.selector,"onUpdate:value":a=>e.xpath.selector=a,placeholder:"XPath"},null,8,["value","onUpdate:value"])]),_:2},1024)):ge("",!0)],64)):ge("",!0),e.type==="swipe"?(g(),P(Me,{key:1},[u(o(De),{label:" X"},{default:h(()=>[u(o(Le),{value:e.coords.x,"onUpdate:value":a=>e.coords.x=a,min:0,step:1},null,8,["value","onUpdate:value"])]),_:2},1024),u(o(De),{label:" Y"},{default:h(()=>[u(o(Le),{value:e.coords.y,"onUpdate:value":a=>e.coords.y=a,min:0,step:1},null,8,["value","onUpdate:value"])]),_:2},1024),u(o(De),{label:" X"},{default:h(()=>[u(o(Le),{value:e.endCoords.x,"onUpdate:value":a=>e.endCoords.x=a,min:0,step:1},null,8,["value","onUpdate:value"])]),_:2},1024),u(o(De),{label:" Y"},{default:h(()=>[u(o(Le),{value:e.endCoords.y,"onUpdate:value":a=>e.endCoords.y=a,min:0,step:1},null,8,["value","onUpdate:value"])]),_:2},1024),u(o(De),{label:"(s)"},{default:h(()=>[u(o(Le),{value:e.params.duration,"onUpdate:value":a=>e.params.duration=a,min:.1,max:10,step:.1},null,8,["value","onUpdate:value"])]),_:2},1024)],64)):ge("",!0),e.type==="input"?(g(),pe(o(De),{key:2,label:""},{default:h(()=>[u(o(Ye),{value:e.params.text,"onUpdate:value":a=>e.params.text=a,placeholder:""},null,8,["value","onUpdate:value"])]),_:2},1024)):ge("",!0),e.type==="sleep"?(g(),pe(o(De),{key:3,label:"(ms)"},{default:h(()=>[u(o(Le),{value:e.params.duration,"onUpdate:value":a=>e.params.duration=a,min:0,step:100},null,8,["value","onUpdate:value"])]),_:2},1024)):ge("",!0),u(o(De),{label:"(ms)"},{default:h(()=>[u(o(Le),{value:e.relativeTime,"onUpdate:value":a=>e.relativeTime=a,min:0,step:100},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024)])):ge("",!0)],2))),128))])])):(g(),P("div",Ba,[u(o(Je),{description:""})]))]),_:1})]),_:1},8,["value"]),u(o(It),{show:j.value,"onUpdate:show":i[7]||(i[7]=e=>j.value=e),preset:"dialog",title:""},{action:h(()=>[u(o(ze),null,{default:h(()=>[u(o(J),{onClick:i[6]||(i[6]=e=>j.value=!1)},{default:h(()=>[...i[16]||(i[16]=[G("",-1)])]),_:1}),u(o(J),{type:"primary",onClick:V},{default:h(()=>[...i[17]||(i[17]=[G("",-1)])]),_:1})]),_:1})]),default:h(()=>[u(o(Pt),{"label-placement":"left","label-width":"80px"},{default:h(()=>[u(o(De),{label:""},{default:h(()=>[u(o(Ye),{value:F.value.group,"onUpdate:value":i[4]||(i[4]=e=>F.value.group=e),placeholder:"default"},null,8,["value"])]),_:1}),u(o(De),{label:""},{default:h(()=>[u(o(Ye),{value:F.value.name,"onUpdate:value":i[5]||(i[5]=e=>F.value.name=e),placeholder:"Recording_xxx"},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["show"])]))}}),La=Xe(Oa,[["__scopeId","data-v-dbff8eb6"]]),za={class:"package-panel"},Ra={class:"package-content"},Ia={class:"install-section"},Na={class:"package-list-section"},ja={key:0,class:"loading-state"},Ha={key:1,class:"empty-state"},Va={key:2,class:"package-list"},Ga={class:"package-info"},Xa={class:"package-name"},Wa={class:"package-id"},Ka={key:0,class:"package-version"},Ja=te({__name:"PackagePanel",props:{platform:{},serial:{}},setup(p){const d=p,c=Qe(),f=z([]),k=z(!1),b=z(""),D=z(""),S=me(()=>{if(!b.value)return f.value;const B=b.value.toLowerCase();return f.value.filter(y=>y.name.toLowerCase().includes(B)||y.package.toLowerCase().includes(B))});async function Y(){k.value=!0;try{const B=await fe(d.platform,d.serial,"appList",{});Array.isArray(B)?(f.value=B.map(y=>{const U=y.package||y.packageName||y.pkg||"";return{name:y.name||y.label||y.appName||U,package:U,version:y.version||y.versionName||y.ver||""}}).filter(y=>y.package),c.success(` ${f.value.length} `)):c.error("")}catch(B){c.error(`: ${B instanceof Error?B.message:String(B)}`)}finally{k.value=!1}}async function j(B){try{await fe(d.platform,d.serial,"appLaunch",{package:B}),c.success(`Launched: ${B}`)}catch(y){c.error(`Launch failed: ${y instanceof Error?y.message:String(y)}`)}}async function F(B){try{await fe(d.platform,d.serial,"uninstallApp",{package:B}),c.success(`Uninstalled: ${B}`),await Y()}catch(y){c.error(`Uninstall failed: ${y instanceof Error?y.message:String(y)}`)}}async function _(B){try{await fe(d.platform,d.serial,"clearApp",{package:B}),c.success(`Cleared data: ${B}`)}catch(y){c.error(`Clear failed: ${y instanceof Error?y.message:String(y)}`)}}async function M(B){try{const U=`${window.location.origin}/api/${d.platform}/${d.serial}/backupApp?package=${encodeURIComponent(B)}`,q=document.createElement("a");q.href=U,q.download=`${B}.apk`,q.click(),c.success(`Downloading: ${B}.apk`)}catch(y){c.error(`Backup failed: ${y instanceof Error?y.message:String(y)}`)}}async function H(){if(D.value.trim())try{await fe(d.platform,d.serial,"installApp",{path:D.value}),c.success(`Installed: ${D.value}`),D.value="",await Y()}catch(B){c.error(`Install failed: ${B instanceof Error?B.message:String(B)}`)}}return(B,y)=>{const U=Te("n-input"),q=Te("n-button"),ne=Te("n-space"),we=Te("n-icon"),le=Te("n-spin"),ve=Te("n-empty");return g(),P("div",za,[x("div",Ra,[u(ne,{vertical:"",size:16},{default:h(()=>[x("div",Ia,[y[3]||(y[3]=x("h4",null,"Install APK",-1)),u(ne,{size:8},{default:h(()=>[u(U,{value:D.value,"onUpdate:value":y[0]||(y[0]=Z=>D.value=Z),placeholder:"APK file path",style:{flex:"1"}},null,8,["value"]),u(q,{type:"primary",onClick:H,disabled:!D.value.trim()},{default:h(()=>[...y[2]||(y[2]=[G(" Install ",-1)])]),_:1},8,["disabled"])]),_:1})]),x("div",Na,[u(ne,{justify:"space-between",align:"center",style:{"margin-bottom":"12px"}},{default:h(()=>[x("h4",null,"Installed Packages ("+O(S.value.length)+")",1),u(ne,{size:8},{default:h(()=>[u(U,{value:b.value,"onUpdate:value":y[1]||(y[1]=Z=>b.value=Z),placeholder:"Filter packages...",clearable:"",style:{width:"200px"}},null,8,["value"]),u(q,{onClick:Y,loading:k.value},{icon:h(()=>[u(we,null,{default:h(()=>[u(o(St))]),_:1})]),default:h(()=>[y[4]||(y[4]=G(" Refresh ",-1))]),_:1},8,["loading"])]),_:1})]),_:1}),k.value?(g(),P("div",ja,[u(le,{size:"large"}),y[5]||(y[5]=x("div",{class:"loading-text"},"...",-1))])):S.value.length===0?(g(),P("div",Ha,[u(ve,{description:""}),y[6]||(y[6]=x("div",{class:"empty-hint"},[x("p",null,'"Refresh"'),x("p",{class:"empty-hint-small"},"")],-1))])):(g(),P("div",Va,[(g(!0),P(Me,null,Re(S.value,Z=>(g(),P("div",{key:Z.package,class:"package-item"},[x("div",Ga,[x("div",Xa,O(Z.name||""),1),x("div",Wa,O(Z.package||""),1),Z.version?(g(),P("div",Ka,"v"+O(Z.version),1)):ge("",!0)]),u(ne,{size:8},{default:h(()=>[u(q,{size:"small",onClick:w=>j(Z.package)},{default:h(()=>[...y[7]||(y[7]=[G(" Launch ",-1)])]),_:1},8,["onClick"]),u(q,{size:"small",onClick:w=>M(Z.package)},{icon:h(()=>[u(we,null,{default:h(()=>[u(o(Cn))]),_:1})]),default:h(()=>[y[8]||(y[8]=G(" Backup ",-1))]),_:1},8,["onClick"]),u(q,{size:"small",onClick:w=>_(Z.package)},{default:h(()=>[...y[9]||(y[9]=[G(" Clear Data ",-1)])]),_:1},8,["onClick"]),u(q,{size:"small",type:"error",onClick:w=>F(Z.package)},{default:h(()=>[...y[10]||(y[10]=[G(" Uninstall ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]))),128))]))])]),_:1})])])}}}),Ya=Xe(Ja,[["__scopeId","data-v-c093dc09"]]),qa={key:0,class:"demo-content"},Za={key:1,class:"device-content"},Qa={key:0,class:"device-grid"},ei=["onClick"],ti={class:"device-icon"},ni={class:"device-info"},ri={class:"device-name"},ai={class:"device-serial"},ii={key:1,class:"empty-state"},si={class:"empty-title"},oi=te({__name:"DeviceSelector",props:{show:{type:Boolean}},emits:["update:show","select"],setup(p,{emit:d}){const c=p,f=d,k=z("android"),b=z([{platform:"android",label:"Android",icon:rt(yt),devices:[],loading:!1},{platform:"ios",label:"iOS",icon:rt(Xt),devices:[],loading:!1},{platform:"harmony",label:"Harmony",icon:rt(wt),devices:[],loading:!1},{platform:"demo",label:"Demo",icon:rt(Dt),devices:[],loading:!1}]);async function D(F){const _=b.value.find(M=>M.platform===F);if(!(!_||_.platform==="demo")){_.loading=!0;try{_.devices=await cr(F)}catch{_.devices=[]}finally{_.loading=!1}}}function S(F,_){F==="demo"?f("select","android","1234567890"):f("select",F,_),f("update:show",!1)}function Y(){f("select","android","1234567890"),f("update:show",!1)}function j(F){k.value=F,F!=="demo"&&D(F)}return Oe(()=>c.show,F=>{F&&(D("android"),D("ios"),D("harmony"))}),(F,_)=>(g(),pe(o(It),{show:p.show,"onUpdate:show":_[1]||(_[1]=M=>f("update:show",M)),preset:"card",title:"",size:"huge",bordered:!1,segmented:{content:!0},style:{"max-width":"900px"}},{default:h(()=>[u(o(Rt),{value:k.value,"onUpdate:value":[_[0]||(_[0]=M=>k.value=M),j],type:"line"},{default:h(()=>[(g(!0),P(Me,null,Re(b.value,M=>(g(),pe(o(at),{key:M.platform,name:M.platform},{tab:h(()=>[u(o(ze),{align:"center",size:6},{default:h(()=>[u(o(K),{size:"18"},{default:h(()=>[(g(),pe(qe(M.icon)))]),_:2},1024),x("span",null,O(M.label),1)]),_:2},1024)]),default:h(()=>[M.platform==="demo"?(g(),P("div",qa,[u(o(J),{type:"primary",size:"large",onClick:Y,class:"demo-btn"},{icon:h(()=>[u(o(K),null,{default:h(()=>[u(o(Dt))]),_:1})]),default:h(()=>[_[2]||(_[2]=G(" Start Demo ",-1))]),_:1}),_[3]||(_[3]=x("p",{class:"demo-hint"},"",-1))])):(g(),P("div",Za,[u(o(Nt),{show:M.loading},{default:h(()=>[M.devices.length>0?(g(),P("div",Qa,[(g(!0),P(Me,null,Re(M.devices,H=>(g(),P("div",{key:H.serial,class:"device-card",onClick:B=>S(M.platform,H.serial)},[x("div",ti,[u(o(K),{size:"32",color:"var(--md-primary)"},{default:h(()=>[(g(),pe(qe(M.icon)))]),_:2},1024)]),x("div",ni,[x("div",ri,O(H.name||H.model||H.serial),1),x("div",ai,O(H.serial),1)]),u(o(Ge),{type:H.enabled!==!1?"success":"warning",size:"small",round:"",class:"device-status"},{default:h(()=>[G(O(H.status||"device"),1)]),_:2},1032,["type"])],8,ei))),128))])):(g(),P("div",ii,[u(o(K),{size:"48",color:"var(--md-text-tertiary)"},{default:h(()=>[(g(),pe(qe(M.icon)))]),_:2},1024),x("h3",si,"No "+O(M.label)+" devices found",1),_[4]||(_[4]=x("p",{class:"empty-desc"}," Please enable developer mode and connect your device via USB ",-1))]))]),_:2},1032,["show"])]))]),_:2},1032,["name"]))),128))]),_:1},8,["value"])]),_:1},8,["show"]))}}),li=Xe(oi,[["__scopeId","data-v-dd9a090d"]]),ci={class:"device-page"},ui={class:"page-header"},di={class:"serial"},fi={class:"main-area"},hi={class:"control-sidebar"},pi={class:"control-group"},vi={class:"control-group"},xi={class:"control-group"},mi={key:0,class:"control-group"},yi={class:"screen-content"},gi={class:"text-input-bar"},ki={class:"screenshot-area"},wi={key:0,class:"property-details-panel"},_i={class:"xpath-selector-bar"},bi={class:"xpath-select-wrapper"},Si={key:0,class:"xpath-display-bar"},Ci={class:"xpath-text"},$i={key:0,class:"siblings-nav"},Pi={class:"property-details-table"},Fi={class:"property-cell label-cell"},Ai={class:"property-cell value-cell"},Ui={class:"right-panel"},Di=te({__name:"Device",props:{platform:{},serial:{}},setup(p){const d=p,c=cn(),f=Qe(),k=ct(),b=rn(),D=z(null),S=z("hierarchy"),Y=z(localStorage.getItem("language")||"zh"),j=z(!1),F={zh:{selectDevice:"",hierarchy:"",actions:"",package:"",home:"",back:"",recents:"",power:"",volumeUp:"+",volumeDown:"-",volumeMute:"",swipeUp:"",swipeDown:"",swipeLeft:"",swipeRight:"",apps:"",wake:"",stop:""},en:{selectDevice:"Select Device",hierarchy:"Hierarchy",actions:"Actions",package:"Package",home:"Home",back:"Back",recents:"Recents",power:"Power",volumeUp:"Vol +",volumeDown:"Vol -",volumeMute:"Mute",swipeUp:"Swipe Up",swipeDown:"Swipe Down",swipeLeft:"Swipe Left",swipeRight:"Swipe Right",apps:"Apps",wake:"Wake",stop:"Stop"}},_=me(()=>F[Y.value]);Oe(Y,n=>{localStorage.setItem("language",n)});const M=z(""),H=z(450),B=z(!1);function y(n){B.value=!0,n.preventDefault()}function U(n){if(!B.value)return;const s=n.clientX;s>=300&&s<=800&&(H.value=s,localStorage.setItem("screenPanelWidth",s.toString()))}function q(){B.value=!1}async function ne(){try{await fe(d.platform,d.serial,"volumeUp",{}),f.success("Volume up")}catch(n){f.error(`Volume control failed: ${n instanceof Error?n.message:String(n)}`)}}async function we(){try{await fe(d.platform,d.serial,"volumeDown",{}),f.success("Volume down")}catch(n){f.error(`Volume control failed: ${n instanceof Error?n.message:String(n)}`)}}async function le(){try{await fe(d.platform,d.serial,"volumeMute",{}),f.success("Volume muted")}catch(n){f.error(`Volume control failed: ${n instanceof Error?n.message:String(n)}`)}}const ve=z(""),Z=z("id"),w=(n,s)=>{if(!s)return"";switch(n){case"id":return s.resource_id?`//*[@resource-id="${s.resource_id}"]`:"";case"content-desc":return s.content_desc?`//*[@content-desc="${s.content_desc}"]`:"";case"text":return s.text?`//*[@text="${s.text}"]`:"";case"class_and_text":return s.class_name&&s.text?`//${s.class_name}[@text="${s.text}"]`:"";case"class":return s.class_name?`//${s.class_name}`:"";default:return s.xpath||""}},C=me(()=>{const n=re.value;if(!n)return[];const s=(m,E)=>{if(!E||!k.hierarchy?.nodes)return 0;let L=0;function N(X){X.forEach(ce=>{w(m,ce)===E&&L++,ce.children&&N(ce.children)})}return N(k.hierarchy.nodes),L};return[{label:"id",value:"id",xpath:w("id",n)},{label:"class_and_text",value:"class_and_text",xpath:w("class_and_text",n)},{label:"class",value:"class",xpath:w("class",n)},{label:"text",value:"text",xpath:w("text",n)}].map(m=>({...m,count:m.xpath?s(m.value,m.xpath):0}))}),I=me(()=>w(Z.value,re.value)),V=z([]),W=z(-1);function oe(n){if(V.value=[],W.value=-1,!n||!k.hierarchy?.nodes)return;const s=w(Z.value,n);if(!s)return;const v=[];function m(E){E.forEach(L=>{w(Z.value,L)===s&&v.push(L),L.children&&m(L.children)})}m(k.hierarchy.nodes),v.length>1&&(V.value=v,W.value=v.findIndex(E=>E.key===n.key))}function xe(n){n>=0&&n<V.value.length&&k.selectNode(V.value[n])}function ae({option:n}){return n.label}function se(n){return ye("div",{class:"xpath-option"},[ye("span",{class:"xpath-option-label"},n.label),ye("div",{class:"xpath-option-right"},[n.xpath?ye("span",{class:"xpath-option-preview"},n.xpath):null,n.count>0?ye("span",{class:"xpath-option-count"},n.count.toString()):null].filter(Boolean))])}async function he(){if(!ve.value.trim()){f.warning("Please enter text");return}try{await fe(d.platform,d.serial,"sendKeys",{text:ve.value}),f.success(`Sent: ${ve.value}`),ve.value=""}catch(n){f.error(`Send text failed: ${n instanceof Error?n.message:String(n)}`)}}async function T(){try{await fe(d.platform,d.serial,"clearText",{}),f.success("Text cleared")}catch(n){f.error(`Clear text failed: ${n instanceof Error?n.message:String(n)}`)}}async function Q(){try{await fe(d.platform,d.serial,"home",{}),f.success("Home")}catch(n){f.error(`Home failed: ${n instanceof Error?n.message:String(n)}`)}}async function $(){try{await fe(d.platform,d.serial,"back",{}),f.success("Back")}catch(n){f.error(`Back failed: ${n instanceof Error?n.message:String(n)}`)}}async function A(){try{await fe(d.platform,d.serial,"appSwitch",{}),f.success("App Switch")}catch(n){f.error(`App Switch failed: ${n instanceof Error?n.message:String(n)}`)}}async function R(){try{await fe(d.platform,d.serial,"wakeUp",{}),f.success("Wake Up")}catch(n){f.error(`Wake Up failed: ${n instanceof Error?n.message:String(n)}`)}}async function ee(){try{await fe(d.platform,d.serial,"terminate",{}),f.success("Terminated current app")}catch(n){f.error(`Terminate failed: ${n instanceof Error?n.message:String(n)}`)}}const ie=me(()=>{switch(d.platform){case"android":return yt;case"ios":return Xt;case"harmony":return wt;default:return yt}}),_e=me(()=>{const n=k.screenSize;return{width:n?.width||0,height:n?.height||0}}),re=me(()=>k.selectedNode);Oe(()=>[re.value,Z.value],([n])=>{oe(n)},{immediate:!0});function ue(n){const s={};if(n.index!==void 0&&(s.index=String(n.index)),n.text&&(s.text=n.text),n.resource_id&&(s["resource-id"]=n.resource_id),n.class_name&&(s.class=n.class_name),n.package&&(s.package=n.package),n.content_desc&&(s["content-desc"]=n.content_desc),n.checkable!==void 0&&(s.checkable=String(n.checkable)),n.checked!==void 0&&(s.checked=String(n.checked)),n.clickable!==void 0&&(s.clickable=String(n.clickable)),n.enabled!==void 0&&(s.enabled=String(n.enabled)),n.focusable!==void 0&&(s.focusable=String(n.focusable)),n.focused!==void 0&&(s.focused=String(n.focused)),n.scrollable!==void 0&&(s.scrollable=String(n.scrollable)),n.long_clickable!==void 0&&(s["long-clickable"]=String(n.long_clickable)),n.password!==void 0&&(s.password=String(n.password)),n.selected!==void 0&&(s.selected=String(n.selected)),n.visible_to_user!==void 0&&(s["visible-to-user"]=String(n.visible_to_user)),n.bounds){const[v,m,E,L]=n.bounds;s.bounds=`[${v},${m}][${E},${L}]`}return s}const be=me(()=>{if(!re.value)return[];const n=re.value,s=[];if(n.index!==void 0&&s.push({label:"index",value:n.index}),n.text&&s.push({label:"text",value:n.text}),n.resource_id&&s.push({label:"resource-id",value:n.resource_id}),n.class_name&&s.push({label:"class",value:n.class_name}),n.package&&s.push({label:"package",value:n.package}),n.content_desc&&s.push({label:"content-desc",value:n.content_desc}),n.checkable!==void 0&&s.push({label:"checkable",value:n.checkable}),n.checked!==void 0&&s.push({label:"checked",value:n.checked}),n.clickable!==void 0&&s.push({label:"clickable",value:n.clickable}),n.enabled!==void 0&&s.push({label:"enabled",value:n.enabled}),n.focusable!==void 0&&s.push({label:"focusable",value:n.focusable}),n.focused!==void 0&&s.push({label:"focused",value:n.focused}),n.scrollable!==void 0&&s.push({label:"scrollable",value:n.scrollable}),n.long_clickable!==void 0&&s.push({label:"long-clickable",value:n.long_clickable}),n.password!==void 0&&s.push({label:"password",value:n.password}),n.selected!==void 0&&s.push({label:"selected",value:n.selected}),n.visible_to_user!==void 0&&s.push({label:"visible-to-user",value:n.visible_to_user}),n.bounds){const[v,m,E,L]=n.bounds;s.push({label:"bounds",value:`[${v},${m}][${E},${L}]`})}return n.rect&&(s.push({label:"rect.x",value:n.rect.x}),s.push({label:"rect.y",value:n.rect.y}),s.push({label:"rect.width",value:n.rect.width}),s.push({label:"rect.height",value:n.rect.height})),n.xpath&&s.push({label:"xpath",value:n.xpath}),s.push({label:"raw",value:JSON.stringify(ue(n),null,2)}),s});function Ae(n,s){}async function Ee(n,s,v){D.value&&await D.value.recordTap(n,s,v)}async function Fe(n,s,v,m,E,L){D.value&&await D.value.recordSwipe(n,s,v,m,E,L)}async function Ie(){if(!re.value||!re.value.bounds){f.warning("");return}try{const[n,s,v,m]=re.value.bounds,E=Math.round((n+v)/2),L=Math.round((s+m)/2);await Ct(d.platform,d.serial,E,L),f.success(`: (${E}, ${L})`),D.value?.getIsRecording?.()&&(await D.value.recordTap(E,L,re.value),f.info(""))}catch(n){f.error(`: ${n instanceof Error?n.message:String(n)}`)}}async function Be(){await k.refreshHierarchy();try{const n=await fe(d.platform,d.serial,"currentApp",{});n&&typeof n=="object"&&"package"in n&&(M.value=n.package||"")}catch{}}function We(){navigator.clipboard.writeText(d.serial),f.success("Copied")}function Ke(n,s){c.push(`/${n}/${s}`)}function t(){const n=I.value;if(!n){f.warning("No XPath available");return}navigator.clipboard.writeText(n),f.success("XPath copied")}function i(n){(n.key==="r"||n.key==="R")&&!n.ctrlKey&&!n.metaKey&&(n.preventDefault(),Be())}zt(()=>{const n=localStorage.getItem("screenPanelWidth");n&&(H.value=parseInt(n,10)),document.addEventListener("mousemove",U),document.addEventListener("mouseup",q),k.setDevice(d.platform,d.serial),Be(),document.addEventListener("keydown",i)}),bt(()=>{document.removeEventListener("mousemove",U),document.removeEventListener("mouseup",q),document.removeEventListener("keydown",i)}),Oe(()=>[d.platform,d.serial],()=>{k.setDevice(d.platform,d.serial),Be()});async function e(){try{await fe(d.platform,d.serial,"swipeUp",{}),f.success("Swiped up")}catch(n){f.error(`Swipe failed: ${n instanceof Error?n.message:String(n)}`)}}async function r(){try{await fe(d.platform,d.serial,"swipeDown",{}),f.success("Swiped down")}catch(n){f.error(`Swipe failed: ${n instanceof Error?n.message:String(n)}`)}}async function a(){try{await fe(d.platform,d.serial,"swipeLeft",{}),f.success("Swiped left")}catch(n){f.error(`Swipe failed: ${n instanceof Error?n.message:String(n)}`)}}async function l(){try{await fe(d.platform,d.serial,"swipeRight",{}),f.success("Swiped right")}catch(n){f.error(`Swipe failed: ${n instanceof Error?n.message:String(n)}`)}}return(n,s)=>(g(),P("div",ci,[x("header",ui,[u(o(ze),{align:"center",size:12},{default:h(()=>[u(o(J),{secondary:"",size:"small",onClick:s[0]||(s[0]=v=>j.value=!0)},{icon:h(()=>[u(o(K),null,{default:h(()=>[u(o(Ft))]),_:1})]),default:h(()=>[G(" "+O(_.value.selectDevice),1)]),_:1}),u(o(K),{size:"20",color:"#18a058"},{default:h(()=>[(g(),pe(qe(ie.value)))]),_:1}),x("span",di,O(p.serial),1),u(o(J),{text:"",size:"small",onClick:We},{icon:h(()=>[u(o(K),{size:"14"},{default:h(()=>[u(o(Ut))]),_:1})]),_:1}),u(o(mt),{size:"small"},{default:h(()=>[u(o(J),{type:S.value==="hierarchy"?"primary":"default",secondary:S.value!=="hierarchy",onClick:s[1]||(s[1]=v=>S.value="hierarchy")},{default:h(()=>[G(O(_.value.hierarchy),1)]),_:1},8,["type","secondary"]),u(o(J),{type:S.value==="actions"?"primary":"default",secondary:S.value!=="actions",onClick:s[2]||(s[2]=v=>S.value="actions")},{default:h(()=>[G(O(_.value.actions),1)]),_:1},8,["type","secondary"]),u(o(J),{type:S.value==="package"?"primary":"default",secondary:S.value!=="package",onClick:s[3]||(s[3]=v=>S.value="package")},{default:h(()=>[G(O(_.value.package),1)]),_:1},8,["type","secondary"])]),_:1})]),_:1}),u(o(ze),{align:"center",size:16},{default:h(()=>[u(o(J),{quaternary:"",circle:"",onClick:Be,loading:o(k).loading},{icon:h(()=>[u(o(K),{size:"20"},{default:h(()=>[u(o(St))]),_:1})]),_:1},8,["loading"]),u(o(J),{quaternary:"",circle:"",onClick:o(b).toggleTheme},{icon:h(()=>[u(o(K),{size:"20"},{default:h(()=>[(g(),pe(qe(o(b).isDark?o(wt):o(Ln))))]),_:1})]),_:1},8,["onClick"]),u(o(Ot),{value:Y.value,"onUpdate:value":s[4]||(s[4]=v=>Y.value=v),size:"small"},{default:h(()=>[u(o(st),{value:"zh"},{default:h(()=>[...s[8]||(s[8]=[G("",-1)])]),_:1}),u(o(st),{value:"en"},{default:h(()=>[...s[9]||(s[9]=[G("English",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),x("div",fi,[x("div",{class:"screen-panel",style:an({width:H.value+"px"})},[x("div",hi,[x("div",pi,[u(o(Pe),{placement:"right"},{trigger:h(()=>[u(o(J),{quaternary:"",circle:"",size:"small",onClick:Q},{icon:h(()=>[u(o(K),{size:"18"},{default:h(()=>[u(o(Tn))]),_:1})]),_:1})]),default:h(()=>[G(" "+O(_.value.home),1)]),_:1}),u(o(Pe),{placement:"right"},{trigger:h(()=>[u(o(J),{quaternary:"",circle:"",size:"small",onClick:$},{icon:h(()=>[u(o(K),{size:"18"},{default:h(()=>[u(o(At))]),_:1})]),_:1})]),default:h(()=>[G(" "+O(_.value.back),1)]),_:1}),u(o(Pe),{placement:"right"},{trigger:h(()=>[u(o(J),{quaternary:"",circle:"",size:"small",onClick:A},{icon:h(()=>[u(o(K),{size:"18"},{default:h(()=>[u(o(Ft))]),_:1})]),_:1})]),default:h(()=>[G(" "+O(_.value.apps),1)]),_:1}),u(o(Pe),{placement:"right"},{trigger:h(()=>[u(o(J),{quaternary:"",circle:"",size:"small",onClick:R},{icon:h(()=>[u(o(K),{size:"18"},{default:h(()=>[u(o(Gn))]),_:1})]),_:1})]),default:h(()=>[G(" "+O(_.value.wake),1)]),_:1}),u(o(Pe),{placement:"right"},{trigger:h(()=>[u(o(J),{quaternary:"",circle:"",size:"small",onClick:ee},{icon:h(()=>[u(o(K),{size:"18"},{default:h(()=>[u(o(kt))]),_:1})]),_:1})]),default:h(()=>[G(" "+O(_.value.stop),1)]),_:1})]),x("div",vi,[u(o(Pe),{placement:"right"},{trigger:h(()=>[u(o(J),{quaternary:"",circle:"",size:"small",onClick:we},{icon:h(()=>[u(o(K),{size:"18"},{default:h(()=>[u(o(ir))]),_:1})]),_:1})]),default:h(()=>[G(" "+O(_.value.volumeDown),1)]),_:1}),u(o(Pe),{placement:"right"},{trigger:h(()=>[u(o(J),{quaternary:"",circle:"",size:"small",onClick:le},{icon:h(()=>[u(o(K),{size:"18"},{default:h(()=>[u(o(or))]),_:1})]),_:1})]),default:h(()=>[G(" "+O(_.value.volumeMute),1)]),_:1}),u(o(Pe),{placement:"right"},{trigger:h(()=>[u(o(J),{quaternary:"",circle:"",size:"small",onClick:ne},{icon:h(()=>[u(o(K),{size:"18"},{default:h(()=>[u(o(rr))]),_:1})]),_:1})]),default:h(()=>[G(" "+O(_.value.volumeUp),1)]),_:1})]),x("div",xi,[u(o(Pe),{placement:"right"},{trigger:h(()=>[u(o(J),{circle:"",size:"small",onClick:e},{icon:h(()=>[u(o(K),{size:"18"},{default:h(()=>[u(o(Vt))]),_:1})]),_:1})]),default:h(()=>[G(" "+O(_.value.swipeUp),1)]),_:1}),u(o(Pe),{placement:"right"},{trigger:h(()=>[u(o(J),{circle:"",size:"small",onClick:r},{icon:h(()=>[u(o(K),{size:"18"},{default:h(()=>[u(o(jt))]),_:1})]),_:1})]),default:h(()=>[G(" "+O(_.value.swipeDown),1)]),_:1}),u(o(Pe),{placement:"right"},{trigger:h(()=>[u(o(J),{circle:"",size:"small",onClick:a},{icon:h(()=>[u(o(K),{size:"18"},{default:h(()=>[u(o(At))]),_:1})]),_:1})]),default:h(()=>[G(" "+O(_.value.swipeLeft),1)]),_:1}),u(o(Pe),{placement:"right"},{trigger:h(()=>[u(o(J),{circle:"",size:"small",onClick:l},{icon:h(()=>[u(o(K),{size:"18"},{default:h(()=>[u(o(Ht))]),_:1})]),_:1})]),default:h(()=>[G(" "+O(_.value.swipeRight),1)]),_:1})]),re.value?(g(),P("div",mi,[u(o(Pe),{placement:"right"},{trigger:h(()=>[u(o(J),{type:"primary",circle:"",size:"small",onClick:Ie},{icon:h(()=>[u(o(K),{size:"18"},{default:h(()=>[u(o(Gt))]),_:1})]),_:1})]),default:h(()=>[s[10]||(s[10]=G("  ",-1))]),_:1})])):ge("",!0)]),x("div",yi,[x("div",gi,[u(o(Ye),{value:ve.value,"onUpdate:value":s[5]||(s[5]=v=>ve.value=v),size:"small",placeholder:"Enter text to send...",onKeydown:Lt(he,["enter"]),style:{flex:"1"}},null,8,["value"]),u(o(Pe),null,{trigger:h(()=>[u(o(J),{type:"primary",size:"small",onClick:he,disabled:!ve.value.trim()},{icon:h(()=>[u(o(K),null,{default:h(()=>[u(o(Zn))]),_:1})]),_:1},8,["disabled"])]),default:h(()=>[s[11]||(s[11]=G(" Send ",-1))]),_:1}),u(o(Pe),null,{trigger:h(()=>[u(o(J),{quaternary:"",size:"small",onClick:T},{icon:h(()=>[u(o(K),null,{default:h(()=>[u(o(_t))]),_:1})]),_:1})]),default:h(()=>[s[12]||(s[12]=G(" Clear ",-1))]),_:1})]),x("div",ki,[u(o(Nt),{show:o(k).loading,style:{width:"100%",height:"100%"}},{default:h(()=>[o(k).screenshotUrl?(g(),pe(Br,{key:0,platform:p.platform,serial:p.serial,"screen-size":_e.value,onTap:Ae,onRecordTap:Ee,onRecordSwipe:Fe},null,8,["platform","serial","screen-size"])):ge("",!0)]),_:1},8,["show"])])])],4),x("div",{class:"resize-handle",onMousedown:y},null,32),S.value==="hierarchy"?(g(),P("div",wi,[x("div",_i,[s[13]||(s[13]=x("span",{class:"xpath-label"},"XPath by",-1)),x("div",bi,[u(o(sn),{value:Z.value,"onUpdate:value":s[6]||(s[6]=v=>Z.value=v),options:C.value,"render-label":se,"render-tag":ae,"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),u(o(J),{size:"small",quaternary:"",circle:"",onClick:t,disabled:!I.value},{icon:h(()=>[u(o(K),null,{default:h(()=>[u(o(Ut))]),_:1})]),_:1},8,["disabled"])]),I.value?(g(),P("div",Si,[x("div",Ci,O(I.value),1),V.value.length>1?(g(),P("div",$i,[(g(!0),P(Me,null,Re(V.value,(v,m)=>(g(),pe(o(J),{key:m,size:"small",type:m===W.value?"info":"default",secondary:m!==W.value,circle:"",onClick:E=>xe(m),class:"sibling-btn"},{default:h(()=>[G(O(m+1),1)]),_:2},1032,["type","secondary","onClick"]))),128))])):ge("",!0)])):ge("",!0),x("div",Pi,[(g(!0),P(Me,null,Re(be.value,v=>(g(),P("div",{key:v.label,class:"property-row"},[x("div",Fi,O(v.label),1),x("div",Ai,[u(o(K),{class:"circle-icon"},{default:h(()=>[u(o(gt))]),_:1}),x("span",null,O(v.value),1)])]))),128)),be.value.length===0?(g(),pe(o(Je),{key:0,description:"No element selected"})):ge("",!0)])])):ge("",!0),x("div",Ui,[S.value==="hierarchy"?(g(),pe(Kr,{key:0,platform:p.platform,serial:p.serial},null,8,["platform","serial"])):ge("",!0),on(u(La,{ref_key:"actionsPanelRef",ref:D,platform:p.platform,serial:p.serial},null,8,["platform","serial"]),[[ln,S.value==="actions"]]),S.value==="package"?(g(),pe(Ya,{key:1,platform:p.platform,serial:p.serial},null,8,["platform","serial"])):ge("",!0)])]),u(li,{show:j.value,"onUpdate:show":s[7]||(s[7]=v=>j.value=v),onSelect:Ke},null,8,["show"])]))}}),Ti=Xe(Di,[["__scopeId","data-v-bcd950c8"]]);export{Ti as default};
