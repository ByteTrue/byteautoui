import{d as y,c as p,a,o as i,h as O,r as S,a3 as b,m as A,x as v,w as l,u as h,M as D,b as k,A as N,W as I,_ as T,F as M,N as C,a2 as $,q as w,D as L,g as R,e as P,V}from"./index-CG5BB-Ov.js";const E={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},H=y({name:"LogoAndroid",render:function(e,o){return i(),p("svg",E,o[0]||(o[0]=[a("path",{d:"M380.91 199l42.47-73.57a8.63 8.63 0 0 0-3.12-11.76a8.52 8.52 0 0 0-11.71 3.12l-43 74.52c-32.83-15-69.78-23.35-109.52-23.35s-76.69 8.36-109.52 23.35l-43-74.52a8.6 8.6 0 1 0-14.88 8.64L131 199C57.8 238.64 8.19 312.77 0 399.55h512c-8.19-86.78-57.8-160.91-131.09-200.55zM138.45 327.65a21.46 21.46 0 1 1 21.46-21.46a21.47 21.47 0 0 1-21.46 21.46zm235 0A21.46 21.46 0 1 1 395 306.19a21.47 21.47 0 0 1-21.51 21.46z",fill:"currentColor"},null,-1)]))}}),U={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},j=y({name:"LogoApple",render:function(e,o){return i(),p("svg",U,o[0]||(o[0]=[a("path",{d:"M349.13 136.86c-40.32 0-57.36 19.24-85.44 19.24c-28.79 0-50.75-19.1-85.69-19.1c-34.2 0-70.67 20.88-93.83 56.45c-32.52 50.16-27 144.63 25.67 225.11c18.84 28.81 44 61.12 77 61.47h.6c28.68 0 37.2-18.78 76.67-19h.6c38.88 0 46.68 18.89 75.24 18.89h.6c33-.35 59.51-36.15 78.35-64.85c13.56-20.64 18.6-31 29-54.35c-76.19-28.92-88.43-136.93-13.08-178.34c-23-28.8-55.32-45.48-85.79-45.48z",fill:"currentColor"},null,-1),a("path",{d:"M340.25 32c-24 1.63-52 16.91-68.4 36.86c-14.88 18.08-27.12 44.9-22.32 70.91h1.92c25.56 0 51.72-15.39 67-35.11c14.72-18.77 25.88-45.37 21.8-72.66z",fill:"currentColor"},null,-1)]))}}),q={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},le=y({name:"RadioButtonOnOutline",render:function(e,o){return i(),p("svg",q,o[0]||(o[0]=[a("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),a("circle",{cx:"256",cy:"256",r:"144",fill:"currentColor"},null,-1)]))}}),F={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},J=y({name:"SunnyOutline",render:function(e,o){return i(),p("svg",F,o[0]||(o[0]=[O('<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M256 48v48"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M256 416v48"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M403.08 108.92l-33.94 33.94"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M142.86 369.14l-33.94 33.94"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M464 256h-48"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M96 256H48"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M403.08 403.08l-33.94-33.94"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M142.86 142.86l-33.94-33.94"></path><circle cx="256" cy="256" r="80" fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32"></circle>',9)]))}});function z(t){const e=t.properties||{};let o;if(t.rect)o=[t.rect.x,t.rect.y,t.rect.x+t.rect.width,t.rect.y+t.rect.height];else if(e.bounds){const n=e.bounds.match(/\[(\d+),(\d+)\]\[(\d+),(\d+)\]/);n&&n[1]&&n[2]&&n[3]&&n[4]&&(o=[parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),parseInt(n[4],10)])}return{key:t.key,index:e.index?parseInt(e.index):void 0,text:e.text||void 0,resource_id:e["resource-id"]||void 0,class_name:e.class||t.name||void 0,package:e.package||void 0,content_desc:e["content-desc"]||void 0,checkable:e.checkable==="true",checked:e.checked==="true",clickable:e.clickable==="true",enabled:e.enabled==="true",focusable:e.focusable==="true",focused:e.focused==="true",scrollable:e.scrollable==="true",long_clickable:e["long-clickable"]==="true",password:e.password==="true",selected:e.selected==="true",visible_to_user:e["visible-to-user"]==="true",bounds:o,rect:t.rect||void 0,children:t.children?.map(z)}}function G(t){let e=0,o=0;function n(u){if(u.rect){const f=u.rect.x+u.rect.width,x=u.rect.y+u.rect.height;f>e&&(e=f),x>o&&(o=x)}u.children?.forEach(n)}n(t);const d=t.properties?.rotation?parseInt(t.properties.rotation):0;return{width:e,height:o,rotation:d,nodes:t.children?.map(z)||[]}}const _="/api";async function g(t,e){const o=await fetch(t,{...e,headers:{"Content-Type":"application/json",...e?.headers}});if(!o.ok){const n=await o.text();throw new Error(`${o.status}: ${n}`)}return o.json()}async function W(t){return g(`${_}/${t}/list`)}function ce(t,e){return`${_}/${t}/${e}/screenshot/0?t=${Date.now()}`}async function de(t,e){const o=await g(`${_}/${t}/${e}/hierarchy`);return G(o)}async function ue(t,e,o,n){const d={x:o,y:n};await g(`${_}/${t}/${e}/command/tap`,{method:"POST",body:JSON.stringify(d)})}async function he(t,e,o,n){return g(`${_}/${t}/${e}/command/${o}`,{method:"POST",body:JSON.stringify(n||{})})}const K={class:"device-content"},Q={key:0,class:"device-grid"},X=["onClick"],Y={class:"device-icon"},Z={class:"device-info"},ee={class:"device-name"},te={class:"device-serial"},oe={key:1,class:"empty-state"},ne={class:"empty-title"},se=y({__name:"DeviceSelector",props:{show:{type:Boolean}},emits:["update:show","select"],setup(t,{emit:e}){const o=t,n=e,d=S("android"),u=S([{platform:"android",label:"Android",icon:b(H),devices:[],loading:!1},{platform:"ios",label:"iOS",icon:b(j),devices:[],loading:!1},{platform:"harmony",label:"Harmony",icon:b(J),devices:[],loading:!1}]);async function f(c){const r=u.value.find(s=>s.platform===c);if(r){r.loading=!0;try{r.devices=await W(c)}catch{r.devices=[]}finally{r.loading=!1}}}function x(c,r){n("select",c,r),n("update:show",!1)}function B(c){d.value=c,f(c)}return A(()=>o.show,c=>{c&&(f("android"),f("ios"),f("harmony"))}),(c,r)=>(i(),v(h(D),{show:t.show,"onUpdate:show":r[1]||(r[1]=s=>n("update:show",s)),preset:"card",size:"huge",bordered:!1,segmented:{content:!0},style:{"max-width":"900px"}},{header:l(()=>[...r[2]||(r[2]=[a("span",{class:"modal-title"},"选择设备",-1)])]),default:l(()=>[k(h(V),{value:d.value,"onUpdate:value":[r[0]||(r[0]=s=>d.value=s),B],type:"line"},{default:l(()=>[(i(!0),p(M,null,N(u.value,s=>(i(),v(h(I),{key:s.platform,name:s.platform},{tab:l(()=>[k(h(P),{align:"center",size:6},{default:l(()=>[k(h(C),{size:"18"},{default:l(()=>[(i(),v($(s.icon)))]),_:2},1024),a("span",null,w(s.label),1)]),_:2},1024)]),default:l(()=>[a("div",K,[k(h(T),{show:s.loading},{default:l(()=>[s.devices.length>0?(i(),p("div",Q,[(i(!0),p(M,null,N(s.devices,m=>(i(),p("div",{key:m.serial,class:"device-card",onClick:ie=>x(s.platform,m.serial)},[a("div",Y,[k(h(C),{size:"32",color:"var(--md-primary)"},{default:l(()=>[(i(),v($(s.icon)))]),_:2},1024)]),a("div",Z,[a("div",ee,w(m.name||m.model||m.serial),1),a("div",te,w(m.serial),1)]),k(h(L),{type:m.enabled!==!1?"success":"warning",size:"small",round:"",class:"device-status"},{default:l(()=>[R(w(m.status||"device"),1)]),_:2},1032,["type"])],8,X))),128))])):(i(),p("div",oe,[k(h(C),{size:"48",color:"var(--md-text-tertiary)"},{default:l(()=>[(i(),v($(s.icon)))]),_:2},1024),a("h3",ne,"No "+w(s.label)+" devices found",1),r[3]||(r[3]=a("p",{class:"empty-desc"}," Please enable developer mode and connect your device via USB ",-1))]))]),_:2},1032,["show"])])]),_:2},1032,["name"]))),128))]),_:1},8,["value"])]),_:1},8,["show"]))}}),re=(t,e)=>{const o=t.__vccOpts||t;for(const[n,d]of e)o[n]=d;return o},pe=re(se,[["__scopeId","data-v-76fbdcea"]]);export{pe as D,H as L,le as R,J as S,re as _,de as a,j as b,z as c,ce as g,he as s,ue as t};
