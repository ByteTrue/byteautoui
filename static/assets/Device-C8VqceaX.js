import{d as ie,c as B,o as A,h as lt,a as y,i as Pt,r as G,j as ce,k as ct,t as jt,l as Xe,m as Le,b as f,u as d,n as At,w as p,p as Je,g as Z,N as ae,q as T,s as it,v as Se,x as _e,y as Re,z as Ft,F as Ve,A as Ge,C as ve,e as Oe,B as re,D as qe,E as $t,G as Tt,H as Ze,I as Ht,J as Vt,K as Gt,L as Ut,M as Xt,O as Wt,P as vt,Q as Kt,R as xt,S as ot,T as Yt,U as Jt,V as $e,W as qt,X as Zt,Y as Qt,Z as en,_ as gt,f as tn}from"./index-CWnQvSuy.js";import{g as nn,a as Dt,s as Ae,t as ut,_ as ze,c as yt,R as st,L as mt,S as kt,b as rn,D as an}from"./DeviceSelector-Dh-6T1zd.js";const on={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},wt=ie({name:"AppsOutline",render:function(u,l){return A(),B("svg",on,l[0]||(l[0]=[lt('<rect x="64" y="64" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="216" y="64" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="368" y="64" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="64" y="216" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="216" y="216" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="368" y="216" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="64" y="368" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="216" y="368" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="368" y="368" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect>',9)]))}}),sn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},bt=ie({name:"ArrowBackOutline",render:function(u,l){return A(),B("svg",sn,l[0]||(l[0]=[y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M244 400L100 256l144-144"},null,-1),y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M120 256h292"},null,-1)]))}}),ln={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},cn=ie({name:"ArrowDownOutline",render:function(u,l){return A(),B("svg",ln,l[0]||(l[0]=[y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M112 268l144 144l144-144"},null,-1),y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M256 392V100"},null,-1)]))}}),un={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Et=ie({name:"ArrowForwardOutline",render:function(u,l){return A(),B("svg",un,l[0]||(l[0]=[y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M268 112l144 144l-144 144"},null,-1),y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M392 256H100"},null,-1)]))}}),dn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},fn=ie({name:"ArrowUpOutline",render:function(u,l){return A(),B("svg",dn,l[0]||(l[0]=[y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M112 244l144-144l144 144"},null,-1),y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M256 120v292"},null,-1)]))}}),hn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},pn=ie({name:"CloseOutline",render:function(u,l){return A(),B("svg",hn,l[0]||(l[0]=[y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 368L144 144"},null,-1),y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 144L144 368"},null,-1)]))}}),vn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},St=ie({name:"CopyOutline",render:function(u,l){return A(),B("svg",vn,l[0]||(l[0]=[y("rect",{x:"128",y:"128",width:"336",height:"336",rx:"57",ry:"57",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),y("path",{d:"M383.5 128l.5-24a56.16 56.16 0 0 0-56-56H112a64.19 64.19 0 0 0-64 64v216a56.16 56.16 0 0 0 56 56h24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),xn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},gn=ie({name:"CreateOutline",render:function(u,l){return A(),B("svg",xn,l[0]||(l[0]=[y("path",{d:"M384 224v184a40 40 0 0 1-40 40H104a40 40 0 0 1-40-40V168a40 40 0 0 1 40-40h167.48",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),y("path",{d:"M459.94 53.25a16.06 16.06 0 0 0-23.22-.56L424.35 65a8 8 0 0 0 0 11.31l11.34 11.32a8 8 0 0 0 11.34 0l12.06-12c6.1-6.09 6.67-16.01.85-22.38z",fill:"currentColor"},null,-1),y("path",{d:"M399.34 90L218.82 270.2a9 9 0 0 0-2.31 3.93L208.16 299a3.91 3.91 0 0 0 4.86 4.86l24.85-8.35a9 9 0 0 0 3.93-2.31L422 112.66a9 9 0 0 0 0-12.66l-9.95-10a9 9 0 0 0-12.71 0z",fill:"currentColor"},null,-1)]))}}),yn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},mn=ie({name:"DocumentOutline",render:function(u,l){return A(),B("svg",yn,l[0]||(l[0]=[y("path",{d:"M416 221.25V416a48 48 0 0 1-48 48H144a48 48 0 0 1-48-48V96a48 48 0 0 1 48-48h98.75a32 32 0 0 1 22.62 9.37l141.26 141.26a32 32 0 0 1 9.37 22.62z",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),y("path",{d:"M256 56v120a32 32 0 0 0 32 32h120",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),kn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},wn=ie({name:"DownloadOutline",render:function(u,l){return A(),B("svg",kn,l[0]||(l[0]=[y("path",{d:"M336 176h40a40 40 0 0 1 40 40v208a40 40 0 0 1-40 40H136a40 40 0 0 1-40-40V216a40 40 0 0 1 40-40h40",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M176 272l80 80l80-80"},null,-1),y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 48v288"},null,-1)]))}}),bn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Sn=ie({name:"EyeOutline",render:function(u,l){return A(),B("svg",bn,l[0]||(l[0]=[y("path",{d:"M255.66 112c-77.94 0-157.89 45.11-220.83 135.33a16 16 0 0 0-.27 17.77C82.92 340.8 161.8 400 255.66 400c92.84 0 173.34-59.38 221.79-135.25a16.14 16.14 0 0 0 0-17.47C428.89 172.28 347.8 112 255.66 112z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),y("circle",{cx:"256",cy:"256",r:"80",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1)]))}}),_n={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Cn=ie({name:"FingerPrintOutline",render:function(u,l){return A(),B("svg",_n,l[0]||(l[0]=[y("path",{d:"M390.42 75.28a10.45 10.45 0 0 1-5.32-1.44C340.72 50.08 302.35 40 256.35 40c-45.77 0-89.23 11.28-128.76 33.84C122 77 115.11 74.8 111.87 69a12.4 12.4 0 0 1 4.63-16.32A281.81 281.81 0 0 1 256.35 16c49.23 0 92.23 11.28 139.39 36.48a12 12 0 0 1 4.85 16.08a11.3 11.3 0 0 1-10.17 6.72zm-330.79 126a11.73 11.73 0 0 1-6.7-2.16a12.26 12.26 0 0 1-2.78-16.8c22.89-33.6 52-60 86.69-78.48c72.58-38.84 165.51-39.12 238.32-.24c34.68 18.48 63.8 44.64 86.69 78a12.29 12.29 0 0 1-2.78 16.8a11.26 11.26 0 0 1-16.18-2.88c-20.8-30.24-47.15-54-78.36-70.56c-66.34-35.28-151.18-35.28-217.29.24c-31.44 16.8-57.79 40.8-78.59 71a10 10 0 0 1-9.02 5.08zM204.1 491a10.66 10.66 0 0 1-8.09-3.6C175.9 466.48 165 453 149.55 424c-16-29.52-24.27-65.52-24.27-104.16c0-71.28 58.71-129.36 130.84-129.36S387 248.56 387 319.84a11.56 11.56 0 1 1-23.11 0c0-58.08-48.32-105.36-107.72-105.36S148.4 261.76 148.4 319.84c0 34.56 7.39 66.48 21.49 92.4c14.8 27.6 25 39.36 42.77 58.08a12.67 12.67 0 0 1 0 17a12.44 12.44 0 0 1-8.56 3.68zm165.75-44.4c-27.51 0-51.78-7.2-71.66-21.36a129.1 129.1 0 0 1-55-105.36a11.57 11.57 0 1 1 23.12 0a104.28 104.28 0 0 0 44.84 85.44c16.41 11.52 35.6 17 58.72 17a147.41 147.41 0 0 0 24-2.4c6.24-1.2 12.25 3.12 13.4 9.84a11.92 11.92 0 0 1-9.47 13.92a152.28 152.28 0 0 1-27.95 2.88zM323.38 496a13 13 0 0 1-3-.48c-36.76-10.56-60.8-24.72-86-50.4c-32.37-33.36-50.16-77.76-50.16-125.28c0-38.88 31.9-70.56 71.19-70.56s71.2 31.68 71.2 70.56c0 25.68 21.5 46.56 48.08 46.56s48.08-20.88 48.08-46.56c0-90.48-75.13-163.92-167.59-163.92c-65.65 0-125.75 37.92-152.79 96.72c-9 19.44-13.64 42.24-13.64 67.2c0 18.72 1.61 48.24 15.48 86.64c2.32 6.24-.69 13.2-6.7 15.36a11.34 11.34 0 0 1-14.79-7a276.39 276.39 0 0 1-16.88-95c0-28.8 5.32-55 15.72-77.76c30.75-67 98.94-110.4 173.6-110.4c105.18 0 190.71 84.24 190.71 187.92c0 38.88-31.9 70.56-71.2 70.56s-71.2-31.68-71.2-70.56c.01-25.68-21.49-46.6-48.07-46.6s-48.08 20.88-48.08 46.56c0 41 15.26 79.44 43.23 108.24c22 22.56 43 35 75.59 44.4c6.24 1.68 9.71 8.4 8.09 14.64a11.39 11.39 0 0 1-10.87 9.16z",fill:"currentColor"},null,-1)]))}}),Pn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},An=ie({name:"FolderOutline",render:function(u,l){return A(),B("svg",Pn,l[0]||(l[0]=[y("path",{d:"M440 432H72a40 40 0 0 1-40-40V120a40 40 0 0 1 40-40h75.89a40 40 0 0 1 22.19 6.72l27.84 18.56a40 40 0 0 0 22.19 6.72H440a40 40 0 0 1 40 40v240a40 40 0 0 1-40 40z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M32 192h448"},null,-1)]))}}),Fn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},$n=ie({name:"HomeOutline",render:function(u,l){return A(),B("svg",Fn,l[0]||(l[0]=[y("path",{d:"M80 212v236a16 16 0 0 0 16 16h96V328a24 24 0 0 1 24-24h80a24 24 0 0 1 24 24v136h96a16 16 0 0 0 16-16V212",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),y("path",{d:"M480 256L266.89 52c-5-5.28-16.69-5.34-21.78 0L32 256",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M400 179V64h-48v69"},null,-1)]))}}),Tn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Un=ie({name:"MoonOutline",render:function(u,l){return A(),B("svg",Tn,l[0]||(l[0]=[y("path",{d:"M160 136c0-30.62 4.51-61.61 16-88C99.57 81.27 48 159.32 48 248c0 119.29 96.71 216 216 216c88.68 0 166.73-51.57 200-128c-26.39 11.49-57.38 16-88 16c-119.29 0-216-96.71-216-216z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),Dn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},En=ie({name:"PauseOutline",render:function(u,l){return A(),B("svg",Dn,l[0]||(l[0]=[y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M176 96h16v320h-16z"},null,-1),y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M320 96h16v320h-16z"},null,-1)]))}}),Rn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Mn=ie({name:"PlayCircleOutline",render:function(u,l){return A(),B("svg",Rn,l[0]||(l[0]=[y("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),y("path",{d:"M216.32 334.44l114.45-69.14a10.89 10.89 0 0 0 0-18.6l-114.45-69.14a10.78 10.78 0 0 0-16.32 9.31v138.26a10.78 10.78 0 0 0 16.32 9.31z",fill:"currentColor"},null,-1)]))}}),Bn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ln=ie({name:"PlayOutline",render:function(u,l){return A(),B("svg",Bn,l[0]||(l[0]=[y("path",{d:"M112 111v290c0 17.44 17 28.52 31 20.16l247.9-148.37c12.12-7.25 12.12-26.33 0-33.58L143 90.84c-14-8.36-31 2.72-31 20.16z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1)]))}}),On={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},zn=ie({name:"PlaySkipForwardOutline",render:function(u,l){return A(),B("svg",On,l[0]||(l[0]=[y("path",{d:"M112 111v290c0 17.44 17 28.52 31 20.16l247.9-148.37c12.12-7.25 12.12-26.33 0-33.58L143 90.84c-14-8.36-31 2.72-31 20.16z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32",d:"M400 80v352"},null,-1)]))}}),In={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Nn=ie({name:"PowerOutline",render:function(u,l){return A(),B("svg",In,l[0]||(l[0]=[y("path",{d:"M378 108a191.41 191.41 0 0 1 70 148c0 106-86 192-192 192S64 362 64 256a192 192 0 0 1 69-148",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 64v192"},null,-1)]))}}),jn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},dt=ie({name:"RefreshOutline",render:function(u,l){return A(),B("svg",jn,l[0]||(l[0]=[y("path",{d:"M320 146s24.36-12-64-12a160 160 0 1 0 160 160",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1),y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 58l80 80l-80 80"},null,-1)]))}}),Hn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Vn=ie({name:"SaveOutline",render:function(u,l){return A(),B("svg",Hn,l[0]||(l[0]=[y("path",{d:"M380.93 57.37A32 32 0 0 0 358.3 48H94.22A46.21 46.21 0 0 0 48 94.22v323.56A46.21 46.21 0 0 0 94.22 464h323.56A46.36 46.36 0 0 0 464 417.78V153.7a32 32 0 0 0-9.37-22.63zM256 416a64 64 0 1 1 64-64a63.92 63.92 0 0 1-64 64zm48-224H112a16 16 0 0 1-16-16v-64a16 16 0 0 1 16-16h192a16 16 0 0 1 16 16v64a16 16 0 0 1-16 16z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),Gn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Xn=ie({name:"SearchOutline",render:function(u,l){return A(),B("svg",Gn,l[0]||(l[0]=[y("path",{d:"M221.09 64a157.09 157.09 0 1 0 157.09 157.09A157.1 157.1 0 0 0 221.09 64z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32",d:"M338.29 338.29L448 448"},null,-1)]))}}),Wn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Kn=ie({name:"SendOutline",render:function(u,l){return A(),B("svg",Wn,l[0]||(l[0]=[y("path",{d:"M470.3 271.15L43.16 447.31a7.83 7.83 0 0 1-11.16-7V327a8 8 0 0 1 6.51-7.86l247.62-47c17.36-3.29 17.36-28.15 0-31.44l-247.63-47a8 8 0 0 1-6.5-7.85V72.59c0-5.74 5.88-10.26 11.16-8L470.3 241.76a16 16 0 0 1 0 29.39z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),Yn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ft=ie({name:"StopCircleOutline",render:function(u,l){return A(),B("svg",Yn,l[0]||(l[0]=[y("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),y("path",{d:"M310.4 336H201.6a25.62 25.62 0 0 1-25.6-25.6V201.6a25.62 25.62 0 0 1 25.6-25.6h108.8a25.62 25.62 0 0 1 25.6 25.6v108.8a25.62 25.62 0 0 1-25.6 25.6z",fill:"currentColor"},null,-1)]))}}),Jn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ht=ie({name:"TrashOutline",render:function(u,l){return A(),B("svg",Jn,l[0]||(l[0]=[lt('<path d="M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M80 112h352" fill="currentColor"></path><path d="M192 112V72h0a23.93 23.93 0 0 1 24-24h80a23.93 23.93 0 0 1 24 24h0v40" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M256 176v224"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M184 176l8 224"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M328 176l-8 224"></path>',6)]))}}),qn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Zn=ie({name:"VolumeHighOutline",render:function(u,l){return A(),B("svg",qn,l[0]||(l[0]=[y("path",{d:"M126 192H56a8 8 0 0 0-8 8v112a8 8 0 0 0 8 8h69.65a15.93 15.93 0 0 1 10.14 3.54l91.47 74.89A8 8 0 0 0 240 392V120a8 8 0 0 0-12.74-6.43l-91.47 74.89A15 15 0 0 1 126 192z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),y("path",{d:"M320 320c9.74-19.38 16-40.84 16-64c0-23.48-6-44.42-16-64",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),y("path",{d:"M368 368c19.48-33.92 32-64.06 32-112s-12-77.74-32-112",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),y("path",{d:"M416 416c30-46 48-91.43 48-160s-18-113-48-160",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),Qn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},er=ie({name:"VolumeLowOutline",render:function(u,l){return A(),B("svg",Qn,l[0]||(l[0]=[y("path",{d:"M189.65 192H120a8 8 0 0 0-8 8v112a8 8 0 0 0 8 8h69.65a16 16 0 0 1 10.14 3.63l91.47 75a8 8 0 0 0 12.74-6.46V119.83a8 8 0 0 0-12.74-6.44l-91.47 75a16 16 0 0 1-10.14 3.61z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),y("path",{d:"M384 320c9.74-19.41 16-40.81 16-64c0-23.51-6-44.4-16-64",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),tr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},nr=ie({name:"VolumeMuteOutline",render:function(u,l){return A(),B("svg",tr,l[0]||(l[0]=[lt('<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M416 432L64 80"></path><path d="M224 136.92v33.8a4 4 0 0 0 1.17 2.82l24 24a4 4 0 0 0 6.83-2.82v-74.15a24.53 24.53 0 0 0-12.67-21.72a23.91 23.91 0 0 0-25.55 1.83a8.27 8.27 0 0 0-.66.51l-31.94 26.15a4 4 0 0 0-.29 5.92l17.05 17.06a4 4 0 0 0 5.37.26z" fill="currentColor"></path><path d="M224 375.08l-78.07-63.92a32 32 0 0 0-20.28-7.16H64v-96h50.72a4 4 0 0 0 2.82-6.83l-24-24a4 4 0 0 0-2.82-1.17H56a24 24 0 0 0-24 24v112a24 24 0 0 0 24 24h69.76l91.36 74.8a8.27 8.27 0 0 0 .66.51a23.93 23.93 0 0 0 25.85 1.69A24.49 24.49 0 0 0 256 391.45v-50.17a4 4 0 0 0-1.17-2.82l-24-24a4 4 0 0 0-6.83 2.82zM125.82 336z" fill="currentColor"></path><path d="M352 256c0-24.56-5.81-47.88-17.75-71.27a16 16 0 0 0-28.5 14.54C315.34 218.06 320 236.62 320 256q0 4-.31 8.13a8 8 0 0 0 2.32 6.25l19.66 19.67a4 4 0 0 0 6.75-2A146.89 146.89 0 0 0 352 256z" fill="currentColor"></path><path d="M416 256c0-51.19-13.08-83.89-34.18-120.06a16 16 0 0 0-27.64 16.12C373.07 184.44 384 211.83 384 256c0 23.83-3.29 42.88-9.37 60.65a8 8 0 0 0 1.9 8.26l16.77 16.76a4 4 0 0 0 6.52-1.27C410.09 315.88 416 289.91 416 256z" fill="currentColor"></path><path d="M480 256c0-74.26-20.19-121.11-50.51-168.61a16 16 0 1 0-27 17.22C429.82 147.38 448 189.5 448 256c0 47.45-8.9 82.12-23.59 113a4 4 0 0 0 .77 4.55L443 391.39a4 4 0 0 0 6.4-1C470.88 348.22 480 307 480 256z" fill="currentColor"></path>',6)]))}});function rr(o,u){const l=[];let h=o;for(;h;){const g=ar(h,u);l.unshift(g),h=Rt(h,u)}return"/"+l.join("/")}function ar(o,u){if(o.resource_id)return`*[@resource-id="${o.resource_id}"]`;if(o.text&&o.text.trim())return`*[@text="${o.text}"]`;const l=o.class_name||"*",h=Rt(o,u);if(h){const g=h.children?.filter(m=>m.class_name===o.class_name)||[];if(g.length>1){const m=g.findIndex(R=>R.key===o.key);return`${l}[${m+1}]`}}return l}function Rt(o,u){for(const l of u)if(l.children?.some(h=>h.key===o.key))return l}function ir(o){const u=[];function l(h){u.push(h),h.children?.forEach(l)}return o.forEach(l),u}const Qe=Pt("device",()=>{const o=G("android"),u=G(""),l=G(null),h=G(null),g=G(null),m=G(!1),R=G(null),_=G(0),M=ce(()=>l.value?{width:l.value.width,height:l.value.height}:{width:0,height:0}),L=ce(()=>u.value?(_.value,nn(o.value,u.value)):"");function w(F,k){o.value=F,u.value=k,l.value=null,h.value=null,R.value=null}async function $(){if(u.value){m.value=!0,R.value=null;try{l.value=await Dt(o.value,u.value),_.value++}catch(F){R.value=F instanceof Error?F.message:String(F)}finally{m.value=!1}}}function E(F){if(F&&l.value){const k=ir(l.value.nodes);F.xpath=rr(F,k)}h.value=F}function X(){_.value++}function Y(F){g.value=F}function I(F){F.hierarchy&&(l.value=F.hierarchy),F.screenshot&&_.value++}return{platform:o,serial:u,hierarchy:l,selectedNode:h,hoveredNode:g,loading:m,error:R,screenSize:M,screenshotUrl:L,setDevice:w,refreshHierarchy:$,selectNode:E,refreshScreenshot:X,setHoveredNode:Y,updateFromRemote:I}}),or={zh:{common:{confirm:"确定",cancel:"取消",save:"保存",delete:"删除",edit:"编辑",close:"关闭",search:"搜索",refresh:"刷新",loading:"加载中...",clear:"清除",yes:"是",no:"否"},device:{selectDevice:"选择设备",hierarchy:"层级",actions:"录制回放",package:"包管理",home:"主页",back:"返回",apps:"应用",wake:"唤醒",stop:"停止",volumeUp:"音量+",volumeDown:"音量-",volumeMute:"静音",swipeUp:"上滑",swipeDown:"下滑",swipeLeft:"左滑",swipeRight:"右滑",refresh:"刷新 (按键盘R也可以刷新画面)",tapElement:"点击元素"},screen:{viewMode:"检查",pointerMode:"控制"},hierarchy:{searchPlaceholder:"输入搜索内容...",searchType:{text:"文本 (text)",xpath:"XPath",id:"Resource ID",className:"Class Name"},foundResults:"找到 {count} 个结果",noResults:"未找到匹配的元素",noElement:"暂无层级数据"},actions:{recordTab:"录制",playbackTab:"回放",editTab:"编辑",startRecording:"开始录制",stopRecording:"停止录制",pauseRecording:"暂停",continueRecording:"继续",clearRecording:"清空",saveRecording:"保存",recording:"正在录制...",recordingPaused:"录制已暂停",operationSteps:"操作步骤",noOperations:"暂无录制操作",play:"播放",pause:"暂停",stop:"停止",step:"单步",progress:"进度",recordingList:"录制列表",noRecordings:"暂无录制文件",load:"加载",editRecording:"编辑录制",noEditingRecording:"请从回放列表中选择一个录制进行编辑",group:"分组",name:"名称",operationCount:"操作数",confirmClear:"确认清空",confirmClearMessage:"确定要清空所有录制的操作吗?此操作不可撤销。",confirmDelete:"确认删除",confirmDeleteMessage:'确定要删除录制 "{name}" 吗?此操作不可撤销。',saveDialogTitle:"保存录制",groupPlaceholder:"default",namePlaceholder:"Recording_xxx",recordingStopped:"录制已停止,共 {count} 步操作",recordingStarted:"开始录制操作",recordingCleared:"已清空录制",recordingSaved:"录制已保存: {name}",recordingLoaded:"已加载录制: {name}",recordingDeleted:"录制已删除",playbackComplete:"回放完成",actionTypes:{tap:"点击",swipe:"滑动",input:"输入",sleep:"等待",command:"命令",back:"返回",home:"主页"}},package:{currentApp:"当前应用",packageName:"包名",launchActivity:"启动Activity",version:"版本",installTime:"安装时间",actions:"操作",noAppSelected:"未选择应用",pleaseSelectApp:"请从下方列表选择一个应用",installedApps:"已安装应用",noApps:"未找到应用",launch:"启动",stop:"停止",clear:"清除数据",uninstall:"卸载",confirmUninstall:"确认卸载",confirmUninstallMessage:'确定要卸载应用 "{name}" 吗?',confirmClearData:"确认清除",confirmClearDataMessage:'确定要清除应用 "{name}" 的数据吗?',appLaunched:"应用已启动",appStopped:"应用已停止",dataCleared:"数据已清除",appUninstalled:"应用已卸载"}},en:{common:{confirm:"Confirm",cancel:"Cancel",save:"Save",delete:"Delete",edit:"Edit",close:"Close",search:"Search",refresh:"Refresh",loading:"Loading...",clear:"Clear",yes:"Yes",no:"No"},device:{selectDevice:"Select Device",hierarchy:"Hierarchy",actions:"Actions",package:"Package",home:"Home",back:"Back",apps:"Apps",wake:"Wake",stop:"Stop",volumeUp:"Vol +",volumeDown:"Vol -",volumeMute:"Mute",swipeUp:"Swipe Up",swipeDown:"Swipe Down",swipeLeft:"Swipe Left",swipeRight:"Swipe Right",refresh:"Refresh (Press R to refresh)",tapElement:"Tap Element"},screen:{viewMode:"Inspect",pointerMode:"Control"},hierarchy:{searchPlaceholder:"Enter search text...",searchType:{text:"Text",xpath:"XPath",id:"Resource ID",className:"Class Name"},foundResults:"Found {count} results",noResults:"No matching elements found",noElement:"No hierarchy data"},actions:{recordTab:"Record",playbackTab:"Playback",editTab:"Edit",startRecording:"Start Recording",stopRecording:"Stop Recording",pauseRecording:"Pause",continueRecording:"Continue",clearRecording:"Clear",saveRecording:"Save",recording:"Recording...",recordingPaused:"Recording Paused",operationSteps:"Steps",noOperations:"No recorded operations",play:"Play",pause:"Pause",stop:"Stop",step:"Step",progress:"Progress",recordingList:"Recordings",noRecordings:"No recordings found",load:"Load",editRecording:"Edit Recording",noEditingRecording:"Please select a recording from the list to edit",group:"Group",name:"Name",operationCount:"Operations",confirmClear:"Confirm Clear",confirmClearMessage:"Are you sure to clear all recorded operations? This cannot be undone.",confirmDelete:"Confirm Delete",confirmDeleteMessage:'Are you sure to delete recording "{name}"? This cannot be undone.',saveDialogTitle:"Save Recording",groupPlaceholder:"default",namePlaceholder:"Recording_xxx",recordingStopped:"Recording stopped, {count} operations",recordingStarted:"Recording started",recordingCleared:"Recording cleared",recordingSaved:"Recording saved: {name}",recordingLoaded:"Recording loaded: {name}",recordingDeleted:"Recording deleted",playbackComplete:"Playback complete",actionTypes:{tap:"Tap",swipe:"Swipe",input:"Input",sleep:"Sleep",command:"Command",back:"Back",home:"Home"}},package:{currentApp:"Current App",packageName:"Package",launchActivity:"Launch Activity",version:"Version",installTime:"Install Time",actions:"Actions",noAppSelected:"No app selected",pleaseSelectApp:"Please select an app from the list below",installedApps:"Installed Apps",noApps:"No apps found",launch:"Launch",stop:"Stop",clear:"Clear Data",uninstall:"Uninstall",confirmUninstall:"Confirm Uninstall",confirmUninstallMessage:'Are you sure to uninstall app "{name}"?',confirmClearData:"Confirm Clear",confirmClearDataMessage:'Are you sure to clear data of app "{name}"?',appLaunched:"App launched",appStopped:"App stopped",dataCleared:"Data cleared",appUninstalled:"App uninstalled"}}},We=Pt("i18n",()=>{const o=G(localStorage.getItem("language")||"zh"),u=ce(()=>or[o.value]);function l(g){o.value=g,localStorage.setItem("language",g)}function h(g,m){return m?g.replace(/\{(\w+)\}/g,(R,_)=>m[_]!==void 0?String(m[_]):R):g}return{locale:o,t:u,setLocale:l,format:h}});class pt{name;style;constructor(u,l){this.name=u,this.style=l}}class sr extends pt{x;y;width;height;constructor(u,l,h,g,m){super("rect",m),this.x=u,this.y=l,this.width=h,this.height=g}draw(u){u.beginPath(),u.rect(this.x,this.y,this.width,this.height),this.style==="select"?(u.fillStyle="rgba(255, 255, 0, 0.3)",u.strokeStyle="#FFD700",u.lineWidth=3):this.style==="hover"&&(u.fillStyle="rgba(0, 150, 255, 0.2)",u.strokeStyle="#0096FF",u.lineWidth=2),u.fill(),u.stroke()}}class lr extends pt{x;y;canvasWidth;canvasHeight;constructor(u,l,h,g){super("crosshair","crosshair"),this.x=u,this.y=l,this.canvasWidth=h,this.canvasHeight=g}draw(u){u.beginPath(),u.strokeStyle="#FF0000",u.lineWidth=1,u.setLineDash([5,5]),u.moveTo(0,this.y),u.lineTo(this.canvasWidth,this.y),u.moveTo(this.x,0),u.lineTo(this.x,this.canvasHeight),u.stroke(),u.setLineDash([])}}class cr extends pt{points;constructor(u){super("track","hover"),this.points=u}draw(u){if(this.points.length<2)return;u.beginPath(),u.strokeStyle="rgba(0, 150, 255, 0.8)",u.lineWidth=3,u.lineCap="round",u.lineJoin="round";const l=this.points[0];l&&u.moveTo(l.x,l.y);for(let h=1;h<this.points.length;h++){const g=this.points[h];g&&u.lineTo(g.x,g.y)}u.stroke()}}function ur(){const o=G(null),u=ce(()=>o.value?.getContext("2d")||null),l=G([]);function h(){if(!u.value||!o.value)return;const w=o.value;u.value.clearRect(0,0,w.width,w.height),l.value.forEach($=>{u.value&&$.draw(u.value)})}function g(w,$){const[E,X,Y,I]=w,F=Y-E,k=I-X;l.value.push(new sr(E,X,F,k,$)),h()}function m(w,$){o.value&&(l.value.push(new lr(w,$,o.value.width,o.value.height)),h())}function R(w){l.value.push(new cr(w)),h()}function _(){l.value=[],h()}function M(w){l.value=l.value.filter($=>$.style!==w),h()}function L(w,$){o.value&&(o.value.width=w,o.value.height=$,h())}return{canvasRef:o,addRect:g,addCrosshair:m,addTrack:R,clearShapes:_,clearShapesByType:M,resizeCanvas:L,redraw:h}}function dr(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function fr(o){if(Object.prototype.hasOwnProperty.call(o,"__esModule"))return o;var u=o.default;if(typeof u=="function"){var l=function h(){var g=!1;try{g=this instanceof h}catch{}return g?Reflect.construct(u,arguments,this.constructor):u.apply(this,arguments)};l.prototype=u.prototype}else l={};return Object.defineProperty(l,"__esModule",{value:!0}),Object.keys(o).forEach(function(h){var g=Object.getOwnPropertyDescriptor(o,h);Object.defineProperty(l,h,g.get?g:{enumerable:!0,get:function(){return o[h]}})}),l}var Ye={exports:{}};const hr={},pr=Object.freeze(Object.defineProperty({__proto__:null,default:hr},Symbol.toStringTag,{value:"Module"})),vr=fr(pr);var xr=Ye.exports,_t;function gr(){return _t||(_t=1,(function(o,u){(function(l,h){o.exports=h(vr)})(xr,(function(l){function h(a,c){(c==null||c>a.length)&&(c=a.length);for(var t=0,n=Array(c);t<c;t++)n[t]=a[t];return n}function g(a){if(Array.isArray(a))return a}function m(a){if(Array.isArray(a))return h(a)}function R(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function")}function M(a,c){for(var t=0;t<c.length;t++){var n=c[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,b(n.key),n)}}function L(a,c,t){return c&&M(a.prototype,c),t&&M(a,t),Object.defineProperty(a,"prototype",{writable:!1}),a}function w(a,c){var t=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!t){if(Array.isArray(a)||(t=H(a))||c){t&&(a=t);var n=0,r=function(){};return{s:r,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(v){throw v},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,e=!0,i=!1;return{s:function(){t=t.call(a)},n:function(){var v=t.next();return e=v.done,v},e:function(v){i=!0,s=v},f:function(){try{e||t.return==null||t.return()}finally{if(i)throw s}}}}function $(a){var c=I();return function(){var t,n=X(a);if(c){var r=X(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return he(this,t)}}function E(a,c,t){return(c=b(c))in a?Object.defineProperty(a,c,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[c]=t,a}function X(a){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(c){return c.__proto__||Object.getPrototypeOf(c)},X(a)}function Y(a,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),c&&xe(a,c)}function I(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I=function(){return!!a})()}function F(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function k(a,c){var t=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(t!=null){var n,r,s,e,i=[],v=!0,x=!1;try{if(s=(t=t.call(a)).next,c!==0)for(;!(v=(n=s.call(t)).done)&&(i.push(n.value),i.length!==c);v=!0);}catch(P){x=!0,r=P}finally{try{if(!v&&t.return!=null&&(e=t.return(),Object(e)!==e))return}finally{if(x)throw r}}return i}}function Q(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function he(a,c){if(c&&(typeof c=="object"||typeof c=="function"))return c;if(c!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R(a)}function xe(a,c){return xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},xe(a,c)}function fe(a,c){return g(a)||k(a,c)||H(a,c)||Q()}function se(a){return m(a)||F(a)||H(a)||ue()}function D(a,c){if(typeof a!="object"||!a)return a;var t=a[Symbol.toPrimitive];if(t!==void 0){var n=t.call(a,c);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}function b(a){var c=D(a,"string");return typeof c=="symbol"?c:c+""}function S(a){"@babel/helpers - typeof";return S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},S(a)}function H(a,c){if(a){if(typeof a=="string")return h(a,c);var t={}.toString.call(a).slice(8,-1);return t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set"?Array.from(a):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?h(a,c):void 0}}var ee,le;function te(a,c){ee=a,le=c}function O(a){if(ee){for(var c=arguments.length,t=new Array(c>1?c-1:0),n=1;n<c;n++)t[n-1]=arguments[n];ee.apply(void 0,[a].concat(t))}}function N(a){if(le){for(var c=arguments.length,t=new Array(c>1?c-1:0),n=1;n<c;n++)t[n-1]=arguments[n];le.apply(void 0,[a].concat(t))}}var C=(function(){function a(c){_(this,a),this.listener={},this.type=c|""}return L(a,[{key:"on",value:function(t,n){return this.listener[t]||(this.listener[t]=[]),this.listener[t].push(n),!0}},{key:"off",value:function(t,n){if(this.listener[t]){var r=this.listener[t].indexOf(n);return r>-1&&this.listener[t].splice(r,1),!0}return!1}},{key:"offAll",value:function(){this.listener={}}},{key:"dispatch",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return this.listener[t]?(this.listener[t].map(function(e){e.apply(null,r)}),!0):!1}}]),a})(),W=(function(){function a(){_(this,a)}return L(a,null,[{key:"init",value:function(){a.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],hev1:[],hvcC:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var t;for(t in a.types)a.types.hasOwnProperty(t)&&(a.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);a.HDLR_TYPES={video:n,audio:r};var s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),e=new Uint8Array([0,0,0,0,0,0,0,0]);a.STTS=a.STSC=a.STCO=e,a.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),a.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),a.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),a.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var i=new Uint8Array([105,115,111,109]),v=new Uint8Array([97,118,99,49]),x=new Uint8Array([0,0,0,1]);a.FTYP=a.box(a.types.ftyp,i,x,i,v),a.DINF=a.box(a.types.dinf,a.box(a.types.dref,s))}},{key:"box",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];for(var e=8,i=r.length,v=i,x;i--;)e+=r[i].byteLength;for(x=new Uint8Array(e),x[0]=e>>24&255,x[1]=e>>16&255,x[2]=e>>8&255,x[3]=e&255,x.set(t,4),i=0,e=8;i<v;++i)x.set(r[i],e),e+=r[i].byteLength;return x}},{key:"hdlr",value:function(t){return a.box(a.types.hdlr,a.HDLR_TYPES[t])}},{key:"mdat",value:function(t){return a.box(a.types.mdat,t)}},{key:"mdhd",value:function(t,n){return a.box(a.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255,85,196,0,0]))}},{key:"mdia",value:function(t){return a.box(a.types.mdia,a.mdhd(t.timescale,t.duration),a.hdlr(t.type),a.minf(t))}},{key:"mfhd",value:function(t){return a.box(a.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255]))}},{key:"minf",value:function(t){return t.type==="audio"?a.box(a.types.minf,a.box(a.types.smhd,a.SMHD),a.DINF,a.stbl(t)):a.box(a.types.minf,a.box(a.types.vmhd,a.VMHD),a.DINF,a.stbl(t))}},{key:"moof",value:function(t,n,r){return a.box(a.types.moof,a.mfhd(t),a.traf(r,n))}},{key:"moov",value:function(t,n,r){for(var s=t.length,e=[];s--;)e[s]=a.trak(t[s]);return a.box.apply(null,[a.types.moov,a.mvhd(r,n)].concat(e).concat(a.mvex(t)))}},{key:"mvex",value:function(t){for(var n=t.length,r=[];n--;)r[n]=a.trex(t[n]);return a.box.apply(null,[a.types.mvex].concat(r))}},{key:"mvhd",value:function(t,n){var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,t>>24&255,t>>16&255,t>>8&255,t&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return a.box(a.types.mvhd,r)}},{key:"sdtp",value:function(t){var n=t.samples||[],r=new Uint8Array(4+n.length),s,e;for(e=0;e<n.length;e++)s=n[e].flags,r[e+4]=s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy;return a.box(a.types.sdtp,r)}},{key:"stbl",value:function(t){return a.box(a.types.stbl,a.stsd(t),a.box(a.types.stts,a.STTS),a.box(a.types.stsc,a.STSC),a.box(a.types.stsz,a.STSZ),a.box(a.types.stco,a.STCO))}},{key:"avc1",value:function(t){var n=[],r=[],s,e,i;for(s=0;s<t.sps.length;s++)e=t.sps[s],i=e.byteLength,n.push(i>>>8&255),n.push(i&255),n=n.concat(Array.prototype.slice.call(e));for(s=0;s<t.pps.length;s++)e=t.pps[s],i=e.byteLength,r.push(i>>>8&255),r.push(i&255),r=r.concat(Array.prototype.slice.call(e));var v=a.box(a.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|t.sps.length].concat(n).concat([t.pps.length]).concat(r))),x=t.width,P=t.height;return a.box(a.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,x>>8&255,x&255,P>>8&255,P&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,98,105,110,101,108,112,114,111,46,114,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),v,a.box(a.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"hev1",value:function(t){for(var n=[],r=[],s=[],e,i,v=0;v<(((x=t.vps)===null||x===void 0?void 0:x.length)||0);v++){var x;e=t.vps[v],i=e.byteLength,n.push(i>>>8&255,i&255),n=n.concat(Array.prototype.slice.call(e))}for(var P=0;P<(((z=t.sps)===null||z===void 0?void 0:z.length)||0);P++){var z;e=t.sps[P],i=e.byteLength,r.push(i>>>8&255,i&255),r=r.concat(Array.prototype.slice.call(e))}for(var j=0;j<(((q=t.pps)===null||q===void 0?void 0:q.length)||0);j++){var q;e=t.pps[j],i=e.byteLength,s.push(i>>>8&255,i&255),s=s.concat(Array.prototype.slice.call(e))}var de=t.hvcC,Fe=de.profile_space,Ue=de.tier_flag,we=de.profile_idc,be=de.profile_compatibility_flags,me=de.constraint_indicator_flags,je=de.level_idc,Me=de.chroma_format_idc,He=a.box(a.types.hvcC,new Uint8Array([1,Fe<<6|Ue<<5|we,be>>24&255,be>>16&255,be>>8&255,be&255].concat(se(me),[je,240,0,252,252|Me,248,248,0,0,3,3,32,0,1],se(n),[33,0,1],se(r),[34,0,1],se(s)))),Be=t.width,pe=t.height;return a.box(a.types.hev1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,Be>>8&255,Be&255,pe>>8&255,pe&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,98,105,110,101,108,112,114,111,46,114,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),He,a.box(a.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"esds",value:function(t){var n=t.config.byteLength,r=new Uint8Array(26+n+3);return r.set([0,0,0,0,3,23+n,0,1,0,4,15+n,64,21,0,0,0,0,0,0,0,0,0,0,0,5,n]),r.set(t.config,26),r.set([6,1,2],26+n),r}},{key:"mp4a",value:function(t){var n=t.audiosamplerate;return a.box(a.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,n&255,0,0]),a.box(a.types.esds,a.esds(t)))}},{key:"stsd",value:function(t){return t.type==="audio"?a.box(a.types.stsd,a.STSD,a.mp4a(t)):t.codec.startsWith("hvc1")?a.box(a.types.stsd,a.STSD,a.hev1(t)):a.box(a.types.stsd,a.STSD,a.avc1(t))}},{key:"tkhd",value:function(t){var n=t.id,r=t.duration,s=t.width,e=t.height,i=t.volume;return a.box(a.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,n&255,0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,r&255,0,0,0,0,0,0,0,0,0,0,0,0,i>>0&255,i%1*10>>0&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>8&255,s&255,0,0,e>>8&255,e&255,0,0]))}},{key:"traf",value:function(t,n){var r=a.sdtp(t),s=t.id;return a.box(a.types.traf,a.box(a.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255])),a.box(a.types.tfdt,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255])),a.trun(t,r.length+16+16+8+16+8+8),r)}},{key:"trak",value:function(t){return t.duration=t.duration||4294967295,a.box(a.types.trak,a.tkhd(t),a.mdia(t))}},{key:"trex",value:function(t){var n=t.id;return a.box(a.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(t,n){var r=t.samples||[],s=r.length,e=12+16*s,i=new Uint8Array(e),v,x,P,z,j,q;for(n+=8+e,i.set([0,0,15,1,s>>>24&255,s>>>16&255,s>>>8&255,s&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255],0),v=0;v<s;v++)x=r[v],P=x.duration,z=x.size,j=x.flags,q=x.cts,i.set([P>>>24&255,P>>>16&255,P>>>8&255,P&255,z>>>24&255,z>>>16&255,z>>>8&255,z&255,j.isLeading<<2|j.dependsOn,j.isDependedOn<<6|j.hasRedundancy<<4|j.paddingValue<<1|j.isNonSync,j.degradPrio&61440,j.degradPrio&15,q>>>24&255,q>>>16&255,q>>>8&255,q&255],12+16*v);return a.box(a.types.trun,i)}},{key:"initSegment",value:function(t,n,r){a.types||a.init();var s=a.moov(t,n,r),e;return e=new Uint8Array(a.FTYP.byteLength+s.byteLength),e.set(a.FTYP),e.set(s,a.FTYP.byteLength),e}}]),a})(),K=(function(){function a(){_(this,a)}return L(a,null,[{key:"samplingRateMap",get:function(){return[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]}},{key:"getHeaderLength",value:function(t){return t[1]&1?7:9}},{key:"getFrameLength",value:function(t){return(t[3]&3)<<11|t[4]<<3|(t[5]&224)>>>5}},{key:"isAACPattern",value:function(t){return t[0]===255&&(t[1]&240)===240&&(t[1]&6)===0}},{key:"extractAAC",value:function(t){var n=0,r=t.byteLength,s=[],e,i;if(!a.isAACPattern(t))return N("Invalid ADTS audio format"),{valid:!1};e=a.getHeaderLength(t);for(var v=t.subarray(0,e);n<r;)i=a.getFrameLength(t),s.push(t.subarray(e,i)),t=t.slice(i),n+=i;return{valid:!0,header:v,slices:s}}}]),a})(),ke=1,ye=(function(a){Y(t,a);var c=$(t);function t(){return _(this,t),c.apply(this,arguments)}return L(t,[{key:"flush",value:function(){this.mp4track.len=0,this.mp4track.samples=[]}},{key:"isReady",value:function(){return!this.readyToDecode||!this.samples.length?null:!0}}],[{key:"getTrackID",value:function(){return ke++}}]),t})(C),Te=(function(a){Y(t,a);var c=$(t);function t(n,r,s){var e;return _(this,t),e=c.call(this,"AACRemuxer"),e.frameDuration=s,e.readyToDecode=!1,e.header=null,e.nextDts=0,e.dts=0,e.mp4track={id:ye.getTrackID(),type:"audio",channelCount:0,len:0,fragmented:!0,timescale:n,duration:r,samples:[],config:"",codec:""},e.samples=[],e}return L(t,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.header=null,this.mp4track.codec="",this.mp4track.channelCount="",this.mp4track.config="",this.mp4track.timescale=this.timescale,this.nextDts=0,this.dts=0}},{key:"feed",value:function(r,s){var e=K.extractAAC(r),i=e.valid,v=e.header,x=e.slices;return this.header||(this.header=v),i&&x.length>0?(this.remux(this.getAudioFrames(x,s)),!0):(N("Failed to extract audio data from:",r),this.dispatch("outOfData"),!1)}},{key:"getAudioFrames",value:function(r,s){var e=[],i=0,v=0,x=w(r),P;try{for(x.s();!(P=x.n()).done;){var z=P.value;e.push({units:z})}}catch(j){x.e(j)}finally{x.f()}return i=s?s/e.length|0:this.frameDuration,v=s?s-i*e.length:0,e.map(function(j){j.duration=i,v>0&&(j.duration++,v--)}),e}},{key:"remux",value:function(r){if(r.length>0)for(var s=0;s<r.length;s++){var e=r[s],i=e.units,v=i.byteLength;this.samples.push({units:i,size:v,duration:e.duration}),this.mp4track.len+=v,this.readyToDecode||this.setAACConfig()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var r=new Uint8Array(this.mp4track.len),s=0,e=this.mp4track.samples,i,v;for(this.dts=this.nextDts;this.samples.length;){var x=this.samples.shift();if(x.units,v=x.duration,v<=0){O("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(v)),this.mp4track.len-=x.size;continue}this.nextDts+=v,i={size:x.size,duration:v,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},r.set(x.units,s),s+=x.size,e.push(i)}return e.length?new Uint8Array(r.buffer,0,this.mp4track.len):null}},{key:"setAACConfig",value:function(){var r,s,e,i=new Uint8Array(2);this.header&&(r=((this.header[2]&192)>>>6)+1,s=(this.header[2]&60)>>>2,e=(this.header[2]&1)<<2,e|=(this.header[3]&192)>>>6,i[0]=r<<3,i[0]|=(s&14)>>1,i[1]|=(s&1)<<7,i[1]|=e<<3,this.mp4track.codec="mp4a.40."+r,this.mp4track.channelCount=e,this.mp4track.config=i,this.readyToDecode=!0)}}]),t})(ye),Pe=(function(){function a(c){_(this,a),this.data=c,this.index=0,this.bitLength=c.byteLength*8}return L(a,[{key:"setData",value:function(t){this.data=t,this.index=0,this.bitLength=t.byteLength*8}},{key:"bitsAvailable",get:function(){return this.bitLength-this.index}},{key:"skipBits",value:function(t){if(this.bitsAvailable<t)return!1;this.index+=t}},{key:"readBits",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this.getBits(t,this.index,n);return r}},{key:"getBits",value:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(this.bitsAvailable<t)return 0;var s=n%8,e=this.data[n/8|0]&255>>>s,i=8-s;if(i>=t)return r&&(this.index+=t),e>>i-t;r&&(this.index+=i);var v=t-i;return e<<v|this.getBits(v,n+i,r)}},{key:"skipLZ",value:function(){var t;for(t=0;t<this.bitLength-this.index;++t)if(this.getBits(1,this.index+t,!1)!==0)return this.index+=t,t;return t}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var t=this.skipLZ();return this.readBits(t+1)-1}},{key:"readEG",value:function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)}},{key:"readBoolean",value:function(){return this.readBits(1)===1}},{key:"readUByte",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.readBits(t*8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}}]),a})(),V=(function(){function a(){_(this,a)}return L(a,null,[{key:"extractNALu",value:function(t){for(var n=0,r=t.byteLength,s=[],e=0,i=0;n<r;){var v=t[n++];if(v===0)i++;else if(v===1&&i>=2){var x=i+1;e!==n-x&&s.push(t.subarray(e,n-x)),e=n,i=0}else i=0}var P=null;return e<r&&(P=t.subarray(e,r)),[s,P]}},{key:"skipScalingList",value:function(t,n){for(var r=8,s=8,e,i=0;i<n;i++)s!==0&&(e=t.readEG(),s=(r+e+256)%256),r=s===0?r:s}},{key:"readSPS",value:function(t){var n=new Pe(t),r=0,s=0,e=0,i=0,v=1,x,P,z,j,q,de,Fe=0;n.readUByte();for(var Ue=[],we=1,be=t.byteLength,me=we;me<be;me++)me+2<be&&n.readBits(24,!1)===3?(Ue.push(n.readBits(8)),Ue.push(n.readBits(8)),me+=2,n.readBits(8)):Ue.push(n.readBits(8));if(n.setData(new Uint8Array(Ue)),x=n.readUByte(),n.readBits(5),n.skipBits(3),n.readUByte(),n.skipUEG(),x===100||x===110||x===122||x===244||x===44||x===83||x===86||x===118||x===128){var je=n.readUEG();if(je===3&&n.skipBits(1),n.skipUEG(),n.skipUEG(),n.skipBits(1),n.readBoolean()){de=je!==3?8:12;for(var Me=0;Me<de;++Me)n.readBoolean()&&(Me<6?a.skipScalingList(n,16):a.skipScalingList(n,64))}}n.skipUEG();var He=n.readUEG();if(He===0)n.readUEG();else if(He===1){n.skipBits(1),n.skipEG(),n.skipEG(),P=n.readUEG();for(var Be=0;Be<P;++Be)n.skipEG()}if(n.skipUEG(),n.skipBits(1),z=n.readUEG(),j=n.readUEG(),q=n.readBits(1),q===0&&n.skipBits(1),n.skipBits(1),n.readBoolean()&&(r=n.readUEG(),s=n.readUEG(),e=n.readUEG(),i=n.readUEG()),n.readBoolean()){if(n.readBoolean()){var pe,tt=n.readUByte();switch(tt){case 1:pe=[1,1];break;case 2:pe=[12,11];break;case 3:pe=[10,11];break;case 4:pe=[16,11];break;case 5:pe=[40,33];break;case 6:pe=[24,11];break;case 7:pe=[20,11];break;case 8:pe=[32,11];break;case 9:pe=[80,33];break;case 10:pe=[18,11];break;case 11:pe=[15,11];break;case 12:pe=[64,33];break;case 13:pe=[160,99];break;case 14:pe=[4,3];break;case 15:pe=[3,2];break;case 16:pe=[2,1];break;case 255:{pe=[n.readUByte()<<8|n.readUByte(),n.readUByte()<<8|n.readUByte()];break}}pe&&pe[0]>0&&pe[1]>0&&(v=pe[0]/pe[1])}if(n.readBoolean()&&n.skipBits(1),n.readBoolean()&&(n.skipBits(4),n.readBoolean()&&n.skipBits(24)),n.readBoolean()&&(n.skipUEG(),n.skipUEG()),n.readBoolean()){var nt=n.readUInt(),rt=n.readUInt(),Ke=n.readBoolean(),at=rt/(2*nt);Ke&&(Fe=at)}}return{fps:Fe>0?Fe:void 0,width:Math.ceil(((z+1)*16-r*2-s*2)*v),height:(2-q)*(j+1)*16-(q?2:4)*(e+i)}}}]),a})(),U=(function(){function a(c){_(this,a),this.payload=c,this.nri=(this.payload[0]&96)>>5,this.nalUnitType=this.payload[0]&31,this._sliceType=null,this._isFirstSlice=!1}return L(a,[{key:"toString",value:function(){return"".concat(a.TYPES[this.type()]||"UNKNOWN",": NRI: ").concat(this.getNri())}},{key:"getNri",value:function(){return this.nri}},{key:"type",value:function(){return this.nalUnitType}},{key:"isKeyframe",get:function(){return this.nalUnitType===a.IDR}},{key:"isVCL",get:function(){return this.nalUnitType==a.IDR||this.nalUnitType==a.NDR}},{key:"parseHeader",value:function(){var t=new Pe(this.getPayload());t.readUByte(),this._isFirstSlice=t.readUEG()===0,this._sliceType=t.readUEG()}},{key:"isFirstSlice",get:function(){return this._isFirstSlice||this.parseHeader(),this._isFirstSlice}},{key:"sliceType",get:function(){return this._sliceType||this.parseHeader(),this._sliceType}},{key:"getPayload",value:function(){return this.payload}},{key:"getPayloadSize",value:function(){return this.payload.byteLength}},{key:"getSize",value:function(){return 4+this.getPayloadSize()}},{key:"getData",value:function(){var t=new Uint8Array(this.getSize()),n=new DataView(t.buffer);return n.setUint32(0,this.getSize()-4),t.set(this.getPayload(),4),t}}],[{key:"NDR",get:function(){return 1}},{key:"IDR",get:function(){return 5}},{key:"SEI",get:function(){return 6}},{key:"SPS",get:function(){return 7}},{key:"PPS",get:function(){return 8}},{key:"AUD",get:function(){return 9}},{key:"TYPES",get:function(){var t;return t={},E(t,a.IDR,"IDR"),E(t,a.SEI,"SEI"),E(t,a.SPS,"SPS"),E(t,a.PPS,"PPS"),E(t,a.NDR,"NDR"),E(t,a.AUD,"AUD"),t}}]),a})();function J(a,c){var t=new Uint8Array((a.byteLength|0)+(c.byteLength|0));return t.set(a,0),t.set(c,a.byteLength|0),t}function oe(a){var c,t,n,r="";return c=Math.floor(a),t=parseInt(c/3600,10)%24,n=parseInt(c/60,10)%60,c=c<0?0:c%60,t>0&&(r+=(t<10?"0"+t:t)+":"),r+=(n<10?"0"+n:n)+":"+(c<10?"0"+c:c),r}var ne=(function(a){Y(t,a);var c=$(t);function t(n,r,s){var e;return _(this,t),e=c.call(this,"H264Remuxer"),e.frameDuration=s,e.readyToDecode=!1,e.nextDts=0,e.dts=0,e.mp4track={id:ye.getTrackID(),type:"video",len:0,fragmented:!0,sps:"",pps:"",fps:30,width:0,height:0,timescale:n,duration:r,samples:[]},e.samples=[],e.remainingData=new Uint8Array,e.kfCounter=0,e.pendingUnits={},e}return L(t,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.mp4track.sps="",this.mp4track.pps="",this.nextDts=0,this.dts=0,this.remainingData=new Uint8Array,this.kfCounter=0,this.pendingUnits={}}},{key:"feed",value:function(r,s,e){var i=[],v;r=J(this.remainingData,r);var x=V.extractNALu(r),P=fe(x,2);return i=P[0],v=P[1],this.remainingData=v||new Uint8Array,i.length>0?(this.remux(this.getVideoFrames(i,s,e)),!0):(N("Failed to extract any NAL units from video data:",v),this.dispatch("outOfData"),!1)}},{key:"getVideoFrames",value:function(r,s,e){var i=this,v=[],x=[],P=0,z=0,j=!1,q=!1;this.pendingUnits.units&&(v=this.pendingUnits.units,q=this.pendingUnits.vcl,j=this.pendingUnits.keyFrame,this.pendingUnits={});var de=w(r),Fe;try{for(de.s();!(Fe=de.n()).done;){var Ue=Fe.value,we=new U(Ue);v.length&&q&&(we.isFirstSlice||!we.isVCL)&&(x.push({units:v,keyFrame:j}),v=[],j=!1,q=!1),v.push(we),j=j||we.isKeyframe,q=q||we.isVCL}}catch(me){de.e(me)}finally{de.f()}if(v.length)if(!s)this.pendingUnits={units:v,keyFrame:j,vcl:q};else if(q)x.push({units:v,keyFrame:j});else{var be=x.length-1;be>=0&&(x[be].units=x[be].units.concat(v))}return P=s?s/x.length|0:this.frameDuration,z=s?s-P*x.length:0,x.map(function(me){me.duration=P,me.compositionTimeOffset=e,z>0&&(me.duration++,z--),i.kfCounter++,me.keyFrame&&i.dispatch("keyframePosition",i.kfCounter*P/1e3)}),O("jmuxer: No. of H264 frames of the last chunk: ".concat(x.length)),x}},{key:"remux",value:function(r){var s=w(r),e;try{for(s.s();!(e=s.n()).done;){var i=e.value,v=[],x=0,P=w(i.units),z;try{for(P.s();!(z=P.n()).done;){var j=z.value;this.parseNAL(j)&&(v.push(j),x+=j.getSize())}}catch(q){P.e(q)}finally{P.f()}v.length>0&&this.readyToDecode&&(this.mp4track.len+=x,this.samples.push({units:v,size:x,keyFrame:i.keyFrame,duration:i.duration,compositionTimeOffset:i.compositionTimeOffset}))}}catch(q){s.e(q)}finally{s.f()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var r=new Uint8Array(this.mp4track.len),s=0,e=this.mp4track.samples,i,v;for(this.dts=this.nextDts;this.samples.length;){var x=this.samples.shift(),P=x.units;if(v=x.duration,v<=0){O("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(v)),this.mp4track.len-=x.size;continue}this.nextDts+=v,i={size:x.size,duration:v,cts:x.compositionTimeOffset||0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:x.keyFrame?0:1,dependsOn:x.keyFrame?2:1}};var z=w(P),j;try{for(z.s();!(j=z.n()).done;){var q=j.value;r.set(q.getData(),s),s+=q.getSize()}}catch(de){z.e(de)}finally{z.f()}e.push(i)}return e.length?new Uint8Array(r.buffer,0,this.mp4track.len):null}},{key:"parseSPS",value:function(r){var s=V.readSPS(new Uint8Array(r));this.mp4track.fps=s.fps||this.mp4track.fps,this.mp4track.width=s.width,this.mp4track.height=s.height,this.mp4track.sps=[new Uint8Array(r)],this.mp4track.codec="avc1.";for(var e=new DataView(r.buffer,r.byteOffset+1,4),i=0;i<3;++i){var v=e.getUint8(i).toString(16);v.length<2&&(v="0"+v),this.mp4track.codec+=v}}},{key:"parsePPS",value:function(r){this.mp4track.pps=[new Uint8Array(r)]}},{key:"parseNAL",value:function(r){if(!r)return!1;if(r.isVCL)return!0;var s=!1;switch(r.type()){case U.PPS:this.mp4track.pps||this.parsePPS(r.getPayload()),s=!0;break;case U.SPS:this.mp4track.sps||this.parseSPS(r.getPayload()),s=!0;break;case U.AUD:O("AUD - ignoing");break;case U.SEI:O("SEI - ignoing");break}return!this.readyToDecode&&this.mp4track.pps&&this.mp4track.sps&&(this.readyToDecode=!0),s}}]),t})(ye),Ce=(function(){function a(){_(this,a)}return L(a,null,[{key:"extractNALu",value:function(t){for(var n=0,r=t.byteLength,s=[],e=0,i=0;n<r;){var v=t[n++];if(v===0)i++;else if(v===1&&i>=2){var x=i+1;e!==n-x&&s.push(t.subarray(e,n-x)),e=n,i=0}else i=0}var P=null;return e<r&&(P=t.subarray(e,r)),[s,P]}},{key:"removeEmulationPreventionBytes",value:function(t){for(var n=[],r=0,s=0;s<t.length;s++){var e=t[s];if(r===2&&e===3){r=0;continue}n.push(e),e===0?r++:r=0}return new Uint8Array(n)}},{key:"readSPS",value:function(t){var n=new Pe(t);n.readUByte(),n.readUByte(),n.readBits(4),n.readBits(3),n.readBits(1);for(var r=n.readBits(2),s=n.readBits(1),e=n.readBits(5),i=n.readUInt(),v=new Uint8Array(6),x=0;x<6;x++)v[x]=n.readUByte();var P=n.readUByte();n.readUEG();var z=n.readUEG();z===3&&n.readBits(1);var j=n.readUEG(),q=n.readUEG(),de=n.readBoolean(),Fe=0,Ue=0,we=0,be=0;de&&(Fe=n.readUEG(),Ue=n.readUEG(),we=n.readUEG(),be=n.readUEG());var me=null,je=n.readBoolean();if(je){var Me=n.readBoolean();if(Me){var He=n.readUByte();He===255&&(n.readUShort(),n.readUShort())}var Be=n.readBoolean();Be&&n.readBoolean();var pe=n.readBoolean();if(pe){n.readBits(3),n.readBoolean();var tt=n.readBoolean();tt&&(n.readUByte(),n.readUByte(),n.readUByte())}var nt=n.readBoolean();nt&&(n.readUEG(),n.readUEG()),n.readBoolean(),n.readBoolean(),n.readBoolean();var rt=n.readBoolean();if(rt){var Ke=n.readUInt(),at=n.readUInt();n.readBoolean(),Ke&&(me=at/(2*Ke))}}var Ot=z===1||z===2?2:1,zt=z===1?2:1,It=j-Ot*(Ue+Fe),Nt=q-zt*(we+be);return{width:It,height:Nt,profile_space:r,tier_flag:s,profile_idc:e,profile_compatibility_flags:i,constraint_indicator_flags:v,level_idc:P,chroma_format_idc:z,fps:me}}}]),a})(),ge=(function(){function a(c){_(this,a),this.payload=c,this.nalUnitType=(c[0]&126)>>1,this.nuhLayerId=(c[0]&1)<<5|(c[1]&248)>>3,this.nuhTemporalIdPlus1=c[1]&7,this._isFirstSlice=null,this._sliceType=null}return L(a,[{key:"toString",value:function(){return"".concat(a.TYPES[this.type()]||"UNKNOWN ("+this.type()+")",": Layer: ").concat(this.nuhLayerId,", Temporal Id: ").concat(this.nuhTemporalIdPlus1)}},{key:"type",value:function(){return this.nalUnitType}},{key:"isKeyframe",get:function(){return[a.IDR_W_RADL,a.IDR_N_LP,a.CRA].includes(this.nalUnitType)}},{key:"isVCL",get:function(){return this.nalUnitType<=31}},{key:"parseHeader",value:function(){var t=new Pe(this.getPayload());t.readUByte(),t.readUByte(),this._isFirstSlice=t.readBoolean(),this.isKeyframe&&t.readBits(1),t.readUEG(),this._sliceType=t.readUEG()}},{key:"isFirstSlice",get:function(){return this._isFirstSlice||this.parseHeader(),this._isFirstSlice}},{key:"sliceType",get:function(){return this._sliceType||this.parseHeader(),this._sliceType}},{key:"getPayload",value:function(){return this.payload}},{key:"getPayloadSize",value:function(){return this.payload.byteLength}},{key:"getSize",value:function(){return 4+this.getPayloadSize()}},{key:"getData",value:function(){var t=new Uint8Array(this.getSize()),n=new DataView(t.buffer);return n.setUint32(0,this.getSize()-4),t.set(this.getPayload(),4),t}}],[{key:"TRAIL_N",get:function(){return 0}},{key:"TRAIL_R",get:function(){return 1}},{key:"IDR_W_RADL",get:function(){return 19}},{key:"IDR_N_LP",get:function(){return 20}},{key:"CRA",get:function(){return 21}},{key:"VPS",get:function(){return 32}},{key:"SPS",get:function(){return 33}},{key:"PPS",get:function(){return 34}},{key:"AUD",get:function(){return 35}},{key:"SEI",get:function(){return 39}},{key:"SEI2",get:function(){return 40}},{key:"TYPES",get:function(){var t;return t={},E(t,a.TRAIL_N,"TRAIL_N"),E(t,a.TRAIL_R,"TRAIL_R"),E(t,a.IDR_W_RADL,"IDR"),E(t,a.IDR_N_LP,"IDR2"),E(t,a.CRA,"CRA"),E(t,a.VPS,"VPS"),E(t,a.SPS,"SPS"),E(t,a.PPS,"PPS"),E(t,a.AUD,"AUD"),E(t,a.SEI,"SEI"),E(t,a.SEI2,"SEI2"),t}}]),a})(),De=(function(a){Y(t,a);var c=$(t);function t(n,r,s){var e;return _(this,t),e=c.call(this,"H264Remuxer"),e.frameDuration=s,e.readyToDecode=!1,e.nextDts=0,e.dts=0,e.mp4track={id:ye.getTrackID(),type:"video",len:0,fragmented:!0,vps:"",sps:"",pps:"",hvcC:{},fps:30,width:0,height:0,timescale:n,duration:r,samples:[]},e.samples=[],e.remainingData=new Uint8Array,e.kfCounter=0,e.pendingUnits={},e}return L(t,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.mp4track.vps="",this.mp4track.sps="",this.mp4track.pps="",this.mp4track.hvcC={},this.nextDts=0,this.dts=0,this.remainingData=new Uint8Array,this.kfCounter=0,this.pendingUnits={}}},{key:"feed",value:function(r,s,e){var i=[],v;r=J(this.remainingData,r);var x=Ce.extractNALu(r),P=fe(x,2);return i=P[0],v=P[1],this.remainingData=v||new Uint8Array,i.length>0?(this.remux(this.getVideoFrames(i,s,e)),!0):(N("Failed to extract any NAL units from video data:",v),this.dispatch("outOfData"),!1)}},{key:"getVideoFrames",value:function(r,s,e){var i=this,v=[],x=[],P=0,z=0,j=!1,q=!1;this.pendingUnits.units&&(v=this.pendingUnits.units,q=this.pendingUnits.vcl,j=this.pendingUnits.keyFrame,this.pendingUnits={});var de=w(r),Fe;try{for(de.s();!(Fe=de.n()).done;){var Ue=Fe.value,we=new ge(Ue);v.length&&q&&(we.isFirstSlice||!we.isVCL)&&(x.push({units:v,keyFrame:j}),v=[],j=!1,q=!1),v.push(we),j=j||we.isKeyframe,q=q||we.isVCL}}catch(me){de.e(me)}finally{de.f()}if(v.length)if(!s)this.pendingUnits={units:v,keyFrame:j,vcl:q};else if(q)x.push({units:v,keyFrame:j});else{var be=x.length-1;be>=0&&(x[be].units=x[be].units.concat(v))}return P=s?s/x.length|0:this.frameDuration,z=s?s-P*x.length:0,x.map(function(me){me.duration=P,me.compositionTimeOffset=e,z>0&&(me.duration++,z--),i.kfCounter++,me.keyFrame&&i.dispatch("keyframePosition",i.kfCounter*P/1e3)}),O("jmuxer: No. of H265 frames of the last chunk: ".concat(x.length)),x}},{key:"remux",value:function(r){var s=w(r),e;try{for(s.s();!(e=s.n()).done;){var i=e.value,v=[],x=0,P=w(i.units),z;try{for(P.s();!(z=P.n()).done;){var j=z.value;this.parseNAL(j)&&(v.push(j),x+=j.getSize())}}catch(q){P.e(q)}finally{P.f()}v.length>0&&this.readyToDecode&&(this.mp4track.len+=x,this.samples.push({units:v,size:x,keyFrame:i.keyFrame,duration:i.duration,compositionTimeOffset:i.compositionTimeOffset}))}}catch(q){s.e(q)}finally{s.f()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var r=new Uint8Array(this.mp4track.len),s=0,e=this.mp4track.samples,i,v;for(this.dts=this.nextDts;this.samples.length;){var x=this.samples.shift(),P=x.units;if(v=x.duration,v<=0){O("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(v)),this.mp4track.len-=x.size;continue}this.nextDts+=v,i={size:x.size,duration:v,cts:x.compositionTimeOffset||0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:x.keyFrame?0:1,dependsOn:x.keyFrame?2:1}};var z=w(P),j;try{for(z.s();!(j=z.n()).done;){var q=j.value;r.set(q.getData(),s),s+=q.getSize()}}catch(de){z.e(de)}finally{z.f()}e.push(i)}return e.length?new Uint8Array(r.buffer,0,this.mp4track.len):null}},{key:"parseSPS",value:function(r){this.mp4track.sps=[new Uint8Array(r)],r=Ce.removeEmulationPreventionBytes(r);var s=Ce.readSPS(new Uint8Array(r));this.mp4track.fps=s.fps||this.mp4track.fps,this.mp4track.width=s.width,this.mp4track.height=s.height,this.mp4track.codec="hvc1.".concat(s.profile_idc,".").concat(s.profile_compatibility_flags.toString(16))+".L".concat(s.level_idc).concat(s.tier_flag?"H":"L")+".".concat(s.constraint_indicator_flags.map(function(e){return e.toString(16)}).join(".").toUpperCase()),this.mp4track.hvcC={profile_space:s.profile_space,tier_flag:s.tier_flag,profile_idc:s.profile_idc,profile_compatibility_flags:s.profile_compatibility_flags,constraint_indicator_flags:s.constraint_indicator_flags,level_idc:s.level_idc,chroma_format_idc:s.chroma_format_idc}}},{key:"parsePPS",value:function(r){this.mp4track.pps=[r]}},{key:"parseVPS",value:function(r){this.mp4track.vps=[r]}},{key:"parseNAL",value:function(r){if(!r)return!1;if(r.isVCL)return!0;var s=!1;switch(r.type()){case ge.VPS:this.mp4track.vps||this.parseVPS(r.getPayload()),s=!0;break;case ge.SPS:this.mp4track.sps||this.parseSPS(r.getPayload()),s=!0;break;case ge.PPS:this.mp4track.pps||this.parsePPS(r.getPayload()),s=!0;break;case ge.AUD:O("AUD - ignoing");break;case ge.SEI:case ge.SEI2:O("SEI - ignoing");break}return!this.readyToDecode&&this.mp4track.vps&&this.mp4track.sps&&this.mp4track.pps&&(this.readyToDecode=!0),s}}]),t})(ye),Ee=(function(a){Y(t,a);var c=$(t);function t(n,r,s,e){var i;return _(this,t),i=c.call(this,"remuxer"),i.videoCodec=s,i.frameDuration=e,i.initialized=!1,i.tracks={},i.seq=1,i.env=n,i.timescale=1e3,i.mediaDuration=r?4294967295:0,i}return L(t,[{key:"addTrack",value:function(r){var s=this;if((r==="video"||r==="both")&&(this.videoCodec=="H265"?this.tracks.video=new De(this.timescale,this.mediaDuration,this.frameDuration):this.tracks.video=new ne(this.timescale,this.mediaDuration,this.frameDuration),this.tracks.video.on("outOfData",function(){s.dispatch("missingVideoFrames")}),this.tracks.video.on("keyframePosition",function(i){s.dispatch("keyframePosition",i)})),r==="audio"||r==="both"){var e=new Te(this.timescale,this.mediaDuration,this.frameDuration);this.tracks.audio=e,this.tracks.video.on("outOfData",function(){s.dispatch("missingAudioFrames")})}}},{key:"reset",value:function(){for(var r in this.tracks)this.tracks[r].resetTrack();this.initialized=!1}},{key:"destroy",value:function(){this.tracks={},this.offAll()}},{key:"flush",value:function(){if(!this.initialized){if(!this.isReady())return;this.dispatch("ready"),this.initSegment(),this.initialized=!0}for(var r in this.tracks){var s=this.tracks[r],e=s.getPayload();if(e&&e.byteLength){var i=W.moof(this.seq,s.dts,s.mp4track),v=W.mdat(e),x=J(i,v),P={type:r,payload:x,dts:s.dts};r==="video"&&(P.fps=s.mp4track.fps),this.dispatch("buffer",P);var z=oe(s.dts/this.timescale);O("put segment (".concat(r,"): dts: ").concat(s.dts," frames: ").concat(s.mp4track.samples.length," second: ").concat(z)),s.flush(),this.seq++}}}},{key:"initSegment",value:function(){var r=[];for(var s in this.tracks){var e=this.tracks[s];if(this.env=="browser"){var i={type:s,payload:W.initSegment([e.mp4track],this.mediaDuration,this.timescale)};this.dispatch("buffer",i)}else r.push(e.mp4track)}if(this.env=="node"){var v={type:"all",payload:W.initSegment(r,this.mediaDuration,this.timescale)};this.dispatch("buffer",v)}O("Initial segment generated.")}},{key:"isReady",value:function(){for(var r in this.tracks)if(!this.tracks[r].readyToDecode||!this.tracks[r].samples.length)return!1;return!0}},{key:"feed",value:function(r){var s=!1;if(r.video&&this.tracks.video&&(s|=this.tracks.video.feed(r.video,r.duration,r.compositionTimeOffset)),r.audio&&this.tracks.audio&&(s|=this.tracks.audio.feed(r.audio,r.duration)),!s){N("Input object must have video and/or audio property. Make sure it is a valid typed array");return}this.flush()}}]),t})(C),Ie=(function(a){Y(t,a);var c=$(t);function t(n,r){var s;return _(this,t),s=c.call(this,"buffer"),s.type=r,s.queue=new Uint8Array,s.cleaning=!1,s.pendingCleaning=0,s.cleanOffset=30,s.cleanRanges=[],s.sourceBuffer=n,s.sourceBuffer.addEventListener("updateend",function(){if(s.pendingCleaning>0&&(s.initCleanup(s.pendingCleaning),s.pendingCleaning=0),s.cleaning=!1,s.cleanRanges.length){s.doCleanup();return}}),s.sourceBuffer.addEventListener("error",function(){s.dispatch("error",{type:s.type,name:"buffer",error:"buffer error"})}),s}return L(t,[{key:"destroy",value:function(){this.queue=null,this.sourceBuffer=null,this.offAll()}},{key:"doCleanup",value:function(){if(!this.cleanRanges.length){this.cleaning=!1;return}var r=this.cleanRanges.shift();O("".concat(this.type," remove range [").concat(r[0]," - ").concat(r[1],")")),this.cleaning=!0,this.sourceBuffer.remove(r[0],r[1])}},{key:"initCleanup",value:function(r){try{if(this.sourceBuffer.updating){this.pendingCleaning=r;return}if(this.sourceBuffer.buffered&&this.sourceBuffer.buffered.length&&!this.cleaning){for(var s=0;s<this.sourceBuffer.buffered.length;++s){var e=this.sourceBuffer.buffered.start(s),i=this.sourceBuffer.buffered.end(s);r-e>this.cleanOffset&&(i=r-this.cleanOffset,e<i&&this.cleanRanges.push([e,i]))}this.doCleanup()}}catch(v){N("Error occured while cleaning ".concat(this.type," buffer - ").concat(v.name,": ").concat(v.message))}}},{key:"doAppend",value:function(){if(this.queue.length&&!(!this.sourceBuffer||this.sourceBuffer.updating))try{this.sourceBuffer.appendBuffer(this.queue),this.queue=new Uint8Array}catch(s){var r="unexpectedError";s.name==="QuotaExceededError"?(O("".concat(this.type," buffer quota full")),r="QuotaExceeded"):(N("Error occured while appending ".concat(this.type," buffer - ").concat(s.name,": ").concat(s.message)),r="InvalidStateError"),this.dispatch("error",{type:this.type,name:r,error:"buffer error"})}}},{key:"feed",value:function(r){this.queue=J(this.queue,r)}}]),t})(C),Ne=(function(a){Y(t,a);var c=$(t);function t(n){var r;_(this,t),r=c.call(this,"jmuxer"),r.isReset=!1;var s={node:"",mode:"both",videoCodec:"H264",flushingTime:500,maxDelay:500,clearBuffer:!0,fps:30,readFpsFromTrack:!1,debug:!1,onReady:function(){},onData:function(){},onError:function(){},onUnsupportedCodec:function(){},onMissingVideoFrames:function(){},onMissingAudioFrames:function(){},onKeyframePosition:function(){},onLoggerLog:console.log,onLoggerErr:console.error};return r.options=Object.assign({},s,n),r.env=(typeof process>"u"?"undefined":S(process))==="object"&&typeof window>"u"?"node":"browser",r.options.debug&&te(r.options.onLoggerLog,r.options.onLoggerErr),r.options.fps||(r.options.fps=30),r.frameDuration=1e3/r.options.fps|0,r.remuxController=new Ee(r.env,n.live,r.options.videoCodec,r.frameDuration),r.remuxController.addTrack(r.options.mode),r.initData(),r.remuxController.on("buffer",r.onBuffer.bind(R(r))),r.env=="browser"&&(r.remuxController.on("ready",r.createBuffer.bind(R(r))),r.initBrowser()),r.remuxController.on("missingVideoFrames",function(){typeof r.options.onMissingVideoFrames=="function"&&r.options.onMissingVideoFrames.call(null)}),r.remuxController.on("missingAudioFrames",function(){typeof r.options.onMissingAudioFrames=="function"&&r.options.onMissingAudioFrames.call(null)}),r.clearBuffer&&r.remuxController.on("keyframePosition",function(e){r.kfPosition.push(e)}),typeof r.options.onKeyframePosition=="function"&&r.remuxController.on("keyframePosition",function(e){r.options.onKeyframePosition.call(null,e)}),r}return L(t,[{key:"initData",value:function(){this.lastCleaningTime=Date.now(),this.kfPosition=[],this.pendingUnits={},this.remainingData=new Uint8Array,this.startInterval()}},{key:"initBrowser",value:function(){typeof this.options.node=="string"&&this.options.node==""&&N("no video element were found to render, provide a valid video element"),this.node=typeof this.options.node=="string"?document.getElementById(this.options.node):this.options.node,this.mseReady=!1,this.setupMSE()}},{key:"createStream",value:function(){var r=this.feed.bind(this),s=this.destroy.bind(this);return this.stream=new l.Duplex({writableObjectMode:!0,read:function(i){},write:function(i,v,x){r(i),x()},final:function(i){s(),i()}}),this.stream}},{key:"setupMSE",value:function(){if(window.MediaSource=window.MediaSource||window.WebKitMediaSource||window.ManagedMediaSource,!window.MediaSource)throw"Oops! Browser does not support Media Source Extension or Managed Media Source (IOS 17+).";if(this.isMSESupported=!!window.MediaSource,this.mediaSource=new window.MediaSource,this.url=URL.createObjectURL(this.mediaSource),window.MediaSource===window.ManagedMediaSource)try{this.node.removeAttribute("src"),this.node.disableRemotePlayback=!0;var r=document.createElement("source");r.type="video/mp4",r.src=this.url,this.node.appendChild(r),this.node.load()}catch{this.node.src=this.url}else this.node.src=this.url;this.mseEnded=!1,this.mediaSource.addEventListener("sourceopen",this.onMSEOpen.bind(this)),this.mediaSource.addEventListener("sourceclose",this.onMSEClose.bind(this)),this.mediaSource.addEventListener("webkitsourceopen",this.onMSEOpen.bind(this)),this.mediaSource.addEventListener("webkitsourceclose",this.onMSEClose.bind(this))}},{key:"endMSE",value:function(){if(!this.mseEnded)try{this.mseEnded=!0,this.mediaSource.endOfStream()}catch{N("mediasource is not available to end")}}},{key:"feed",value:function(r){!r||!this.remuxController||(r.duration=r.duration?parseInt(r.duration):0,this.remuxController.feed(r))}},{key:"destroy",value:function(){if(this.stopInterval(),this.stream&&(this.remuxController.flush(),this.stream.push(null),this.stream=null),this.remuxController&&(this.remuxController.destroy(),this.remuxController=null),this.bufferControllers){for(var r in this.bufferControllers)this.bufferControllers[r].destroy();this.bufferControllers=null,this.endMSE()}this.node=!1,this.mseReady=!1,this.videoStarted=!1,this.mediaSource=null}},{key:"reset",value:function(){if(this.stopInterval(),this.isReset=!0,this.node.pause(),this.remuxController&&this.remuxController.reset(),this.bufferControllers){for(var r in this.bufferControllers)this.bufferControllers[r].destroy();this.bufferControllers=null,this.endMSE()}this.initData(),this.env=="browser"&&this.initBrowser(),O("JMuxer was reset")}},{key:"createBuffer",value:function(){if(!(!this.mseReady||!this.remuxController||!this.remuxController.isReady()||this.bufferControllers)){this.bufferControllers={};for(var r in this.remuxController.tracks){var s=this.remuxController.tracks[r];if(!t.isSupported("".concat(r,'/mp4; codecs="').concat(s.mp4track.codec,'"')))return N("Browser does not support codec: ".concat(r,'/mp4; codecs="').concat(s.mp4track.codec,'"')),typeof this.options.onUnsupportedCodec=="function"&&this.options.onUnsupportedCodec.call(null,s.mp4track.codec),!1;var e=this.mediaSource.addSourceBuffer("".concat(r,'/mp4; codecs="').concat(s.mp4track.codec,'"'));this.bufferControllers[r]=new Ie(e,r),this.bufferControllers[r].on("error",this.onBufferError.bind(this))}}}},{key:"startInterval",value:function(){var r=this;this.interval=setInterval(function(){r.options.flushingTime?r.applyAndClearBuffer():r.bufferControllers&&r.cancelDelay()},this.options.flushingTime||1e3)}},{key:"stopInterval",value:function(){this.interval&&clearInterval(this.interval)}},{key:"cancelDelay",value:function(){if(this.node.buffered&&this.node.buffered.length>0&&!this.node.seeking){var r=this.node.buffered.end(0);r-this.node.currentTime>this.options.maxDelay/1e3&&(O("delay"),this.node.paused&&this.node.play().catch(N),this.node.currentTime=r-.001)}}},{key:"releaseBuffer",value:function(){for(var r in this.bufferControllers)this.bufferControllers[r].doAppend()}},{key:"applyAndClearBuffer",value:function(){this.bufferControllers&&(this.releaseBuffer(),this.clearBuffer())}},{key:"getSafeClearOffsetOfBuffer",value:function(r){for(var s=this.options.mode==="audio"&&r||0,e,i=0;i<this.kfPosition.length&&!(this.kfPosition[i]>=r);i++)e=this.kfPosition[i];return e&&(this.kfPosition=this.kfPosition.filter(function(v){return v<e&&(s=v),v>=e})),s}},{key:"clearBuffer",value:function(){if(this.options.clearBuffer&&Date.now()-this.lastCleaningTime>1e4){for(var r in this.bufferControllers){var s=this.getSafeClearOffsetOfBuffer(this.node.currentTime);this.bufferControllers[r].initCleanup(s)}this.lastCleaningTime=Date.now()}}},{key:"onBuffer",value:function(r){this.options.readFpsFromTrack&&typeof r.fps<"u"&&this.options.fps!=r.fps&&(this.options.fps=r.fps,this.frameDuration=Math.ceil(1e3/r.fps),O("JMuxer changed FPS to ".concat(r.fps," from track data"))),this.env=="browser"?this.bufferControllers&&this.bufferControllers[r.type]&&this.bufferControllers[r.type].feed(r.payload):this.stream&&this.stream.push(r.payload),this.options.onData&&this.options.onData(r.payload),this.options.flushingTime===0&&this.applyAndClearBuffer()}},{key:"onMSEOpen",value:function(){this.mseReady=!0,URL.revokeObjectURL(this.url),typeof this.options.onReady=="function"&&this.options.onReady.call(null,this.isReset)}},{key:"onMSEClose",value:function(){this.mseReady=!1,this.videoStarted=!1}},{key:"onBufferError",value:function(r){if(r.name=="QuotaExceeded"){O("JMuxer cleaning ".concat(r.type," buffer due to QuotaExceeded error")),this.bufferControllers[r.type].initCleanup(this.node.currentTime);return}else r.name=="InvalidStateError"?(O("JMuxer is reseting due to InvalidStateError"),this.reset()):this.endMSE();typeof this.options.onError=="function"&&this.options.onError.call(null,r)}}],[{key:"isSupported",value:function(r){return window.MediaSource&&window.MediaSource.isTypeSupported(r)}}]),t})(C);return Ne}))})(Ye)),Ye.exports}var yr=gr();const mr=dr(yr);function kr(o){const{platform:u,serial:l,videoRef:h}=o,g=G(!1),m=G(!1),R=G(null);let _=null,M=null,L=null;const w=3e3;function $(){if(!h.value){const I="Video element not ready";return R.value=I,console.error("[Scrcpy]",I),!1}try{return console.log("[Scrcpy] Initializing JMuxer for video element:",h.value),M=new mr({node:h.value,mode:"video",flushingTime:0,fps:30,debug:!1}),console.log("[Scrcpy] JMuxer initialized successfully"),!0}catch(I){const F=`JMuxer init failed: ${I instanceof Error?I.message:String(I)}`;return R.value=F,console.error("[Scrcpy]",F,I),!1}}function E(){if(_&&_.readyState===WebSocket.OPEN){console.warn("[Scrcpy] WebSocket already connected");return}if(!h.value){console.warn("[Scrcpy] Video element not available, cannot connect");return}if(!(!M&&!$()))try{const F=`${location.protocol==="https:"?"wss:":"ws:"}//${location.host}/ws/${u.value}/scrcpy/${l.value}`;console.log(`[Scrcpy] Connecting to ${F}`),_=new WebSocket(F),_.binaryType="arraybuffer",_.onopen=()=>{g.value=!0,m.value=!1,R.value=null,console.log("[Scrcpy] Connected"),L&&(clearTimeout(L),L=null)},_.onmessage=k=>{if(k.data instanceof ArrayBuffer){if(M&&k.data.byteLength>0)try{M.feed({video:new Uint8Array(k.data)})}catch(Q){console.error("[Scrcpy] JMuxer feed error:",Q)}}else try{const Q=JSON.parse(k.data);console.log("[Scrcpy] Control message:",Q)}catch{console.warn("[Scrcpy] Invalid message:",k.data)}},_.onerror=k=>{const Q="WebSocket connection error";console.error("[Scrcpy]",Q,k),console.error("[Scrcpy] WebSocket URL was:",F),console.error("[Scrcpy] WebSocket readyState:",_?.readyState),R.value=Q},_.onclose=()=>{g.value=!1,console.log("[Scrcpy] Disconnected"),!m.value&&h.value&&(m.value=!0,console.log(`[Scrcpy] Reconnecting in ${w}ms...`),L=setTimeout(()=>{E()},w))}}catch(I){R.value=`WebSocket init failed: ${I instanceof Error?I.message:String(I)}`,console.error("[Scrcpy] Connection error:",I)}}function X(){if(m.value=!1,L&&(clearTimeout(L),L=null),_&&(_.close(),_=null),M){try{M.destroy()}catch(I){console.warn("[Scrcpy] JMuxer destroy error:",I)}M=null}g.value=!1,R.value=null,console.log("[Scrcpy] Disconnected and cleaned up")}function Y(I,F,k,Q,ue){if(!_||_.readyState!==WebSocket.OPEN){console.warn("[Scrcpy] WebSocket not connected");return}const he=F/Q,xe=k/ue,se=JSON.stringify({type:I==="down"?"touchDown":I==="move"?"touchMove":"touchUp",xP:he,yP:xe});_.send(se)}return ct(()=>{X()}),{connected:g,reconnecting:m,error:R,connect:E,disconnect:X,sendTouch:Y}}const wr={class:"screen-panel",ref:"containerRef"},br={class:"mode-selector"},Sr={class:"info-display"},_r={class:"canvas-container"},Cr={class:"canvas-wrapper"},Pr=["src"],Ar=ie({__name:"ScreenPanel",props:{platform:{},serial:{},screenSize:{}},emits:["tap","recordTap","recordSwipe"],setup(o,{expose:u,emit:l}){const h=o,{platform:g,serial:m}=jt(h),R=l,_=Xe(),M=Qe(),L=We(),w=ce(()=>L.t.screen),$=G("default"),E=G({x:0,y:0}),X=G(!1),Y=G([]),I=ce(()=>$.value==="pointer"),F=G(null),k=G(null),{canvasRef:Q,addRect:ue,addTrack:he,clearShapes:xe,clearShapesByType:fe,resizeCanvas:se}=ur(),D=kr({platform:g,serial:m,videoRef:k}),b=ce(()=>M.screenshotUrl),S=ce(()=>({width:h.screenSize?.width||M.screenSize?.width||0,height:h.screenSize?.height||M.screenSize?.height||0})),H=ce(()=>{const V=S.value.width,U=S.value.height;return!V||!U?{x:0,y:0}:{x:Math.round(E.value.x/V*100),y:Math.round(E.value.y/U*100)}});function ee(){if(!F.value)return;const V=F.value.naturalWidth,U=F.value.naturalHeight;se(V,U)}function le(){_.error("截图加载失败")}function te(){if(!k.value)return;const V=k.value.videoWidth||S.value.width,U=k.value.videoHeight||S.value.height;se(V,U),D&&!D.connected.value&&D.connect()}Le(()=>$.value,V=>{V==="pointer"&&(M.selectNode(null),fe("select"),fe("hover"))}),Le(()=>I.value,async(V,U)=>{if(U===void 0&&!V){console.log("[ScreenPanel] Initial state: Screenshot mode");return}V?(console.log("[ScreenPanel] Switching to Scrcpy mode, waiting for video element..."),await it(),console.log("[ScreenPanel] Video element ready, connecting..."),D.connect()):(console.log("[ScreenPanel] Switching to Screenshot mode, disconnecting..."),D.disconnect())}),Le(k,V=>{V&&I.value&&V.addEventListener("loadedmetadata",te)},{immediate:!0}),ct(()=>{D.disconnect()});function O(V){const U=F.value||k.value;if(!U)return null;const J=U.getBoundingClientRect(),{width:oe,height:ne}=S.value;if(!oe||!ne)return null;const Ce=oe/J.width,ge=ne/J.height,De=Math.round((V.clientX-J.left)*Ce),Ee=Math.round((V.clientY-J.top)*ge);return{x:De,y:Ee}}function N(V){if(!Q.value)return null;const U=Q.value.getBoundingClientRect(),J=Q.value.width/U.width,oe=Q.value.height/U.height,ne=(V.clientX-U.left)*J,Ce=(V.clientY-U.top)*oe;return{x:ne,y:Ce}}function C(V){if(!Q.value)return null;const{width:U,height:J}=S.value;if(!U||!J)return null;const oe=U/Q.value.width,ne=J/Q.value.height,Ce=Math.round(V.x*oe),ge=Math.round(V.y*ne);return{x:Ce,y:ge}}function W(V,U){if(!M.hierarchy?.nodes)return null;const J=[];function oe(ge){ge.forEach(De=>{J.push(De),De.children&&oe(De.children)})}oe(M.hierarchy.nodes);let ne=null,Ce=1/0;for(const ge of J){if(!ge.bounds)continue;const[De,Ee,Ie,Ne]=ge.bounds;if(V>=De&&V<=Ie&&U>=Ee&&U<=Ne){const a=(Ie-De)*(Ne-Ee);a<Ce&&(Ce=a,ne=ge)}}return ne}function K(V){const U=O(V),J=N(V);if(!(!U||!J)){if(E.value=U,fe("hover"),$.value==="default"){const oe=W(U.x,U.y);oe&&oe.bounds&&ue(oe.bounds,"hover")}else if($.value==="pointer"&&X.value&&(Y.value.push(J),fe("hover"),he(Y.value),I.value)){const{width:oe,height:ne}=S.value;oe&&ne&&D.sendTouch("move",U.x,U.y,oe,ne)}}}function ke(V){const U=O(V);if(U&&(X.value=!0,Y.value=[],$.value==="pointer")){const J=N(V);if(J&&Y.value.push(J),I.value){const{width:oe,height:ne}=S.value;oe&&ne&&D.sendTouch("down",U.x,U.y,oe,ne)}}}function ye(){if(Y.value.length<2)return null;const V=Y.value[0],U=Y.value[Y.value.length-1],J=C(V),oe=C(U);if(!J||!oe)return null;const ne=Math.max(.2,Math.min(1,Y.value.length/60));return{startX:J.x,startY:J.y,endX:oe.x,endY:oe.y,duration:ne}}async function Te(V){const U=O(V);if(U){if(X.value=!1,$.value==="default"){const J=W(U.x,U.y);J&&(M.selectNode(J),fe("select"),J.bounds&&ue(J.bounds,"select"))}else if($.value==="pointer")try{R("tap",U.x,U.y);const J=null,oe=Y.value.length>5;if(I.value){const{width:ne,height:Ce}=S.value;ne&&Ce&&D.sendTouch("up",U.x,U.y,ne,Ce);const ge=oe?ye():null;ge?R("recordSwipe",ge.startX,ge.startY,ge.endX,ge.endY,ge.duration,J):R("recordTap",U.x,U.y,J)}else{const ne=oe?ye():null;ne?(await Ae(h.platform,h.serial,"swipe",{startX:ne.startX,startY:ne.startY,endX:ne.endX,endY:ne.endY,duration:ne.duration}),R("recordSwipe",ne.startX,ne.startY,ne.endX,ne.endY,ne.duration,J),_.success(`滑动: (${ne.startX}, ${ne.startY}) → (${ne.endX}, ${ne.endY})`)):(await ut(h.platform,h.serial,U.x,U.y),R("recordTap",U.x,U.y,J),_.success(`点击: (${U.x}, ${U.y})`))}}catch(J){_.error(`操作失败: ${J instanceof Error?J.message:String(J)}`)}Y.value=[],fe("hover")}}function Pe(){if(X.value&&$.value==="pointer"&&I.value){const V=Y.value[Y.value.length-1];if(V){const U=C(V),{width:J,height:oe}=S.value;U&&J&&oe&&D.sendTouch("up",U.x,U.y,J,oe)}}X.value=!1,Y.value=[],fe("hover")}return Le(()=>M.selectedNode,V=>{fe("select"),V&&V.bounds&&ue(V.bounds,"select")}),u({clearShapes:xe,resizeCanvas:se}),(V,U)=>(A(),B("div",wr,[y("div",br,[f(d(At),{value:$.value,"onUpdate:value":U[0]||(U[0]=J=>$.value=J),size:"small"},{default:p(()=>[f(d(Je),{value:"default"},{default:p(()=>[f(d(ae),null,{default:p(()=>[f(d(Sn))]),_:1}),Z(" "+T(w.value.viewMode),1)]),_:1}),f(d(Je),{value:"pointer"},{default:p(()=>[f(d(ae),null,{default:p(()=>[f(d(Cn))]),_:1}),Z(" "+T(w.value.pointerMode),1)]),_:1})]),_:1},8,["value"]),y("div",Sr,[y("span",null,T(S.value.width)+"x"+T(S.value.height),1),y("span",null,T(E.value.x)+", "+T(E.value.y),1),y("span",null,T(H.value.x)+"%, "+T(H.value.y)+"%",1)])]),y("div",_r,[y("div",Cr,[I.value?(A(),B("video",{key:1,ref_key:"videoRef",ref:k,class:"screen-video",autoplay:"",muted:""},null,512)):(A(),B("img",{key:0,ref_key:"imageRef",ref:F,src:b.value,class:"screen-image",onLoad:ee,onError:le},null,40,Pr)),y("canvas",{ref_key:"drawingCanvas",ref:Q,class:"drawing-canvas",onMousemove:K,onMousedown:ke,onMouseup:Te,onMouseleave:Pe},null,544)])])],512))}}),Fr=ze(Ar,[["__scopeId","data-v-a643562a"]]),$r={class:"hierarchy-panel"},Tr={class:"hierarchy-search-bar"},Ur={key:0,class:"search-results-info"},Dr={key:1,class:"search-results-list"},Er=["onClick"],Rr={class:"result-index"},Mr={class:"result-content"},Br={class:"result-primary"},Lr={class:"result-secondary"},Or={key:0,class:"result-tag"},zr={key:1,class:"result-tag"},Ir=ie({__name:"HierarchyPanel",props:{platform:{},serial:{}},setup(o){const u=o,l=Xe(),h=Qe(),g=We(),m=ce(()=>g.t.hierarchy),R=G(""),_=G([]),M=G(!1),L=G("text"),w=ce(()=>[{label:m.value.searchType.text,value:"text"},{label:m.value.searchType.xpath,value:"xpath"},{label:m.value.searchType.id,value:"id"},{label:m.value.searchType.className,value:"className"}]),$=G(new Map),E=G([]),X=G([]);function Y(b,S=""){return b.map((H,ee)=>{const le=S?`${S}-${ee}`:`${ee}`;$.value.set(le,H);const te=H.children&&H.children.length>0;return{key:le,label:`${ee} ${H.class_name||"Node"}`,prefix:()=>ve(ae,null,{default:()=>ve(te?An:mn)}),children:te?Y(H.children,le):void 0,isLeaf:!te,raw:H}})}function I({option:b}){const S=b.raw,H=(b.label||"").split(" ")[0],ee=S.class_name||"Node",le=[ve("span",{class:"tree-node-index"},`${H} `),ve("span",{class:"tree-node-class"},ee)];if(S.resource_id){const te=S.resource_id.split("/").pop()||S.resource_id;le.push(ve("span",{class:"tree-node-highlight"},` id=${te}`))}return S.text&&le.push(ve("span",{class:"tree-node-highlight"},` text=${S.text}`)),ve("span",{},le)}const F=ce(()=>h.hierarchy?.nodes?($.value.clear(),Y(h.hierarchy.nodes)):[]);async function k(){if(!R.value.trim()){l.warning(m.value.searchPlaceholder);return}M.value=!0;try{await h.refreshHierarchy();const b=R.value.trim(),S=await Ae(u.platform,u.serial,"findElements",{by:L.value,value:b});if(S&&typeof S=="object"&&"value"in S){const H=S;_.value=H.value.map(yt),H.count===0?l.warning(m.value.noResults):H.count===1?he(_.value[0]):l.success(g.format(m.value.foundResults,{count:H.count}))}else Array.isArray(S)?(_.value=S.map(yt),S.length===1?he(_.value[0]):l.success(g.format(m.value.foundResults,{count:S.length}))):(_.value=[],l.warning(m.value.noResults))}catch(b){l.error(`${m.value.searchPlaceholder}: ${b instanceof Error?b.message:String(b)}`),_.value=[]}finally{M.value=!1}}function Q(b,S,H=""){if(!b||b.length!==4)return null;for(let ee=0;ee<S.length;ee++){const le=S[ee],te=H?`${H}-${ee}`:`${ee}`,O=le?.raw;if(O?.bounds){const N=O.bounds;if(N[0]===b[0]&&N[1]===b[1]&&N[2]===b[2]&&N[3]===b[3])return te}if(le&&le.children){const N=Q(b,le.children,te);if(N)return N}}return null}function ue(b){const S=b.split("-"),H=[];for(let ee=1;ee<S.length;ee++)H.push(S.slice(0,ee).join("-"));return H}async function he(b){await it();const S=Q(b.bounds,F.value);if(S){const H=ue(S),ee=new Set([...X.value,...H]);X.value=Array.from(ee),E.value=[S];const le=$.value.get(S);le&&h.selectNode(le),l.success("已选中并定位到元素")}else h.selectNode(b),l.warning("已选中元素，但无法在树中定位（可能需要刷新）")}function xe(){R.value="",_.value=[]}function fe(b,S){const H=S[0];if(H&&H.raw){const ee=H.raw;h.selectNode(ee)}}function se(b){X.value=b}const D=({option:b})=>({onDblclick(){if(!b.isLeaf){const S=b.key;X.value.includes(S)?X.value=X.value.filter(H=>H!==S):X.value=[...X.value,S]}}});return Le(()=>h.selectedNode,async b=>{if(!b){E.value=[];return}await it();const S=Q(b.bounds,F.value);if(S){const H=ue(S),ee=new Set([...X.value,...H]);X.value=Array.from(ee),E.value=[S]}},{deep:!0}),(b,S)=>{const H=Re("n-select"),ee=Re("n-button"),le=Re("n-input"),te=Re("n-tree"),O=Re("n-empty");return A(),B("div",$r,[y("div",Tr,[f(H,{value:L.value,"onUpdate:value":S[0]||(S[0]=N=>L.value=N),options:w.value,size:"small",style:{width:"160px","flex-shrink":"0"}},null,8,["value","options"]),f(le,{value:R.value,"onUpdate:value":S[1]||(S[1]=N=>R.value=N),placeholder:m.value.searchPlaceholder,clearable:"",onKeydown:Ft(k,["enter"]),style:{flex:"1"}},{suffix:p(()=>[f(ee,{text:"",onClick:k,loading:M.value,disabled:!R.value.trim()},{icon:p(()=>[f(d(ae),null,{default:p(()=>[f(d(Xn))]),_:1})]),_:1},8,["loading","disabled"])]),_:1},8,["value","placeholder"])]),_.value.length>0?(A(),B("div",Ur,[y("span",null,T(d(g).format(m.value.foundResults,{count:_.value.length})),1),f(ee,{text:"",size:"small",onClick:xe},{icon:p(()=>[f(d(ae),null,{default:p(()=>[f(d(pn))]),_:1})]),default:p(()=>[Z(" "+T(d(g).t.common.clear),1)]),_:1})])):Se("",!0),_.value.length>0?(A(),B("div",Dr,[(A(!0),B(Ve,null,Ge(_.value,(N,C)=>(A(),B("div",{key:C,class:"search-result-item",onClick:W=>he(N)},[y("div",Rr,T(C+1),1),y("div",Mr,[y("div",Br,T(N.text||N.resource_id||N.class_name||`${m.value.noElement} ${C+1}`),1),y("div",Lr,[N.resource_id?(A(),B("span",Or,T(N.resource_id),1)):Se("",!0),N.class_name?(A(),B("span",zr,T(N.class_name),1)):Se("",!0)])]),f(d(ae),{size:"16",color:"var(--md-primary)"},{default:p(()=>[f(d(Et))]),_:1})],8,Er))),128))])):Se("",!0),F.value.length>0?(A(),_e(te,{key:2,data:F.value,"selected-keys":E.value,"expanded-keys":X.value,"node-props":D,"render-label":I,selectable:"","block-line":"","onUpdate:selectedKeys":fe,"onUpdate:expandedKeys":se},null,8,["data","selected-keys","expanded-keys"])):(A(),_e(O,{key:3,description:m.value.noElement},null,8,["description"]))])}}}),Nr=ze(Ir,[["__scopeId","data-v-913aa837"]]);function jr(o){const u=Math.floor(o/1e3),l=Math.floor(u/60),h=u%60;return`${l.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}`}function Mt(o){return o<1e3?`${o}ms`:`${(o/1e3).toFixed(1)}s`}function Hr(o){return o<1024?`${o}B`:o<1024*1024?`${(o/1024).toFixed(1)}KB`:`${(o/(1024*1024)).toFixed(1)}MB`}function Vr(o){const u=new Date(o*1e3),h=new Date().getTime()-u.getTime(),g=Math.floor(h/(1e3*60*60*24));return g===0?u.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):g===1?"昨天 "+u.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):g<7?`${g}天前`:u.toLocaleDateString("zh-CN",{month:"short",day:"numeric"})}function Ct(o){return o?o.text?`文本: "${o.text}"`:o.content_desc?`描述: "${o.content_desc}"`:o.resource_id?`ID: ${o.resource_id.split("/").pop()}`:o.class_name?`类: ${o.class_name.split(".").pop()}`:null:null}function Bt(o){switch(o.type){case"tap":{const u=Ct(o.element);return u||(o.xpath?`XPath元素 (${Math.round(o.coords.x)}, ${Math.round(o.coords.y)})`:`坐标 (${Math.round(o.coords.x)}, ${Math.round(o.coords.y)})`)}case"swipe":{const u=Ct(o.element);return u?`${u} → (${Math.round(o.endCoords.x)}, ${Math.round(o.endCoords.y)})`:`(${Math.round(o.coords.x)}, ${Math.round(o.coords.y)}) → (${Math.round(o.endCoords.x)}, ${Math.round(o.endCoords.y)})`}case"input":return`"${o.params.text}"`;case"sleep":return`${o.params.duration}ms`;case"command":return o.params.command;default:return JSON.stringify(o.params)}}function Lt(o){switch(o){case"tap":return"primary";case"swipe":return"success";case"input":return"warning";case"sleep":return"default";case"command":case"back":case"home":return"error";default:return"default"}}function Gr(o){switch(o){case"idle":return"default";case"playing":return"success";case"paused":return"warning";case"completed":return"primary";case"error":return"error";default:return"default"}}function Xr(o){switch(o){case"idle":return"待播放";case"playing":return"播放中";case"paused":return"已暂停";case"completed":return"已完成";case"error":return"错误";default:return o}}const Wr={class:"tab-content"},Kr={class:"control-bar"},Yr={key:0,class:"recording-indicator"},Jr={class:"duration"},qr={class:"steps-section"},Zr={key:0,class:"steps-list"},Qr={class:"step-index"},ea={class:"step-details"},ta={class:"step-time"},na=ie({__name:"RecordTab",props:{recorder:{},currentPlaybackIndex:{},isPlaybackActive:{type:Boolean},t:{}},emits:["toggle-recording","toggle-pause","clear-recording","save-recording","edit-action","delete-action"],setup(o){return(u,l)=>(A(),B("div",Wr,[y("div",Kr,[f(d(Oe),{size:8},{default:p(()=>[f(d(re),{type:o.recorder.isRecording.value?"error":"primary",disabled:o.isPlaybackActive,onClick:l[0]||(l[0]=h=>u.$emit("toggle-recording"))},{icon:p(()=>[f(d(ae),null,{default:p(()=>[o.recorder.isRecording.value?(A(),_e(d(ft),{key:1})):(A(),_e(d(st),{key:0}))]),_:1})]),default:p(()=>[Z(" "+T(o.recorder.isRecording.value?o.t.stopRecording:o.t.startRecording),1)]),_:1},8,["type","disabled"]),o.recorder.isRecording.value?(A(),_e(d(re),{key:0,type:o.recorder.isPaused.value?"default":"warning",onClick:l[1]||(l[1]=h=>u.$emit("toggle-pause"))},{default:p(()=>[Z(T(o.recorder.isPaused.value?o.t.continueRecording:o.t.pauseRecording),1)]),_:1},8,["type"])):Se("",!0),f(d(re),{disabled:o.recorder.actionCount.value===0,onClick:l[2]||(l[2]=h=>u.$emit("clear-recording"))},{default:p(()=>[Z(T(o.t.clearRecording)+" ("+T(o.recorder.actionCount.value)+") ",1)]),_:1},8,["disabled"])]),_:1}),f(d(Oe),{size:8},{default:p(()=>[f(d(re),{disabled:o.recorder.actionCount.value===0,onClick:l[3]||(l[3]=h=>u.$emit("save-recording"))},{icon:p(()=>[f(d(ae),null,{default:p(()=>[f(d(Vn))]),_:1})]),default:p(()=>[Z(" "+T(o.t.saveRecording),1)]),_:1},8,["disabled"])]),_:1})]),o.recorder.isRecording.value?(A(),B("div",Yr,[f(d(qe),{type:o.recorder.isPaused.value?"warning":"error",round:""},{icon:p(()=>[f(d(ae),null,{default:p(()=>[f(d(st))]),_:1})]),default:p(()=>[Z(" "+T(o.recorder.isPaused.value?o.t.recordingPaused:o.t.recording),1)]),_:1},8,["type"]),y("span",Jr,T(d(jr)(o.recorder.duration.value)),1)])):Se("",!0),y("div",qr,[y("h3",null,T(o.t.operationSteps)+" ("+T(o.recorder.actionCount.value)+")",1),o.recorder.actionCount.value>0?(A(),B("div",Zr,[(A(!0),B(Ve,null,Ge(o.recorder.actions.value,(h,g)=>(A(),B("div",{key:h.id,class:$t(["step-item",{active:o.currentPlaybackIndex===g}])},[y("span",Qr,T(Number(g)+1),1),f(d(qe),{type:d(Lt)(h.type),size:"small"},{default:p(()=>[Z(T(h.type),1)]),_:2},1032,["type"]),y("span",ea,T(d(Bt)(h)),1),y("span",ta,T(d(Mt)(h.relativeTime)),1),f(d(Tt),{size:"tiny"},{default:p(()=>[f(d(re),{onClick:m=>u.$emit("edit-action",h)},{default:p(()=>[f(d(ae),null,{default:p(()=>[f(d(gn))]),_:1})]),_:1},8,["onClick"]),f(d(re),{onClick:m=>u.$emit("delete-action",h.id)},{default:p(()=>[f(d(ae),null,{default:p(()=>[f(d(ht))]),_:1})]),_:1},8,["onClick"])]),_:2},1024)],2))),128))])):(A(),_e(d(Ze),{key:1,description:o.t.noOperations},null,8,["description"]))])]))}}),ra=ze(na,[["__scopeId","data-v-6ac11da4"]]),aa={class:"playback-tab-layout"},ia={class:"recordings-section"},oa={class:"section-header"},sa={class:"playback-controls-divider"},la={class:"control-bar"},ca={class:"progress-text"},ua={key:0,class:"error-message-compact"},da={class:"playback-steps-section"},fa={key:0,class:"steps-list"},ha={class:"step-index"},pa={class:"step-details"},va={class:"step-time"},xa=ie({__name:"PlaybackTab",props:{player:{},recordings:{},loading:{type:Boolean},isRecordingActive:{type:Boolean},t:{},commonT:{}},emits:["refresh-recordings","start-playback","load-recording","delete-recording"],setup(o,{emit:u}){const l=o,h=u,g=ce(()=>{if(l.recordings.length===0)return[];const L=new Map;l.recordings.forEach($=>{const E=$.group||"default",X=L.get(E);X?X.push($):L.set(E,[$])});const w=[];return L.forEach(($,E)=>{const X={key:`group-${E}`,label:E,isGroup:!0,children:$.map(Y=>({key:`${Y.group}/${Y.name}`,label:Y.name,recording:Y}))};w.push(X)}),w}),m=ce(()=>g.value.map(L=>L.key));function R({option:L}){const w=L;if(w.isGroup){const $=w.children?.length||0;return ve("span",{class:"tree-group-label"},[ve("span",{class:"group-name"},w.label),ve("span",{class:"group-count"},`(${$})`)])}else{const $=w.recording;return ve("div",{class:"tree-recording-label"},[ve("div",{class:"recording-name"},$.name),ve("div",{class:"recording-meta"},[ve("span",{class:"meta-item"},Hr($.size)),ve("span",{class:"meta-item"},Vr($.modified_at))])])}}function _({option:L}){const w=L;if(w.isGroup||!w.recording)return null;const $=w.recording;return ve("div",{class:"tree-node-actions",onClick:E=>E.stopPropagation()},[ve(re,{size:"tiny",quaternary:!0,onClick:()=>h("load-recording",$.group,$.name)},{icon:()=>ve(ae,null,{default:()=>ve(Mn)})}),ve(re,{size:"tiny",quaternary:!0,onClick:()=>h("delete-recording",$.group,$.name)},{icon:()=>ve(ae,null,{default:()=>ve(ht)})})])}function M({option:L}){const w=L;return w.isGroup?{}:{onClick:()=>{w.recording&&h("load-recording",w.recording.group,w.recording.name)}}}return(L,w)=>(A(),B("div",aa,[y("div",ia,[y("div",oa,[y("h3",null,T(o.t.recordingList)+" ("+T(g.value.length>0?g.value.reduce(($,E)=>$+(E.children?.length||0),0):0)+")",1),f(d(re),{size:"small",onClick:w[0]||(w[0]=$=>L.$emit("refresh-recordings")),loading:o.loading},{icon:p(()=>[f(d(ae),null,{default:p(()=>[f(d(dt))]),_:1})]),default:p(()=>[Z(" "+T(o.commonT.refresh),1)]),_:1},8,["loading"])]),g.value.length>0?(A(),_e(d(Ht),{key:0,data:g.value,"render-label":R,"render-suffix":_,"node-props":M,"block-line":"","expand-on-click":"","default-expanded-keys":m.value},null,8,["data","default-expanded-keys"])):(A(),_e(d(Ze),{key:1,description:o.t.noRecordings},null,8,["description"]))]),y("div",sa,[y("div",la,[f(d(Oe),{size:8},{default:p(()=>[f(d(re),{type:"success",disabled:!o.player.canPlay.value||o.isRecordingActive,loading:o.player.isPlaying.value,onClick:w[1]||(w[1]=$=>L.$emit("start-playback"))},{icon:p(()=>[f(d(ae),null,{default:p(()=>[f(d(Ln))]),_:1})]),default:p(()=>[Z(" "+T(o.t.play),1)]),_:1},8,["disabled","loading"]),o.player.isPlaying.value?(A(),_e(d(re),{key:0,onClick:w[2]||(w[2]=$=>o.player.pause())},{icon:p(()=>[f(d(ae),null,{default:p(()=>[f(d(En))]),_:1})]),default:p(()=>[Z(" "+T(o.t.pause),1)]),_:1})):Se("",!0),f(d(re),{disabled:!o.player.isPlaying.value&&!o.player.isPaused.value,onClick:w[3]||(w[3]=$=>o.player.stop())},{icon:p(()=>[f(d(ae),null,{default:p(()=>[f(d(ft))]),_:1})]),default:p(()=>[Z(" "+T(o.t.stop),1)]),_:1},8,["disabled"]),f(d(re),{disabled:!o.player.isPaused.value,onClick:w[4]||(w[4]=$=>o.player.stepNext())},{icon:p(()=>[f(d(ae),null,{default:p(()=>[f(d(zn))]),_:1})]),default:p(()=>[Z(" "+T(o.t.step),1)]),_:1},8,["disabled"])]),_:1}),o.player.recording.value?(A(),_e(d(Oe),{key:0,size:8,align:"center"},{default:p(()=>[y("span",ca,T(o.t.progress)+": "+T(o.player.progress.value.currentIndex+1)+" / "+T(o.player.progress.value.totalSteps),1),f(d(qe),{type:d(Gr)(o.player.state.value),size:"small"},{default:p(()=>[Z(T(d(Xr)(o.player.state.value)),1)]),_:1},8,["type"])]),_:1})):Se("",!0)]),o.player.error.value?(A(),B("div",ua,[f(d(Vt),{type:"error",title:o.player.error.value,closable:""},null,8,["title"])])):Se("",!0)]),y("div",da,[o.player.recording.value?(A(),B("div",fa,[(A(!0),B(Ve,null,Ge(o.player.recording.value.actions,($,E)=>(A(),B("div",{key:$.id,class:$t(["step-item",{active:o.player.currentIndex.value===E,completed:o.player.currentIndex.value>E,pending:o.player.currentIndex.value<E}])},[y("span",ha,T(Number(E)+1),1),f(d(qe),{type:d(Lt)($.type),size:"small"},{default:p(()=>[Z(T($.type),1)]),_:2},1032,["type"]),y("span",pa,T(d(Bt)($)),1),y("span",va,T(d(Mt)($.relativeTime)),1)],2))),128))])):(A(),_e(d(Ze),{key:1,description:o.t.selectRecording},null,8,["description"]))])]))}}),ga=ze(xa,[["__scopeId","data-v-61ab3474"]]);function ya(o,u,l=!0){const h=l?JSON.stringify(o,null,2):JSON.stringify(o),g=new Blob([h],{type:"application/json"});ma(g,`${u}.json`)}function ma(o,u){const l=URL.createObjectURL(o),h=document.createElement("a");h.href=l,h.download=u,h.click(),setTimeout(()=>{URL.revokeObjectURL(l)},100)}function ka(o,u,l){const h=G(!1),g=G(!1),m=G([]),R=G(0),_=G(`Recording_${Date.now()}`),M=G({captureScreenshots:!1,screenshotQuality:.6,recordElementDetails:!0}),L=ce(()=>m.value.length===0?0:m.value[m.value.length-1]?.relativeTime||0),w=ce(()=>m.value.length);function $(C){h.value=!0,g.value=!1,m.value=[],R.value=Date.now(),C&&(_.value=C)}function E(){h.value=!1,g.value=!1}function X(){h.value&&(g.value=!0)}function Y(){h.value&&(g.value=!1)}function I(){m.value=[],R.value=0}function F(C,W){const{width:K,height:ke}=l.value;if(!K||!ke||K<=0||ke<=0)throw new Error(`Invalid screen size: ${K}x${ke}. Recording requires valid screen dimensions.`);return{x:C,y:W,scaleX:C/K,scaleY:W/ke}}function k(C,W,K){if(!(!C||!C.xpath))return{selector:C.xpath,fallbackCoords:{x:W,y:K}}}function Q(C){if(!(!C||!M.value.recordElementDetails))return{text:C.text,resource_id:C.resource_id,class_name:C.class_name,content_desc:C.content_desc,bounds:C.bounds||[0,0,0,0],key:C.key}}async function ue(){M.value.captureScreenshots}async function he(C,W,K,ke,ye){if(!h.value||g.value)return;const Te=Date.now(),Pe={id:crypto.randomUUID(),timestamp:Te,relativeTime:Te-R.value,screenshot:await ue()};let V;switch(C){case"tap":V={...Pe,type:"tap",coords:K,xpath:K?k(ye||null,K.x,K.y):void 0,element:Q(ye||null),params:W};break;case"swipe":V={...Pe,type:"swipe",coords:K,endCoords:ke,element:Q(ye||null),params:W};break;case"input":V={...Pe,type:"input",element:Q(ye||null),params:W};break;case"sleep":V={...Pe,type:"sleep",params:W};break;case"command":case"back":case"home":V={...Pe,type:C,params:W};break;default:console.warn("未知操作类型，跳过录制");return}m.value.push(V)}async function xe(C,W,K){const ke=F(C,W);await he("tap",{x:C,y:W},ke,void 0,K)}async function fe(C,W,K,ke,ye,Te){const Pe=F(C,W),V=F(K,ke);await he("swipe",{startX:C,startY:W,endX:K,endY:ke,duration:ye},Pe,V,Te)}async function se(C,W){await he("input",{text:C},void 0,void 0,W)}async function D(C){await he("sleep",{duration:C})}async function b(C,W){await he("command",{command:C,args:W})}function S(C){const W=m.value.findIndex(K=>K.id===C);W!==-1&&m.value.splice(W,1)}function H(C,W){const K=m.value.findIndex(ke=>ke.id===C);K!==-1&&(m.value[K]={...m.value[K],...W})}function ee(C){return{version:"1.0",name:C||_.value,description:void 0,platform:o,deviceInfo:{serial:u,screenWidth:l.value.width,screenHeight:l.value.height},createdAt:R.value,updatedAt:Date.now(),duration:L.value,config:M.value,actions:m.value}}function le(C){_.value=C.name,m.value=C.actions,R.value=C.createdAt,M.value=C.config}function te(){const C=ee();ya(C,`${C.name}.buiauto`)}function O(C){if(!C||typeof C!="object")return!1;if(C.version!=="1.0")return console.error("不支持的文件版本:",C.version),!1;if(typeof C.name!="string")return console.error("缺少录制名称"),!1;if(!C.platform||!["android","ios","harmony"].includes(C.platform))return console.error("无效的平台:",C.platform),!1;if(!C.deviceInfo||typeof C.deviceInfo.screenWidth!="number"||typeof C.deviceInfo.screenHeight!="number")return console.error("缺少设备信息"),!1;if(!Array.isArray(C.actions))return console.error("缺少操作列表"),!1;for(let W=0;W<C.actions.length;W++){const K=C.actions[W];if(!K||typeof K!="object")return console.error(`操作 ${W} 格式错误`),!1;if(!K.type||typeof K.timestamp!="number"||typeof K.relativeTime!="number")return console.error(`操作 ${W} 缺少必需字段`),!1;if((K.type==="tap"||K.type==="swipe")&&!K.coords)return console.error(`操作 ${W} (${K.type}) 缺少坐标信息`),!1;if(K.type==="swipe"&&!K.endCoords)return console.error(`操作 ${W} (swipe) 缺少结束坐标`),!1}return!0}async function N(){return new Promise((C,W)=>{const K=document.createElement("input");K.type="file",K.accept=".buiauto.json,.json",K.onchange=async()=>{const ke=K.files?.[0];if(!ke){W(new Error("未选择文件"));return}try{const ye=await ke.text(),Te=JSON.parse(ye);if(!O(Te)){W(new Error("文件格式验证失败，请检查是否为有效的录制文件"));return}le(Te),C(Te)}catch(ye){ye instanceof SyntaxError?W(new Error("文件格式错误：无效的JSON")):W(ye)}},K.click()})}return{isRecording:h,isPaused:g,actions:m,recordingName:_,config:M,duration:L,actionCount:w,start:$,stop:E,pause:X,resume:Y,clear:I,recordTap:xe,recordSwipe:fe,recordInput:se,recordSleep:D,recordCommand:b,deleteAction:S,updateAction:H,exportRecording:ee,importRecording:le,saveToFile:te,loadFromFile:N}}function wa(o,u,l){const h=G("idle"),g=G(-1),m=G(null),R=G(null),_=G(1),M=ce(()=>({currentIndex:g.value,totalSteps:m.value?.actions.length||0,elapsedTime:0,state:h.value,error:R.value||void 0})),L=ce(()=>h.value==="playing"),w=ce(()=>h.value==="paused"),$=ce(()=>m.value!==null&&m.value.actions.length>0);function E(D){m.value=D,g.value=-1,h.value="idle",R.value=null}function X(){m.value=null,g.value=-1,h.value="idle",R.value=null}function Y(D){return new Promise(b=>setTimeout(b,D/_.value))}function I(D){const{width:b,height:S}=l.value;if(!b||!S||b<=0||S<=0)throw new Error(`无法回放:屏幕尺寸无效(${b}x${S}),请确保设备已连接并加载了屏幕信息`);return{x:Math.round(D.scaleX*b),y:Math.round(D.scaleY*S)}}async function F(D){try{let b=function(N){for(const C of N){if(C.xpath===D)return C;if(C.children){const W=b(C.children);if(W)return W}}return null};const S=await Dt(o,u),H=b(S.nodes);if(!H||!H.bounds)return null;const[ee,le,te,O]=H.bounds;return{x:Math.round((ee+te)/2),y:Math.round((le+O)/2)}}catch(b){return console.error("XPath查找失败:",b),null}}async function k(D){switch(D.type){case"tap":{let b,S;if(D.xpath){const H=await F(D.xpath.selector);if(H)b=H.x,S=H.y;else{if(console.warn("XPath查找失败，降级使用比例缩放坐标:",D.xpath.selector),!D.coords)throw new Error("Tap操作缺少坐标信息");const ee=I(D.coords);b=ee.x,S=ee.y}}else{if(!D.coords)throw new Error("Tap操作缺少坐标信息");const H=I(D.coords);b=H.x,S=H.y}await ut(o,u,b,S);break}case"swipe":{if(!D.coords||!D.endCoords)throw new Error("Swipe操作缺少坐标信息");const b=I(D.coords),S=I(D.endCoords),H=D.params;await Ae(o,u,"swipe",{startX:b.x,startY:b.y,endX:S.x,endY:S.y,duration:H.duration||.5});break}case"input":{const b=D.params;await Ae(o,u,"sendKeys",{text:b.text});break}case"sleep":{const b=D.params;await Y(b.duration);break}case"back":{await Ae(o,u,"back",{});break}case"home":{await Ae(o,u,"home",{});break}case"command":{const b=D.params;await Ae(o,u,b.command,b.args||{});break}default:console.warn("未知操作类型")}}async function Q(){if(!m.value||m.value.actions.length===0){R.value="没有可回放的录制";return}for(h.value==="paused"?h.value="playing":(g.value=0,h.value="playing",R.value=null);g.value<m.value.actions.length&&h.value==="playing";){const D=m.value.actions[g.value];try{if(await k(D),h.value!=="playing")break;if(g.value<m.value.actions.length-1){const S=m.value.actions[g.value+1].relativeTime-D.relativeTime;if(await Y(S),h.value!=="playing")break}g.value++}catch(b){R.value=b instanceof Error?b.message:String(b),h.value="error",console.error(`回放失败在步骤 ${g.value}:`,b);break}}h.value==="playing"&&(h.value="idle",g.value=-1)}function ue(){h.value==="playing"&&(h.value="paused")}function he(){h.value="stopped",g.value=-1,R.value=null}async function xe(){if(!m.value||g.value>=m.value.actions.length-1)return;h.value="paused",g.value++;const D=m.value.actions[g.value];try{await k(D)}catch(b){R.value=b instanceof Error?b.message:String(b),h.value="error",console.error(`单步执行失败在步骤 ${g.value}:`,b)}}function fe(D){m.value&&D>=0&&D<m.value.actions.length&&(g.value=D,h.value="paused")}function se(D){_.value=Math.max(.1,Math.min(5,D))}return{state:h,currentIndex:g,recording:m,error:R,speed:_,progress:M,isPlaying:L,isPaused:w,canPlay:$,load:E,unload:X,play:Q,pause:ue,stop:he,stepNext:xe,seekTo:fe,setSpeed:se}}const et="";async function ba(o){const u=await fetch(`${et}/api/recordings/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!u.ok){const l=await u.text(),h=`保存录制"${o.name}"失败 (分组:${o.group}, HTTP ${u.status}): ${l}`;throw console.error(h,{request:o,status:u.status}),new Error(h)}}async function Sa(){const o=await fetch(`${et}/api/recordings/list`);if(!o.ok){const l=await o.text(),h=`获取录制列表失败 (HTTP ${o.status}): ${l}`;throw console.error(h,{status:o.status}),new Error(h)}return(await o.json()).recordings}async function _a(o,u){const l=await fetch(`${et}/api/recordings/load?group=${encodeURIComponent(o)}&name=${encodeURIComponent(u)}`);if(!l.ok){const g=await l.text(),m=`加载录制"${u}"失败 (分组:${o}, HTTP ${l.status}): ${g}`;throw console.error(m,{group:o,name:u,status:l.status}),new Error(m)}return(await l.json()).data}async function Ca(o,u){const l=await fetch(`${et}/api/recordings/delete?group=${encodeURIComponent(o)}&name=${encodeURIComponent(u)}`,{method:"DELETE"});if(!l.ok){const h=await l.text(),g=`删除录制"${u}"失败 (分组:${o}, HTTP ${l.status}): ${h}`;throw console.error(g,{group:o,name:u,status:l.status}),new Error(g)}}const Pa={class:"actions-panel"},Aa=ie({__name:"ActionsPanel",props:{platform:{},serial:{}},setup(o,{expose:u}){const l=o,h=Xe(),g=Gt(),m=Qe(),R=We(),_=ce(()=>R.t.actions);function M(te,O){h.error(`${te}: ${O instanceof Error?O.message:String(O)}`)}const L=G("record"),w=G([]),$=G(!1),E=G(!1),X=G({group:"default",name:""}),Y=ce(()=>m.screenSize),I=ka(l.platform,l.serial,Y),F=wa(l.platform,l.serial,Y);function k(){I.isRecording.value?I.stop():I.start()}function Q(){I.isPaused.value?I.resume():I.pause()}function ue(){g.warning({title:"确认清空",content:"确定要清空所有录制步骤吗？",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{I.clear(),h.success("已清空录制")}})}async function he(){if(!X.value.name){h.warning("请输入录制名称");return}if(I.actionCount.value===0){h.warning("没有可保存的录制");return}try{const te=I.exportRecording(X.value.name);await ba({group:X.value.group||"default",name:X.value.name,data:te}),h.success("录制已保存"),E.value=!1,X.value={group:"default",name:""},await se()}catch(te){M("保存失败",te)}}function xe(te){I.deleteAction(te)}function fe(te){h.info("编辑功能暂未实现")}async function se(){$.value=!0;try{w.value=await Sa()}catch(te){M("获取录制列表失败",te)}finally{$.value=!1}}async function D(te,O){try{const N=await _a(te,O);F.load(N),h.success(`已加载录制: ${O}`)}catch(N){M("加载录制失败",N)}}async function b(te,O){g.warning({title:"确认删除",content:`确定要删除录制 "${O}" 吗？`,positiveText:"删除",negativeText:"取消",onPositiveClick:async()=>{try{await Ca(te,O),h.success("已删除"),await se()}catch(N){M("删除失败",N)}}})}async function S(){try{await F.play()}catch(te){M("回放失败",te)}}async function H(te,O,N){await I.recordTap(te,O,N)}async function ee(te,O,N,C,W,K){await I.recordSwipe(te,O,N,C,W,K)}function le(){return I.isRecording.value}return Ut(()=>{se()}),u({recordTap:H,recordSwipe:ee,getIsRecording:le}),(te,O)=>(A(),B("div",Pa,[f(d(Xt),{value:L.value,"onUpdate:value":O[1]||(O[1]=N=>L.value=N),type:"segment"},{default:p(()=>[f(d(vt),{name:"record",tab:_.value.recordTab},{default:p(()=>[f(ra,{recorder:d(I),"current-playback-index":d(F).currentIndex.value,"is-playback-active":d(F).isPlaying.value,t:_.value,onToggleRecording:k,onTogglePause:Q,onClearRecording:ue,onSaveRecording:O[0]||(O[0]=N=>E.value=!0),onEditAction:fe,onDeleteAction:xe},null,8,["recorder","current-playback-index","is-playback-active","t"])]),_:1},8,["tab"]),f(d(vt),{name:"playback",tab:_.value.playbackTab},{default:p(()=>[f(ga,{player:d(F),recordings:w.value,loading:$.value,"is-recording-active":d(I).isRecording.value,t:_.value,"common-t":d(R).t.common,onRefreshRecordings:se,onStartPlayback:S,onLoadRecording:D,onDeleteRecording:b},null,8,["player","recordings","loading","is-recording-active","t","common-t"])]),_:1},8,["tab"])]),_:1},8,["value"]),f(d(Wt),{show:E.value,"onUpdate:show":O[5]||(O[5]=N=>E.value=N),preset:"dialog",title:"保存录制"},{action:p(()=>[f(d(Oe),{justify:"end"},{default:p(()=>[f(d(re),{onClick:O[4]||(O[4]=N=>E.value=!1)},{default:p(()=>[...O[6]||(O[6]=[Z("取消",-1)])]),_:1}),f(d(re),{type:"primary",onClick:he},{default:p(()=>[...O[7]||(O[7]=[Z("保存",-1)])]),_:1})]),_:1})]),default:p(()=>[f(d(Kt),{model:X.value},{default:p(()=>[f(d(xt),{label:"分组"},{default:p(()=>[f(d(ot),{value:X.value.group,"onUpdate:value":O[2]||(O[2]=N=>X.value.group=N),placeholder:"default"},null,8,["value"])]),_:1}),f(d(xt),{label:"名称"},{default:p(()=>[f(d(ot),{value:X.value.name,"onUpdate:value":O[3]||(O[3]=N=>X.value.name=N),placeholder:"my-recording"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show"])]))}}),Fa=ze(Aa,[["__scopeId","data-v-9c87bac5"]]),$a={class:"package-panel"},Ta={class:"package-content"},Ua={class:"install-section"},Da={class:"package-list-section"},Ea={key:0,class:"loading-state"},Ra={class:"loading-text"},Ma={key:1,class:"empty-state"},Ba={class:"empty-hint"},La={key:2,class:"package-list"},Oa={class:"package-info"},za={class:"package-name"},Ia={class:"package-id"},Na={key:0,class:"package-version"},ja=ie({__name:"PackagePanel",props:{platform:{},serial:{}},setup(o){const u=o,l=Xe(),h=We(),g=ce(()=>h.t.package),m=G([]),R=G(!1),_=G(""),M=G(""),L=ce(()=>{if(!_.value)return m.value;const F=_.value.toLowerCase();return m.value.filter(k=>k.name.toLowerCase().includes(F)||k.package.toLowerCase().includes(F))});async function w(){R.value=!0;try{const F=await Ae(u.platform,u.serial,"appList",{});Array.isArray(F)?(m.value=F.map(k=>{const Q=k.package||k.packageName||k.pkg||"";return{name:k.name||k.label||k.appName||Q,package:Q,version:k.version||k.versionName||k.ver||""}}).filter(k=>k.package),l.success(`已加载 ${m.value.length} 个应用`)):l.error("应用列表格式错误")}catch(F){l.error(`加载应用列表失败: ${F instanceof Error?F.message:String(F)}`)}finally{R.value=!1}}async function $(F){try{await Ae(u.platform,u.serial,"appLaunch",{package:F}),l.success(g.value.appLaunched)}catch(k){l.error(`${g.value.launch} failed: ${k instanceof Error?k.message:String(k)}`)}}async function E(F){try{await Ae(u.platform,u.serial,"uninstallApp",{package:F}),l.success(g.value.appUninstalled),await w()}catch(k){l.error(`${g.value.uninstall} failed: ${k instanceof Error?k.message:String(k)}`)}}async function X(F){try{await Ae(u.platform,u.serial,"clearApp",{package:F}),l.success(g.value.dataCleared)}catch(k){l.error(`${g.value.clear} failed: ${k instanceof Error?k.message:String(k)}`)}}async function Y(F){try{const Q=`${window.location.origin}/api/${u.platform}/${u.serial}/backupApp?package=${encodeURIComponent(F)}`,ue=document.createElement("a");ue.href=Q,ue.download=`${F}.apk`,ue.click(),l.success(`Downloading: ${F}.apk`)}catch(k){l.error(`Backup failed: ${k instanceof Error?k.message:String(k)}`)}}async function I(){if(M.value.trim())try{await Ae(u.platform,u.serial,"installApp",{path:M.value}),l.success(`Installed: ${M.value}`),M.value="",await w()}catch(F){l.error(`Install failed: ${F instanceof Error?F.message:String(F)}`)}}return(F,k)=>{const Q=Re("n-input"),ue=Re("n-button"),he=Re("n-space"),xe=Re("n-icon"),fe=Re("n-spin"),se=Re("n-empty");return A(),B("div",$a,[y("div",Ta,[f(he,{vertical:"",size:16},{default:p(()=>[y("div",Ua,[y("h4",null,T(g.value.currentApp),1),f(he,{size:8},{default:p(()=>[f(Q,{value:M.value,"onUpdate:value":k[0]||(k[0]=D=>M.value=D),placeholder:"APK file path",style:{flex:"1"}},null,8,["value"]),f(ue,{type:"primary",onClick:I,disabled:!M.value.trim()},{default:p(()=>[...k[2]||(k[2]=[Z(" Install ",-1)])]),_:1},8,["disabled"])]),_:1})]),y("div",Da,[f(he,{justify:"space-between",align:"center",style:{"margin-bottom":"12px"}},{default:p(()=>[y("h4",null,T(g.value.installedApps)+" ("+T(L.value.length)+")",1),f(he,{size:8},{default:p(()=>[f(Q,{value:_.value,"onUpdate:value":k[1]||(k[1]=D=>_.value=D),placeholder:d(h).t.common.search+"...",clearable:"",style:{width:"200px"}},null,8,["value","placeholder"]),f(ue,{onClick:w,loading:R.value},{icon:p(()=>[f(xe,null,{default:p(()=>[f(d(dt))]),_:1})]),default:p(()=>[Z(" "+T(d(h).t.common.refresh),1)]),_:1},8,["loading"])]),_:1})]),_:1}),R.value?(A(),B("div",Ea,[f(fe,{size:"large"}),y("div",Ra,T(d(h).t.common.loading),1)])):L.value.length===0?(A(),B("div",Ma,[f(se,{description:g.value.noApps},null,8,["description"]),y("div",Ba,[y("p",null,'点击"'+T(d(h).t.common.refresh)+'"按钮加载已安装的应用列表',1),k[3]||(k[3]=y("p",{class:"empty-hint-small"},"如果一直无法加载，请检查设备连接状态",-1))])])):(A(),B("div",La,[(A(!0),B(Ve,null,Ge(L.value,D=>(A(),B("div",{key:D.package,class:"package-item"},[y("div",Oa,[y("div",za,T(D.name||"未知应用"),1),y("div",Ia,T(D.package||"无包名"),1),D.version?(A(),B("div",Na,"v"+T(D.version),1)):Se("",!0)]),f(he,{size:8},{default:p(()=>[f(ue,{size:"small",onClick:b=>$(D.package)},{default:p(()=>[Z(T(g.value.launch),1)]),_:1},8,["onClick"]),f(ue,{size:"small",onClick:b=>Y(D.package)},{icon:p(()=>[f(xe,null,{default:p(()=>[f(d(wn))]),_:1})]),default:p(()=>[k[4]||(k[4]=Z(" Backup ",-1))]),_:1},8,["onClick"]),f(ue,{size:"small",onClick:b=>X(D.package)},{default:p(()=>[Z(T(g.value.clear),1)]),_:1},8,["onClick"]),f(ue,{size:"small",type:"error",onClick:b=>E(D.package)},{default:p(()=>[Z(T(g.value.uninstall),1)]),_:1},8,["onClick"])]),_:2},1024)]))),128))]))])]),_:1})])])}}}),Ha=ze(ja,[["__scopeId","data-v-fff7dce7"]]),Va={class:"device-page"},Ga={class:"page-header"},Xa={class:"serial"},Wa={class:"main-area"},Ka={class:"control-sidebar"},Ya={class:"control-group"},Ja={class:"control-group"},qa={class:"control-group"},Za={key:0,class:"control-group"},Qa={class:"vertical-text"},ei={class:"screen-content"},ti={class:"text-input-bar"},ni={class:"screenshot-area"},ri={key:0,class:"property-details-panel"},ai={class:"xpath-selector-bar"},ii={class:"xpath-select-wrapper"},oi={key:0,class:"xpath-display-bar"},si={class:"xpath-text"},li={key:0,class:"siblings-nav"},ci={class:"property-details-table"},ui={class:"property-cell label-cell"},di={class:"property-cell value-cell"},fi={class:"right-panel"},hi=ie({__name:"Device",props:{platform:{},serial:{}},setup(o){const u=o,l=tn(),h=Xe(),g=Qe(),m=Yt(),R=We(),_=G(null),M=G("hierarchy"),L=G(!1),w=ce(()=>R.t.device),$=G(""),E=G(450),X=G(!1);function Y(e){X.value=!0,e.preventDefault()}function I(e){if(!X.value)return;const i=e.clientX;i>=300&&i<=800&&(E.value=i,localStorage.setItem("screenPanelWidth",i.toString()))}function F(){X.value=!1}async function k(e,i={},v,x){try{await Ae(u.platform,u.serial,e,i),h.success(v)}catch(P){h.error(`${x}: ${P instanceof Error?P.message:String(P)}`)}}const Q=()=>k("volumeUp",{},"Volume up","Volume control failed"),ue=()=>k("volumeDown",{},"Volume down","Volume control failed"),he=()=>k("volumeMute",{},"Volume muted","Volume control failed"),xe=G(""),fe=G("id"),se=(e,i)=>{if(!i)return"";switch(e){case"id":return i.resource_id?`//*[@resource-id="${i.resource_id}"]`:"";case"content-desc":return i.content_desc?`//*[@content-desc="${i.content_desc}"]`:"";case"text":return i.text?`//*[@text="${i.text}"]`:"";case"class_and_text":return i.class_name&&i.text?`//${i.class_name}[@text="${i.text}"]`:"";case"class":return i.class_name?`//${i.class_name}`:"";default:return i.xpath||""}},D=ce(()=>{const e=U.value;if(!e)return[];const i=(x,P)=>{if(!P||!g.hierarchy?.nodes)return 0;let z=0;function j(q){q.forEach(de=>{se(x,de)===P&&z++,de.children&&j(de.children)})}return j(g.hierarchy.nodes),z};return[{label:"id",value:"id",xpath:se("id",e)},{label:"class_and_text",value:"class_and_text",xpath:se("class_and_text",e)},{label:"class",value:"class",xpath:se("class",e)},{label:"text",value:"text",xpath:se("text",e)}].map(x=>({...x,count:x.xpath?i(x.value,x.xpath):0}))}),b=ce(()=>se(fe.value,U.value)),S=G([]),H=G(-1);function ee(e){if(S.value=[],H.value=-1,!e||!g.hierarchy?.nodes)return;const i=se(fe.value,e);if(!i)return;const v=[];function x(P){P.forEach(z=>{se(fe.value,z)===i&&v.push(z),z.children&&x(z.children)})}x(g.hierarchy.nodes),v.length>1&&(S.value=v,H.value=v.findIndex(P=>P.key===e.key))}function le(e){e>=0&&e<S.value.length&&g.selectNode(S.value[e])}function te({option:e}){return e.label}function O(e){return ve("div",{class:"xpath-option"},[ve("span",{class:"xpath-option-label"},e.label),ve("div",{class:"xpath-option-right"},[e.xpath?ve("span",{class:"xpath-option-preview"},e.xpath):null,e.count>0?ve("span",{class:"xpath-option-count"},e.count.toString()):null].filter(Boolean))])}async function N(){if(!xe.value.trim()){h.warning("Please enter text");return}try{await Ae(u.platform,u.serial,"sendKeys",{text:xe.value}),h.success(`Sent: ${xe.value}`),xe.value=""}catch(e){h.error(`Send text failed: ${e instanceof Error?e.message:String(e)}`)}}async function C(){try{await Ae(u.platform,u.serial,"clearText",{}),h.success("Text cleared")}catch(e){h.error(`Clear text failed: ${e instanceof Error?e.message:String(e)}`)}}const W=()=>k("home",{},"Home","Home failed"),K=()=>k("back",{},"Back","Back failed"),ke=()=>k("appSwitch",{},"App Switch","App Switch failed"),ye=()=>k("wakeUp",{},"Wake Up","Wake Up failed"),Te=()=>k("terminate",{},"Terminated current app","Terminate failed"),Pe=ce(()=>{switch(u.platform){case"android":return mt;case"ios":return rn;case"harmony":return kt;default:return mt}}),V=ce(()=>{const e=g.screenSize;return{width:e?.width||0,height:e?.height||0}}),U=ce(()=>g.selectedNode);Le(()=>[U.value,fe.value],([e])=>{ee(e)},{immediate:!0});function J(e){const i={};if(e.index!==void 0&&(i.index=String(e.index)),e.text&&(i.text=e.text),e.resource_id&&(i["resource-id"]=e.resource_id),e.class_name&&(i.class=e.class_name),e.package&&(i.package=e.package),e.content_desc&&(i["content-desc"]=e.content_desc),e.checkable!==void 0&&(i.checkable=String(e.checkable)),e.checked!==void 0&&(i.checked=String(e.checked)),e.clickable!==void 0&&(i.clickable=String(e.clickable)),e.enabled!==void 0&&(i.enabled=String(e.enabled)),e.focusable!==void 0&&(i.focusable=String(e.focusable)),e.focused!==void 0&&(i.focused=String(e.focused)),e.scrollable!==void 0&&(i.scrollable=String(e.scrollable)),e.long_clickable!==void 0&&(i["long-clickable"]=String(e.long_clickable)),e.password!==void 0&&(i.password=String(e.password)),e.selected!==void 0&&(i.selected=String(e.selected)),e.visible_to_user!==void 0&&(i["visible-to-user"]=String(e.visible_to_user)),e.bounds){const[v,x,P,z]=e.bounds;i.bounds=`[${v},${x}][${P},${z}]`}return i}const oe=ce(()=>{if(!U.value)return[];const e=U.value,i=[];if(e.index!==void 0&&i.push({label:"index",value:e.index}),e.text&&i.push({label:"text",value:e.text}),e.resource_id&&i.push({label:"resource-id",value:e.resource_id}),e.class_name&&i.push({label:"class",value:e.class_name}),e.package&&i.push({label:"package",value:e.package}),e.content_desc&&i.push({label:"content-desc",value:e.content_desc}),e.checkable!==void 0&&i.push({label:"checkable",value:e.checkable}),e.checked!==void 0&&i.push({label:"checked",value:e.checked}),e.clickable!==void 0&&i.push({label:"clickable",value:e.clickable}),e.enabled!==void 0&&i.push({label:"enabled",value:e.enabled}),e.focusable!==void 0&&i.push({label:"focusable",value:e.focusable}),e.focused!==void 0&&i.push({label:"focused",value:e.focused}),e.scrollable!==void 0&&i.push({label:"scrollable",value:e.scrollable}),e.long_clickable!==void 0&&i.push({label:"long-clickable",value:e.long_clickable}),e.password!==void 0&&i.push({label:"password",value:e.password}),e.selected!==void 0&&i.push({label:"selected",value:e.selected}),e.visible_to_user!==void 0&&i.push({label:"visible-to-user",value:e.visible_to_user}),e.bounds){const[v,x,P,z]=e.bounds;i.push({label:"bounds",value:`[${v},${x}][${P},${z}]`})}return e.rect&&(i.push({label:"rect.x",value:e.rect.x}),i.push({label:"rect.y",value:e.rect.y}),i.push({label:"rect.width",value:e.rect.width}),i.push({label:"rect.height",value:e.rect.height})),e.xpath&&i.push({label:"xpath",value:e.xpath}),i.push({label:"raw",value:JSON.stringify(J(e),null,2)}),i});function ne(e,i){}async function Ce(e,i,v){if(_.value)try{await _.value.recordTap(e,i,v)}catch(x){h.error(`录制点击失败: ${x instanceof Error?x.message:String(x)}`),console.error("Failed to record tap:",x)}}async function ge(e,i,v,x,P,z){if(_.value)try{await _.value.recordSwipe(e,i,v,x,P,z)}catch(j){h.error(`录制滑动失败: ${j instanceof Error?j.message:String(j)}`),console.error("Failed to record swipe:",j)}}async function De(){if(!U.value||!U.value.bounds){h.warning("请先选择一个元素");return}try{const[e,i,v,x]=U.value.bounds,P=Math.round((e+v)/2),z=Math.round((i+x)/2);await ut(u.platform,u.serial,P,z),h.success(`点击元素: (${P}, ${z})`),_.value?.getIsRecording?.()&&(await _.value.recordTap(P,z,U.value),h.info("已录制点击操作"))}catch(e){h.error(`点击失败: ${e instanceof Error?e.message:String(e)}`)}}async function Ee(){await g.refreshHierarchy();try{const e=await Ae(u.platform,u.serial,"currentApp",{});e&&typeof e=="object"&&"package"in e&&($.value=e.package||"")}catch{}}function Ie(){navigator.clipboard.writeText(u.serial),h.success("Copied")}function Ne(e,i){l.push(`/${e}/${i}`)}function a(){const e=b.value;if(!e){h.warning("No XPath available");return}navigator.clipboard.writeText(e),h.success("XPath copied")}function c(e){(e.key==="r"||e.key==="R")&&!e.ctrlKey&&!e.metaKey&&(e.preventDefault(),Ee())}Ut(()=>{const e=localStorage.getItem("screenPanelWidth");e&&(E.value=parseInt(e,10)),document.addEventListener("mousemove",I),document.addEventListener("mouseup",F),g.setDevice(u.platform,u.serial),Ee(),document.addEventListener("keydown",c)}),ct(()=>{document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",F),document.removeEventListener("keydown",c)}),Le(()=>[u.platform,u.serial],()=>{g.setDevice(u.platform,u.serial),Ee()});const t=()=>k("swipeUp",{},"Swiped up","Swipe failed"),n=()=>k("swipeDown",{},"Swiped down","Swipe failed"),r=()=>k("swipeLeft",{},"Swiped left","Swipe failed"),s=()=>k("swipeRight",{},"Swiped right","Swipe failed");return(e,i)=>(A(),B("div",Va,[y("header",Ga,[f(d(Oe),{align:"center",size:12},{default:p(()=>[f(d(re),{secondary:"",size:"small",onClick:i[0]||(i[0]=v=>L.value=!0)},{icon:p(()=>[f(d(ae),null,{default:p(()=>[f(d(wt))]),_:1})]),default:p(()=>[Z(" "+T(w.value.selectDevice),1)]),_:1}),f(d(ae),{size:"20",color:"#18a058"},{default:p(()=>[(A(),_e(gt(Pe.value)))]),_:1}),y("span",Xa,T(o.serial),1),f(d(re),{text:"",size:"small",onClick:Ie},{icon:p(()=>[f(d(ae),{size:"14"},{default:p(()=>[f(d(St))]),_:1})]),_:1}),f(d(Tt),{size:"small"},{default:p(()=>[f(d(re),{type:M.value==="hierarchy"?"primary":"default",secondary:M.value!=="hierarchy",onClick:i[1]||(i[1]=v=>M.value="hierarchy")},{default:p(()=>[Z(T(w.value.hierarchy),1)]),_:1},8,["type","secondary"]),f(d(re),{type:M.value==="actions"?"primary":"default",secondary:M.value!=="actions",onClick:i[2]||(i[2]=v=>M.value="actions")},{default:p(()=>[Z(T(w.value.actions),1)]),_:1},8,["type","secondary"]),f(d(re),{type:M.value==="package"?"primary":"default",secondary:M.value!=="package",onClick:i[3]||(i[3]=v=>M.value="package")},{default:p(()=>[Z(T(w.value.package),1)]),_:1},8,["type","secondary"])]),_:1})]),_:1}),f(d(Oe),{align:"center",size:16},{default:p(()=>[f(d($e),{placement:"bottom"},{trigger:p(()=>[f(d(re),{quaternary:"",circle:"",onClick:Ee,loading:d(g).loading},{icon:p(()=>[f(d(ae),{size:"20"},{default:p(()=>[f(d(dt))]),_:1})]),_:1},8,["loading"])]),default:p(()=>[Z(" "+T(w.value.refresh),1)]),_:1}),f(d(re),{quaternary:"",circle:"",onClick:d(m).toggleTheme},{icon:p(()=>[f(d(ae),{size:"20"},{default:p(()=>[(A(),_e(gt(d(m).isDark?d(kt):d(Un))))]),_:1})]),_:1},8,["onClick"]),f(d(At),{value:d(R).locale,"onUpdate:value":i[4]||(i[4]=v=>d(R).locale=v),size:"small"},{default:p(()=>[f(d(Je),{value:"zh"},{default:p(()=>[...i[8]||(i[8]=[Z("中文",-1)])]),_:1}),f(d(Je),{value:"en"},{default:p(()=>[...i[9]||(i[9]=[Z("English",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),y("div",Wa,[y("div",{class:"screen-panel",style:Jt({width:E.value+"px"})},[y("div",Ka,[y("div",Ya,[f(d($e),{placement:"right"},{trigger:p(()=>[f(d(re),{quaternary:"",circle:"",size:"small",onClick:W},{icon:p(()=>[f(d(ae),{size:"18"},{default:p(()=>[f(d($n))]),_:1})]),_:1})]),default:p(()=>[Z(" "+T(w.value.home),1)]),_:1}),f(d($e),{placement:"right"},{trigger:p(()=>[f(d(re),{quaternary:"",circle:"",size:"small",onClick:K},{icon:p(()=>[f(d(ae),{size:"18"},{default:p(()=>[f(d(bt))]),_:1})]),_:1})]),default:p(()=>[Z(" "+T(w.value.back),1)]),_:1}),f(d($e),{placement:"right"},{trigger:p(()=>[f(d(re),{quaternary:"",circle:"",size:"small",onClick:ke},{icon:p(()=>[f(d(ae),{size:"18"},{default:p(()=>[f(d(wt))]),_:1})]),_:1})]),default:p(()=>[Z(" "+T(w.value.apps),1)]),_:1}),f(d($e),{placement:"right"},{trigger:p(()=>[f(d(re),{quaternary:"",circle:"",size:"small",onClick:ye},{icon:p(()=>[f(d(ae),{size:"18"},{default:p(()=>[f(d(Nn))]),_:1})]),_:1})]),default:p(()=>[Z(" "+T(w.value.wake),1)]),_:1}),f(d($e),{placement:"right"},{trigger:p(()=>[f(d(re),{quaternary:"",circle:"",size:"small",onClick:Te},{icon:p(()=>[f(d(ae),{size:"18"},{default:p(()=>[f(d(ft))]),_:1})]),_:1})]),default:p(()=>[Z(" "+T(w.value.stop),1)]),_:1})]),y("div",Ja,[f(d($e),{placement:"right"},{trigger:p(()=>[f(d(re),{quaternary:"",circle:"",size:"small",onClick:ue},{icon:p(()=>[f(d(ae),{size:"18"},{default:p(()=>[f(d(er))]),_:1})]),_:1})]),default:p(()=>[Z(" "+T(w.value.volumeDown),1)]),_:1}),f(d($e),{placement:"right"},{trigger:p(()=>[f(d(re),{quaternary:"",circle:"",size:"small",onClick:he},{icon:p(()=>[f(d(ae),{size:"18"},{default:p(()=>[f(d(nr))]),_:1})]),_:1})]),default:p(()=>[Z(" "+T(w.value.volumeMute),1)]),_:1}),f(d($e),{placement:"right"},{trigger:p(()=>[f(d(re),{quaternary:"",circle:"",size:"small",onClick:Q},{icon:p(()=>[f(d(ae),{size:"18"},{default:p(()=>[f(d(Zn))]),_:1})]),_:1})]),default:p(()=>[Z(" "+T(w.value.volumeUp),1)]),_:1})]),y("div",qa,[f(d($e),{placement:"right"},{trigger:p(()=>[f(d(re),{circle:"",size:"small",onClick:t},{icon:p(()=>[f(d(ae),{size:"18"},{default:p(()=>[f(d(fn))]),_:1})]),_:1})]),default:p(()=>[Z(" "+T(w.value.swipeUp),1)]),_:1}),f(d($e),{placement:"right"},{trigger:p(()=>[f(d(re),{circle:"",size:"small",onClick:n},{icon:p(()=>[f(d(ae),{size:"18"},{default:p(()=>[f(d(cn))]),_:1})]),_:1})]),default:p(()=>[Z(" "+T(w.value.swipeDown),1)]),_:1}),f(d($e),{placement:"right"},{trigger:p(()=>[f(d(re),{circle:"",size:"small",onClick:r},{icon:p(()=>[f(d(ae),{size:"18"},{default:p(()=>[f(d(bt))]),_:1})]),_:1})]),default:p(()=>[Z(" "+T(w.value.swipeLeft),1)]),_:1}),f(d($e),{placement:"right"},{trigger:p(()=>[f(d(re),{circle:"",size:"small",onClick:s},{icon:p(()=>[f(d(ae),{size:"18"},{default:p(()=>[f(d(Et))]),_:1})]),_:1})]),default:p(()=>[Z(" "+T(w.value.swipeRight),1)]),_:1})]),U.value?(A(),B("div",Za,[f(d(re),{type:"primary",size:"small",onClick:De,class:"vertical-text-btn"},{default:p(()=>[y("span",Qa,T(w.value.tapElement),1)]),_:1})])):Se("",!0)]),y("div",ei,[y("div",ti,[f(d(ot),{value:xe.value,"onUpdate:value":i[5]||(i[5]=v=>xe.value=v),size:"small",placeholder:"Enter text to send...",onKeydown:Ft(N,["enter"]),style:{flex:"1"}},null,8,["value"]),f(d($e),null,{trigger:p(()=>[f(d(re),{type:"primary",size:"small",onClick:N,disabled:!xe.value.trim()},{icon:p(()=>[f(d(ae),null,{default:p(()=>[f(d(Kn))]),_:1})]),_:1},8,["disabled"])]),default:p(()=>[i[10]||(i[10]=Z(" Send ",-1))]),_:1}),f(d($e),null,{trigger:p(()=>[f(d(re),{quaternary:"",size:"small",onClick:C},{icon:p(()=>[f(d(ae),null,{default:p(()=>[f(d(ht))]),_:1})]),_:1})]),default:p(()=>[i[11]||(i[11]=Z(" Clear ",-1))]),_:1})]),y("div",ni,[f(d(qt),{show:d(g).loading,style:{width:"100%",height:"100%"}},{default:p(()=>[d(g).screenshotUrl?(A(),_e(Fr,{key:0,platform:o.platform,serial:o.serial,"screen-size":V.value,onTap:ne,onRecordTap:Ce,onRecordSwipe:ge},null,8,["platform","serial","screen-size"])):Se("",!0)]),_:1},8,["show"])])])],4),y("div",{class:"resize-handle",onMousedown:Y},null,32),M.value==="hierarchy"?(A(),B("div",ri,[y("div",ai,[i[12]||(i[12]=y("span",{class:"xpath-label"},"XPath by",-1)),y("div",ii,[f(d(Zt),{value:fe.value,"onUpdate:value":i[6]||(i[6]=v=>fe.value=v),options:D.value,"render-label":O,"render-tag":te,"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),f(d(re),{size:"small",quaternary:"",circle:"",onClick:a,disabled:!b.value},{icon:p(()=>[f(d(ae),null,{default:p(()=>[f(d(St))]),_:1})]),_:1},8,["disabled"])]),b.value?(A(),B("div",oi,[y("div",si,T(b.value),1),S.value.length>1?(A(),B("div",li,[(A(!0),B(Ve,null,Ge(S.value,(v,x)=>(A(),_e(d(re),{key:x,size:"small",type:x===H.value?"info":"default",secondary:x!==H.value,circle:"",onClick:P=>le(x),class:"sibling-btn"},{default:p(()=>[Z(T(x+1),1)]),_:2},1032,["type","secondary","onClick"]))),128))])):Se("",!0)])):Se("",!0),y("div",ci,[(A(!0),B(Ve,null,Ge(oe.value,v=>(A(),B("div",{key:v.label,class:"property-row"},[y("div",ui,T(v.label),1),y("div",di,[f(d(ae),{class:"circle-icon"},{default:p(()=>[f(d(st))]),_:1}),y("span",null,T(v.value),1)])]))),128)),oe.value.length===0?(A(),_e(d(Ze),{key:0,description:"No element selected"})):Se("",!0)])])):Se("",!0),y("div",fi,[M.value==="hierarchy"?(A(),_e(Nr,{key:0,platform:o.platform,serial:o.serial},null,8,["platform","serial"])):Se("",!0),Qt(f(Fa,{ref_key:"actionsPanelRef",ref:_,platform:o.platform,serial:o.serial},null,8,["platform","serial"]),[[en,M.value==="actions"]]),M.value==="package"?(A(),_e(Ha,{key:1,platform:o.platform,serial:o.serial},null,8,["platform","serial"])):Se("",!0)])]),f(an,{show:L.value,"onUpdate:show":i[7]||(i[7]=v=>L.value=v),onSelect:Ne},null,8,["show"])]))}}),xi=ze(hi,[["__scopeId","data-v-fad54e77"]]);export{xi as default};
