import{d as de,c as V,o as D,k as ht,a as w,l as en,r as H,b as le,m as et,n as tn,p as De,q as nn,s as rn,v as qe,e as d,u as s,N as Ot,w as h,i as tt,j as Q,f as ue,t as E,x as ke,y as ct,z as Se,A as Re,C as zt,F as je,D as Ye,E as xe,g as ze,B as se,G as Ke,H as It,I as Lt,J as nt,K as an,L as dt,M as bt,O as on,P as pt,Q as vt,R as Te,S as Oe,T as Ne,U as St,V as sn,W as Nt,X as ln,Y as _t,Z as un,_ as cn,$ as Ee,a0 as dn,a1 as fn,a2 as hn,a3 as pn,a4 as Ct,h as vn}from"./index-C2LoMiY0.js";import{g as mn,a as jt,s as Ae,u as Ge,t as mt,_ as Ie,c as $t,R as ft,L as Pt,S as At,b as yn,D as xn,d as gn}from"./i18n-DLzem_Om.js";const wn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ft=de({name:"AppsOutline",render:function(u,l){return D(),V("svg",wn,l[0]||(l[0]=[ht('<rect x="64" y="64" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="216" y="64" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="368" y="64" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="64" y="216" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="216" y="216" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="368" y="216" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="64" y="368" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="216" y="368" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect><rect x="368" y="368" width="80" height="80" rx="40" ry="40" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></rect>',9)]))}}),kn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Tt=de({name:"ArrowBackOutline",render:function(u,l){return D(),V("svg",kn,l[0]||(l[0]=[w("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M244 400L100 256l144-144"},null,-1),w("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M120 256h292"},null,-1)]))}}),bn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Sn=de({name:"ArrowDownOutline",render:function(u,l){return D(),V("svg",bn,l[0]||(l[0]=[w("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M112 268l144 144l144-144"},null,-1),w("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M256 392V100"},null,-1)]))}}),_n={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ht=de({name:"ArrowForwardOutline",render:function(u,l){return D(),V("svg",_n,l[0]||(l[0]=[w("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M268 112l144 144l-144 144"},null,-1),w("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M392 256H100"},null,-1)]))}}),Cn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},$n=de({name:"ArrowUpOutline",render:function(u,l){return D(),V("svg",Cn,l[0]||(l[0]=[w("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M112 244l144-144l144 144"},null,-1),w("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M256 120v292"},null,-1)]))}}),Pn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},An=de({name:"CloseOutline",render:function(u,l){return D(),V("svg",Pn,l[0]||(l[0]=[w("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 368L144 144"},null,-1),w("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 144L144 368"},null,-1)]))}}),Fn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Et=de({name:"CopyOutline",render:function(u,l){return D(),V("svg",Fn,l[0]||(l[0]=[w("rect",{x:"128",y:"128",width:"336",height:"336",rx:"57",ry:"57",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),w("path",{d:"M383.5 128l.5-24a56.16 56.16 0 0 0-56-56H112a64.19 64.19 0 0 0-64 64v216a56.16 56.16 0 0 0 56 56h24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),Tn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Vt=de({name:"CreateOutline",render:function(u,l){return D(),V("svg",Tn,l[0]||(l[0]=[w("path",{d:"M384 224v184a40 40 0 0 1-40 40H104a40 40 0 0 1-40-40V168a40 40 0 0 1 40-40h167.48",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),w("path",{d:"M459.94 53.25a16.06 16.06 0 0 0-23.22-.56L424.35 65a8 8 0 0 0 0 11.31l11.34 11.32a8 8 0 0 0 11.34 0l12.06-12c6.1-6.09 6.67-16.01.85-22.38z",fill:"currentColor"},null,-1),w("path",{d:"M399.34 90L218.82 270.2a9 9 0 0 0-2.31 3.93L208.16 299a3.91 3.91 0 0 0 4.86 4.86l24.85-8.35a9 9 0 0 0 3.93-2.31L422 112.66a9 9 0 0 0 0-12.66l-9.95-10a9 9 0 0 0-12.71 0z",fill:"currentColor"},null,-1)]))}}),En={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Un=de({name:"DocumentOutline",render:function(u,l){return D(),V("svg",En,l[0]||(l[0]=[w("path",{d:"M416 221.25V416a48 48 0 0 1-48 48H144a48 48 0 0 1-48-48V96a48 48 0 0 1 48-48h98.75a32 32 0 0 1 22.62 9.37l141.26 141.26a32 32 0 0 1 9.37 22.62z",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),w("path",{d:"M256 56v120a32 32 0 0 0 32 32h120",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),Dn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Mn=de({name:"DownloadOutline",render:function(u,l){return D(),V("svg",Dn,l[0]||(l[0]=[w("path",{d:"M336 176h40a40 40 0 0 1 40 40v208a40 40 0 0 1-40 40H136a40 40 0 0 1-40-40V216a40 40 0 0 1 40-40h40",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),w("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M176 272l80 80l80-80"},null,-1),w("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 48v288"},null,-1)]))}}),Bn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Rn=de({name:"EyeOutline",render:function(u,l){return D(),V("svg",Bn,l[0]||(l[0]=[w("path",{d:"M255.66 112c-77.94 0-157.89 45.11-220.83 135.33a16 16 0 0 0-.27 17.77C82.92 340.8 161.8 400 255.66 400c92.84 0 173.34-59.38 221.79-135.25a16.14 16.14 0 0 0 0-17.47C428.89 172.28 347.8 112 255.66 112z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),w("circle",{cx:"256",cy:"256",r:"80",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1)]))}}),On={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},zn=de({name:"FingerPrintOutline",render:function(u,l){return D(),V("svg",On,l[0]||(l[0]=[w("path",{d:"M390.42 75.28a10.45 10.45 0 0 1-5.32-1.44C340.72 50.08 302.35 40 256.35 40c-45.77 0-89.23 11.28-128.76 33.84C122 77 115.11 74.8 111.87 69a12.4 12.4 0 0 1 4.63-16.32A281.81 281.81 0 0 1 256.35 16c49.23 0 92.23 11.28 139.39 36.48a12 12 0 0 1 4.85 16.08a11.3 11.3 0 0 1-10.17 6.72zm-330.79 126a11.73 11.73 0 0 1-6.7-2.16a12.26 12.26 0 0 1-2.78-16.8c22.89-33.6 52-60 86.69-78.48c72.58-38.84 165.51-39.12 238.32-.24c34.68 18.48 63.8 44.64 86.69 78a12.29 12.29 0 0 1-2.78 16.8a11.26 11.26 0 0 1-16.18-2.88c-20.8-30.24-47.15-54-78.36-70.56c-66.34-35.28-151.18-35.28-217.29.24c-31.44 16.8-57.79 40.8-78.59 71a10 10 0 0 1-9.02 5.08zM204.1 491a10.66 10.66 0 0 1-8.09-3.6C175.9 466.48 165 453 149.55 424c-16-29.52-24.27-65.52-24.27-104.16c0-71.28 58.71-129.36 130.84-129.36S387 248.56 387 319.84a11.56 11.56 0 1 1-23.11 0c0-58.08-48.32-105.36-107.72-105.36S148.4 261.76 148.4 319.84c0 34.56 7.39 66.48 21.49 92.4c14.8 27.6 25 39.36 42.77 58.08a12.67 12.67 0 0 1 0 17a12.44 12.44 0 0 1-8.56 3.68zm165.75-44.4c-27.51 0-51.78-7.2-71.66-21.36a129.1 129.1 0 0 1-55-105.36a11.57 11.57 0 1 1 23.12 0a104.28 104.28 0 0 0 44.84 85.44c16.41 11.52 35.6 17 58.72 17a147.41 147.41 0 0 0 24-2.4c6.24-1.2 12.25 3.12 13.4 9.84a11.92 11.92 0 0 1-9.47 13.92a152.28 152.28 0 0 1-27.95 2.88zM323.38 496a13 13 0 0 1-3-.48c-36.76-10.56-60.8-24.72-86-50.4c-32.37-33.36-50.16-77.76-50.16-125.28c0-38.88 31.9-70.56 71.19-70.56s71.2 31.68 71.2 70.56c0 25.68 21.5 46.56 48.08 46.56s48.08-20.88 48.08-46.56c0-90.48-75.13-163.92-167.59-163.92c-65.65 0-125.75 37.92-152.79 96.72c-9 19.44-13.64 42.24-13.64 67.2c0 18.72 1.61 48.24 15.48 86.64c2.32 6.24-.69 13.2-6.7 15.36a11.34 11.34 0 0 1-14.79-7a276.39 276.39 0 0 1-16.88-95c0-28.8 5.32-55 15.72-77.76c30.75-67 98.94-110.4 173.6-110.4c105.18 0 190.71 84.24 190.71 187.92c0 38.88-31.9 70.56-71.2 70.56s-71.2-31.68-71.2-70.56c.01-25.68-21.49-46.6-48.07-46.6s-48.08 20.88-48.08 46.56c0 41 15.26 79.44 43.23 108.24c22 22.56 43 35 75.59 44.4c6.24 1.68 9.71 8.4 8.09 14.64a11.39 11.39 0 0 1-10.87 9.16z",fill:"currentColor"},null,-1)]))}}),In={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ln=de({name:"FolderOutline",render:function(u,l){return D(),V("svg",In,l[0]||(l[0]=[w("path",{d:"M440 432H72a40 40 0 0 1-40-40V120a40 40 0 0 1 40-40h75.89a40 40 0 0 1 22.19 6.72l27.84 18.56a40 40 0 0 0 22.19 6.72H440a40 40 0 0 1 40 40v240a40 40 0 0 1-40 40z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),w("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M32 192h448"},null,-1)]))}}),Nn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},jn=de({name:"HomeOutline",render:function(u,l){return D(),V("svg",Nn,l[0]||(l[0]=[w("path",{d:"M80 212v236a16 16 0 0 0 16 16h96V328a24 24 0 0 1 24-24h80a24 24 0 0 1 24 24v136h96a16 16 0 0 0 16-16V212",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),w("path",{d:"M480 256L266.89 52c-5-5.28-16.69-5.34-21.78 0L32 256",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),w("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M400 179V64h-48v69"},null,-1)]))}}),Hn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Vn=de({name:"MoonOutline",render:function(u,l){return D(),V("svg",Hn,l[0]||(l[0]=[w("path",{d:"M160 136c0-30.62 4.51-61.61 16-88C99.57 81.27 48 159.32 48 248c0 119.29 96.71 216 216 216c88.68 0 166.73-51.57 200-128c-26.39 11.49-57.38 16-88 16c-119.29 0-216-96.71-216-216z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),Gn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Xn=de({name:"PauseOutline",render:function(u,l){return D(),V("svg",Gn,l[0]||(l[0]=[w("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M176 96h16v320h-16z"},null,-1),w("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M320 96h16v320h-16z"},null,-1)]))}}),Wn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Jn=de({name:"PlayCircleOutline",render:function(u,l){return D(),V("svg",Wn,l[0]||(l[0]=[w("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),w("path",{d:"M216.32 334.44l114.45-69.14a10.89 10.89 0 0 0 0-18.6l-114.45-69.14a10.78 10.78 0 0 0-16.32 9.31v138.26a10.78 10.78 0 0 0 16.32 9.31z",fill:"currentColor"},null,-1)]))}}),Yn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},qn=de({name:"PlayOutline",render:function(u,l){return D(),V("svg",Yn,l[0]||(l[0]=[w("path",{d:"M112 111v290c0 17.44 17 28.52 31 20.16l247.9-148.37c12.12-7.25 12.12-26.33 0-33.58L143 90.84c-14-8.36-31 2.72-31 20.16z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1)]))}}),Kn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Zn=de({name:"PlaySkipForwardOutline",render:function(u,l){return D(),V("svg",Kn,l[0]||(l[0]=[w("path",{d:"M112 111v290c0 17.44 17 28.52 31 20.16l247.9-148.37c12.12-7.25 12.12-26.33 0-33.58L143 90.84c-14-8.36-31 2.72-31 20.16z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),w("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32",d:"M400 80v352"},null,-1)]))}}),Qn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},er=de({name:"PowerOutline",render:function(u,l){return D(),V("svg",Qn,l[0]||(l[0]=[w("path",{d:"M378 108a191.41 191.41 0 0 1 70 148c0 106-86 192-192 192S64 362 64 256a192 192 0 0 1 69-148",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),w("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 64v192"},null,-1)]))}}),tr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},yt=de({name:"RefreshOutline",render:function(u,l){return D(),V("svg",tr,l[0]||(l[0]=[w("path",{d:"M320 146s24.36-12-64-12a160 160 0 1 0 160 160",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1),w("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 58l80 80l-80 80"},null,-1)]))}}),nr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},rr=de({name:"SaveOutline",render:function(u,l){return D(),V("svg",nr,l[0]||(l[0]=[w("path",{d:"M380.93 57.37A32 32 0 0 0 358.3 48H94.22A46.21 46.21 0 0 0 48 94.22v323.56A46.21 46.21 0 0 0 94.22 464h323.56A46.36 46.36 0 0 0 464 417.78V153.7a32 32 0 0 0-9.37-22.63zM256 416a64 64 0 1 1 64-64a63.92 63.92 0 0 1-64 64zm48-224H112a16 16 0 0 1-16-16v-64a16 16 0 0 1 16-16h192a16 16 0 0 1 16 16v64a16 16 0 0 1-16 16z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),ar={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},or=de({name:"SearchOutline",render:function(u,l){return D(),V("svg",ar,l[0]||(l[0]=[w("path",{d:"M221.09 64a157.09 157.09 0 1 0 157.09 157.09A157.1 157.1 0 0 0 221.09 64z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),w("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32",d:"M338.29 338.29L448 448"},null,-1)]))}}),ir={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},sr=de({name:"SendOutline",render:function(u,l){return D(),V("svg",ir,l[0]||(l[0]=[w("path",{d:"M470.3 271.15L43.16 447.31a7.83 7.83 0 0 1-11.16-7V327a8 8 0 0 1 6.51-7.86l247.62-47c17.36-3.29 17.36-28.15 0-31.44l-247.63-47a8 8 0 0 1-6.5-7.85V72.59c0-5.74 5.88-10.26 11.16-8L470.3 241.76a16 16 0 0 1 0 29.39z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),lr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ur=de({name:"SettingsOutline",render:function(u,l){return D(),V("svg",lr,l[0]||(l[0]=[w("path",{d:"M262.29 192.31a64 64 0 1 0 57.4 57.4a64.13 64.13 0 0 0-57.4-57.4zM416.39 256a154.34 154.34 0 0 1-1.53 20.79l45.21 35.46a10.81 10.81 0 0 1 2.45 13.75l-42.77 74a10.81 10.81 0 0 1-13.14 4.59l-44.9-18.08a16.11 16.11 0 0 0-15.17 1.75A164.48 164.48 0 0 1 325 400.8a15.94 15.94 0 0 0-8.82 12.14l-6.73 47.89a11.08 11.08 0 0 1-10.68 9.17h-85.54a11.11 11.11 0 0 1-10.69-8.87l-6.72-47.82a16.07 16.07 0 0 0-9-12.22a155.3 155.3 0 0 1-21.46-12.57a16 16 0 0 0-15.11-1.71l-44.89 18.07a10.81 10.81 0 0 1-13.14-4.58l-42.77-74a10.8 10.8 0 0 1 2.45-13.75l38.21-30a16.05 16.05 0 0 0 6-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 0 0-6.07-13.94l-38.19-30A10.81 10.81 0 0 1 49.48 186l42.77-74a10.81 10.81 0 0 1 13.14-4.59l44.9 18.08a16.11 16.11 0 0 0 15.17-1.75A164.48 164.48 0 0 1 187 111.2a15.94 15.94 0 0 0 8.82-12.14l6.73-47.89A11.08 11.08 0 0 1 213.23 42h85.54a11.11 11.11 0 0 1 10.69 8.87l6.72 47.82a16.07 16.07 0 0 0 9 12.22a155.3 155.3 0 0 1 21.46 12.57a16 16 0 0 0 15.11 1.71l44.89-18.07a10.81 10.81 0 0 1 13.14 4.58l42.77 74a10.8 10.8 0 0 1-2.45 13.75l-38.21 30a16.05 16.05 0 0 0-6.05 14.08c.33 4.14.55 8.3.55 12.47z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),cr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},xt=de({name:"StopCircleOutline",render:function(u,l){return D(),V("svg",cr,l[0]||(l[0]=[w("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),w("path",{d:"M310.4 336H201.6a25.62 25.62 0 0 1-25.6-25.6V201.6a25.62 25.62 0 0 1 25.6-25.6h108.8a25.62 25.62 0 0 1 25.6 25.6v108.8a25.62 25.62 0 0 1-25.6 25.6z",fill:"currentColor"},null,-1)]))}}),dr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},gt=de({name:"TrashOutline",render:function(u,l){return D(),V("svg",dr,l[0]||(l[0]=[ht('<path d="M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M80 112h352" fill="currentColor"></path><path d="M192 112V72h0a23.93 23.93 0 0 1 24-24h80a23.93 23.93 0 0 1 24 24h0v40" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M256 176v224"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M184 176l8 224"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M328 176l-8 224"></path>',6)]))}}),fr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},hr=de({name:"VolumeHighOutline",render:function(u,l){return D(),V("svg",fr,l[0]||(l[0]=[w("path",{d:"M126 192H56a8 8 0 0 0-8 8v112a8 8 0 0 0 8 8h69.65a15.93 15.93 0 0 1 10.14 3.54l91.47 74.89A8 8 0 0 0 240 392V120a8 8 0 0 0-12.74-6.43l-91.47 74.89A15 15 0 0 1 126 192z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),w("path",{d:"M320 320c9.74-19.38 16-40.84 16-64c0-23.48-6-44.42-16-64",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),w("path",{d:"M368 368c19.48-33.92 32-64.06 32-112s-12-77.74-32-112",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),w("path",{d:"M416 416c30-46 48-91.43 48-160s-18-113-48-160",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),pr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},vr=de({name:"VolumeLowOutline",render:function(u,l){return D(),V("svg",pr,l[0]||(l[0]=[w("path",{d:"M189.65 192H120a8 8 0 0 0-8 8v112a8 8 0 0 0 8 8h69.65a16 16 0 0 1 10.14 3.63l91.47 75a8 8 0 0 0 12.74-6.46V119.83a8 8 0 0 0-12.74-6.44l-91.47 75a16 16 0 0 1-10.14 3.61z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),w("path",{d:"M384 320c9.74-19.41 16-40.81 16-64c0-23.51-6-44.4-16-64",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),mr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},yr=de({name:"VolumeMuteOutline",render:function(u,l){return D(),V("svg",mr,l[0]||(l[0]=[ht('<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M416 432L64 80"></path><path d="M224 136.92v33.8a4 4 0 0 0 1.17 2.82l24 24a4 4 0 0 0 6.83-2.82v-74.15a24.53 24.53 0 0 0-12.67-21.72a23.91 23.91 0 0 0-25.55 1.83a8.27 8.27 0 0 0-.66.51l-31.94 26.15a4 4 0 0 0-.29 5.92l17.05 17.06a4 4 0 0 0 5.37.26z" fill="currentColor"></path><path d="M224 375.08l-78.07-63.92a32 32 0 0 0-20.28-7.16H64v-96h50.72a4 4 0 0 0 2.82-6.83l-24-24a4 4 0 0 0-2.82-1.17H56a24 24 0 0 0-24 24v112a24 24 0 0 0 24 24h69.76l91.36 74.8a8.27 8.27 0 0 0 .66.51a23.93 23.93 0 0 0 25.85 1.69A24.49 24.49 0 0 0 256 391.45v-50.17a4 4 0 0 0-1.17-2.82l-24-24a4 4 0 0 0-6.83 2.82zM125.82 336z" fill="currentColor"></path><path d="M352 256c0-24.56-5.81-47.88-17.75-71.27a16 16 0 0 0-28.5 14.54C315.34 218.06 320 236.62 320 256q0 4-.31 8.13a8 8 0 0 0 2.32 6.25l19.66 19.67a4 4 0 0 0 6.75-2A146.89 146.89 0 0 0 352 256z" fill="currentColor"></path><path d="M416 256c0-51.19-13.08-83.89-34.18-120.06a16 16 0 0 0-27.64 16.12C373.07 184.44 384 211.83 384 256c0 23.83-3.29 42.88-9.37 60.65a8 8 0 0 0 1.9 8.26l16.77 16.76a4 4 0 0 0 6.52-1.27C410.09 315.88 416 289.91 416 256z" fill="currentColor"></path><path d="M480 256c0-74.26-20.19-121.11-50.51-168.61a16 16 0 1 0-27 17.22C429.82 147.38 448 189.5 448 256c0 47.45-8.9 82.12-23.59 113a4 4 0 0 0 .77 4.55L443 391.39a4 4 0 0 0 6.4-1C470.88 348.22 480 307 480 256z" fill="currentColor"></path>',6)]))}});function xr(a,u){const l=[];let p=a;for(;p;){const g=gr(p,u);l.unshift(g),p=Gt(p,u)}return"/"+l.join("/")}function gr(a,u){if(a.resource_id)return`*[@resource-id="${a.resource_id}"]`;if(a.text&&a.text.trim())return`*[@text="${a.text}"]`;if(a.label&&a.label.trim())return`*[@label="${a.label}"]`;const l=a.class_name||"*",p=Gt(a,u);if(p){const g=p.children?.filter(y=>y.class_name===a.class_name)||[];if(g.length>1){const y=g.findIndex(U=>U.key===a.key);return`${l}[${y+1}]`}}return l}function Gt(a,u){for(const l of u)if(l.children?.some(p=>p.key===a.key))return l}function wr(a){const u=[];function l(p){u.push(p),p.children?.forEach(l)}return a.forEach(l),u}const rt=en("device",()=>{const a=H("android"),u=H(""),l=H(null),p=H(null),g=H(null),y=H(!1),U=H(null),T=H(0),C=le(()=>l.value?{width:l.value.width,height:l.value.height}:{width:0,height:0}),R=le(()=>u.value?(T.value,mn(a.value,u.value)):"");function x(b,P){a.value=b,u.value=P,l.value=null,p.value=null,U.value=null}async function _(){if(u.value){y.value=!0,U.value=null;try{l.value=await jt(a.value,u.value),T.value++}catch(b){U.value=b instanceof Error?b.message:String(b)}finally{y.value=!1}}}function $(b){if(b&&l.value){const P=wr(l.value.nodes);b.xpath=xr(b,P)}p.value=b}function G(){T.value++}function O(b){g.value=b}function M(b){b.hierarchy&&(l.value=b.hierarchy),b.screenshot&&T.value++}return{platform:a,serial:u,hierarchy:l,selectedNode:p,hoveredNode:g,loading:y,error:U,screenSize:C,screenshotUrl:R,setDevice:x,refreshHierarchy:_,selectNode:$,refreshScreenshot:G,setHoveredNode:O,updateFromRemote:M}});class wt{name;style;constructor(u,l){this.name=u,this.style=l}}class kr extends wt{x;y;width;height;constructor(u,l,p,g,y){super("rect",y),this.x=u,this.y=l,this.width=p,this.height=g}draw(u){u.beginPath(),u.rect(this.x,this.y,this.width,this.height),this.style==="select"?(u.fillStyle="rgba(255, 255, 0, 0.3)",u.strokeStyle="#FFD700",u.lineWidth=3):this.style==="hover"&&(u.fillStyle="rgba(0, 150, 255, 0.2)",u.strokeStyle="#0096FF",u.lineWidth=2),u.fill(),u.stroke()}}class br extends wt{x;y;canvasWidth;canvasHeight;constructor(u,l,p,g){super("crosshair","crosshair"),this.x=u,this.y=l,this.canvasWidth=p,this.canvasHeight=g}draw(u){u.beginPath(),u.strokeStyle="#FF0000",u.lineWidth=1,u.setLineDash([5,5]),u.moveTo(0,this.y),u.lineTo(this.canvasWidth,this.y),u.moveTo(this.x,0),u.lineTo(this.x,this.canvasHeight),u.stroke(),u.setLineDash([])}}class Sr extends wt{points;constructor(u){super("track","hover"),this.points=u}draw(u){if(this.points.length<2)return;u.beginPath(),u.strokeStyle="rgba(0, 150, 255, 0.8)",u.lineWidth=3,u.lineCap="round",u.lineJoin="round";const l=this.points[0];l&&u.moveTo(l.x,l.y);for(let p=1;p<this.points.length;p++){const g=this.points[p];g&&u.lineTo(g.x,g.y)}u.stroke()}}function _r(){const a=H(null),u=le(()=>a.value?.getContext("2d")||null),l=H([]);function p(_){return _.every($=>Number.isFinite($)&&$>=0&&$<=1)}function g(){if(!u.value||!a.value)return;const _=a.value;u.value.clearRect(0,0,_.width,_.height),l.value.forEach($=>{u.value&&$.draw(u.value)})}function y(_,$){if(!a.value)return;const[G,O,M,b]=_,P=a.value.width,K=a.value.height,te=p(_),ce=te?G*P:G,ge=te?O*K:O,Ce=te?M*P:M,ye=te?b*K:b,N=Math.min(ce,Ce),A=Math.min(ge,ye),I=Math.abs(Ce-ce),j=Math.abs(ye-ge);l.value.push(new kr(N,A,I,j,$)),g()}function U(_,$){a.value&&(l.value.push(new br(_,$,a.value.width,a.value.height)),g())}function T(_){l.value.push(new Sr(_)),g()}function C(){l.value=[],g()}function R(_){l.value=l.value.filter($=>$.style!==_),g()}function x(_,$){a.value&&(a.value.width=_,a.value.height=$,g())}return{canvasRef:a,addRect:y,addCrosshair:U,addTrack:T,clearShapes:C,clearShapesByType:R,resizeCanvas:x,redraw:g}}function Cr(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function $r(a){if(Object.prototype.hasOwnProperty.call(a,"__esModule"))return a;var u=a.default;if(typeof u=="function"){var l=function p(){var g=!1;try{g=this instanceof p}catch{}return g?Reflect.construct(u,arguments,this.constructor):u.apply(this,arguments)};l.prototype=u.prototype}else l={};return Object.defineProperty(l,"__esModule",{value:!0}),Object.keys(a).forEach(function(p){var g=Object.getOwnPropertyDescriptor(a,p);Object.defineProperty(l,p,g.get?g:{enumerable:!0,get:function(){return a[p]}})}),l}var Qe={exports:{}};const Pr={},Ar=Object.freeze(Object.defineProperty({__proto__:null,default:Pr},Symbol.toStringTag,{value:"Module"})),Fr=$r(Ar);var Tr=Qe.exports,Ut;function Er(){return Ut||(Ut=1,(function(a,u){(function(l,p){a.exports=p(Fr)})(Tr,(function(l){function p(e,c){(c==null||c>e.length)&&(c=e.length);for(var t=0,n=Array(c);t<c;t++)n[t]=e[t];return n}function g(e){if(Array.isArray(e))return e}function y(e){if(Array.isArray(e))return p(e)}function U(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,c){if(!(e instanceof c))throw new TypeError("Cannot call a class as a function")}function C(e,c){for(var t=0;t<c.length;t++){var n=c[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,A(n.key),n)}}function R(e,c,t){return c&&C(e.prototype,c),t&&C(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function x(e,c){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=j(e))||c){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(k){throw k},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,f=!0,m=!1;return{s:function(){t=t.call(e)},n:function(){var k=t.next();return f=k.done,k},e:function(k){m=!0,o=k},f:function(){try{f||t.return==null||t.return()}finally{if(m)throw o}}}}function _(e){var c=M();return function(){var t,n=G(e);if(c){var r=G(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return ce(this,t)}}function $(e,c,t){return(c=A(c))in e?Object.defineProperty(e,c,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[c]=t,e}function G(e){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(c){return c.__proto__||Object.getPrototypeOf(c)},G(e)}function O(e,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(c&&c.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),c&&ge(e,c)}function M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M=function(){return!!e})()}function b(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function P(e,c){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n,r,o,f,m=[],k=!0,S=!1;try{if(o=(t=t.call(e)).next,c!==0)for(;!(k=(n=o.call(t)).done)&&(m.push(n.value),m.length!==c);k=!0);}catch(i){S=!0,r=i}finally{try{if(!k&&t.return!=null&&(f=t.return(),Object(f)!==f))return}finally{if(S)throw r}}return m}}function K(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function te(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ce(e,c){if(c&&(typeof c=="object"||typeof c=="function"))return c;if(c!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U(e)}function ge(e,c){return ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},ge(e,c)}function Ce(e,c){return g(e)||P(e,c)||j(e,c)||K()}function ye(e){return y(e)||b(e)||j(e)||te()}function N(e,c){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,c);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function A(e){var c=N(e,"string");return typeof c=="symbol"?c:c+""}function I(e){"@babel/helpers - typeof";return I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},I(e)}function j(e,c){if(e){if(typeof e=="string")return p(e,c);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?p(e,c):void 0}}var L,re;function ve(e,c){L=e,re=c}function J(e){if(L){for(var c=arguments.length,t=new Array(c>1?c-1:0),n=1;n<c;n++)t[n-1]=arguments[n];L.apply(void 0,[e].concat(t))}}function Y(e){if(re){for(var c=arguments.length,t=new Array(c>1?c-1:0),n=1;n<c;n++)t[n-1]=arguments[n];re.apply(void 0,[e].concat(t))}}var B=(function(){function e(c){T(this,e),this.listener={},this.type=c|""}return R(e,[{key:"on",value:function(t,n){return this.listener[t]||(this.listener[t]=[]),this.listener[t].push(n),!0}},{key:"off",value:function(t,n){if(this.listener[t]){var r=this.listener[t].indexOf(n);return r>-1&&this.listener[t].splice(r,1),!0}return!1}},{key:"offAll",value:function(){this.listener={}}},{key:"dispatch",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return this.listener[t]?(this.listener[t].map(function(f){f.apply(null,r)}),!0):!1}}]),e})(),Z=(function(){function e(){T(this,e)}return R(e,null,[{key:"init",value:function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],hev1:[],hvcC:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var t;for(t in e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:r};var o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),f=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=f,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var m=new Uint8Array([105,115,111,109]),k=new Uint8Array([97,118,99,49]),S=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,m,S,m,k),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,o))}},{key:"box",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var f=8,m=r.length,k=m,S;m--;)f+=r[m].byteLength;for(S=new Uint8Array(f),S[0]=f>>24&255,S[1]=f>>16&255,S[2]=f>>8&255,S[3]=f&255,S.set(t,4),m=0,f=8;m<k;++m)S.set(r[m],f),f+=r[m].byteLength;return S}},{key:"hdlr",value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}},{key:"mdhd",value:function(t,n){return e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255,85,196,0,0]))}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))}},{key:"mfhd",value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255]))}},{key:"minf",value:function(t){return t.type==="audio"?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))}},{key:"moof",value:function(t,n,r){return e.box(e.types.moof,e.mfhd(t),e.traf(r,n))}},{key:"moov",value:function(t,n,r){for(var o=t.length,f=[];o--;)f[o]=e.trak(t[o]);return e.box.apply(null,[e.types.moov,e.mvhd(r,n)].concat(f).concat(e.mvex(t)))}},{key:"mvex",value:function(t){for(var n=t.length,r=[];n--;)r[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(r))}},{key:"mvhd",value:function(t,n){var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,t>>24&255,t>>16&255,t>>8&255,t&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,r)}},{key:"sdtp",value:function(t){var n=t.samples||[],r=new Uint8Array(4+n.length),o,f;for(f=0;f<n.length;f++)o=n[f].flags,r[f+4]=o.dependsOn<<4|o.isDependedOn<<2|o.hasRedundancy;return e.box(e.types.sdtp,r)}},{key:"stbl",value:function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))}},{key:"avc1",value:function(t){var n=[],r=[],o,f,m;for(o=0;o<t.sps.length;o++)f=t.sps[o],m=f.byteLength,n.push(m>>>8&255),n.push(m&255),n=n.concat(Array.prototype.slice.call(f));for(o=0;o<t.pps.length;o++)f=t.pps[o],m=f.byteLength,r.push(m>>>8&255),r.push(m&255),r=r.concat(Array.prototype.slice.call(f));var k=e.box(e.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|t.sps.length].concat(n).concat([t.pps.length]).concat(r))),S=t.width,i=t.height;return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,S>>8&255,S&255,i>>8&255,i&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,98,105,110,101,108,112,114,111,46,114,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),k,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"hev1",value:function(t){for(var n=[],r=[],o=[],f,m,k=0;k<(((S=t.vps)===null||S===void 0?void 0:S.length)||0);k++){var S;f=t.vps[k],m=f.byteLength,n.push(m>>>8&255,m&255),n=n.concat(Array.prototype.slice.call(f))}for(var i=0;i<(((v=t.sps)===null||v===void 0?void 0:v.length)||0);i++){var v;f=t.sps[i],m=f.byteLength,r.push(m>>>8&255,m&255),r=r.concat(Array.prototype.slice.call(f))}for(var F=0;F<(((z=t.pps)===null||z===void 0?void 0:z.length)||0);F++){var z;f=t.pps[F],m=f.byteLength,o.push(m>>>8&255,m&255),o=o.concat(Array.prototype.slice.call(f))}var ne=t.hvcC,fe=ne.profile_space,me=ne.tier_flag,be=ne.profile_idc,$e=ne.profile_compatibility_flags,_e=ne.constraint_indicator_flags,We=ne.level_idc,He=ne.chroma_format_idc,Je=e.box(e.types.hvcC,new Uint8Array([1,fe<<6|me<<5|be,$e>>24&255,$e>>16&255,$e>>8&255,$e&255].concat(ye(_e),[We,240,0,252,252|He,248,248,0,0,3,3,32,0,1],ye(n),[33,0,1],ye(r),[34,0,1],ye(o)))),Ve=t.width,we=t.height;return e.box(e.types.hev1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,Ve>>8&255,Ve&255,we>>8&255,we&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,98,105,110,101,108,112,114,111,46,114,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),Je,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"esds",value:function(t){var n=t.config.byteLength,r=new Uint8Array(26+n+3);return r.set([0,0,0,0,3,23+n,0,1,0,4,15+n,64,21,0,0,0,0,0,0,0,0,0,0,0,5,n]),r.set(t.config,26),r.set([6,1,2],26+n),r}},{key:"mp4a",value:function(t){var n=t.audiosamplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,n&255,0,0]),e.box(e.types.esds,e.esds(t)))}},{key:"stsd",value:function(t){return t.type==="audio"?e.box(e.types.stsd,e.STSD,e.mp4a(t)):t.codec.startsWith("hvc1")?e.box(e.types.stsd,e.STSD,e.hev1(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))}},{key:"tkhd",value:function(t){var n=t.id,r=t.duration,o=t.width,f=t.height,m=t.volume;return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,n&255,0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,r&255,0,0,0,0,0,0,0,0,0,0,0,0,m>>0&255,m%1*10>>0&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>8&255,o&255,0,0,f>>8&255,f&255,0,0]))}},{key:"traf",value:function(t,n){var r=e.sdtp(t),o=t.id;return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,o>>24,o>>16&255,o>>8&255,o&255])),e.box(e.types.tfdt,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255])),e.trun(t,r.length+16+16+8+16+8+8),r)}},{key:"trak",value:function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))}},{key:"trex",value:function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(t,n){var r=t.samples||[],o=r.length,f=12+16*o,m=new Uint8Array(f),k,S,i,v,F,z;for(n+=8+f,m.set([0,0,15,1,o>>>24&255,o>>>16&255,o>>>8&255,o&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255],0),k=0;k<o;k++)S=r[k],i=S.duration,v=S.size,F=S.flags,z=S.cts,m.set([i>>>24&255,i>>>16&255,i>>>8&255,i&255,v>>>24&255,v>>>16&255,v>>>8&255,v&255,F.isLeading<<2|F.dependsOn,F.isDependedOn<<6|F.hasRedundancy<<4|F.paddingValue<<1|F.isNonSync,F.degradPrio&61440,F.degradPrio&15,z>>>24&255,z>>>16&255,z>>>8&255,z&255],12+16*k);return e.box(e.types.trun,m)}},{key:"initSegment",value:function(t,n,r){e.types||e.init();var o=e.moov(t,n,r),f;return f=new Uint8Array(e.FTYP.byteLength+o.byteLength),f.set(e.FTYP),f.set(o,e.FTYP.byteLength),f}}]),e})(),ae=(function(){function e(){T(this,e)}return R(e,null,[{key:"samplingRateMap",get:function(){return[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]}},{key:"getHeaderLength",value:function(t){return t[1]&1?7:9}},{key:"getFrameLength",value:function(t){return(t[3]&3)<<11|t[4]<<3|(t[5]&224)>>>5}},{key:"isAACPattern",value:function(t){return t[0]===255&&(t[1]&240)===240&&(t[1]&6)===0}},{key:"extractAAC",value:function(t){var n=0,r=t.byteLength,o=[],f,m;if(!e.isAACPattern(t))return Y("Invalid ADTS audio format"),{valid:!1};f=e.getHeaderLength(t);for(var k=t.subarray(0,f);n<r;)m=e.getFrameLength(t),o.push(t.subarray(f,m)),t=t.slice(m),n+=m;return{valid:!0,header:k,slices:o}}}]),e})(),pe=1,X=(function(e){O(t,e);var c=_(t);function t(){return T(this,t),c.apply(this,arguments)}return R(t,[{key:"flush",value:function(){this.mp4track.len=0,this.mp4track.samples=[]}},{key:"isReady",value:function(){return!this.readyToDecode||!this.samples.length?null:!0}}],[{key:"getTrackID",value:function(){return pe++}}]),t})(B),q=(function(e){O(t,e);var c=_(t);function t(n,r,o){var f;return T(this,t),f=c.call(this,"AACRemuxer"),f.frameDuration=o,f.readyToDecode=!1,f.header=null,f.nextDts=0,f.dts=0,f.mp4track={id:X.getTrackID(),type:"audio",channelCount:0,len:0,fragmented:!0,timescale:n,duration:r,samples:[],config:"",codec:""},f.samples=[],f}return R(t,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.header=null,this.mp4track.codec="",this.mp4track.channelCount="",this.mp4track.config="",this.mp4track.timescale=this.timescale,this.nextDts=0,this.dts=0}},{key:"feed",value:function(r,o){var f=ae.extractAAC(r),m=f.valid,k=f.header,S=f.slices;return this.header||(this.header=k),m&&S.length>0?(this.remux(this.getAudioFrames(S,o)),!0):(Y("Failed to extract audio data from:",r),this.dispatch("outOfData"),!1)}},{key:"getAudioFrames",value:function(r,o){var f=[],m=0,k=0,S=x(r),i;try{for(S.s();!(i=S.n()).done;){var v=i.value;f.push({units:v})}}catch(F){S.e(F)}finally{S.f()}return m=o?o/f.length|0:this.frameDuration,k=o?o-m*f.length:0,f.map(function(F){F.duration=m,k>0&&(F.duration++,k--)}),f}},{key:"remux",value:function(r){if(r.length>0)for(var o=0;o<r.length;o++){var f=r[o],m=f.units,k=m.byteLength;this.samples.push({units:m,size:k,duration:f.duration}),this.mp4track.len+=k,this.readyToDecode||this.setAACConfig()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var r=new Uint8Array(this.mp4track.len),o=0,f=this.mp4track.samples,m,k;for(this.dts=this.nextDts;this.samples.length;){var S=this.samples.shift();if(S.units,k=S.duration,k<=0){J("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(k)),this.mp4track.len-=S.size;continue}this.nextDts+=k,m={size:S.size,duration:k,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},r.set(S.units,o),o+=S.size,f.push(m)}return f.length?new Uint8Array(r.buffer,0,this.mp4track.len):null}},{key:"setAACConfig",value:function(){var r,o,f,m=new Uint8Array(2);this.header&&(r=((this.header[2]&192)>>>6)+1,o=(this.header[2]&60)>>>2,f=(this.header[2]&1)<<2,f|=(this.header[3]&192)>>>6,m[0]=r<<3,m[0]|=(o&14)>>1,m[1]|=(o&1)<<7,m[1]|=f<<3,this.mp4track.codec="mp4a.40."+r,this.mp4track.channelCount=f,this.mp4track.config=m,this.readyToDecode=!0)}}]),t})(X),ie=(function(){function e(c){T(this,e),this.data=c,this.index=0,this.bitLength=c.byteLength*8}return R(e,[{key:"setData",value:function(t){this.data=t,this.index=0,this.bitLength=t.byteLength*8}},{key:"bitsAvailable",get:function(){return this.bitLength-this.index}},{key:"skipBits",value:function(t){if(this.bitsAvailable<t)return!1;this.index+=t}},{key:"readBits",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this.getBits(t,this.index,n);return r}},{key:"getBits",value:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(this.bitsAvailable<t)return 0;var o=n%8,f=this.data[n/8|0]&255>>>o,m=8-o;if(m>=t)return r&&(this.index+=t),f>>m-t;r&&(this.index+=m);var k=t-m;return f<<k|this.getBits(k,n+m,r)}},{key:"skipLZ",value:function(){var t;for(t=0;t<this.bitLength-this.index;++t)if(this.getBits(1,this.index+t,!1)!==0)return this.index+=t,t;return t}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var t=this.skipLZ();return this.readBits(t+1)-1}},{key:"readEG",value:function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)}},{key:"readBoolean",value:function(){return this.readBits(1)===1}},{key:"readUByte",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.readBits(t*8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}}]),e})(),Pe=(function(){function e(){T(this,e)}return R(e,null,[{key:"extractNALu",value:function(t){for(var n=0,r=t.byteLength,o=[],f=0,m=0;n<r;){var k=t[n++];if(k===0)m++;else if(k===1&&m>=2){var S=m+1;f!==n-S&&o.push(t.subarray(f,n-S)),f=n,m=0}else m=0}var i=null;return f<r&&(i=t.subarray(f,r)),[o,i]}},{key:"skipScalingList",value:function(t,n){for(var r=8,o=8,f,m=0;m<n;m++)o!==0&&(f=t.readEG(),o=(r+f+256)%256),r=o===0?r:o}},{key:"readSPS",value:function(t){var n=new ie(t),r=0,o=0,f=0,m=0,k=1,S,i,v,F,z,ne,fe=0;n.readUByte();for(var me=[],be=1,$e=t.byteLength,_e=be;_e<$e;_e++)_e+2<$e&&n.readBits(24,!1)===3?(me.push(n.readBits(8)),me.push(n.readBits(8)),_e+=2,n.readBits(8)):me.push(n.readBits(8));if(n.setData(new Uint8Array(me)),S=n.readUByte(),n.readBits(5),n.skipBits(3),n.readUByte(),n.skipUEG(),S===100||S===110||S===122||S===244||S===44||S===83||S===86||S===118||S===128){var We=n.readUEG();if(We===3&&n.skipBits(1),n.skipUEG(),n.skipUEG(),n.skipBits(1),n.readBoolean()){ne=We!==3?8:12;for(var He=0;He<ne;++He)n.readBoolean()&&(He<6?e.skipScalingList(n,16):e.skipScalingList(n,64))}}n.skipUEG();var Je=n.readUEG();if(Je===0)n.readUEG();else if(Je===1){n.skipBits(1),n.skipEG(),n.skipEG(),i=n.readUEG();for(var Ve=0;Ve<i;++Ve)n.skipEG()}if(n.skipUEG(),n.skipBits(1),v=n.readUEG(),F=n.readUEG(),z=n.readBits(1),z===0&&n.skipBits(1),n.skipBits(1),n.readBoolean()&&(r=n.readUEG(),o=n.readUEG(),f=n.readUEG(),m=n.readUEG()),n.readBoolean()){if(n.readBoolean()){var we,ot=n.readUByte();switch(ot){case 1:we=[1,1];break;case 2:we=[12,11];break;case 3:we=[10,11];break;case 4:we=[16,11];break;case 5:we=[40,33];break;case 6:we=[24,11];break;case 7:we=[20,11];break;case 8:we=[32,11];break;case 9:we=[80,33];break;case 10:we=[18,11];break;case 11:we=[15,11];break;case 12:we=[64,33];break;case 13:we=[160,99];break;case 14:we=[4,3];break;case 15:we=[3,2];break;case 16:we=[2,1];break;case 255:{we=[n.readUByte()<<8|n.readUByte(),n.readUByte()<<8|n.readUByte()];break}}we&&we[0]>0&&we[1]>0&&(k=we[0]/we[1])}if(n.readBoolean()&&n.skipBits(1),n.readBoolean()&&(n.skipBits(4),n.readBoolean()&&n.skipBits(24)),n.readBoolean()&&(n.skipUEG(),n.skipUEG()),n.readBoolean()){var it=n.readUInt(),st=n.readUInt(),Ze=n.readBoolean(),lt=st/(2*it);Ze&&(fe=lt)}}return{fps:fe>0?fe:void 0,width:Math.ceil(((v+1)*16-r*2-o*2)*k),height:(2-z)*(F+1)*16-(z?2:4)*(f+m)}}}]),e})(),Ue=(function(){function e(c){T(this,e),this.payload=c,this.nri=(this.payload[0]&96)>>5,this.nalUnitType=this.payload[0]&31,this._sliceType=null,this._isFirstSlice=!1}return R(e,[{key:"toString",value:function(){return"".concat(e.TYPES[this.type()]||"UNKNOWN",": NRI: ").concat(this.getNri())}},{key:"getNri",value:function(){return this.nri}},{key:"type",value:function(){return this.nalUnitType}},{key:"isKeyframe",get:function(){return this.nalUnitType===e.IDR}},{key:"isVCL",get:function(){return this.nalUnitType==e.IDR||this.nalUnitType==e.NDR}},{key:"parseHeader",value:function(){var t=new ie(this.getPayload());t.readUByte(),this._isFirstSlice=t.readUEG()===0,this._sliceType=t.readUEG()}},{key:"isFirstSlice",get:function(){return this._isFirstSlice||this.parseHeader(),this._isFirstSlice}},{key:"sliceType",get:function(){return this._sliceType||this.parseHeader(),this._sliceType}},{key:"getPayload",value:function(){return this.payload}},{key:"getPayloadSize",value:function(){return this.payload.byteLength}},{key:"getSize",value:function(){return 4+this.getPayloadSize()}},{key:"getData",value:function(){var t=new Uint8Array(this.getSize()),n=new DataView(t.buffer);return n.setUint32(0,this.getSize()-4),t.set(this.getPayload(),4),t}}],[{key:"NDR",get:function(){return 1}},{key:"IDR",get:function(){return 5}},{key:"SEI",get:function(){return 6}},{key:"SPS",get:function(){return 7}},{key:"PPS",get:function(){return 8}},{key:"AUD",get:function(){return 9}},{key:"TYPES",get:function(){var t;return t={},$(t,e.IDR,"IDR"),$(t,e.SEI,"SEI"),$(t,e.SPS,"SPS"),$(t,e.PPS,"PPS"),$(t,e.NDR,"NDR"),$(t,e.AUD,"AUD"),t}}]),e})();function Me(e,c){var t=new Uint8Array((e.byteLength|0)+(c.byteLength|0));return t.set(e,0),t.set(c,e.byteLength|0),t}function Fe(e){var c,t,n,r="";return c=Math.floor(e),t=parseInt(c/3600,10)%24,n=parseInt(c/60,10)%60,c=c<0?0:c%60,t>0&&(r+=(t<10?"0"+t:t)+":"),r+=(n<10?"0"+n:n)+":"+(c<10?"0"+c:c),r}var Xe=(function(e){O(t,e);var c=_(t);function t(n,r,o){var f;return T(this,t),f=c.call(this,"H264Remuxer"),f.frameDuration=o,f.readyToDecode=!1,f.nextDts=0,f.dts=0,f.mp4track={id:X.getTrackID(),type:"video",len:0,fragmented:!0,sps:"",pps:"",fps:30,width:0,height:0,timescale:n,duration:r,samples:[]},f.samples=[],f.remainingData=new Uint8Array,f.kfCounter=0,f.pendingUnits={},f}return R(t,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.mp4track.sps="",this.mp4track.pps="",this.nextDts=0,this.dts=0,this.remainingData=new Uint8Array,this.kfCounter=0,this.pendingUnits={}}},{key:"feed",value:function(r,o,f){var m=[],k;r=Me(this.remainingData,r);var S=Pe.extractNALu(r),i=Ce(S,2);return m=i[0],k=i[1],this.remainingData=k||new Uint8Array,m.length>0?(this.remux(this.getVideoFrames(m,o,f)),!0):(Y("Failed to extract any NAL units from video data:",k),this.dispatch("outOfData"),!1)}},{key:"getVideoFrames",value:function(r,o,f){var m=this,k=[],S=[],i=0,v=0,F=!1,z=!1;this.pendingUnits.units&&(k=this.pendingUnits.units,z=this.pendingUnits.vcl,F=this.pendingUnits.keyFrame,this.pendingUnits={});var ne=x(r),fe;try{for(ne.s();!(fe=ne.n()).done;){var me=fe.value,be=new Ue(me);k.length&&z&&(be.isFirstSlice||!be.isVCL)&&(S.push({units:k,keyFrame:F}),k=[],F=!1,z=!1),k.push(be),F=F||be.isKeyframe,z=z||be.isVCL}}catch(_e){ne.e(_e)}finally{ne.f()}if(k.length)if(!o)this.pendingUnits={units:k,keyFrame:F,vcl:z};else if(z)S.push({units:k,keyFrame:F});else{var $e=S.length-1;$e>=0&&(S[$e].units=S[$e].units.concat(k))}return i=o?o/S.length|0:this.frameDuration,v=o?o-i*S.length:0,S.map(function(_e){_e.duration=i,_e.compositionTimeOffset=f,v>0&&(_e.duration++,v--),m.kfCounter++,_e.keyFrame&&m.dispatch("keyframePosition",m.kfCounter*i/1e3)}),J("jmuxer: No. of H264 frames of the last chunk: ".concat(S.length)),S}},{key:"remux",value:function(r){var o=x(r),f;try{for(o.s();!(f=o.n()).done;){var m=f.value,k=[],S=0,i=x(m.units),v;try{for(i.s();!(v=i.n()).done;){var F=v.value;this.parseNAL(F)&&(k.push(F),S+=F.getSize())}}catch(z){i.e(z)}finally{i.f()}k.length>0&&this.readyToDecode&&(this.mp4track.len+=S,this.samples.push({units:k,size:S,keyFrame:m.keyFrame,duration:m.duration,compositionTimeOffset:m.compositionTimeOffset}))}}catch(z){o.e(z)}finally{o.f()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var r=new Uint8Array(this.mp4track.len),o=0,f=this.mp4track.samples,m,k;for(this.dts=this.nextDts;this.samples.length;){var S=this.samples.shift(),i=S.units;if(k=S.duration,k<=0){J("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(k)),this.mp4track.len-=S.size;continue}this.nextDts+=k,m={size:S.size,duration:k,cts:S.compositionTimeOffset||0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:S.keyFrame?0:1,dependsOn:S.keyFrame?2:1}};var v=x(i),F;try{for(v.s();!(F=v.n()).done;){var z=F.value;r.set(z.getData(),o),o+=z.getSize()}}catch(ne){v.e(ne)}finally{v.f()}f.push(m)}return f.length?new Uint8Array(r.buffer,0,this.mp4track.len):null}},{key:"parseSPS",value:function(r){var o=Pe.readSPS(new Uint8Array(r));this.mp4track.fps=o.fps||this.mp4track.fps,this.mp4track.width=o.width,this.mp4track.height=o.height,this.mp4track.sps=[new Uint8Array(r)],this.mp4track.codec="avc1.";for(var f=new DataView(r.buffer,r.byteOffset+1,4),m=0;m<3;++m){var k=f.getUint8(m).toString(16);k.length<2&&(k="0"+k),this.mp4track.codec+=k}}},{key:"parsePPS",value:function(r){this.mp4track.pps=[new Uint8Array(r)]}},{key:"parseNAL",value:function(r){if(!r)return!1;if(r.isVCL)return!0;var o=!1;switch(r.type()){case Ue.PPS:this.mp4track.pps||this.parsePPS(r.getPayload()),o=!0;break;case Ue.SPS:this.mp4track.sps||this.parseSPS(r.getPayload()),o=!0;break;case Ue.AUD:J("AUD - ignoing");break;case Ue.SEI:J("SEI - ignoing");break}return!this.readyToDecode&&this.mp4track.pps&&this.mp4track.sps&&(this.readyToDecode=!0),o}}]),t})(X),Le=(function(){function e(){T(this,e)}return R(e,null,[{key:"extractNALu",value:function(t){for(var n=0,r=t.byteLength,o=[],f=0,m=0;n<r;){var k=t[n++];if(k===0)m++;else if(k===1&&m>=2){var S=m+1;f!==n-S&&o.push(t.subarray(f,n-S)),f=n,m=0}else m=0}var i=null;return f<r&&(i=t.subarray(f,r)),[o,i]}},{key:"removeEmulationPreventionBytes",value:function(t){for(var n=[],r=0,o=0;o<t.length;o++){var f=t[o];if(r===2&&f===3){r=0;continue}n.push(f),f===0?r++:r=0}return new Uint8Array(n)}},{key:"readSPS",value:function(t){var n=new ie(t);n.readUByte(),n.readUByte(),n.readBits(4),n.readBits(3),n.readBits(1);for(var r=n.readBits(2),o=n.readBits(1),f=n.readBits(5),m=n.readUInt(),k=new Uint8Array(6),S=0;S<6;S++)k[S]=n.readUByte();var i=n.readUByte();n.readUEG();var v=n.readUEG();v===3&&n.readBits(1);var F=n.readUEG(),z=n.readUEG(),ne=n.readBoolean(),fe=0,me=0,be=0,$e=0;ne&&(fe=n.readUEG(),me=n.readUEG(),be=n.readUEG(),$e=n.readUEG());var _e=null,We=n.readBoolean();if(We){var He=n.readBoolean();if(He){var Je=n.readUByte();Je===255&&(n.readUShort(),n.readUShort())}var Ve=n.readBoolean();Ve&&n.readBoolean();var we=n.readBoolean();if(we){n.readBits(3),n.readBoolean();var ot=n.readBoolean();ot&&(n.readUByte(),n.readUByte(),n.readUByte())}var it=n.readBoolean();it&&(n.readUEG(),n.readUEG()),n.readBoolean(),n.readBoolean(),n.readBoolean();var st=n.readBoolean();if(st){var Ze=n.readUInt(),lt=n.readUInt();n.readBoolean(),Ze&&(_e=lt/(2*Ze))}}var qt=v===1||v===2?2:1,Kt=v===1?2:1,Zt=F-qt*(me+fe),Qt=z-Kt*(be+$e);return{width:Zt,height:Qt,profile_space:r,tier_flag:o,profile_idc:f,profile_compatibility_flags:m,constraint_indicator_flags:k,level_idc:i,chroma_format_idc:v,fps:_e}}}]),e})(),Be=(function(){function e(c){T(this,e),this.payload=c,this.nalUnitType=(c[0]&126)>>1,this.nuhLayerId=(c[0]&1)<<5|(c[1]&248)>>3,this.nuhTemporalIdPlus1=c[1]&7,this._isFirstSlice=null,this._sliceType=null}return R(e,[{key:"toString",value:function(){return"".concat(e.TYPES[this.type()]||"UNKNOWN ("+this.type()+")",": Layer: ").concat(this.nuhLayerId,", Temporal Id: ").concat(this.nuhTemporalIdPlus1)}},{key:"type",value:function(){return this.nalUnitType}},{key:"isKeyframe",get:function(){return[e.IDR_W_RADL,e.IDR_N_LP,e.CRA].includes(this.nalUnitType)}},{key:"isVCL",get:function(){return this.nalUnitType<=31}},{key:"parseHeader",value:function(){var t=new ie(this.getPayload());t.readUByte(),t.readUByte(),this._isFirstSlice=t.readBoolean(),this.isKeyframe&&t.readBits(1),t.readUEG(),this._sliceType=t.readUEG()}},{key:"isFirstSlice",get:function(){return this._isFirstSlice||this.parseHeader(),this._isFirstSlice}},{key:"sliceType",get:function(){return this._sliceType||this.parseHeader(),this._sliceType}},{key:"getPayload",value:function(){return this.payload}},{key:"getPayloadSize",value:function(){return this.payload.byteLength}},{key:"getSize",value:function(){return 4+this.getPayloadSize()}},{key:"getData",value:function(){var t=new Uint8Array(this.getSize()),n=new DataView(t.buffer);return n.setUint32(0,this.getSize()-4),t.set(this.getPayload(),4),t}}],[{key:"TRAIL_N",get:function(){return 0}},{key:"TRAIL_R",get:function(){return 1}},{key:"IDR_W_RADL",get:function(){return 19}},{key:"IDR_N_LP",get:function(){return 20}},{key:"CRA",get:function(){return 21}},{key:"VPS",get:function(){return 32}},{key:"SPS",get:function(){return 33}},{key:"PPS",get:function(){return 34}},{key:"AUD",get:function(){return 35}},{key:"SEI",get:function(){return 39}},{key:"SEI2",get:function(){return 40}},{key:"TYPES",get:function(){var t;return t={},$(t,e.TRAIL_N,"TRAIL_N"),$(t,e.TRAIL_R,"TRAIL_R"),$(t,e.IDR_W_RADL,"IDR"),$(t,e.IDR_N_LP,"IDR2"),$(t,e.CRA,"CRA"),$(t,e.VPS,"VPS"),$(t,e.SPS,"SPS"),$(t,e.PPS,"PPS"),$(t,e.AUD,"AUD"),$(t,e.SEI,"SEI"),$(t,e.SEI2,"SEI2"),t}}]),e})(),ee=(function(e){O(t,e);var c=_(t);function t(n,r,o){var f;return T(this,t),f=c.call(this,"H264Remuxer"),f.frameDuration=o,f.readyToDecode=!1,f.nextDts=0,f.dts=0,f.mp4track={id:X.getTrackID(),type:"video",len:0,fragmented:!0,vps:"",sps:"",pps:"",hvcC:{},fps:30,width:0,height:0,timescale:n,duration:r,samples:[]},f.samples=[],f.remainingData=new Uint8Array,f.kfCounter=0,f.pendingUnits={},f}return R(t,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.mp4track.vps="",this.mp4track.sps="",this.mp4track.pps="",this.mp4track.hvcC={},this.nextDts=0,this.dts=0,this.remainingData=new Uint8Array,this.kfCounter=0,this.pendingUnits={}}},{key:"feed",value:function(r,o,f){var m=[],k;r=Me(this.remainingData,r);var S=Le.extractNALu(r),i=Ce(S,2);return m=i[0],k=i[1],this.remainingData=k||new Uint8Array,m.length>0?(this.remux(this.getVideoFrames(m,o,f)),!0):(Y("Failed to extract any NAL units from video data:",k),this.dispatch("outOfData"),!1)}},{key:"getVideoFrames",value:function(r,o,f){var m=this,k=[],S=[],i=0,v=0,F=!1,z=!1;this.pendingUnits.units&&(k=this.pendingUnits.units,z=this.pendingUnits.vcl,F=this.pendingUnits.keyFrame,this.pendingUnits={});var ne=x(r),fe;try{for(ne.s();!(fe=ne.n()).done;){var me=fe.value,be=new Be(me);k.length&&z&&(be.isFirstSlice||!be.isVCL)&&(S.push({units:k,keyFrame:F}),k=[],F=!1,z=!1),k.push(be),F=F||be.isKeyframe,z=z||be.isVCL}}catch(_e){ne.e(_e)}finally{ne.f()}if(k.length)if(!o)this.pendingUnits={units:k,keyFrame:F,vcl:z};else if(z)S.push({units:k,keyFrame:F});else{var $e=S.length-1;$e>=0&&(S[$e].units=S[$e].units.concat(k))}return i=o?o/S.length|0:this.frameDuration,v=o?o-i*S.length:0,S.map(function(_e){_e.duration=i,_e.compositionTimeOffset=f,v>0&&(_e.duration++,v--),m.kfCounter++,_e.keyFrame&&m.dispatch("keyframePosition",m.kfCounter*i/1e3)}),J("jmuxer: No. of H265 frames of the last chunk: ".concat(S.length)),S}},{key:"remux",value:function(r){var o=x(r),f;try{for(o.s();!(f=o.n()).done;){var m=f.value,k=[],S=0,i=x(m.units),v;try{for(i.s();!(v=i.n()).done;){var F=v.value;this.parseNAL(F)&&(k.push(F),S+=F.getSize())}}catch(z){i.e(z)}finally{i.f()}k.length>0&&this.readyToDecode&&(this.mp4track.len+=S,this.samples.push({units:k,size:S,keyFrame:m.keyFrame,duration:m.duration,compositionTimeOffset:m.compositionTimeOffset}))}}catch(z){o.e(z)}finally{o.f()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var r=new Uint8Array(this.mp4track.len),o=0,f=this.mp4track.samples,m,k;for(this.dts=this.nextDts;this.samples.length;){var S=this.samples.shift(),i=S.units;if(k=S.duration,k<=0){J("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(k)),this.mp4track.len-=S.size;continue}this.nextDts+=k,m={size:S.size,duration:k,cts:S.compositionTimeOffset||0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:S.keyFrame?0:1,dependsOn:S.keyFrame?2:1}};var v=x(i),F;try{for(v.s();!(F=v.n()).done;){var z=F.value;r.set(z.getData(),o),o+=z.getSize()}}catch(ne){v.e(ne)}finally{v.f()}f.push(m)}return f.length?new Uint8Array(r.buffer,0,this.mp4track.len):null}},{key:"parseSPS",value:function(r){this.mp4track.sps=[new Uint8Array(r)],r=Le.removeEmulationPreventionBytes(r);var o=Le.readSPS(new Uint8Array(r));this.mp4track.fps=o.fps||this.mp4track.fps,this.mp4track.width=o.width,this.mp4track.height=o.height,this.mp4track.codec="hvc1.".concat(o.profile_idc,".").concat(o.profile_compatibility_flags.toString(16))+".L".concat(o.level_idc).concat(o.tier_flag?"H":"L")+".".concat(o.constraint_indicator_flags.map(function(f){return f.toString(16)}).join(".").toUpperCase()),this.mp4track.hvcC={profile_space:o.profile_space,tier_flag:o.tier_flag,profile_idc:o.profile_idc,profile_compatibility_flags:o.profile_compatibility_flags,constraint_indicator_flags:o.constraint_indicator_flags,level_idc:o.level_idc,chroma_format_idc:o.chroma_format_idc}}},{key:"parsePPS",value:function(r){this.mp4track.pps=[r]}},{key:"parseVPS",value:function(r){this.mp4track.vps=[r]}},{key:"parseNAL",value:function(r){if(!r)return!1;if(r.isVCL)return!0;var o=!1;switch(r.type()){case Be.VPS:this.mp4track.vps||this.parseVPS(r.getPayload()),o=!0;break;case Be.SPS:this.mp4track.sps||this.parseSPS(r.getPayload()),o=!0;break;case Be.PPS:this.mp4track.pps||this.parsePPS(r.getPayload()),o=!0;break;case Be.AUD:J("AUD - ignoing");break;case Be.SEI:case Be.SEI2:J("SEI - ignoing");break}return!this.readyToDecode&&this.mp4track.vps&&this.mp4track.sps&&this.mp4track.pps&&(this.readyToDecode=!0),o}}]),t})(X),W=(function(e){O(t,e);var c=_(t);function t(n,r,o,f){var m;return T(this,t),m=c.call(this,"remuxer"),m.videoCodec=o,m.frameDuration=f,m.initialized=!1,m.tracks={},m.seq=1,m.env=n,m.timescale=1e3,m.mediaDuration=r?4294967295:0,m}return R(t,[{key:"addTrack",value:function(r){var o=this;if((r==="video"||r==="both")&&(this.videoCodec=="H265"?this.tracks.video=new ee(this.timescale,this.mediaDuration,this.frameDuration):this.tracks.video=new Xe(this.timescale,this.mediaDuration,this.frameDuration),this.tracks.video.on("outOfData",function(){o.dispatch("missingVideoFrames")}),this.tracks.video.on("keyframePosition",function(m){o.dispatch("keyframePosition",m)})),r==="audio"||r==="both"){var f=new q(this.timescale,this.mediaDuration,this.frameDuration);this.tracks.audio=f,this.tracks.video.on("outOfData",function(){o.dispatch("missingAudioFrames")})}}},{key:"reset",value:function(){for(var r in this.tracks)this.tracks[r].resetTrack();this.initialized=!1}},{key:"destroy",value:function(){this.tracks={},this.offAll()}},{key:"flush",value:function(){if(!this.initialized){if(!this.isReady())return;this.dispatch("ready"),this.initSegment(),this.initialized=!0}for(var r in this.tracks){var o=this.tracks[r],f=o.getPayload();if(f&&f.byteLength){var m=Z.moof(this.seq,o.dts,o.mp4track),k=Z.mdat(f),S=Me(m,k),i={type:r,payload:S,dts:o.dts};r==="video"&&(i.fps=o.mp4track.fps),this.dispatch("buffer",i);var v=Fe(o.dts/this.timescale);J("put segment (".concat(r,"): dts: ").concat(o.dts," frames: ").concat(o.mp4track.samples.length," second: ").concat(v)),o.flush(),this.seq++}}}},{key:"initSegment",value:function(){var r=[];for(var o in this.tracks){var f=this.tracks[o];if(this.env=="browser"){var m={type:o,payload:Z.initSegment([f.mp4track],this.mediaDuration,this.timescale)};this.dispatch("buffer",m)}else r.push(f.mp4track)}if(this.env=="node"){var k={type:"all",payload:Z.initSegment(r,this.mediaDuration,this.timescale)};this.dispatch("buffer",k)}J("Initial segment generated.")}},{key:"isReady",value:function(){for(var r in this.tracks)if(!this.tracks[r].readyToDecode||!this.tracks[r].samples.length)return!1;return!0}},{key:"feed",value:function(r){var o=!1;if(r.video&&this.tracks.video&&(o|=this.tracks.video.feed(r.video,r.duration,r.compositionTimeOffset)),r.audio&&this.tracks.audio&&(o|=this.tracks.audio.feed(r.audio,r.duration)),!o){Y("Input object must have video and/or audio property. Make sure it is a valid typed array");return}this.flush()}}]),t})(B),oe=(function(e){O(t,e);var c=_(t);function t(n,r){var o;return T(this,t),o=c.call(this,"buffer"),o.type=r,o.queue=new Uint8Array,o.cleaning=!1,o.pendingCleaning=0,o.cleanOffset=30,o.cleanRanges=[],o.sourceBuffer=n,o.sourceBuffer.addEventListener("updateend",function(){if(o.pendingCleaning>0&&(o.initCleanup(o.pendingCleaning),o.pendingCleaning=0),o.cleaning=!1,o.cleanRanges.length){o.doCleanup();return}}),o.sourceBuffer.addEventListener("error",function(){o.dispatch("error",{type:o.type,name:"buffer",error:"buffer error"})}),o}return R(t,[{key:"destroy",value:function(){this.queue=null,this.sourceBuffer=null,this.offAll()}},{key:"doCleanup",value:function(){if(!this.cleanRanges.length){this.cleaning=!1;return}var r=this.cleanRanges.shift();J("".concat(this.type," remove range [").concat(r[0]," - ").concat(r[1],")")),this.cleaning=!0,this.sourceBuffer.remove(r[0],r[1])}},{key:"initCleanup",value:function(r){try{if(this.sourceBuffer.updating){this.pendingCleaning=r;return}if(this.sourceBuffer.buffered&&this.sourceBuffer.buffered.length&&!this.cleaning){for(var o=0;o<this.sourceBuffer.buffered.length;++o){var f=this.sourceBuffer.buffered.start(o),m=this.sourceBuffer.buffered.end(o);r-f>this.cleanOffset&&(m=r-this.cleanOffset,f<m&&this.cleanRanges.push([f,m]))}this.doCleanup()}}catch(k){Y("Error occured while cleaning ".concat(this.type," buffer - ").concat(k.name,": ").concat(k.message))}}},{key:"doAppend",value:function(){if(this.queue.length&&!(!this.sourceBuffer||this.sourceBuffer.updating))try{this.sourceBuffer.appendBuffer(this.queue),this.queue=new Uint8Array}catch(o){var r="unexpectedError";o.name==="QuotaExceededError"?(J("".concat(this.type," buffer quota full")),r="QuotaExceeded"):(Y("Error occured while appending ".concat(this.type," buffer - ").concat(o.name,": ").concat(o.message)),r="InvalidStateError"),this.dispatch("error",{type:this.type,name:r,error:"buffer error"})}}},{key:"feed",value:function(r){this.queue=Me(this.queue,r)}}]),t})(B),he=(function(e){O(t,e);var c=_(t);function t(n){var r;T(this,t),r=c.call(this,"jmuxer"),r.isReset=!1;var o={node:"",mode:"both",videoCodec:"H264",flushingTime:500,maxDelay:500,clearBuffer:!0,fps:30,readFpsFromTrack:!1,debug:!1,onReady:function(){},onData:function(){},onError:function(){},onUnsupportedCodec:function(){},onMissingVideoFrames:function(){},onMissingAudioFrames:function(){},onKeyframePosition:function(){},onLoggerLog:console.log,onLoggerErr:console.error};return r.options=Object.assign({},o,n),r.env=(typeof process>"u"?"undefined":I(process))==="object"&&typeof window>"u"?"node":"browser",r.options.debug&&ve(r.options.onLoggerLog,r.options.onLoggerErr),r.options.fps||(r.options.fps=30),r.frameDuration=1e3/r.options.fps|0,r.remuxController=new W(r.env,n.live,r.options.videoCodec,r.frameDuration),r.remuxController.addTrack(r.options.mode),r.initData(),r.remuxController.on("buffer",r.onBuffer.bind(U(r))),r.env=="browser"&&(r.remuxController.on("ready",r.createBuffer.bind(U(r))),r.initBrowser()),r.remuxController.on("missingVideoFrames",function(){typeof r.options.onMissingVideoFrames=="function"&&r.options.onMissingVideoFrames.call(null)}),r.remuxController.on("missingAudioFrames",function(){typeof r.options.onMissingAudioFrames=="function"&&r.options.onMissingAudioFrames.call(null)}),r.clearBuffer&&r.remuxController.on("keyframePosition",function(f){r.kfPosition.push(f)}),typeof r.options.onKeyframePosition=="function"&&r.remuxController.on("keyframePosition",function(f){r.options.onKeyframePosition.call(null,f)}),r}return R(t,[{key:"initData",value:function(){this.lastCleaningTime=Date.now(),this.kfPosition=[],this.pendingUnits={},this.remainingData=new Uint8Array,this.startInterval()}},{key:"initBrowser",value:function(){typeof this.options.node=="string"&&this.options.node==""&&Y("no video element were found to render, provide a valid video element"),this.node=typeof this.options.node=="string"?document.getElementById(this.options.node):this.options.node,this.mseReady=!1,this.setupMSE()}},{key:"createStream",value:function(){var r=this.feed.bind(this),o=this.destroy.bind(this);return this.stream=new l.Duplex({writableObjectMode:!0,read:function(m){},write:function(m,k,S){r(m),S()},final:function(m){o(),m()}}),this.stream}},{key:"setupMSE",value:function(){if(window.MediaSource=window.MediaSource||window.WebKitMediaSource||window.ManagedMediaSource,!window.MediaSource)throw"Oops! Browser does not support Media Source Extension or Managed Media Source (IOS 17+).";if(this.isMSESupported=!!window.MediaSource,this.mediaSource=new window.MediaSource,this.url=URL.createObjectURL(this.mediaSource),window.MediaSource===window.ManagedMediaSource)try{this.node.removeAttribute("src"),this.node.disableRemotePlayback=!0;var r=document.createElement("source");r.type="video/mp4",r.src=this.url,this.node.appendChild(r),this.node.load()}catch{this.node.src=this.url}else this.node.src=this.url;this.mseEnded=!1,this.mediaSource.addEventListener("sourceopen",this.onMSEOpen.bind(this)),this.mediaSource.addEventListener("sourceclose",this.onMSEClose.bind(this)),this.mediaSource.addEventListener("webkitsourceopen",this.onMSEOpen.bind(this)),this.mediaSource.addEventListener("webkitsourceclose",this.onMSEClose.bind(this))}},{key:"endMSE",value:function(){if(!this.mseEnded)try{this.mseEnded=!0,this.mediaSource.endOfStream()}catch{Y("mediasource is not available to end")}}},{key:"feed",value:function(r){!r||!this.remuxController||(r.duration=r.duration?parseInt(r.duration):0,this.remuxController.feed(r))}},{key:"destroy",value:function(){if(this.stopInterval(),this.stream&&(this.remuxController.flush(),this.stream.push(null),this.stream=null),this.remuxController&&(this.remuxController.destroy(),this.remuxController=null),this.bufferControllers){for(var r in this.bufferControllers)this.bufferControllers[r].destroy();this.bufferControllers=null,this.endMSE()}this.node=!1,this.mseReady=!1,this.videoStarted=!1,this.mediaSource=null}},{key:"reset",value:function(){if(this.stopInterval(),this.isReset=!0,this.node.pause(),this.remuxController&&this.remuxController.reset(),this.bufferControllers){for(var r in this.bufferControllers)this.bufferControllers[r].destroy();this.bufferControllers=null,this.endMSE()}this.initData(),this.env=="browser"&&this.initBrowser(),J("JMuxer was reset")}},{key:"createBuffer",value:function(){if(!(!this.mseReady||!this.remuxController||!this.remuxController.isReady()||this.bufferControllers)){this.bufferControllers={};for(var r in this.remuxController.tracks){var o=this.remuxController.tracks[r];if(!t.isSupported("".concat(r,'/mp4; codecs="').concat(o.mp4track.codec,'"')))return Y("Browser does not support codec: ".concat(r,'/mp4; codecs="').concat(o.mp4track.codec,'"')),typeof this.options.onUnsupportedCodec=="function"&&this.options.onUnsupportedCodec.call(null,o.mp4track.codec),!1;var f=this.mediaSource.addSourceBuffer("".concat(r,'/mp4; codecs="').concat(o.mp4track.codec,'"'));this.bufferControllers[r]=new oe(f,r),this.bufferControllers[r].on("error",this.onBufferError.bind(this))}}}},{key:"startInterval",value:function(){var r=this;this.interval=setInterval(function(){r.options.flushingTime?r.applyAndClearBuffer():r.bufferControllers&&r.cancelDelay()},this.options.flushingTime||1e3)}},{key:"stopInterval",value:function(){this.interval&&clearInterval(this.interval)}},{key:"cancelDelay",value:function(){if(this.node.buffered&&this.node.buffered.length>0&&!this.node.seeking){var r=this.node.buffered.end(0);r-this.node.currentTime>this.options.maxDelay/1e3&&(J("delay"),this.node.paused&&this.node.play().catch(Y),this.node.currentTime=r-.001)}}},{key:"releaseBuffer",value:function(){for(var r in this.bufferControllers)this.bufferControllers[r].doAppend()}},{key:"applyAndClearBuffer",value:function(){this.bufferControllers&&(this.releaseBuffer(),this.clearBuffer())}},{key:"getSafeClearOffsetOfBuffer",value:function(r){for(var o=this.options.mode==="audio"&&r||0,f,m=0;m<this.kfPosition.length&&!(this.kfPosition[m]>=r);m++)f=this.kfPosition[m];return f&&(this.kfPosition=this.kfPosition.filter(function(k){return k<f&&(o=k),k>=f})),o}},{key:"clearBuffer",value:function(){if(this.options.clearBuffer&&Date.now()-this.lastCleaningTime>1e4){for(var r in this.bufferControllers){var o=this.getSafeClearOffsetOfBuffer(this.node.currentTime);this.bufferControllers[r].initCleanup(o)}this.lastCleaningTime=Date.now()}}},{key:"onBuffer",value:function(r){this.options.readFpsFromTrack&&typeof r.fps<"u"&&this.options.fps!=r.fps&&(this.options.fps=r.fps,this.frameDuration=Math.ceil(1e3/r.fps),J("JMuxer changed FPS to ".concat(r.fps," from track data"))),this.env=="browser"?this.bufferControllers&&this.bufferControllers[r.type]&&this.bufferControllers[r.type].feed(r.payload):this.stream&&this.stream.push(r.payload),this.options.onData&&this.options.onData(r.payload),this.options.flushingTime===0&&this.applyAndClearBuffer()}},{key:"onMSEOpen",value:function(){this.mseReady=!0,URL.revokeObjectURL(this.url),typeof this.options.onReady=="function"&&this.options.onReady.call(null,this.isReset)}},{key:"onMSEClose",value:function(){this.mseReady=!1,this.videoStarted=!1}},{key:"onBufferError",value:function(r){if(r.name=="QuotaExceeded"){J("JMuxer cleaning ".concat(r.type," buffer due to QuotaExceeded error")),this.bufferControllers[r.type].initCleanup(this.node.currentTime);return}else r.name=="InvalidStateError"?(J("JMuxer is reseting due to InvalidStateError"),this.reset()):this.endMSE();typeof this.options.onError=="function"&&this.options.onError.call(null,r)}}],[{key:"isSupported",value:function(r){return window.MediaSource&&window.MediaSource.isTypeSupported(r)}}]),t})(B);return he}))})(Qe)),Qe.exports}var Ur=Er();const Dr=Cr(Ur);function Mr(a){const{platform:u,serial:l,videoRef:p}=a,g=H(!1),y=H(!1),U=H(null);let T=null,C=null,R=null;const x=3e3;function _(){if(!p.value){const M="Video element not ready";return U.value=M,console.error("[Scrcpy]",M),!1}try{return console.log("[Scrcpy] Initializing JMuxer for video element:",p.value),C=new Dr({node:p.value,mode:"video",flushingTime:0,fps:30,debug:!1}),console.log("[Scrcpy] JMuxer initialized successfully"),!0}catch(M){const b=`JMuxer init failed: ${M instanceof Error?M.message:String(M)}`;return U.value=b,console.error("[Scrcpy]",b,M),!1}}function $(){if(T&&T.readyState===WebSocket.OPEN){console.warn("[Scrcpy] WebSocket already connected");return}if(!p.value){console.warn("[Scrcpy] Video element not available, cannot connect");return}if(!(!C&&!_()))try{const b=`${location.protocol==="https:"?"wss:":"ws:"}//${location.host}/ws/${u.value}/scrcpy/${l.value}`;console.log(`[Scrcpy] Connecting to ${b}`),T=new WebSocket(b),T.binaryType="arraybuffer",T.onopen=()=>{g.value=!0,y.value=!1,U.value=null,console.log("[Scrcpy] Connected"),R&&(clearTimeout(R),R=null)},T.onmessage=P=>{if(P.data instanceof ArrayBuffer){if(C&&P.data.byteLength>0)try{C.feed({video:new Uint8Array(P.data)})}catch(K){console.error("[Scrcpy] JMuxer feed error:",K)}}else try{const K=JSON.parse(P.data);console.log("[Scrcpy] Control message:",K)}catch{console.warn("[Scrcpy] Invalid message:",P.data)}},T.onerror=P=>{const K="WebSocket connection error";console.error("[Scrcpy]",K,P),console.error("[Scrcpy] WebSocket URL was:",b),console.error("[Scrcpy] WebSocket readyState:",T?.readyState),U.value=K},T.onclose=()=>{g.value=!1,console.log("[Scrcpy] Disconnected"),!y.value&&p.value&&(y.value=!0,console.log(`[Scrcpy] Reconnecting in ${x}ms...`),R=setTimeout(()=>{$()},x))}}catch(M){U.value=`WebSocket init failed: ${M instanceof Error?M.message:String(M)}`,console.error("[Scrcpy] Connection error:",M)}}function G(){if(y.value=!1,R&&(clearTimeout(R),R=null),T&&(T.close(),T=null),C){try{C.destroy()}catch(M){console.warn("[Scrcpy] JMuxer destroy error:",M)}C=null}g.value=!1,U.value=null,console.log("[Scrcpy] Disconnected and cleaned up")}function O(M,b,P,K,te){if(!T||T.readyState!==WebSocket.OPEN){console.warn("[Scrcpy] WebSocket not connected");return}const ce=b/K,ge=P/te,ye=JSON.stringify({type:M==="down"?"touchDown":M==="move"?"touchMove":"touchUp",xP:ce,yP:ge});T.send(ye)}return et(()=>{G()}),{connected:g,reconnecting:y,error:U,connect:$,disconnect:G,sendTouch:O}}const Dt=new TextEncoder;function Xt(a){return a.replace(/^--/,"").trim()}function ut(a,u,l=0){if(!u.length)return-1;for(let p=l;p<=a.length-u.length;p++){let g=!0;for(let y=0;y<u.length;y++)if(a[p+y]!==u[y]){g=!1;break}if(g)return p}return-1}function Br(a,u){if(!a.length)return new Uint8Array(u);if(!u.length)return new Uint8Array(a);const l=new Uint8Array(a.length+u.length);return l.set(a,0),l.set(u,a.length),l}function Rr(a){if(!a)return null;const u=/boundary="?([^\";]+)"?/i.exec(a);return u?Xt(u[1]):null}function Or(a,u){const l=Xt(u),p=Dt.encode(`--${l}`),g=Dt.encode(`\r
\r
`),y=a.getReader();return(async function*(){let U=new Uint8Array(0),T=!1;try{for(;;){const{value:C,done:R}=await y.read();T=!!R,C&&(U=Br(U,C));let x=!0;for(;x;){x=!1;const _=ut(U,p);if(_===-1)break;_>0&&(U=U.slice(_));const $=p.length,G=ut(U,g,$);if(G===-1)break;const O=G+g.length,M=ut(U,p,O);if(M===-1)break;let b=M;b>=2&&U[b-2]===13&&U[b-1]===10&&(b-=2);const P=U.slice(O,b);P.length&&(yield new Blob([P],{type:"image/jpeg"})),U=U.slice(M),x=!0}if(R)break}}finally{T||await y.cancel().catch(()=>{}),y.releaseLock()}})()}const Wt=!1,zr=30,Mt=1e3/zr;function Ir(a){const{platform:u,serial:l,enabled:p}=a,g=a.canvasRef??H(null),y=le(()=>tn(a.preferCanvas)?a.preferCanvas.value:typeof a.preferCanvas=="boolean"?a.preferCanvas:Wt),U=le(()=>typeof ReadableStream<"u"&&typeof createImageBitmap<"u"),T=H(!1),C=le(()=>y.value&&U.value&&!!g.value&&!T.value),R=H(!1),x=H(null),_=H(0),$=[],G=H(null);let O=null,M=0,b=null,P=null;const K=le(()=>R.value?`/api/${u.value}/${l.value}/mjpeg?t=${Date.now()}`:null);function te(){_.value=0,$.length=0}function ce(L=performance.now()){$.push(L);const re=L-1e3;for(;$.length&&$[0]<re;)$.shift();if($.length>=2){const ve=$[$.length-1]-$[0];ve>0&&(_.value=Math.round(($.length-1)/(ve/1e3)))}else _.value=0}function ge(){G.value&&(G.value.close(),G.value=null)}function Ce(){O!==null&&(cancelAnimationFrame(O),O=null),ge()}function ye(L){if(O!==null)return;M=-Mt;const re=ve=>{if(!C.value){O=null;return}if(ve-M>=Mt){const J=G.value,Y=g.value;J&&Y&&((Y.width===0||Y.height===0)&&(Y.width=J.width,Y.height=J.height),L.drawImage(J,0,0,Y.width,Y.height),J.close(),G.value=null,ce(ve)),M=ve}O=requestAnimationFrame(re)};O=requestAnimationFrame(re)}async function N(){if(!C.value||P||!K.value)return;const L=g.value,re=L?.getContext("2d");if(!L||!re){T.value=!0,console.info("[iOS MJPEG] Canvas  <img> ");return}b=new AbortController;const{signal:ve}=b;ye(re),P=(async()=>{try{const J=await fetch(K.value,{signal:ve});if(!J.ok)throw new Error(`MJPEG : ${J.status} ${J.statusText}`);const Y=Rr(J.headers.get("content-type"));if(!J.body||!Y)throw new Error("MJPEG boundary ");for await(const B of Or(J.body,Y)){if(!C.value||ve.aborted)break;ge();const Z=await createImageBitmap(B);G.value=Z}}catch(J){if(!ve.aborted){const Y=`MJPEG Canvas : ${J instanceof Error?J.message:String(J)}`;x.value=Y,console.error("[iOS MJPEG]",Y),T.value=!0}}finally{Ce(),ge(),P=null,b=null}})()}function A(){b&&b.abort(),Ce()}async function I(){if(R.value){console.log("[iOS MJPEG] Stream already started");return}try{console.log("[iOS MJPEG] Starting WDA MJPEG stream..."),await Ae(u.value,l.value,"start_mjpeg_stream",{}),R.value=!0,x.value=null,te(),T.value=!1,console.log("[iOS MJPEG] Stream started:",K.value),C.value&&N()}catch(L){const re=`Failed to start iOS MJPEG stream: ${L instanceof Error?L.message:String(L)}`;x.value=re,console.error("[iOS MJPEG]",re,L)}}async function j(){if(R.value)try{console.log("[iOS MJPEG] Stopping MJPEG stream..."),A(),await Ae(u.value,l.value,"stop_mjpeg_stream",{}),R.value=!1,te(),console.log("[iOS MJPEG] Stream stopped")}catch(L){const re=`Failed to stop iOS MJPEG stream: ${L instanceof Error?L.message:String(L)}`;x.value=re,console.error("[iOS MJPEG]",re,L)}}return De(p,async L=>{L?await I():await j()},{immediate:!0}),De(()=>C.value&&R.value,L=>{L?N():A()}),nn(()=>{A(),R.value&&j().catch(L=>{console.warn("[iOS MJPEG] Cleanup error:",L)})}),{streamUrl:K,isStreaming:R,error:x,fps:_,updateFps:ce,useCanvasRenderer:C,canvasRef:g,startStream:I,stopStream:j}}const Lr={class:"screen-panel",ref:"containerRef"},Nr={class:"mode-selector"},jr={class:"info-display"},Hr={key:0,class:"fps-badge"},Vr={class:"canvas-container"},Gr={class:"canvas-wrapper"},Xr=["src"],Wr=de({__name:"ScreenPanel",props:{platform:{},serial:{},screenSize:{}},emits:["tap","recordTap","recordSwipe"],setup(a,{expose:u,emit:l}){const p=a,{platform:g,serial:y}=rn(p),U=l,T=qe(),C=rt(),R=Ge(),x=le(()=>R.t.screen),_=H("default"),$=H({x:0,y:0}),G=H(!1),O=H([]),M=le(()=>g.value==="android"&&_.value==="pointer"),b=le(()=>g.value==="ios"&&_.value==="pointer"),P=H(null),K=H(null),te=H(null),{canvasRef:ce,addRect:ge,addTrack:Ce,clearShapes:ye,clearShapesByType:N,resizeCanvas:A}=_r(),I=Mr({platform:g,serial:y,videoRef:te}),j=Ir({platform:g,serial:y,enabled:b,canvasRef:K,preferCanvas:Wt}),L=le(()=>j.useCanvasRenderer.value);De(()=>j.error.value,(ee,W)=>{ee&&ee!==W&&T.error(ee)});const re=le(()=>b.value&&j.fps.value>0),ve=le(()=>b.value&&j.streamUrl.value?j.streamUrl.value:C.screenshotUrl),J=le(()=>({width:p.screenSize?.width||C.screenSize?.width||0,height:p.screenSize?.height||C.screenSize?.height||0})),Y=le(()=>{const ee=J.value.width,W=J.value.height;return!ee||!W?{x:0,y:0}:{x:Math.round($.value.x/ee*100),y:Math.round($.value.y/W*100)}});function B(){if(!P.value)return;const ee=P.value.naturalWidth,W=P.value.naturalHeight;A(ee,W),b.value&&j.updateFps()}function Z(){T.error("")}function ae(){if(!te.value)return;const ee=te.value.videoWidth||J.value.width,W=te.value.videoHeight||J.value.height;A(ee,W),I&&!I.connected.value&&I.connect()}De(()=>_.value,ee=>{ee==="pointer"&&(C.selectNode(null),N("select"),N("hover"))}),De(()=>M.value,async(ee,W)=>{if(W===void 0&&!ee){console.log("[ScreenPanel] Initial state: Screenshot mode");return}ee?(console.log("[ScreenPanel] Switching to Scrcpy mode, waiting for video element..."),await ct(),console.log("[ScreenPanel] Video element ready, connecting..."),I.connect()):(console.log("[ScreenPanel] Switching to Screenshot mode, disconnecting..."),I.disconnect())}),De(te,ee=>{ee&&M.value&&ee.addEventListener("loadedmetadata",ae)},{immediate:!0}),et(()=>{I.disconnect()});let pe=null;De(K,(ee,W)=>{pe&&W&&pe.unobserve(W),ee&&(pe||(pe=new ResizeObserver(oe=>{for(const he of oe){const e=he.target;e.width&&e.height&&A(e.width,e.height)}})),pe.observe(ee))},{immediate:!0}),et(()=>{pe&&(pe.disconnect(),pe=null)});function X(ee){const W=q();if(!W)return null;const oe=W.getBoundingClientRect(),{width:he,height:e}=J.value;if(!he||!e)return null;const c=he/oe.width,t=e/oe.height,n=Math.round((ee.clientX-oe.left)*c),r=Math.round((ee.clientY-oe.top)*t);return{x:n,y:r}}function q(){return M.value?te.value:L.value?K.value:P.value}function ie(ee){if(!ce.value)return null;const W=ce.value.getBoundingClientRect(),oe=ce.value.width/W.width,he=ce.value.height/W.height,e=(ee.clientX-W.left)*oe,c=(ee.clientY-W.top)*he;return{x:e,y:c}}function Pe(ee){if(!ce.value)return null;const{width:W,height:oe}=J.value;if(!W||!oe)return null;const he=W/ce.value.width,e=oe/ce.value.height,c=Math.round(ee.x*he),t=Math.round(ee.y*e);return{x:c,y:t}}function Ue(ee,W){if(!C.hierarchy?.nodes)return null;const{width:oe,height:he}=J.value;if(!oe||!he)return null;const e=ee/oe,c=W/he,t=[];function n(f){f.forEach(m=>{m.children&&n(m.children),t.push(m)})}n(C.hierarchy.nodes);let r=null,o=1/0;for(const f of t){if(!f.bounds)continue;const[m,k,S,i]=f.bounds,v=S<=1&&i<=1,F=v?m:m/oe,z=v?k:k/he,ne=v?S:S/oe,fe=v?i:i/he;if(e>=F&&e<=ne&&c>=z&&c<=fe){const me=(ne-F)*(fe-z);me<o&&(o=me,r=f)}}return r}function Me(ee){const W=X(ee),oe=ie(ee);if(!(!W||!oe)){if($.value=W,N("hover"),_.value==="default"){const he=Ue(W.x,W.y);he&&he.bounds&&ge(he.bounds,"hover")}else if(_.value==="pointer"&&G.value&&(O.value.push(oe),N("hover"),Ce(O.value),M.value)){const{width:he,height:e}=J.value;he&&e&&I.sendTouch("move",W.x,W.y,he,e)}}}function Fe(ee){const W=X(ee);if(W&&(G.value=!0,O.value=[],_.value==="pointer")){const oe=ie(ee);if(oe&&O.value.push(oe),M.value){const{width:he,height:e}=J.value;he&&e&&I.sendTouch("down",W.x,W.y,he,e)}}}function Xe(){if(O.value.length<2)return null;const ee=O.value[0],W=O.value[O.value.length-1],oe=Pe(ee),he=Pe(W);if(!oe||!he)return null;const e=Math.max(.2,Math.min(1,O.value.length/60));return{startX:oe.x,startY:oe.y,endX:he.x,endY:he.y,duration:e}}async function Le(ee){const W=X(ee);if(W){if(G.value=!1,_.value==="default"){const oe=Ue(W.x,W.y);oe&&(C.selectNode(oe),N("select"),oe.bounds&&ge(oe.bounds,"select"))}else if(_.value==="pointer")try{U("tap",W.x,W.y);const oe=null,he=O.value.length>5;if(M.value){const{width:e,height:c}=J.value;e&&c&&I.sendTouch("up",W.x,W.y,e,c);const t=he?Xe():null;t?U("recordSwipe",t.startX,t.startY,t.endX,t.endY,t.duration,oe):U("recordTap",W.x,W.y,oe)}else{const e=he?Xe():null;e?(await Ae(p.platform,p.serial,"swipe",{startX:e.startX,startY:e.startY,endX:e.endX,endY:e.endY,duration:e.duration}),U("recordSwipe",e.startX,e.startY,e.endX,e.endY,e.duration,oe),T.success(`: (${e.startX}, ${e.startY})  (${e.endX}, ${e.endY})`)):(await mt(p.platform,p.serial,W.x,W.y),U("recordTap",W.x,W.y,oe),T.success(`: (${W.x}, ${W.y})`))}}catch(oe){T.error(`: ${oe instanceof Error?oe.message:String(oe)}`)}O.value=[],N("hover")}}function Be(){if(G.value&&_.value==="pointer"&&M.value){const ee=O.value[O.value.length-1];if(ee){const W=Pe(ee),{width:oe,height:he}=J.value;W&&oe&&he&&I.sendTouch("up",W.x,W.y,oe,he)}}G.value=!1,O.value=[],N("hover")}return De(()=>C.selectedNode,ee=>{N("select"),ee&&ee.bounds&&ge(ee.bounds,"select")}),u({clearShapes:ye,resizeCanvas:A}),(ee,W)=>(D(),V("div",Lr,[w("div",Nr,[d(s(Ot),{value:_.value,"onUpdate:value":W[0]||(W[0]=oe=>_.value=oe),size:"small"},{default:h(()=>[d(s(tt),{value:"default"},{default:h(()=>[d(s(ue),null,{default:h(()=>[d(s(Rn))]),_:1}),Q(" "+E(x.value.viewMode),1)]),_:1}),d(s(tt),{value:"pointer"},{default:h(()=>[d(s(ue),null,{default:h(()=>[d(s(zn))]),_:1}),Q(" "+E(x.value.pointerMode),1)]),_:1})]),_:1},8,["value"]),w("div",jr,[re.value?(D(),V("span",Hr,E(s(j).fps.value)+" FPS",1)):ke("",!0),w("span",null,E(J.value.width)+"x"+E(J.value.height),1),w("span",null,E($.value.x)+", "+E($.value.y),1),w("span",null,E(Y.value.x)+"%, "+E(Y.value.y)+"%",1)])]),w("div",Vr,[w("div",Gr,[!M.value&&L.value?(D(),V("canvas",{key:0,ref_key:"mjpegCanvasRef",ref:K,class:"screen-image"},null,512)):M.value?(D(),V("video",{key:2,ref_key:"videoRef",ref:te,class:"screen-video",autoplay:"",muted:""},null,512)):(D(),V("img",{key:1,ref_key:"imageRef",ref:P,src:ve.value,class:"screen-image",onLoad:B,onError:Z},null,40,Xr)),w("canvas",{ref_key:"drawingCanvas",ref:ce,class:"drawing-canvas",onMousemove:Me,onMousedown:Fe,onMouseup:Le,onMouseleave:Be},null,544)])])],512))}}),Jr=Ie(Wr,[["__scopeId","data-v-30f09e5a"]]),Yr={class:"hierarchy-panel"},qr={class:"hierarchy-search-bar"},Kr={key:0,class:"search-results-info"},Zr={key:1,class:"search-results-list"},Qr=["onClick"],ea={class:"result-index"},ta={class:"result-content"},na={class:"result-primary"},ra={class:"result-secondary"},aa={key:0,class:"result-tag"},oa={key:1,class:"result-tag"},ia={key:2,class:"result-tag"},sa=de({__name:"HierarchyPanel",props:{platform:{},serial:{}},setup(a){const u=a,l=qe(),p=rt(),g=Ge(),y=le(()=>g.t.hierarchy),U=H(""),T=H([]),C=H(!1),R=H(u.platform==="ios"?"label":"text"),x=le(()=>u.platform==="ios"?[{label:y.value.searchType.label,value:"label"},{label:y.value.searchType.xpath,value:"xpath"},{label:y.value.searchType.className,value:"className"}]:[{label:y.value.searchType.text,value:"text"},{label:y.value.searchType.xpath,value:"xpath"},{label:y.value.searchType.id,value:"id"},{label:y.value.searchType.className,value:"className"}]);De(()=>u.platform,A=>{if(A==="ios"){R.value!=="label"&&R.value!=="xpath"&&R.value!=="className"&&(R.value="label");return}R.value==="label"&&(R.value="text")},{immediate:!0});const _=H(new Map),$=H([]),G=H([]);function O(A,I=""){return A.map((j,L)=>{const re=I?`${I}-${L}`:`${L}`;_.value.set(re,j);const ve=j.children&&j.children.length>0;return{key:re,label:`${L} ${j.class_name||"Node"}`,prefix:()=>xe(ue,null,{default:()=>xe(ve?Ln:Un)}),children:ve?O(j.children,re):void 0,isLeaf:!ve,raw:j}})}function M({option:A}){const I=A.raw,j=(A.label||"").split(" ")[0],L=I.class_name||"Node",re=[xe("span",{class:"tree-node-index"},`${j} `),xe("span",{class:"tree-node-class"},L)];if(I.resource_id){const ve=I.resource_id.split("/").pop()||I.resource_id;re.push(xe("span",{class:"tree-node-highlight"},` id=${ve}`))}return I.text&&re.push(xe("span",{class:"tree-node-highlight"},` text=${I.text}`)),I.label&&re.push(xe("span",{class:"tree-node-highlight"},` label=${I.label}`)),xe("span",{},re)}const b=le(()=>p.hierarchy?.nodes?(_.value.clear(),O(p.hierarchy.nodes)):[]);async function P(){if(!U.value.trim()){l.warning(y.value.searchPlaceholder);return}C.value=!0;try{await p.refreshHierarchy();const A=U.value.trim(),I=p.hierarchy?{width:p.hierarchy.width,height:p.hierarchy.height}:void 0,j=await Ae(u.platform,u.serial,"findElements",{by:R.value,value:A});if(j&&typeof j=="object"&&"value"in j){const L=j;T.value=L.value.map(re=>$t(re,I)),L.count===0?l.warning(y.value.noResults):L.count===1?ce(T.value[0]):l.success(g.format(y.value.foundResults,{count:L.count}))}else Array.isArray(j)?(T.value=j.map(L=>$t(L,I)),j.length===1?ce(T.value[0]):l.success(g.format(y.value.foundResults,{count:j.length}))):(T.value=[],l.warning(y.value.noResults))}catch(A){l.error(`${y.value.searchPlaceholder}: ${A instanceof Error?A.message:String(A)}`),T.value=[]}finally{C.value=!1}}function K(A,I,j=""){if(!A||A.length!==4)return null;for(let L=0;L<I.length;L++){const re=I[L],ve=j?`${j}-${L}`:`${L}`,J=re?.raw;if(J?.bounds){const Y=J.bounds;if(Y[0]===A[0]&&Y[1]===A[1]&&Y[2]===A[2]&&Y[3]===A[3])return ve}if(re&&re.children){const Y=K(A,re.children,ve);if(Y)return Y}}return null}function te(A){const I=A.split("-"),j=[];for(let L=1;L<I.length;L++)j.push(I.slice(0,L).join("-"));return j}async function ce(A){await ct();const I=K(A.bounds,b.value);if(I){const j=te(I),L=new Set([...G.value,...j]);G.value=Array.from(L),$.value=[I];const re=_.value.get(I);re&&p.selectNode(re),l.success("")}else p.selectNode(A),l.warning("")}function ge(){U.value="",T.value=[]}function Ce(A,I){const j=I[0];if(j&&j.raw){const L=j.raw;p.selectNode(L)}}function ye(A){G.value=A}const N=({option:A})=>({onDblclick(){if(!A.isLeaf){const I=A.key;G.value.includes(I)?G.value=G.value.filter(j=>j!==I):G.value=[...G.value,I]}}});return De(()=>p.selectedNode,async A=>{if(!A){$.value=[];return}await ct();const I=K(A.bounds,b.value);if(I){const j=te(I),L=new Set([...G.value,...j]);G.value=Array.from(L),$.value=[I]}},{deep:!0}),(A,I)=>{const j=Re("n-select"),L=Re("n-button"),re=Re("n-input"),ve=Re("n-tree"),J=Re("n-empty");return D(),V("div",Yr,[w("div",qr,[d(j,{value:R.value,"onUpdate:value":I[0]||(I[0]=Y=>R.value=Y),options:x.value,size:"small",style:{width:"160px","flex-shrink":"0"}},null,8,["value","options"]),d(re,{value:U.value,"onUpdate:value":I[1]||(I[1]=Y=>U.value=Y),placeholder:y.value.searchPlaceholder,clearable:"",onKeydown:zt(P,["enter"]),style:{flex:"1"}},{suffix:h(()=>[d(L,{text:"",onClick:P,loading:C.value,disabled:!U.value.trim()},{icon:h(()=>[d(s(ue),null,{default:h(()=>[d(s(or))]),_:1})]),_:1},8,["loading","disabled"])]),_:1},8,["value","placeholder"])]),T.value.length>0?(D(),V("div",Kr,[w("span",null,E(s(g).format(y.value.foundResults,{count:T.value.length})),1),d(L,{text:"",size:"small",onClick:ge},{icon:h(()=>[d(s(ue),null,{default:h(()=>[d(s(An))]),_:1})]),default:h(()=>[Q(" "+E(s(g).t.common.clear),1)]),_:1})])):ke("",!0),T.value.length>0?(D(),V("div",Zr,[(D(!0),V(je,null,Ye(T.value,(Y,B)=>(D(),V("div",{key:B,class:"search-result-item",onClick:Z=>ce(Y)},[w("div",ea,E(B+1),1),w("div",ta,[w("div",na,E(Y.text||Y.label||Y.resource_id||Y.class_name||`${y.value.noElement} ${B+1}`),1),w("div",ra,[Y.resource_id?(D(),V("span",aa,E(Y.resource_id),1)):ke("",!0),Y.label?(D(),V("span",oa,E(Y.label),1)):ke("",!0),Y.class_name?(D(),V("span",ia,E(Y.class_name),1)):ke("",!0)])]),d(s(ue),{size:"16",color:"var(--md-primary)"},{default:h(()=>[d(s(Ht))]),_:1})],8,Qr))),128))])):ke("",!0),b.value.length>0?(D(),Se(ve,{key:2,data:b.value,"selected-keys":$.value,"expanded-keys":G.value,"node-props":N,"render-label":M,selectable:"","block-line":"","onUpdate:selectedKeys":Ce,"onUpdate:expandedKeys":ye},null,8,["data","selected-keys","expanded-keys"])):(D(),Se(J,{key:3,description:y.value.noElement},null,8,["description"]))])}}}),la=Ie(sa,[["__scopeId","data-v-14702f1c"]]);function ua(a){const u=Math.floor(a/1e3),l=Math.floor(u/60),p=u%60;return`${l.toString().padStart(2,"0")}:${p.toString().padStart(2,"0")}`}function Jt(a){return a<1e3?`${a}ms`:`${(a/1e3).toFixed(1)}s`}function ca(a){return a<1024?`${a}B`:a<1024*1024?`${(a/1024).toFixed(1)}KB`:`${(a/(1024*1024)).toFixed(1)}MB`}function da(a){const u=new Date(a*1e3),p=new Date().getTime()-u.getTime(),g=Math.floor(p/(1e3*60*60*24));return g===0?u.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):g===1?" "+u.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):g<7?`${g}`:u.toLocaleDateString("zh-CN",{month:"short",day:"numeric"})}function Bt(a){return a?a.text?`: "${a.text}"`:a.label?`label: "${a.label}"`:a.content_desc?`: "${a.content_desc}"`:a.resource_id?`ID: ${a.resource_id.split("/").pop()}`:a.class_name?`: ${a.class_name.split(".").pop()}`:null:null}function Yt(a){switch(a.type){case"tap":{const u=Bt(a.element);return u||(a.xpath?`XPath (${Math.round(a.coords.x)}, ${Math.round(a.coords.y)})`:` (${Math.round(a.coords.x)}, ${Math.round(a.coords.y)})`)}case"swipe":{const u=Bt(a.element);return u?`${u}  (${Math.round(a.endCoords.x)}, ${Math.round(a.endCoords.y)})`:`(${Math.round(a.coords.x)}, ${Math.round(a.coords.y)})  (${Math.round(a.endCoords.x)}, ${Math.round(a.endCoords.y)})`}case"input":return`"${a.params.text}"`;case"sleep":return`${a.params.duration}ms`;case"command":return a.params.command;default:return JSON.stringify(a.params)}}function kt(a){switch(a){case"tap":return"primary";case"swipe":return"success";case"input":return"warning";case"sleep":return"default";case"command":case"back":case"home":return"error";default:return"default"}}function fa(a){switch(a){case"idle":return"default";case"playing":return"success";case"paused":return"warning";case"completed":return"primary";case"error":return"error";default:return"default"}}function ha(a){switch(a){case"idle":return"";case"playing":return"";case"paused":return"";case"completed":return"";case"error":return"";default:return a}}const pa={class:"tab-content"},va={class:"control-bar"},ma={key:0,class:"recording-indicator"},ya={class:"duration"},xa={class:"steps-section"},ga={key:0,class:"steps-list"},wa={class:"step-index"},ka={class:"step-details"},ba={class:"step-time"},Sa=de({__name:"RecordTab",props:{recorder:{},currentPlaybackIndex:{},isPlaybackActive:{type:Boolean},t:{}},emits:["toggle-recording","toggle-pause","clear-recording","save-recording","edit-action","delete-action"],setup(a){return(u,l)=>(D(),V("div",pa,[w("div",va,[d(s(ze),{size:8},{default:h(()=>[d(s(se),{type:a.recorder.isRecording.value?"error":"primary",disabled:a.isPlaybackActive,onClick:l[0]||(l[0]=p=>u.$emit("toggle-recording"))},{icon:h(()=>[d(s(ue),null,{default:h(()=>[a.recorder.isRecording.value?(D(),Se(s(xt),{key:1})):(D(),Se(s(ft),{key:0}))]),_:1})]),default:h(()=>[Q(" "+E(a.recorder.isRecording.value?a.t.stopRecording:a.t.startRecording),1)]),_:1},8,["type","disabled"]),a.recorder.isRecording.value?(D(),Se(s(se),{key:0,type:a.recorder.isPaused.value?"default":"warning",onClick:l[1]||(l[1]=p=>u.$emit("toggle-pause"))},{default:h(()=>[Q(E(a.recorder.isPaused.value?a.t.continueRecording:a.t.pauseRecording),1)]),_:1},8,["type"])):ke("",!0),d(s(se),{disabled:a.recorder.actionCount.value===0,onClick:l[2]||(l[2]=p=>u.$emit("clear-recording"))},{default:h(()=>[Q(E(a.t.clearRecording)+" ("+E(a.recorder.actionCount.value)+") ",1)]),_:1},8,["disabled"])]),_:1}),d(s(ze),{size:8},{default:h(()=>[d(s(se),{disabled:a.recorder.actionCount.value===0,onClick:l[3]||(l[3]=p=>u.$emit("save-recording"))},{icon:h(()=>[d(s(ue),null,{default:h(()=>[d(s(rr))]),_:1})]),default:h(()=>[Q(" "+E(a.t.saveRecording),1)]),_:1},8,["disabled"])]),_:1})]),a.recorder.isRecording.value?(D(),V("div",ma,[d(s(Ke),{type:a.recorder.isPaused.value?"warning":"error",round:""},{icon:h(()=>[d(s(ue),null,{default:h(()=>[d(s(ft))]),_:1})]),default:h(()=>[Q(" "+E(a.recorder.isPaused.value?a.t.recordingPaused:a.t.recording),1)]),_:1},8,["type"]),w("span",ya,E(s(ua)(a.recorder.duration.value)),1)])):ke("",!0),w("div",xa,[w("h3",null,E(a.t.operationSteps)+" ("+E(a.recorder.actionCount.value)+")",1),a.recorder.actionCount.value>0?(D(),V("div",ga,[(D(!0),V(je,null,Ye(a.recorder.actions.value,(p,g)=>(D(),V("div",{key:p.id,class:It(["step-item",{active:a.currentPlaybackIndex===g}])},[w("span",wa,E(Number(g)+1),1),d(s(Ke),{type:s(kt)(p.type),size:"small"},{default:h(()=>[Q(E(p.type),1)]),_:2},1032,["type"]),w("span",ka,E(s(Yt)(p)),1),w("span",ba,E(s(Jt)(p.relativeTime)),1),d(s(Lt),{size:"tiny"},{default:h(()=>[d(s(se),{onClick:y=>u.$emit("edit-action",p)},{default:h(()=>[d(s(ue),null,{default:h(()=>[d(s(Vt))]),_:1})]),_:1},8,["onClick"]),d(s(se),{onClick:y=>u.$emit("delete-action",p.id)},{default:h(()=>[d(s(ue),null,{default:h(()=>[d(s(gt))]),_:1})]),_:1},8,["onClick"])]),_:2},1024)],2))),128))])):(D(),Se(s(nt),{key:1,description:a.t.noOperations},null,8,["description"]))])]))}}),_a=Ie(Sa,[["__scopeId","data-v-6ac11da4"]]),Ca={class:"playback-tab-layout"},$a={class:"recordings-section"},Pa={class:"section-header"},Aa={class:"playback-controls-divider"},Fa={class:"control-bar"},Ta={class:"progress-text"},Ea={key:0,class:"error-message-compact"},Ua={class:"playback-steps-section"},Da={key:0,class:"steps-list"},Ma={class:"step-index"},Ba={class:"step-details"},Ra={class:"step-time"},Oa=de({__name:"PlaybackTab",props:{player:{},recordings:{},loading:{type:Boolean},isRecordingActive:{type:Boolean},t:{},commonT:{}},emits:["refresh-recordings","start-playback","load-recording","edit-recording","delete-recording"],setup(a,{emit:u}){const l=a,p=u,g=le(()=>{if(l.recordings.length===0)return[];const R=new Map;l.recordings.forEach(_=>{const $=_.group||"default",G=R.get($);G?G.push(_):R.set($,[_])});const x=[];return R.forEach((_,$)=>{const G={key:`group-${$}`,label:$,isGroup:!0,children:_.map(O=>({key:`${O.group}/${O.name}`,label:O.name,recording:O}))};x.push(G)}),x}),y=le(()=>g.value.map(R=>R.key));function U({option:R}){const x=R;if(x.isGroup){const _=x.children?.length||0;return xe("span",{class:"tree-group-label"},[xe("span",{class:"group-name"},x.label),xe("span",{class:"group-count"},`(${_})`)])}else{const _=x.recording;return xe("div",{class:"tree-recording-label"},[xe("div",{class:"recording-name"},_.name),xe("div",{class:"recording-meta"},[xe("span",{class:"meta-item"},ca(_.size)),xe("span",{class:"meta-item"},da(_.modified_at))])])}}function T({option:R}){const x=R;if(x.isGroup||!x.recording)return null;const _=x.recording;return xe("div",{class:"tree-node-actions",onClick:$=>$.stopPropagation()},[xe(se,{size:"tiny",quaternary:!0,onClick:()=>p("load-recording",_.group,_.name)},{icon:()=>xe(ue,null,{default:()=>xe(Jn)})}),xe(se,{size:"tiny",quaternary:!0,onClick:()=>p("edit-recording",_.group,_.name)},{icon:()=>xe(ue,null,{default:()=>xe(Vt)})}),xe(se,{size:"tiny",quaternary:!0,onClick:()=>p("delete-recording",_.group,_.name)},{icon:()=>xe(ue,null,{default:()=>xe(gt)})})])}function C({option:R}){const x=R;return x.isGroup?{}:{onClick:()=>{x.recording&&p("load-recording",x.recording.group,x.recording.name)}}}return(R,x)=>(D(),V("div",Ca,[w("div",$a,[w("div",Pa,[w("h3",null,E(a.t.recordingList)+" ("+E(g.value.length>0?g.value.reduce((_,$)=>_+($.children?.length||0),0):0)+")",1),d(s(se),{size:"small",onClick:x[0]||(x[0]=_=>R.$emit("refresh-recordings")),loading:a.loading},{icon:h(()=>[d(s(ue),null,{default:h(()=>[d(s(yt))]),_:1})]),default:h(()=>[Q(" "+E(a.commonT.refresh),1)]),_:1},8,["loading"])]),g.value.length>0?(D(),Se(s(an),{key:0,data:g.value,"render-label":U,"render-suffix":T,"node-props":C,"block-line":"","expand-on-click":"","default-expanded-keys":y.value},null,8,["data","default-expanded-keys"])):(D(),Se(s(nt),{key:1,description:a.t.noRecordings},null,8,["description"]))]),w("div",Aa,[w("div",Fa,[d(s(ze),{size:8},{default:h(()=>[d(s(se),{type:"success",disabled:!a.player.canPlay.value||a.isRecordingActive,loading:a.player.isPlaying.value,onClick:x[1]||(x[1]=_=>R.$emit("start-playback"))},{icon:h(()=>[d(s(ue),null,{default:h(()=>[d(s(qn))]),_:1})]),default:h(()=>[Q(" "+E(a.t.play),1)]),_:1},8,["disabled","loading"]),a.player.isPlaying.value?(D(),Se(s(se),{key:0,onClick:x[2]||(x[2]=_=>a.player.pause())},{icon:h(()=>[d(s(ue),null,{default:h(()=>[d(s(Xn))]),_:1})]),default:h(()=>[Q(" "+E(a.t.pause),1)]),_:1})):ke("",!0),d(s(se),{disabled:!a.player.isPlaying.value&&!a.player.isPaused.value,onClick:x[3]||(x[3]=_=>a.player.stop())},{icon:h(()=>[d(s(ue),null,{default:h(()=>[d(s(xt))]),_:1})]),default:h(()=>[Q(" "+E(a.t.stop),1)]),_:1},8,["disabled"]),d(s(se),{disabled:!a.player.isPaused.value,onClick:x[4]||(x[4]=_=>a.player.stepNext())},{icon:h(()=>[d(s(ue),null,{default:h(()=>[d(s(Zn))]),_:1})]),default:h(()=>[Q(" "+E(a.t.step),1)]),_:1},8,["disabled"])]),_:1}),a.player.recording.value?(D(),Se(s(ze),{key:0,size:8,align:"center"},{default:h(()=>[w("span",Ta,E(a.t.progress)+": "+E(a.player.progress.value.currentIndex+1)+" / "+E(a.player.progress.value.totalSteps),1),d(s(Ke),{type:s(fa)(a.player.state.value),size:"small"},{default:h(()=>[Q(E(s(ha)(a.player.state.value)),1)]),_:1},8,["type"])]),_:1})):ke("",!0)]),a.player.error.value?(D(),V("div",Ea,[d(s(dt),{type:"error",title:a.player.error.value,closable:""},null,8,["title"])])):ke("",!0)]),w("div",Ua,[a.player.recording.value?(D(),V("div",Da,[(D(!0),V(je,null,Ye(a.player.recording.value.actions,(_,$)=>(D(),V("div",{key:_.id,class:It(["step-item",{active:a.player.currentIndex.value===$,completed:a.player.currentIndex.value>$,pending:a.player.currentIndex.value<$}])},[w("span",Ma,E(Number($)+1),1),d(s(Ke),{type:s(kt)(_.type),size:"small"},{default:h(()=>[Q(E(_.type),1)]),_:2},1032,["type"]),w("span",Ba,E(s(Yt)(_)),1),w("span",Ra,E(s(Jt)(_.relativeTime)),1)],2))),128))])):(D(),Se(s(nt),{key:1,description:a.t.selectRecording},null,8,["description"]))])]))}}),za=Ie(Oa,[["__scopeId","data-v-87bae0b8"]]);function Ia(a){return JSON.parse(JSON.stringify(a))}const La=de({__name:"ActionEditDialog",props:bt({action:{},screenSize:{}},{show:{type:Boolean,required:!0},showModifiers:{}}),emits:bt(["save","cancel"],["update:show"]),setup(a,{emit:u}){const l=a,p=u,g=Ge(),y=le(()=>({common:g.t.common,actions:g.t.actions})),U=on(a,"show"),T=H(null),C=le(()=>l.action),R=le(()=>{if(!C.value)return y.value.actions.editAction;const O=y.value.actions.actionTypes[C.value.type]||C.value.type;return`${y.value.actions.editAction} - ${O}`}),x=H({relativeTime:0,coords:{x:0,y:0,scaleX:0,scaleY:0},endCoords:{x:0,y:0,scaleX:0,scaleY:0},xpath:{selector:"",fallbackCoords:{x:0,y:0}},params:{}});De(()=>l.action,O=>{O&&(x.value=Ia(O),x.value.coords||(x.value.coords={x:0,y:0,scaleX:0,scaleY:0}),x.value.endCoords||(x.value.endCoords={x:0,y:0,scaleX:0,scaleY:0}),x.value.xpath||(x.value.xpath={selector:"",fallbackCoords:{x:0,y:0}}),x.value.params||(x.value.params={}))},{immediate:!0});const _=le(()=>({relativeTime:[{required:!0,type:"number",message:`${y.value.actions.relativeTime}`,trigger:"blur"},{type:"number",min:0,message:"",trigger:"blur"}],"coords.x":[{required:!0,type:"number",message:`${y.value.actions.coordinateX}`,trigger:"blur"},{type:"number",min:0,message:"",trigger:"blur"}],"coords.y":[{required:!0,type:"number",message:`${y.value.actions.coordinateY}`,trigger:"blur"},{type:"number",min:0,message:"",trigger:"blur"}],"endCoords.x":[{required:!0,type:"number",message:`${y.value.actions.coordinateX}`,trigger:"blur"},{type:"number",min:0,message:"",trigger:"blur"}],"endCoords.y":[{required:!0,type:"number",message:`${y.value.actions.coordinateY}`,trigger:"blur"},{type:"number",min:0,message:"",trigger:"blur"}],"params.text":[{required:!0,message:`${y.value.actions.inputText}`,trigger:"blur"}],"params.duration":[{required:!0,type:"number",message:"",trigger:"blur"}],"params.command":[{required:!0,message:"",trigger:"blur"}]}));async function $(){if(!(!T.value||!C.value))try{await T.value.validate();const O={};if(x.value.relativeTime!==C.value.relativeTime&&(O.relativeTime=x.value.relativeTime),C.value.type==="tap"){if(x.value.coords.x!==C.value.coords.x||x.value.coords.y!==C.value.coords.y){const{width:P,height:K}=l.screenSize;if(!P||!K||P<=0||K<=0){console.error(`Invalid screen size: ${P}x${K}. Cannot update coordinates.`);return}O.coords={x:x.value.coords.x,y:x.value.coords.y,scaleX:x.value.coords.x/P,scaleY:x.value.coords.y/K},O.params={x:x.value.coords.x,y:x.value.coords.y}}const M=C.value.xpath?.selector||"",b=x.value.xpath?.selector||"";M!==b&&(b?O.xpath={selector:b,fallbackCoords:{x:x.value.coords.x,y:x.value.coords.y}}:O.xpath=void 0)}else if(C.value.type==="swipe")if(x.value.coords.x!==C.value.coords.x||x.value.coords.y!==C.value.coords.y||x.value.endCoords.x!==C.value.endCoords.x||x.value.endCoords.y!==C.value.endCoords.y){const{width:b,height:P}=l.screenSize;if(!b||!P||b<=0||P<=0){console.error(`Invalid screen size: ${b}x${P}. Cannot update coordinates.`);return}O.coords={x:x.value.coords.x,y:x.value.coords.y,scaleX:x.value.coords.x/b,scaleY:x.value.coords.y/P},O.endCoords={x:x.value.endCoords.x,y:x.value.endCoords.y,scaleX:x.value.endCoords.x/b,scaleY:x.value.endCoords.y/P},O.params={startX:x.value.coords.x,startY:x.value.coords.y,endX:x.value.endCoords.x,endY:x.value.endCoords.y,duration:x.value.params.duration||.5}}else x.value.params.duration!==C.value.params.duration&&(O.params={...C.value.params,duration:x.value.params.duration});else C.value.type==="input"?x.value.params.text!==C.value.params.text&&(O.params={text:x.value.params.text}):C.value.type==="sleep"&&x.value.params.duration!==C.value.params.duration&&(O.params={duration:x.value.params.duration});p("save",C.value.id,O),U.value=!1}catch(O){console.warn(":",O)}}function G(){U.value=!1,p("cancel")}return(O,M)=>(D(),Se(s(pt),{show:U.value,"onUpdate:show":M[12]||(M[12]=b=>U.value=b),preset:"dialog",title:R.value,"positive-text":y.value.common.save,"negative-text":y.value.common.cancel,onPositiveClick:$,onNegativeClick:G},{default:h(()=>[C.value?(D(),Se(s(vt),{key:0,ref_key:"formRef",ref:T,model:x.value,rules:_.value,"label-placement":"left","label-width":"120","require-mark-placement":"left"},{default:h(()=>[d(s(Te),{label:y.value.actions.actionType},{default:h(()=>[d(s(Ke),{type:s(kt)(C.value.type)},{default:h(()=>[Q(E(y.value.actions.actionTypes[C.value.type]||C.value.type),1)]),_:1},8,["type"])]),_:1},8,["label"]),C.value.type==="tap"?(D(),V(je,{key:0},[d(s(Te),{label:y.value.actions.coordinateX,path:"coords.x"},{default:h(()=>[d(s(Oe),{value:x.value.coords.x,"onUpdate:value":M[0]||(M[0]=b=>x.value.coords.x=b),min:0,precision:0,style:{width:"100%"}},null,8,["value"])]),_:1},8,["label"]),d(s(Te),{label:y.value.actions.coordinateY,path:"coords.y"},{default:h(()=>[d(s(Oe),{value:x.value.coords.y,"onUpdate:value":M[1]||(M[1]=b=>x.value.coords.y=b),min:0,precision:0,style:{width:"100%"}},null,8,["value"])]),_:1},8,["label"]),d(s(Te),{label:y.value.actions.xpathSelector,path:"xpath.selector"},{default:h(()=>[d(s(Ne),{value:x.value.xpath.selector,"onUpdate:value":M[2]||(M[2]=b=>x.value.xpath.selector=b),type:"textarea",placeholder:y.value.actions.xpathPlaceholder,autosize:{minRows:2,maxRows:4}},null,8,["value","placeholder"])]),_:1},8,["label"])],64)):ke("",!0),C.value.type==="swipe"?(D(),V(je,{key:1},[d(s(St),{"title-placement":"left"},{default:h(()=>[Q(E(y.value.actions.startPosition),1)]),_:1}),d(s(Te),{label:y.value.actions.coordinateX,path:"coords.x"},{default:h(()=>[d(s(Oe),{value:x.value.coords.x,"onUpdate:value":M[3]||(M[3]=b=>x.value.coords.x=b),min:0,precision:0,style:{width:"100%"}},null,8,["value"])]),_:1},8,["label"]),d(s(Te),{label:y.value.actions.coordinateY,path:"coords.y"},{default:h(()=>[d(s(Oe),{value:x.value.coords.y,"onUpdate:value":M[4]||(M[4]=b=>x.value.coords.y=b),min:0,precision:0,style:{width:"100%"}},null,8,["value"])]),_:1},8,["label"]),d(s(St),{"title-placement":"left"},{default:h(()=>[Q(E(y.value.actions.endPosition),1)]),_:1}),d(s(Te),{label:y.value.actions.coordinateX,path:"endCoords.x"},{default:h(()=>[d(s(Oe),{value:x.value.endCoords.x,"onUpdate:value":M[5]||(M[5]=b=>x.value.endCoords.x=b),min:0,precision:0,style:{width:"100%"}},null,8,["value"])]),_:1},8,["label"]),d(s(Te),{label:y.value.actions.coordinateY,path:"endCoords.y"},{default:h(()=>[d(s(Oe),{value:x.value.endCoords.y,"onUpdate:value":M[6]||(M[6]=b=>x.value.endCoords.y=b),min:0,precision:0,style:{width:"100%"}},null,8,["value"])]),_:1},8,["label"]),d(s(Te),{label:y.value.actions.swipeDuration,path:"params.duration"},{default:h(()=>[d(s(Oe),{value:x.value.params.duration,"onUpdate:value":M[7]||(M[7]=b=>x.value.params.duration=b),min:.1,max:10,step:.1,precision:1,style:{width:"100%"}},{suffix:h(()=>[Q(E(y.value.actions.seconds),1)]),_:1},8,["value"])]),_:1},8,["label"])],64)):ke("",!0),C.value.type==="input"?(D(),Se(s(Te),{key:2,label:y.value.actions.inputText,path:"params.text"},{default:h(()=>[d(s(Ne),{value:x.value.params.text,"onUpdate:value":M[8]||(M[8]=b=>x.value.params.text=b),type:"textarea",placeholder:y.value.actions.inputText,autosize:{minRows:2,maxRows:6}},null,8,["value","placeholder"])]),_:1},8,["label"])):ke("",!0),C.value.type==="sleep"?(D(),Se(s(Te),{key:3,label:y.value.actions.sleepDuration,path:"params.duration"},{default:h(()=>[d(s(Oe),{value:x.value.params.duration,"onUpdate:value":M[9]||(M[9]=b=>x.value.params.duration=b),min:0,step:100,precision:0,style:{width:"100%"}},{suffix:h(()=>[Q(E(y.value.actions.milliseconds),1)]),_:1},8,["value"])]),_:1},8,["label"])):ke("",!0),C.value.type==="command"||C.value.type==="back"||C.value.type==="home"?(D(),Se(s(Te),{key:4,label:y.value.actions.command,path:"params.command"},{default:h(()=>[d(s(Ne),{value:x.value.params.command,"onUpdate:value":M[10]||(M[10]=b=>x.value.params.command=b),disabled:C.value.type==="back"||C.value.type==="home",placeholder:C.value.type==="back"?"back":C.value.type==="home"?"home":""},null,8,["value","disabled","placeholder"])]),_:1},8,["label"])):ke("",!0),d(s(Te),{label:y.value.actions.relativeTime,path:"relativeTime"},{default:h(()=>[d(s(Oe),{value:x.value.relativeTime,"onUpdate:value":M[11]||(M[11]=b=>x.value.relativeTime=b),min:0,step:100,precision:0,style:{width:"100%"}},{suffix:h(()=>[Q(E(y.value.actions.milliseconds),1)]),_:1},8,["value"])]),_:1},8,["label"])]),_:1},8,["model","rules"])):ke("",!0)]),_:1},8,["show","title","positive-text","negative-text"]))}}),Na=Ie(La,[["__scopeId","data-v-519ab678"]]);function ja(a,u,l=!0){const p=l?JSON.stringify(a,null,2):JSON.stringify(a),g=new Blob([p],{type:"application/json"});Ha(g,`${u}.json`)}function Ha(a,u){const l=URL.createObjectURL(a),p=document.createElement("a");p.href=l,p.download=u,p.click(),setTimeout(()=>{URL.revokeObjectURL(l)},100)}function Va(a,u,l){const p=H(!1),g=H(!1),y=H([]),U=H(0),T=H(`Recording_${Date.now()}`),C=H({captureScreenshots:!1,screenshotQuality:.6,recordElementDetails:!0}),R=le(()=>y.value.length===0?0:y.value[y.value.length-1]?.relativeTime||0),x=le(()=>y.value.length);function _(B){p.value=!0,g.value=!1,y.value=[],U.value=Date.now(),B&&(T.value=B)}function $(){p.value=!1,g.value=!1}function G(){p.value&&(g.value=!0)}function O(){p.value&&(g.value=!1)}function M(){y.value=[],U.value=0}function b(B,Z){const{width:ae,height:pe}=l.value;if(!ae||!pe||ae<=0||pe<=0)throw new Error(`Invalid screen size: ${ae}x${pe}. Recording requires valid screen dimensions.`);return{x:B,y:Z,scaleX:B/ae,scaleY:Z/pe}}function P(B,Z,ae){if(!(!B||!B.xpath))return{selector:B.xpath,fallbackCoords:{x:Z,y:ae}}}function K(B){if(!(!B||!C.value.recordElementDetails))return{text:B.text,label:B.label,resource_id:B.resource_id,class_name:B.class_name,content_desc:B.content_desc,bounds:B.bounds||[0,0,0,0],key:B.key}}async function te(){C.value.captureScreenshots}async function ce(B,Z,ae,pe,X){if(!p.value||g.value)return;const q=Date.now(),ie={id:crypto.randomUUID(),timestamp:q,relativeTime:q-U.value,screenshot:await te()};let Pe;switch(B){case"tap":Pe={...ie,type:"tap",coords:ae,xpath:ae?P(X||null,ae.x,ae.y):void 0,element:K(X||null),params:Z};break;case"swipe":Pe={...ie,type:"swipe",coords:ae,endCoords:pe,element:K(X||null),params:Z};break;case"input":Pe={...ie,type:"input",element:K(X||null),params:Z};break;case"sleep":Pe={...ie,type:"sleep",params:Z};break;case"command":case"back":case"home":Pe={...ie,type:B,params:Z};break;default:console.warn("");return}y.value.push(Pe)}async function ge(B,Z,ae){const pe=b(B,Z);await ce("tap",{x:B,y:Z},pe,void 0,ae)}async function Ce(B,Z,ae,pe,X,q){const ie=b(B,Z),Pe=b(ae,pe);await ce("swipe",{startX:B,startY:Z,endX:ae,endY:pe,duration:X},ie,Pe,q)}async function ye(B,Z){await ce("input",{text:B},void 0,void 0,Z)}async function N(B){await ce("sleep",{duration:B})}async function A(B,Z){await ce("command",{command:B,args:Z})}function I(B){const Z=y.value.findIndex(ae=>ae.id===B);Z!==-1&&y.value.splice(Z,1)}function j(B,Z){const ae=y.value.findIndex(q=>q.id===B);if(ae===-1)return console.warn(`Action with id ${B} not found`),!1;const pe=y.value[ae],X={...pe,...Z};if(X.type!==pe.type)throw new Error("Cannot change action type");if(X.id!==pe.id)throw new Error("Cannot change action id");if(X.timestamp!==pe.timestamp)throw new Error("Cannot change action timestamp");return y.value[ae]=X,!0}function L(B){return{version:"1.0",name:B||T.value,description:void 0,platform:a,deviceInfo:{serial:u,screenWidth:l.value.width,screenHeight:l.value.height},createdAt:U.value,updatedAt:Date.now(),duration:R.value,config:C.value,actions:y.value}}function re(B){T.value=B.name,y.value=B.actions,U.value=B.createdAt,C.value=B.config}function ve(){const B=L();ja(B,`${B.name}.byteautoui`)}function J(B){if(!B||typeof B!="object")return!1;if(B.version!=="1.0")return console.error(":",B.version),!1;if(typeof B.name!="string")return console.error(""),!1;if(!B.platform||!["android","ios","harmony"].includes(B.platform))return console.error(":",B.platform),!1;if(!B.deviceInfo||typeof B.deviceInfo.screenWidth!="number"||typeof B.deviceInfo.screenHeight!="number")return console.error(""),!1;if(!Array.isArray(B.actions))return console.error(""),!1;for(let Z=0;Z<B.actions.length;Z++){const ae=B.actions[Z];if(!ae||typeof ae!="object")return console.error(` ${Z} `),!1;if(!ae.type||typeof ae.timestamp!="number"||typeof ae.relativeTime!="number")return console.error(` ${Z} `),!1;if((ae.type==="tap"||ae.type==="swipe")&&!ae.coords)return console.error(` ${Z} (${ae.type}) `),!1;if(ae.type==="swipe"&&!ae.endCoords)return console.error(` ${Z} (swipe) `),!1}return!0}async function Y(){return new Promise((B,Z)=>{const ae=document.createElement("input");ae.type="file",ae.accept=".byteautoui.json,.json",ae.onchange=async()=>{const pe=ae.files?.[0];if(!pe){Z(new Error(""));return}try{const X=await pe.text(),q=JSON.parse(X);if(!J(q)){Z(new Error(""));return}re(q),B(q)}catch(X){X instanceof SyntaxError?Z(new Error("JSON")):Z(X)}},ae.click()})}return{isRecording:p,isPaused:g,actions:y,recordingName:T,config:C,duration:R,actionCount:x,start:_,stop:$,pause:G,resume:O,clear:M,recordTap:ge,recordSwipe:Ce,recordInput:ye,recordSleep:N,recordCommand:A,deleteAction:I,updateAction:j,exportRecording:L,importRecording:re,saveToFile:ve,loadFromFile:Y}}function Ga(a,u,l){const p=H("idle"),g=H(-1),y=H(null),U=H(null),T=H(1),C=le(()=>({currentIndex:g.value,totalSteps:y.value?.actions.length||0,elapsedTime:0,state:p.value,error:U.value||void 0})),R=le(()=>p.value==="playing"),x=le(()=>p.value==="paused"),_=le(()=>y.value!==null&&y.value.actions.length>0);function $(N){y.value=N,g.value=-1,p.value="idle",U.value=null}function G(){y.value=null,g.value=-1,p.value="idle",U.value=null}function O(N){return new Promise(A=>setTimeout(A,N/T.value))}function M(N){const{width:A,height:I}=l.value;if(!A||!I||A<=0||I<=0)throw new Error(`:(${A}x${I}),`);return{x:Math.round(N.scaleX*A),y:Math.round(N.scaleY*I)}}async function b(N){try{let A=function(Y){for(const B of Y){if(B.xpath===N)return B;if(B.children){const Z=A(B.children);if(Z)return Z}}return null};const I=await jt(a,u),j=A(I.nodes);if(!j||!j.bounds)return null;const[L,re,ve,J]=j.bounds;return{x:Math.round((L+ve)/2),y:Math.round((re+J)/2)}}catch(A){return console.error("XPath:",A),null}}async function P(N){switch(N.type){case"tap":{let A,I;if(N.xpath){const j=await b(N.xpath.selector);if(j)A=j.x,I=j.y;else{if(console.warn("XPath:",N.xpath.selector),!N.coords)throw new Error("Tap");const L=M(N.coords);A=L.x,I=L.y}}else{if(!N.coords)throw new Error("Tap");const j=M(N.coords);A=j.x,I=j.y}await mt(a,u,A,I);break}case"swipe":{if(!N.coords||!N.endCoords)throw new Error("Swipe");const A=M(N.coords),I=M(N.endCoords),j=N.params;await Ae(a,u,"swipe",{startX:A.x,startY:A.y,endX:I.x,endY:I.y,duration:j.duration||.5});break}case"input":{const A=N.params;await Ae(a,u,"sendKeys",{text:A.text});break}case"sleep":{const A=N.params;await O(A.duration);break}case"back":{await Ae(a,u,"back",{});break}case"home":{await Ae(a,u,"home",{});break}case"command":{const A=N.params;await Ae(a,u,A.command,A.args||{});break}default:console.warn("")}}async function K(){if(!y.value||y.value.actions.length===0){U.value="";return}for(p.value==="paused"?p.value="playing":(g.value=0,p.value="playing",U.value=null);g.value<y.value.actions.length&&p.value==="playing";){const N=y.value.actions[g.value];try{if(await P(N),p.value!=="playing")break;if(g.value<y.value.actions.length-1){const I=y.value.actions[g.value+1].relativeTime-N.relativeTime;if(await O(I),p.value!=="playing")break}g.value++}catch(A){U.value=A instanceof Error?A.message:String(A),p.value="error",console.error(` ${g.value}:`,A);break}}p.value==="playing"&&(p.value="idle",g.value=-1)}function te(){p.value==="playing"&&(p.value="paused")}function ce(){p.value="stopped",g.value=-1,U.value=null}async function ge(){if(!y.value||g.value>=y.value.actions.length-1)return;p.value="paused",g.value++;const N=y.value.actions[g.value];try{await P(N)}catch(A){U.value=A instanceof Error?A.message:String(A),p.value="error",console.error(` ${g.value}:`,A)}}function Ce(N){y.value&&N>=0&&N<y.value.actions.length&&(g.value=N,p.value="paused")}function ye(N){T.value=Math.max(.1,Math.min(5,N))}return{state:p,currentIndex:g,recording:y,error:U,speed:T,progress:C,isPlaying:R,isPaused:x,canPlay:_,load:$,unload:G,play:K,pause:te,stop:ce,stepNext:ge,seekTo:Ce,setSpeed:ye}}const at="";async function Xa(a){const u=await fetch(`${at}/api/recordings/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!u.ok){const l=await u.text(),p=`"${a.name}" (:${a.group}, HTTP ${u.status}): ${l}`;throw console.error(p,{request:a,status:u.status}),new Error(p)}}async function Wa(){const a=await fetch(`${at}/api/recordings/list`);if(!a.ok){const l=await a.text(),p=` (HTTP ${a.status}): ${l}`;throw console.error(p,{status:a.status}),new Error(p)}return(await a.json()).recordings}async function Rt(a,u){const l=await fetch(`${at}/api/recordings/load?group=${encodeURIComponent(a)}&name=${encodeURIComponent(u)}`);if(!l.ok){const g=await l.text(),y=`"${u}" (:${a}, HTTP ${l.status}): ${g}`;throw console.error(y,{group:a,name:u,status:l.status}),new Error(y)}return(await l.json()).data}async function Ja(a,u){const l=await fetch(`${at}/api/recordings/delete?group=${encodeURIComponent(a)}&name=${encodeURIComponent(u)}`,{method:"DELETE"});if(!l.ok){const p=await l.text(),g=`"${u}" (:${a}, HTTP ${l.status}): ${p}`;throw console.error(g,{group:a,name:u,status:l.status}),new Error(g)}}const Ya={class:"actions-panel"},qa=de({__name:"ActionsPanel",props:{platform:{},serial:{}},setup(a,{expose:u}){const l=a,p=qe(),g=sn(),y=rt(),U=Ge(),T=le(()=>U.t.actions);function C(X,q){p.error(`${X}: ${q instanceof Error?q.message:String(q)}`)}const R=H("record"),x=H([]),_=H(!1),$=H(!1),G=H({group:"default",name:""}),O=H(!1),M=H(null),b=le(()=>y.screenSize),P=Va(l.platform,l.serial,b),K=Ga(l.platform,l.serial,b);function te(){P.isRecording.value?P.stop():P.start()}function ce(){P.isPaused.value?P.resume():P.pause()}function ge(){g.warning({title:"",content:"",positiveText:"",negativeText:"",onPositiveClick:()=>{P.clear(),p.success("")}})}function Ce(){const X=new Date,q=X.getFullYear(),ie=String(X.getMonth()+1).padStart(2,"0"),Pe=String(X.getDate()).padStart(2,"0"),Ue=String(X.getHours()).padStart(2,"0"),Me=String(X.getMinutes()).padStart(2,"0"),Fe=String(X.getSeconds()).padStart(2,"0");return`Recording_${q}${ie}${Pe}_${Ue}${Me}${Fe}`}function ye(){G.value.name=Ce(),G.value.group="default",$.value=!0}async function N(){if(!G.value.name){p.warning("");return}if(P.actionCount.value===0){p.warning("");return}try{const X=P.exportRecording(G.value.name);await Xa({group:G.value.group||"default",name:G.value.name,data:X}),p.success(""),$.value=!1,G.value={group:"default",name:""},await L()}catch(X){C("",X)}}function A(X){P.deleteAction(X)}function I(X){M.value=X,O.value=!0}function j(X,q){try{P.updateAction(X,q)?p.success(""):p.error("")}catch(ie){C("",ie)}}async function L(){_.value=!0;try{x.value=await Wa()}catch(X){C("",X)}finally{_.value=!1}}async function re(X,q){try{const ie=await Rt(X,q);K.load(ie),p.success(`: ${q}`)}catch(ie){C("",ie)}}async function ve(X,q){if(P.actionCount.value>0){g.warning({title:"",content:"",positiveText:"",negativeText:"",onPositiveClick:async()=>{await J(X,q)}});return}await J(X,q)}async function J(X,q){try{const ie=await Rt(X,q);P.importRecording(ie),R.value="record",p.success(` "${q}" `)}catch(ie){C("",ie)}}async function Y(X,q){g.warning({title:"",content:` "${q}" `,positiveText:"",negativeText:"",onPositiveClick:async()=>{try{await Ja(X,q),p.success(""),await L()}catch(ie){C("",ie)}}})}async function B(){try{await K.play()}catch(X){C("",X)}}async function Z(X,q,ie){await P.recordTap(X,q,ie)}async function ae(X,q,ie,Pe,Ue,Me){await P.recordSwipe(X,q,ie,Pe,Ue,Me)}function pe(){return P.isRecording.value}return Nt(()=>{L()}),u({recordTap:Z,recordSwipe:ae,getIsRecording:pe}),(X,q)=>(D(),V("div",Ya,[d(s(ln),{value:R.value,"onUpdate:value":q[0]||(q[0]=ie=>R.value=ie),type:"segment"},{default:h(()=>[d(s(_t),{name:"record",tab:T.value.recordTab},{default:h(()=>[d(_a,{recorder:s(P),"current-playback-index":s(K).currentIndex.value,"is-playback-active":s(K).isPlaying.value,t:T.value,onToggleRecording:te,onTogglePause:ce,onClearRecording:ge,onSaveRecording:ye,onEditAction:I,onDeleteAction:A},null,8,["recorder","current-playback-index","is-playback-active","t"])]),_:1},8,["tab"]),d(s(_t),{name:"playback",tab:T.value.playbackTab},{default:h(()=>[d(za,{player:s(K),recordings:x.value,loading:_.value,"is-recording-active":s(P).isRecording.value,t:T.value,"common-t":s(U).t.common,onRefreshRecordings:L,onStartPlayback:B,onLoadRecording:re,onEditRecording:ve,onDeleteRecording:Y},null,8,["player","recordings","loading","is-recording-active","t","common-t"])]),_:1},8,["tab"])]),_:1},8,["value"]),d(s(pt),{show:$.value,"onUpdate:show":q[4]||(q[4]=ie=>$.value=ie),preset:"dialog",title:""},{action:h(()=>[d(s(ze),{justify:"end"},{default:h(()=>[d(s(se),{onClick:q[3]||(q[3]=ie=>$.value=!1)},{default:h(()=>[...q[6]||(q[6]=[Q("",-1)])]),_:1}),d(s(se),{type:"primary",onClick:N},{default:h(()=>[...q[7]||(q[7]=[Q("",-1)])]),_:1})]),_:1})]),default:h(()=>[d(s(vt),{model:G.value},{default:h(()=>[d(s(Te),{label:""},{default:h(()=>[d(s(Ne),{value:G.value.group,"onUpdate:value":q[1]||(q[1]=ie=>G.value.group=ie),placeholder:"default"},null,8,["value"])]),_:1}),d(s(Te),{label:""},{default:h(()=>[d(s(Ne),{value:G.value.name,"onUpdate:value":q[2]||(q[2]=ie=>G.value.name=ie),placeholder:"my-recording"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show"]),d(Na,{show:O.value,"onUpdate:show":q[5]||(q[5]=ie=>O.value=ie),action:M.value,"screen-size":b.value,onSave:j},null,8,["show","action","screen-size"])]))}}),Ka=Ie(qa,[["__scopeId","data-v-a80a602c"]]),Za={class:"package-panel"},Qa={class:"package-content"},eo={class:"install-section"},to={class:"package-list-section"},no={key:0,class:"loading-state"},ro={class:"loading-text"},ao={key:1,class:"empty-state"},oo={class:"empty-hint"},io={key:2,class:"package-list"},so={class:"package-info"},lo={class:"package-name"},uo={class:"package-id"},co={key:0,class:"package-version"},fo=de({__name:"PackagePanel",props:{platform:{},serial:{}},setup(a){const u=a,l=qe(),p=Ge(),g=le(()=>p.t.package),y=H([]),U=H(!1),T=H(""),C=H(""),R=le(()=>{if(!T.value)return y.value;const b=T.value.toLowerCase();return y.value.filter(P=>P.name.toLowerCase().includes(b)||P.package.toLowerCase().includes(b))});async function x(){U.value=!0;try{const b=await Ae(u.platform,u.serial,"appList",{});Array.isArray(b)?(y.value=b.map(P=>{const K=P.package||P.packageName||P.pkg||"";return{name:P.name||P.label||P.appName||K,package:K,version:P.version||P.versionName||P.ver||""}}).filter(P=>P.package),l.success(` ${y.value.length} `)):l.error("")}catch(b){l.error(`: ${b instanceof Error?b.message:String(b)}`)}finally{U.value=!1}}async function _(b){try{await Ae(u.platform,u.serial,"appLaunch",{package:b}),l.success(g.value.appLaunched)}catch(P){l.error(`${g.value.launch} failed: ${P instanceof Error?P.message:String(P)}`)}}async function $(b){try{await Ae(u.platform,u.serial,"uninstallApp",{package:b}),l.success(g.value.appUninstalled),await x()}catch(P){l.error(`${g.value.uninstall} failed: ${P instanceof Error?P.message:String(P)}`)}}async function G(b){try{await Ae(u.platform,u.serial,"clearApp",{package:b}),l.success(g.value.dataCleared)}catch(P){l.error(`${g.value.clear} failed: ${P instanceof Error?P.message:String(P)}`)}}async function O(b){try{const K=`${window.location.origin}/api/${u.platform}/${u.serial}/backupApp?package=${encodeURIComponent(b)}`,te=document.createElement("a");te.href=K,te.download=`${b}.apk`,te.click(),l.success(`Downloading: ${b}.apk`)}catch(P){l.error(`Backup failed: ${P instanceof Error?P.message:String(P)}`)}}async function M(){if(C.value.trim())try{await Ae(u.platform,u.serial,"installApp",{path:C.value}),l.success(`Installed: ${C.value}`),C.value="",await x()}catch(b){l.error(`Install failed: ${b instanceof Error?b.message:String(b)}`)}}return(b,P)=>{const K=Re("n-input"),te=Re("n-button"),ce=Re("n-space"),ge=Re("n-icon"),Ce=Re("n-spin"),ye=Re("n-empty");return D(),V("div",Za,[w("div",Qa,[d(ce,{vertical:"",size:16},{default:h(()=>[w("div",eo,[w("h4",null,E(g.value.currentApp),1),d(ce,{size:8},{default:h(()=>[d(K,{value:C.value,"onUpdate:value":P[0]||(P[0]=N=>C.value=N),placeholder:"APK file path",style:{flex:"1"}},null,8,["value"]),d(te,{type:"primary",onClick:M,disabled:!C.value.trim()},{default:h(()=>[...P[2]||(P[2]=[Q(" Install ",-1)])]),_:1},8,["disabled"])]),_:1})]),w("div",to,[d(ce,{justify:"space-between",align:"center",style:{"margin-bottom":"12px"}},{default:h(()=>[w("h4",null,E(g.value.installedApps)+" ("+E(R.value.length)+")",1),d(ce,{size:8},{default:h(()=>[d(K,{value:T.value,"onUpdate:value":P[1]||(P[1]=N=>T.value=N),placeholder:s(p).t.common.search+"...",clearable:"",style:{width:"200px"}},null,8,["value","placeholder"]),d(te,{onClick:x,loading:U.value},{icon:h(()=>[d(ge,null,{default:h(()=>[d(s(yt))]),_:1})]),default:h(()=>[Q(" "+E(s(p).t.common.refresh),1)]),_:1},8,["loading"])]),_:1})]),_:1}),U.value?(D(),V("div",no,[d(Ce,{size:"large"}),w("div",ro,E(s(p).t.common.loading),1)])):R.value.length===0?(D(),V("div",ao,[d(ye,{description:g.value.noApps},null,8,["description"]),w("div",oo,[w("p",null,'"'+E(s(p).t.common.refresh)+'"',1),P[3]||(P[3]=w("p",{class:"empty-hint-small"},"",-1))])])):(D(),V("div",io,[(D(!0),V(je,null,Ye(R.value,N=>(D(),V("div",{key:N.package,class:"package-item"},[w("div",so,[w("div",lo,E(N.name||""),1),w("div",uo,E(N.package||""),1),N.version?(D(),V("div",co,"v"+E(N.version),1)):ke("",!0)]),d(ce,{size:8},{default:h(()=>[d(te,{size:"small",onClick:A=>_(N.package)},{default:h(()=>[Q(E(g.value.launch),1)]),_:1},8,["onClick"]),d(te,{size:"small",onClick:A=>O(N.package)},{icon:h(()=>[d(ge,null,{default:h(()=>[d(s(Mn))]),_:1})]),default:h(()=>[P[4]||(P[4]=Q(" Backup ",-1))]),_:1},8,["onClick"]),d(te,{size:"small",onClick:A=>G(N.package)},{default:h(()=>[Q(E(g.value.clear),1)]),_:1},8,["onClick"]),d(te,{size:"small",type:"error",onClick:A=>$(N.package)},{default:h(()=>[Q(E(g.value.uninstall),1)]),_:1},8,["onClick"])]),_:2},1024)]))),128))]))])]),_:1})])])}}}),ho=Ie(fo,[["__scopeId","data-v-fff7dce7"]]),po={class:"modal-title"},vo={class:"config-content"},mo={style:{"font-weight":"600"}},yo={style:{"font-size":"13px","line-height":"1.6"}},xo={style:{margin:"0 0 8px 0"}},go={style:{margin:"0"}},wo={class:"bundle-hints"},ko={class:"hints-title"},bo={class:"hint-label"},So={class:"hint-label"},_o={class:"help-section"},Co={class:"help-title"},$o={class:"help-list"},Po={class:"help-note"},Ao=de({__name:"IOSConfigDialog",props:{show:{type:Boolean},serial:{},errorMessage:{}},emits:["update:show","confirm"],setup(a,{emit:u}){const l=u,p=qe(),g=Ge(),y=le(()=>g.t.iosConfig),U=H({bundleId:"com.facebook.WebDriverAgentRunner.xctrunner",port:8100}),T=H(!1);function C(){l("update:show",!1)}async function R(){if(!U.value.bundleId.trim()){p.warning("Please enter WDA Bundle ID");return}if(!Number.isFinite(U.value.port)||U.value.port<=0){p.warning("Please enter WDA Port");return}T.value=!0;try{l("confirm",U.value.bundleId,U.value.port),p.success("Configuration saved"),l("update:show",!1)}finally{T.value=!1}}return(x,_)=>(D(),Se(s(pt),{show:a.show,"onUpdate:show":_[4]||(_[4]=$=>l("update:show",$)),preset:"card",size:"medium",bordered:!1,segmented:{content:!0},style:{"max-width":"600px"},closable:!1},{header:h(()=>[d(s(ze),{align:"center",size:12},{default:h(()=>[d(s(ue),{size:"24",color:"var(--md-primary)"},{default:h(()=>[d(s(ur))]),_:1}),w("span",po,E(y.value.title),1)]),_:1})]),footer:h(()=>[d(s(ze),{justify:"end"},{default:h(()=>[d(s(se),{onClick:C,disabled:T.value},{default:h(()=>[Q(E(y.value.cancel),1)]),_:1},8,["disabled"]),d(s(se),{type:"primary",onClick:R,loading:T.value},{default:h(()=>[Q(E(y.value.saveConfiguration),1)]),_:1},8,["loading"])]),_:1})]),default:h(()=>[w("div",vo,[a.errorMessage?(D(),Se(s(dt),{key:0,title:y.value.wdaStartFailed,type:"error",bordered:!1,style:{"margin-bottom":"20px"}},{default:h(()=>[Q(E(a.errorMessage),1)]),_:1},8,["title"])):ke("",!0),d(s(dt),{type:"info",bordered:!1,style:{"margin-bottom":"24px"}},{header:h(()=>[w("span",mo,E(y.value.firstTimeSetup),1)]),default:h(()=>[w("div",yo,[w("p",xo,E(y.value.setupDescription),1),w("p",go,[w("strong",null,E(y.value.setupGuide),1),_[5]||(_[5]=Q()),_[6]||(_[6]=w("a",{href:"https://github.com/appium/WebDriverAgent#getting-started",target:"_blank"},"appium/WebDriverAgent",-1))])])]),_:1}),d(s(vt),{"label-placement":"left","label-width":"120",model:U.value},{default:h(()=>[d(s(Te),{label:y.value.deviceUDID,path:"serial"},{default:h(()=>[d(s(Ne),{value:a.serial,readonly:"",disabled:""},null,8,["value"])]),_:1},8,["label"]),d(s(Te),{label:y.value.wdaBundleId,path:"bundleId",required:""},{default:h(()=>[d(s(Ne),{value:U.value.bundleId,"onUpdate:value":_[0]||(_[0]=$=>U.value.bundleId=$),placeholder:"com.facebook.WebDriverAgentRunner.xctrunner",style:{fontFamily:"var(--md-font-family-mono)",fontSize:"13px"}},null,8,["value"])]),_:1},8,["label"]),d(s(Te),{label:y.value.wdaPort,path:"port"},{default:h(()=>[d(s(Oe),{value:U.value.port,"onUpdate:value":_[1]||(_[1]=$=>U.value.port=$),min:1,max:65535,placeholder:"8100"},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"]),w("div",wo,[w("div",ko,E(y.value.commonBundleIds),1),w("div",{class:"hint-item",onClick:_[2]||(_[2]=$=>U.value.bundleId="com.facebook.WebDriverAgentRunner.xctrunner")},[_[7]||(_[7]=w("code",null,"com.facebook.WebDriverAgentRunner.xctrunner",-1)),w("span",bo,E(y.value.defaultBundleId),1)]),w("div",{class:"hint-item",onClick:_[3]||(_[3]=$=>U.value.bundleId="com.appium.WebDriverAgentRunner.xctrunner")},[_[8]||(_[8]=w("code",null,"com.appium.WebDriverAgentRunner.xctrunner",-1)),w("span",So,E(y.value.appiumBundleId),1)])]),w("div",_o,[w("p",Co,E(y.value.helpTitle),1),w("ol",$o,[w("li",null,E(y.value.helpSteps.step1),1),w("li",null,E(y.value.helpSteps.step2),1),w("li",null,E(y.value.helpSteps.step3),1)]),w("p",Po,[w("strong",null,E(y.value.helpNote),1)])])])]),_:1},8,["show"]))}}),Fo=Ie(Ao,[["__scopeId","data-v-27c06d6d"]]),To={class:"device-page"},Eo={class:"page-header"},Uo={class:"serial"},Do={class:"main-area"},Mo={class:"control-sidebar"},Bo={class:"control-group"},Ro={class:"control-group"},Oo={class:"control-group"},zo={key:0,class:"control-group"},Io={class:"vertical-text"},Lo={class:"screen-content"},No={class:"text-input-bar"},jo={class:"screenshot-area"},Ho={key:0,class:"property-details-panel"},Vo={class:"xpath-selector-bar"},Go={class:"xpath-select-wrapper"},Xo={key:0,class:"xpath-display-bar"},Wo={class:"xpath-text"},Jo={key:0,class:"siblings-nav"},Yo={class:"property-details-table"},qo={class:"property-cell label-cell"},Ko={class:"property-cell value-cell"},Zo={class:"right-panel"},Qo=de({__name:"Device",props:{platform:{},serial:{}},setup(a){const u=a,l=vn(),p=qe(),g=rt(),y=un(),U=Ge(),T=H(null),C=H("hierarchy"),R=H(!1),x=H(!1),_=H(void 0),$=le(()=>U.t.device),G=H(""),O=H(450),M=H(!1);function b(i){M.value=!0,i.preventDefault()}function P(i){if(!M.value)return;const v=i.clientX;v>=300&&v<=800&&(O.value=v,localStorage.setItem("screenPanelWidth",v.toString()))}function K(){M.value=!1}async function te(i,v={},F,z){try{await Ae(u.platform,u.serial,i,v),p.success(F)}catch(ne){p.error(`${z}: ${ne instanceof Error?ne.message:String(ne)}`)}}const ce=()=>te("volumeUp",{},"Volume up","Volume control failed"),ge=()=>te("volumeDown",{},"Volume down","Volume control failed"),Ce=()=>te("volumeMute",{},"Volume muted","Volume control failed"),ye=H(""),N=H(u.platform==="ios"?"class_and_label":"id");De(()=>u.platform,i=>{(i==="ios"?new Set(["label","class","class_and_label"]):new Set(["id","text","class","class_and_text"])).has(N.value)||(N.value=i==="ios"?"class_and_label":"id")},{immediate:!0});const A=(i,v)=>{if(!v)return"";switch(i){case"id":return v.resource_id?`//*[@resource-id="${v.resource_id}"]`:"";case"content-desc":return v.content_desc?`//*[@content-desc="${v.content_desc}"]`:"";case"text":return v.text?`//*[@text="${v.text}"]`:"";case"label":return v.label?`//*[@label="${v.label}"]`:"";case"class_and_text":return v.class_name&&v.text?`//${v.class_name}[@text="${v.text}"]`:"";case"class_and_label":return v.class_name&&v.label?`//${v.class_name}[@label="${v.label}"]`:"";case"class":return v.class_name?`//${v.class_name}`:"";default:return v.xpath||""}},I=le(()=>{const i=Fe.value;if(!i)return[];const v=(z,ne)=>{if(!ne||!g.hierarchy?.nodes)return 0;let fe=0;function me(be){be.forEach($e=>{A(z,$e)===ne&&fe++,$e.children&&me($e.children)})}return me(g.hierarchy.nodes),fe};return(u.platform==="ios"?[{label:"class_and_label",value:"class_and_label",xpath:A("class_and_label",i)},{label:"label",value:"label",xpath:A("label",i)},{label:"class",value:"class",xpath:A("class",i)}]:[{label:"id",value:"id",xpath:A("id",i)},{label:"class_and_text",value:"class_and_text",xpath:A("class_and_text",i)},{label:"class",value:"class",xpath:A("class",i)},{label:"text",value:"text",xpath:A("text",i)}]).map(z=>({...z,count:z.xpath?v(z.value,z.xpath):0}))}),j=le(()=>A(N.value,Fe.value)),L=H([]),re=H(-1);function ve(i){if(L.value=[],re.value=-1,!i||!g.hierarchy?.nodes)return;const v=A(N.value,i);if(!v)return;const F=[];function z(ne){ne.forEach(fe=>{A(N.value,fe)===v&&F.push(fe),fe.children&&z(fe.children)})}z(g.hierarchy.nodes),F.length>1&&(L.value=F,re.value=F.findIndex(ne=>ne.key===i.key))}function J(i){i>=0&&i<L.value.length&&g.selectNode(L.value[i])}function Y({option:i}){return i.label}function B(i){return xe("div",{class:"xpath-option"},[xe("span",{class:"xpath-option-label"},i.label),xe("div",{class:"xpath-option-right"},[i.xpath?xe("span",{class:"xpath-option-preview"},i.xpath):null,i.count>0?xe("span",{class:"xpath-option-count"},i.count.toString()):null].filter(Boolean))])}async function Z(){if(!ye.value.trim()){p.warning("Please enter text");return}try{await Ae(u.platform,u.serial,"sendKeys",{text:ye.value}),p.success(`Sent: ${ye.value}`),ye.value=""}catch(i){p.error(`Send text failed: ${i instanceof Error?i.message:String(i)}`)}}async function ae(){try{await Ae(u.platform,u.serial,"clearText",{}),p.success("Text cleared")}catch(i){p.error(`Clear text failed: ${i instanceof Error?i.message:String(i)}`)}}const pe=()=>te("home",{},"Home","Home failed"),X=()=>te("back",{},"Back","Back failed"),q=()=>te("appSwitch",{},"App Switch","App Switch failed"),ie=()=>te("wakeUp",{},"Wake Up","Wake Up failed"),Pe=()=>te("terminate",{},"Terminated current app","Terminate failed"),Ue=le(()=>{switch(u.platform){case"android":return Pt;case"ios":return yn;case"harmony":return At;default:return Pt}}),Me=le(()=>{const i=g.screenSize;return{width:i?.width||0,height:i?.height||0}}),Fe=le(()=>g.selectedNode);De(()=>[Fe.value,N.value],([i])=>{ve(i)},{immediate:!0});function Xe(i){const v={};if(i.index!==void 0&&(v.index=String(i.index)),i.text&&(v.text=i.text),i.label&&(v.label=i.label),i.resource_id&&(v["resource-id"]=i.resource_id),i.class_name&&(v.class=i.class_name),i.package&&(v.package=i.package),i.content_desc&&(v["content-desc"]=i.content_desc),i.checkable!==void 0&&(v.checkable=String(i.checkable)),i.checked!==void 0&&(v.checked=String(i.checked)),i.clickable!==void 0&&(v.clickable=String(i.clickable)),i.enabled!==void 0&&(v.enabled=String(i.enabled)),i.focusable!==void 0&&(v.focusable=String(i.focusable)),i.focused!==void 0&&(v.focused=String(i.focused)),i.scrollable!==void 0&&(v.scrollable=String(i.scrollable)),i.long_clickable!==void 0&&(v["long-clickable"]=String(i.long_clickable)),i.password!==void 0&&(v.password=String(i.password)),i.selected!==void 0&&(v.selected=String(i.selected)),i.visible_to_user!==void 0&&(v["visible-to-user"]=String(i.visible_to_user)),i.bounds){const[F,z,ne,fe]=i.bounds;v.bounds=`[${F},${z}][${ne},${fe}]`}return v}const Le=le(()=>{if(!Fe.value)return[];const i=Fe.value,v=[];if(i.index!==void 0&&v.push({label:"index",value:i.index}),i.text&&v.push({label:"text",value:i.text}),i.label&&v.push({label:"label",value:i.label}),i.resource_id&&v.push({label:"resource-id",value:i.resource_id}),i.class_name&&v.push({label:"class",value:i.class_name}),i.package&&v.push({label:"package",value:i.package}),i.content_desc&&v.push({label:"content-desc",value:i.content_desc}),i.checkable!==void 0&&v.push({label:"checkable",value:i.checkable}),i.checked!==void 0&&v.push({label:"checked",value:i.checked}),i.clickable!==void 0&&v.push({label:"clickable",value:i.clickable}),i.enabled!==void 0&&v.push({label:"enabled",value:i.enabled}),i.focusable!==void 0&&v.push({label:"focusable",value:i.focusable}),i.focused!==void 0&&v.push({label:"focused",value:i.focused}),i.scrollable!==void 0&&v.push({label:"scrollable",value:i.scrollable}),i.long_clickable!==void 0&&v.push({label:"long-clickable",value:i.long_clickable}),i.password!==void 0&&v.push({label:"password",value:i.password}),i.selected!==void 0&&v.push({label:"selected",value:i.selected}),i.visible_to_user!==void 0&&v.push({label:"visible-to-user",value:i.visible_to_user}),i.bounds){const[F,z,ne,fe]=i.bounds;v.push({label:"bounds",value:`[${F},${z}][${ne},${fe}]`})}return i.rect&&(v.push({label:"rect.x",value:i.rect.x}),v.push({label:"rect.y",value:i.rect.y}),v.push({label:"rect.width",value:i.rect.width}),v.push({label:"rect.height",value:i.rect.height})),i.xpath&&v.push({label:"xpath",value:i.xpath}),v.push({label:"raw",value:JSON.stringify(Xe(i),null,2)}),v});function Be(i){const{width:v,height:F}=Me.value,[z,ne,fe,me]=i;if(fe<=1&&me<=1){if(!v||!F)throw new Error("");return[Math.round(z*v),Math.round(ne*F),Math.round(fe*v),Math.round(me*F)]}return i}function ee(i,v){}async function W(i,v,F){if(T.value)try{await T.value.recordTap(i,v,F)}catch(z){p.error(`: ${z instanceof Error?z.message:String(z)}`),console.error("Failed to record tap:",z)}}async function oe(i,v,F,z,ne,fe){if(T.value)try{await T.value.recordSwipe(i,v,F,z,ne,fe)}catch(me){p.error(`: ${me instanceof Error?me.message:String(me)}`),console.error("Failed to record swipe:",me)}}async function he(){if(!Fe.value||!Fe.value.bounds){p.warning("");return}try{const i=j.value||Fe.value.xpath;if(i)await Ae(u.platform,u.serial,"clickElement",{by:"xpath",value:i}),p.success(" XPath ");else{const v=Be(Fe.value.bounds),[F,z,ne,fe]=v,me=Math.round((F+ne)/2),be=Math.round((z+fe)/2);await mt(u.platform,u.serial,me,be),p.success(`: (${me}, ${be})`)}if(T.value?.getIsRecording?.()){const v=Be(Fe.value.bounds),[F,z,ne,fe]=v,me=Math.round((F+ne)/2),be=Math.round((z+fe)/2);await T.value.recordTap(me,be,Fe.value),p.info(" XPath")}}catch(i){p.error(`: ${i instanceof Error?i.message:String(i)}`)}}async function e(){if(await g.refreshHierarchy(),g.error&&u.platform==="ios"){const i=g.error;if(i.includes("InvalidService")||i.includes("WDA")||i.includes("WebDriverAgent")){_.value=i,x.value=!0;return}}try{const i=await Ae(u.platform,u.serial,"currentApp",{});i&&typeof i=="object"&&"package"in i&&(G.value=i.package||"")}catch{}}async function c(i,v){try{await gn(u.serial,{wda_bundle_id:i,wda_port:v}),p.success(""),x.value=!1,_.value=void 0,await e()}catch(F){p.error(`: ${F instanceof Error?F.message:String(F)}`)}}function t(){navigator.clipboard.writeText(u.serial),p.success("Copied")}function n(i,v){l.push(`/${i}/${v}`)}function r(){const i=j.value;if(!i){p.warning("No XPath available");return}navigator.clipboard.writeText(i),p.success("XPath copied")}function o(i){(i.key==="r"||i.key==="R")&&!i.ctrlKey&&!i.metaKey&&(i.preventDefault(),e())}Nt(()=>{const i=localStorage.getItem("screenPanelWidth");i&&(O.value=parseInt(i,10)),document.addEventListener("mousemove",P),document.addEventListener("mouseup",K),g.setDevice(u.platform,u.serial),e(),document.addEventListener("keydown",o)}),et(()=>{document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",K),document.removeEventListener("keydown",o)}),De(()=>[u.platform,u.serial],()=>{g.setDevice(u.platform,u.serial),e()});const f=()=>te("swipeUp",{},"Swiped up","Swipe failed"),m=()=>te("swipeDown",{},"Swiped down","Swipe failed"),k=()=>te("swipeLeft",{},"Swiped left","Swipe failed"),S=()=>te("swipeRight",{},"Swiped right","Swipe failed");return(i,v)=>(D(),V("div",To,[w("header",Eo,[d(s(ze),{align:"center",size:12},{default:h(()=>[d(s(se),{secondary:"",size:"small",onClick:v[0]||(v[0]=F=>R.value=!0)},{icon:h(()=>[d(s(ue),null,{default:h(()=>[d(s(Ft))]),_:1})]),default:h(()=>[Q(" "+E($.value.selectDevice),1)]),_:1}),d(s(ue),{size:"20",color:"#18a058"},{default:h(()=>[(D(),Se(Ct(Ue.value)))]),_:1}),w("span",Uo,E(a.serial),1),d(s(se),{text:"",size:"small",onClick:t},{icon:h(()=>[d(s(ue),{size:"14"},{default:h(()=>[d(s(Et))]),_:1})]),_:1}),d(s(Lt),{size:"small"},{default:h(()=>[d(s(se),{type:C.value==="hierarchy"?"primary":"default",secondary:C.value!=="hierarchy",onClick:v[1]||(v[1]=F=>C.value="hierarchy")},{default:h(()=>[Q(E($.value.hierarchy),1)]),_:1},8,["type","secondary"]),d(s(se),{type:C.value==="actions"?"primary":"default",secondary:C.value!=="actions",onClick:v[2]||(v[2]=F=>C.value="actions")},{default:h(()=>[Q(E($.value.actions),1)]),_:1},8,["type","secondary"]),d(s(se),{type:C.value==="package"?"primary":"default",secondary:C.value!=="package",onClick:v[3]||(v[3]=F=>C.value="package")},{default:h(()=>[Q(E($.value.package),1)]),_:1},8,["type","secondary"])]),_:1})]),_:1}),d(s(ze),{align:"center",size:16},{default:h(()=>[d(s(Ee),{placement:"bottom"},{trigger:h(()=>[d(s(se),{quaternary:"",circle:"",onClick:e,loading:s(g).loading},{icon:h(()=>[d(s(ue),{size:"20"},{default:h(()=>[d(s(yt))]),_:1})]),_:1},8,["loading"])]),default:h(()=>[Q(" "+E($.value.refresh),1)]),_:1}),d(s(se),{quaternary:"",circle:"",onClick:s(y).toggleTheme},{icon:h(()=>[d(s(ue),{size:"20"},{default:h(()=>[(D(),Se(Ct(s(y).isDark?s(At):s(Vn))))]),_:1})]),_:1},8,["onClick"]),d(s(Ot),{value:s(U).locale,"onUpdate:value":v[4]||(v[4]=F=>s(U).locale=F),size:"small"},{default:h(()=>[d(s(tt),{value:"zh"},{default:h(()=>[...v[9]||(v[9]=[Q("",-1)])]),_:1}),d(s(tt),{value:"en"},{default:h(()=>[...v[10]||(v[10]=[Q("English",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),w("div",Do,[w("div",{class:"screen-panel",style:cn({width:O.value+"px"})},[w("div",Mo,[w("div",Bo,[d(s(Ee),{placement:"right"},{trigger:h(()=>[d(s(se),{quaternary:"",circle:"",size:"small",onClick:pe},{icon:h(()=>[d(s(ue),{size:"18"},{default:h(()=>[d(s(jn))]),_:1})]),_:1})]),default:h(()=>[Q(" "+E($.value.home),1)]),_:1}),d(s(Ee),{placement:"right"},{trigger:h(()=>[d(s(se),{quaternary:"",circle:"",size:"small",onClick:X},{icon:h(()=>[d(s(ue),{size:"18"},{default:h(()=>[d(s(Tt))]),_:1})]),_:1})]),default:h(()=>[Q(" "+E($.value.back),1)]),_:1}),d(s(Ee),{placement:"right"},{trigger:h(()=>[d(s(se),{quaternary:"",circle:"",size:"small",onClick:q},{icon:h(()=>[d(s(ue),{size:"18"},{default:h(()=>[d(s(Ft))]),_:1})]),_:1})]),default:h(()=>[Q(" "+E($.value.apps),1)]),_:1}),d(s(Ee),{placement:"right"},{trigger:h(()=>[d(s(se),{quaternary:"",circle:"",size:"small",onClick:ie},{icon:h(()=>[d(s(ue),{size:"18"},{default:h(()=>[d(s(er))]),_:1})]),_:1})]),default:h(()=>[Q(" "+E($.value.wake),1)]),_:1}),d(s(Ee),{placement:"right"},{trigger:h(()=>[d(s(se),{quaternary:"",circle:"",size:"small",onClick:Pe},{icon:h(()=>[d(s(ue),{size:"18"},{default:h(()=>[d(s(xt))]),_:1})]),_:1})]),default:h(()=>[Q(" "+E($.value.stop),1)]),_:1})]),w("div",Ro,[d(s(Ee),{placement:"right"},{trigger:h(()=>[d(s(se),{quaternary:"",circle:"",size:"small",onClick:ge},{icon:h(()=>[d(s(ue),{size:"18"},{default:h(()=>[d(s(vr))]),_:1})]),_:1})]),default:h(()=>[Q(" "+E($.value.volumeDown),1)]),_:1}),d(s(Ee),{placement:"right"},{trigger:h(()=>[d(s(se),{quaternary:"",circle:"",size:"small",onClick:Ce},{icon:h(()=>[d(s(ue),{size:"18"},{default:h(()=>[d(s(yr))]),_:1})]),_:1})]),default:h(()=>[Q(" "+E($.value.volumeMute),1)]),_:1}),d(s(Ee),{placement:"right"},{trigger:h(()=>[d(s(se),{quaternary:"",circle:"",size:"small",onClick:ce},{icon:h(()=>[d(s(ue),{size:"18"},{default:h(()=>[d(s(hr))]),_:1})]),_:1})]),default:h(()=>[Q(" "+E($.value.volumeUp),1)]),_:1})]),w("div",Oo,[d(s(Ee),{placement:"right"},{trigger:h(()=>[d(s(se),{circle:"",size:"small",onClick:f},{icon:h(()=>[d(s(ue),{size:"18"},{default:h(()=>[d(s($n))]),_:1})]),_:1})]),default:h(()=>[Q(" "+E($.value.swipeUp),1)]),_:1}),d(s(Ee),{placement:"right"},{trigger:h(()=>[d(s(se),{circle:"",size:"small",onClick:m},{icon:h(()=>[d(s(ue),{size:"18"},{default:h(()=>[d(s(Sn))]),_:1})]),_:1})]),default:h(()=>[Q(" "+E($.value.swipeDown),1)]),_:1}),d(s(Ee),{placement:"right"},{trigger:h(()=>[d(s(se),{circle:"",size:"small",onClick:k},{icon:h(()=>[d(s(ue),{size:"18"},{default:h(()=>[d(s(Tt))]),_:1})]),_:1})]),default:h(()=>[Q(" "+E($.value.swipeLeft),1)]),_:1}),d(s(Ee),{placement:"right"},{trigger:h(()=>[d(s(se),{circle:"",size:"small",onClick:S},{icon:h(()=>[d(s(ue),{size:"18"},{default:h(()=>[d(s(Ht))]),_:1})]),_:1})]),default:h(()=>[Q(" "+E($.value.swipeRight),1)]),_:1})]),Fe.value?(D(),V("div",zo,[d(s(se),{type:"primary",size:"small",onClick:he,class:"vertical-text-btn"},{default:h(()=>[w("span",Io,E($.value.tapElement),1)]),_:1})])):ke("",!0)]),w("div",Lo,[w("div",No,[d(s(Ne),{value:ye.value,"onUpdate:value":v[5]||(v[5]=F=>ye.value=F),size:"small",placeholder:"Enter text to send...",onKeydown:zt(Z,["enter"]),style:{flex:"1"}},null,8,["value"]),d(s(Ee),null,{trigger:h(()=>[d(s(se),{type:"primary",size:"small",onClick:Z,disabled:!ye.value.trim()},{icon:h(()=>[d(s(ue),null,{default:h(()=>[d(s(sr))]),_:1})]),_:1},8,["disabled"])]),default:h(()=>[v[11]||(v[11]=Q(" Send ",-1))]),_:1}),d(s(Ee),null,{trigger:h(()=>[d(s(se),{quaternary:"",size:"small",onClick:ae},{icon:h(()=>[d(s(ue),null,{default:h(()=>[d(s(gt))]),_:1})]),_:1})]),default:h(()=>[v[12]||(v[12]=Q(" Clear ",-1))]),_:1})]),w("div",jo,[d(s(dn),{show:s(g).loading,style:{width:"100%",height:"100%"}},{default:h(()=>[s(g).screenshotUrl?(D(),Se(Jr,{key:0,platform:a.platform,serial:a.serial,"screen-size":Me.value,onTap:ee,onRecordTap:W,onRecordSwipe:oe},null,8,["platform","serial","screen-size"])):ke("",!0)]),_:1},8,["show"])])])],4),w("div",{class:"resize-handle",onMousedown:b},null,32),C.value==="hierarchy"?(D(),V("div",Ho,[w("div",Vo,[v[13]||(v[13]=w("span",{class:"xpath-label"},"XPath by",-1)),w("div",Go,[d(s(fn),{value:N.value,"onUpdate:value":v[6]||(v[6]=F=>N.value=F),options:I.value,"render-label":B,"render-tag":Y,"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),d(s(se),{size:"small",quaternary:"",circle:"",onClick:r,disabled:!j.value},{icon:h(()=>[d(s(ue),null,{default:h(()=>[d(s(Et))]),_:1})]),_:1},8,["disabled"])]),j.value?(D(),V("div",Xo,[w("div",Wo,E(j.value),1),L.value.length>1?(D(),V("div",Jo,[(D(!0),V(je,null,Ye(L.value,(F,z)=>(D(),Se(s(se),{key:z,size:"small",type:z===re.value?"info":"default",secondary:z!==re.value,circle:"",onClick:ne=>J(z),class:"sibling-btn"},{default:h(()=>[Q(E(z+1),1)]),_:2},1032,["type","secondary","onClick"]))),128))])):ke("",!0)])):ke("",!0),w("div",Yo,[(D(!0),V(je,null,Ye(Le.value,F=>(D(),V("div",{key:F.label,class:"property-row"},[w("div",qo,E(F.label),1),w("div",Ko,[d(s(ue),{class:"circle-icon"},{default:h(()=>[d(s(ft))]),_:1}),w("span",null,E(F.value),1)])]))),128)),Le.value.length===0?(D(),Se(s(nt),{key:0,description:"No element selected"})):ke("",!0)])])):ke("",!0),w("div",Zo,[C.value==="hierarchy"?(D(),Se(la,{key:0,platform:a.platform,serial:a.serial},null,8,["platform","serial"])):ke("",!0),hn(d(Ka,{ref_key:"actionsPanelRef",ref:T,platform:a.platform,serial:a.serial},null,8,["platform","serial"]),[[pn,C.value==="actions"]]),C.value==="package"?(D(),Se(ho,{key:1,platform:a.platform,serial:a.serial},null,8,["platform","serial"])):ke("",!0)])]),d(xn,{show:R.value,"onUpdate:show":v[7]||(v[7]=F=>R.value=F),onSelect:n},null,8,["show"]),d(Fo,{show:x.value,"onUpdate:show":v[8]||(v[8]=F=>x.value=F),serial:a.serial,"error-message":_.value,onConfirm:c},null,8,["show","serial","error-message"])]))}}),ni=Ie(Qo,[["__scopeId","data-v-cc87f1cc"]]);export{ni as default};
